/*
@license

dhtmlxSpreadsheet v.4.3.0 Evaluation

This software is covered by DHTMLX Evaluation License and purposed only for evaluation.
Contact sales@dhtmlx.com to get Commercial or Enterprise license.
Usage without proper license is prohibited.

(c) XB Software.

*/
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dhx=t():e.dhx=t()}(window,function(){return i={},o.m=n=[function(e,o,i){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=i(123);function n(n){function t(e){var t=e.el.offsetHeight,e=e.el.offsetWidth;n(e,t)}var i=window.ResizeObserver;return i?o.el("div.dhx-resize-observer",{_hooks:{didInsert:function(e){new i(function(){return t(e)}).observe(e.el)}}}):o.el("iframe.dhx-resize-observer",{_hooks:{didInsert:function(e){e.el.contentWindow.onresize=function(){return t(e)},t(e)}}})}o.el=t.defineElement,o.sv=t.defineSvgElement,o.view=t.defineView,o.create=t.createView,o.inject=t.injectView,o.KEYED_LIST=t.KEYED_LIST,o.disableHelp=function(){t.DEVMODE.mutations=!1,t.DEVMODE.warnings=!1,t.DEVMODE.verbose=!1,t.DEVMODE.UNKEYED_INPUT=!1},o.resizer=n,o.resizeHandler=function(e,t){return o.create({render:function(){return n(t)}}).mount(e)},o.awaitRedraw=function(){return new e(function(e){requestAnimationFrame(function(){e()})})}}).call(this,i(14))},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=(new Date).valueOf();t.uid=function(){return"u"+r++},t.extend=function e(t,n,i){if(void 0===i&&(i=!0),n)for(var o in n){var r=n[o],s=t[o];void 0===r?delete t[o]:!i||"object"!=typeof s||s instanceof Date||s instanceof Array?t[o]=r:e(s,r)}return t},t.copy=function(e,t){var n,i={};for(n in e)t&&n.startsWith("$")||(i[n]=e[n]);return i},t.naturalSort=function(e){return e.sort(function(e,t){return"string"==typeof e?e.localeCompare(t):e-t})},t.findIndex=function(e,t){for(var n=e.length,i=0;i<n;i++)if(t(e[i]))return i;return-1},t.isEqualString=function(e,t){if(e=e.toString(),t=t.toString(),e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].toLowerCase()!==t[n].toLowerCase())return!1;return!0},t.singleOuterClick=function(t){var n=function(e){t(e)&&document.removeEventListener("click",n)};document.addEventListener("click",n)},t.detectWidgetClick=function(t,n){function e(e){return n(i.locate(e,"data-dhx-widget-id")===t)}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}},t.unwrapBox=function(e){return Array.isArray(e)?e[0]:e},t.wrapBox=function(e){return Array.isArray(e)?e:[e]},t.isDefined=function(e){return null!=e},t.range=function(e,t){if(t<e)return[];for(var n=[];e<=t;)n.push(e++);return n},t.isNumeric=function(e){return!isNaN(e-parseFloat(e))},t.downloadFile=function(e,t,n){void 0===n&&(n="text/plain");var i,o,n=new Blob([e],{type:n});window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(n,t):(i=document.createElement("a"),o=URL.createObjectURL(n),i.href=o,i.download=t,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)},0))},t.debounce=function(o,r,s){var a;return function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=s&&!a;clearTimeout(a),a=setTimeout(function(){a=null,s||o.apply(e,t)},r),i&&o.apply(this,t)}},t.compare=function e(t,n){for(var i in t){if(t.hasOwnProperty(i)!==n.hasOwnProperty(i))return!1;switch(typeof t[i]){case"object":if(!e(t[i],n[i]))return!1;break;case"function":if(void 0===n[i]||"compare"!==i&&t[i].toString()!==n[i].toString())return!1;break;default:if(t[i]!==n[i])return!1}}for(var i in n)if(void 0===t[i])return!1;return!0},t.isType=function(e){return((Object.prototype.toString.call(e).match(/^\[object (\S+?)\]$/)||[])[1]||"undefined").toLowerCase()},t.isEmptyObj=function(e){for(var t in e)return!1;return!0},t.getMaxArrayNymber=function(e){if(e.length){for(var t=-1/0,n=0,i=e.length;n<i;n++)e[n]>t&&(t=e[n]);return t}},t.getMinArrayNymber=function(e){if(e.length){for(var t=1/0,n=0,i=e.length;n<i;n++)e[n]<t&&(t=e[n]);return t}},t.getStringWidth=function(e,t){t=o({font:"normal 14px Roboto",lineHeight:20},t);var n=document.createElement("canvas"),i=n.getContext("2d");t.font&&(i.font=t.font);e=i.measureText(e).width;return n.remove(),e},t.rgbToHex=function(e){if("#"===e.substr(0,1))return e;e=/(.*?)rgb[a]?\((\d+), *(\d+), *(\d+),* *([\d+.]*)\)/.exec(e);return"#"+parseInt(e[2],10).toString(16).padStart(2,"0")+parseInt(e[3],10).toString(16).padStart(2,"0")+parseInt(e[4],10).toString(16).padStart(2,"0")}},function(e,t,n){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t,n){for(void 0===t&&(t="data-dhx-id"),void 0===n&&(n="target"),e instanceof Event&&(e=e[n]);e;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}}Object.defineProperty(t,"__esModule",{value:!0}),t.toNode=function(e){var t;return"string"==typeof e?document.getElementById(e)||document.querySelector(e)||(null===(t=document.querySelector("[data-dhx-root-id="+e+"]"))||void 0===t?void 0:t.parentElement)||document.body:e||document.body},t.eventHandler=function(s,a,l){var c=Object.keys(a);return function(e){var t=s(e);if(void 0!==t){var n=e.target;e:for(;n;){var i=n.getAttribute&&n.getAttribute("class")||"";if(i.length)for(var o=i.split(" "),r=0;r<c.length;r++)if(o.includes(c[r])){if(!1===a[c[r]](e,t))return!1;break e}n=n.parentNode}}return l&&l(e),!0}},t.locateNode=i,t.locate=function(e,t){return void 0===t&&(t="data-dhx-id"),(e=i(e,t))?e.getAttribute(t):""},t.locateNodeByClassName=function(e,t){for(e instanceof Element||(e=e.target);e;){if(t){if(e.classList&&e.classList.contains(t))return e}else if(e.getAttribute&&e.getAttribute("data-dhx-id"))return e;e=e.parentNode}},t.getBox=function(e){var t=e.getBoundingClientRect(),n=document.body,i=window.pageYOffset||n.scrollTop,e=window.pageXOffset||n.scrollLeft;return{top:t.top+i,left:t.left+e,right:n.offsetWidth-t.right,bottom:n.offsetHeight-t.bottom,width:t.right-t.left,height:t.bottom-t.top}};var o=-1;t.getScrollbarWidth=function(){if(-1<o)return o;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",o=e.offsetWidth-e.clientWidth,document.body.removeChild(e),o};var r=-1;function s(e){e=e.getBoundingClientRect();return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}}function u(){return{rightBorder:window.pageXOffset+window.innerWidth,bottomBorder:window.pageYOffset+window.innerHeight}}function l(e,t){var n,i,o,r=u(),s=r.rightBorder,a=r.bottomBorder-e.bottom-t.height,l=e.top-t.height;if("bottom"===t.mode?0<=a?n=e.bottom:0<=l&&(n=l):0<=l?n=l:0<=a&&(n=e.bottom),a<0&&l<0){if(t.auto)return d(e,c(c({},t),{mode:"right",auto:!1}));n=l<a?e.bottom:l}return{left:t.centering?(i=e,o=t.width,r=s,a=(o-(i.right-i.left))/2,l=i.left-a,a=i.right+a,0<=l&&a<=r?l:l<0?0:r-o):(s=s-e.left-t.width,t=e.right-t.width,0<=s||!(0<=t)&&s<t?e.left:t),top:n}}function d(e,t){var n,i,o=u(),r=o.rightBorder,s=o.bottomBorder,a=r-e.right-t.width,o=e.left-t.width;if("right"===t.mode?0<=a?i=e.right:0<=o&&(i=o):0<=o?i=o:0<=a&&(i=e.right),o<0&&a<0){if(t.auto)return l(e,c(c({},t),{mode:"bottom",auto:!1}));i=a<o?o:e.right}return{left:i,top:t.centering?(a=e,n=t.height,o=r,i=(n-(a.bottom-a.top))/2,r=a.top-i,i=a.bottom+i,0<=r&&i<=o?r:r<0?0:o-n):(n=e.bottom-t.height,!(0<=(t=s-e.top-t.height))&&(0<n||t<n)?n:e.top)}}function a(e,t){var n=("bottom"===t.mode||"top"===t.mode?l:d)(e,t),e=n.left,n=n.top;return{left:Math.round(e)+"px",top:Math.round(n)+"px",minWidth:Math.round(t.width)+"px",position:"absolute"}}t.getScrollbarHeight=function(){if(-1<r)return r;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",r=e.offsetHeight-e.clientHeight,document.body.removeChild(e),r},t.isIE=function(){var e=window.navigator.userAgent;return e.includes("MSIE ")||e.includes("Trident/")},t.isSafari=function(){function e(e){return e.test(window.navigator.userAgent)}var t=e(/Chrome/),n=e(/Firefox/);return!t&&!n&&e(/Safari/)},t.isFirefox=function(){function e(e){return e.test(window.navigator.userAgent)}var t=e(/Chrome/),n=e(/Safari/);return!t&&!n&&e(/Firefox/)},t.getRealPosition=s,t.calculatePosition=a,t.fitPosition=function(e,t){return a(s(e),t)},t.getPageCss=function(){for(var e=[],t=0;t<document.styleSheets.length;t++)for(var n=document.styleSheets[t],i=("cssRules"in n?n.cssRules:n.rules),o=0;o<i.length;o++){var r=i[o];"cssText"in r?e.push(r.cssText):e.push(r.selectorText+" {\n"+r.style.cssText+"\n}\n")}return e.join("\n")},t.getLabelStyle=function(e){var t=e.helpMessage,n=e.type,i=e.labelWidth,o=e.label,r=i&&i.toString().startsWith("0"),e="text"!==n&&e.required;return!!(t||e||!(!o||o&&r)||i&&!r)&&{style:(o||i)&&!r&&{width:i,"max-width":"100%"},label:o&&r?null:o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.on=function(e,t,n){e=e.toLowerCase();this.events[e]=this.events[e]||[],this.events[e].push({callback:t,context:n||this.context})},o.prototype.detach=function(e,t){var e=e.toLowerCase(),n=this.events[e];if(t&&n&&n.length)for(var i=n.length-1;0<=i;i--)n[i].context===t&&n.splice(i,1);else this.events[e]=[]},o.prototype.fire=function(e,t){void 0===t&&(t=[]);e=e.toLowerCase();return!this.events[e]||!this.events[e].map(function(e){return e.callback.apply(e.context,t)}).includes(!1)},o.prototype.clear=function(){this.events={}},o);function o(e){this.events={},this.context=e||this}t.EventSystem=i,t.EventsMixin=function(e){var t=new i(e=e||{});e.detachEvent=t.detach.bind(t),e.attachEvent=t.on.bind(t),e.callEvent=t.fire.bind(t)}},function(e,f,p){"use strict";(function(t){var _=this&&this.__assign||function(){return(_=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};Object.defineProperty(f,"__esModule",{value:!0});var s=p(1),i=p(30);function o(e){if(!e)return"";var t=(e=--e)%26,t=String.fromCharCode(65+t),e=Math.floor(e/26);return 0<e?o(e)+t:t}function r(e){return e?(e=e.toUpperCase()).split("").reduce(function(e,t,n,i){return e+=(t.charCodeAt(0)-64)*Math.pow(26,i.length-(n+1))},0):-1}function a(e){if(!e)return{};var t=e.match(/([a-zA-Z]*\d*):([a-zA-Z]*\d*)/);if(t){var n=a(t[1]),t=a(t[2]);return{start:+n.row<=t.row?n:t,end:+n.row<=t.row?t:n}}if(!l(e))return{};n=i.str2pos(e),e=n[0];return{col:n[1],row:e}}function l(e){e=e.match(/([a-zA-Z]*)(\d*)/);if(e&&e[1]&&e[2])return{col:r(e[1]),row:parseInt(e[2],10)-1}}function u(e,t){return""+o(t)+(e+1)}function c(e){return new RegExp(/([A-Z]+\d+:[A-Z]+\d+)|(?:,)([A-Z]+\d+)/).test(e)}function d(e){e=(e.includes(":")?e.split(":"):e.split(",")).map(l);return{start:{row:Math.min(e[0].row,e[1].row),col:Math.min(e[0].col,e[1].col)},end:{row:Math.max(e[0].row,e[1].row),col:Math.max(e[0].col,e[1].col)}}}function h(e,t){void 0===t&&(t="row");var n=[],i="row"===t?"col":"row";if(e)for(var e=d(e),o=e.start,r=e.end,s=o[t];s<=r[t];s++)for(var a=o[i];a<=r[i];a++){var l="row"===t?u(s,a):u(a,s);n.push(l)}return n}function m(e){if(e){for(var t={},n=0,i=e.split(";");n<i.length;n++){var o=i[n];o&&("height"!==(o=o.trim().split(":"))[0]&&"width"!==o[0]&&(t[o[0]]=o[1]))}return t}}f.getLetterFromNumber=o,f.getNumberFromLetter=r,f.getCellIds=a,f.getCellIndex=l,f.getCellNameByIndex=u,f.getCellNameById=function(e,t,n){return t?(t=e.data.getIndex(t)+1,e=s.findIndex(e.config.columns,function(e){return n.toString()===e.id}),t<0||e<0?void 0:""+o(e)+t):""},f.getCellInfo=function(e,t){var n=a(e);return n.start&&(n=n.start),n&&e?t.getCell(n.row,n.col)||{}:{locked:!1}},f.isRangeId=c,f.getRangeIndexes=d,f.getRangeArray=h,f.getRangeMatrix=function(e,t){void 0===t&&(t="row");var n=[],i="row"===t?"col":"row";if(e)for(var o=(e=d(e)).start,r=e.end,s=o[t];s<=r[t];s++){for(var a=[],l=o[i];l<=r[i];l++){var c="row"===t?u(s,l):u(l,s);a.push(c)}n.push(a)}return n},f.getNextRangeCell=function(e,t,n){return void 0===n&&(n="row"),(n=h(e,n))[n.indexOf(t)+1]||n[0]},f.getPrevRangeCell=function(e,t,n){return void 0===n&&(n="row"),(n=h(e,n))[n.indexOf(t)-1]||n[n.length-1]},f.getCellsArray=function(e){if(e)return e.split(",").reduce(function(e,t){return c(t=t.toUpperCase())?e=e.concat(h(t)):e.push(t),e},[])},f.extendConfig=function(e,t,n){for(var i in void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n=!0),e){var o=t[i],r=e[i];r&&"validate"in r&&(t[i]=r.validate(o)?o:r.default,e[i]=r.default)}return s.extend(e,t,n)},f.cleanActionConfig=function(e){return e.page,e.dataStore,e.sheets,e.editLine,e.grid,e.activePage,e.spreadsheet,e.mouseEvent,e.events,n(e,["page","dataStore","sheets","editLine","grid","activePage","spreadsheet","mouseEvent","events"])},f.isWasmSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1},f.fetchFile=function(e,o,r){return new t(function(t,n){var i=new XMLHttpRequest;i.open(o,e,!0),i.responseType=r,i.onload=function(){var e=i.response;e?t(e):n(i)},i.onerror=function(){return n(i)},i.send(null)})},f.parseHtmlTable=function(e){var t=e.substring(e.indexOf("<style"),e.indexOf("</style>")),n={};if(t.includes(".x")){var i=t.substring(t.indexOf(".x"),t.indexOf("--\x3e")).split("\r\n.");i[0]=i[0].substr(1);for(var o=0,r=i;o<r.length;o++){var s=r[o];s&&(n[s.substring(0,s.indexOf("\r\n\t"))]=m(s.substring(s.indexOf("{")+1,s.indexOf("}")).trim()))}}i=e.substring(e.indexOf("<table"),e.indexOf("</table>")+8),(e=document.createElement("div")).innerHTML=i;for(var a=e.querySelector("table"),i=a.rows.length,e=a.rows[0].cells.length,l=[],c=[],u=0;u<a.rows.length;u++)for(var d=a.rows[u],h=0;h<d.cells.length;h++){var f=d.cells[h];l.push(f.innerText.trim());for(var p={},g=0;g<f.classList.length;g++){var v=f.classList[g];n[v]&&(p=_(_({},p),n[v]))}p=_(_({},p),m(f.getAttribute("style"))),c.push(p)}return{values:l,styles:c,rowsCount:i,colsCount:e}},f.parseFromText=function(e){for(var e=e.split(/\n/),t=[],n=0,i=e;n<i.length;n++)var o=i[n].split(/\t/),t=t.concat(o);return{values:t,rowsCount:e.length,colsCount:e[0].split("\t").length}},f.getTextHeight=function(e,t){var n=document.createElement("div");return n.style.width=t+"px",n.innerText=e,n.classList.add("dhx-spreadsheet-height-detector"),document.body.appendChild(n),e=n.scrollHeight,n.remove(),e},f.convertStyles=function(e){if(!e)return{};var t,n=null,i=_({},e),o=i.textAlign||i["text-align"],r=i.verticalAlign||i["vertical-align"];if(o){switch(o){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end"}i["justify-content"]=n}if(r){switch(r){case"top":t="flex-start";break;case"center":t="center";break;case"bottom":t="flex-end"}i["align-items"]=t+" !important"}return(e=e.multiline)&&(e="wrap"===e?"normal":"nowrap",i["white-space"]=e),i}}).call(this,p(14))},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.FormEvents||(t.FormEvents={})).change="change",i.click="click",i.focus="focus",i.blur="blur",i.keydown="keydown",i.beforeShow="beforeShow",i.afterShow="afterShow",i.beforeHide="beforeHide",i.afterHide="afterHide",i.afterValidate="afterValidate",i.beforeValidate="beforeValidate",i.beforeChangeProperties="beforeChangeProperties",i.afterChangeProperties="afterChangeProperties",i.beforeSend="beforesend",i.afterSend="aftersend",i.buttonClick="buttonClick",i.validationFail="validationfail",(i=t.FileStatus||(t.FileStatus={})).queue="queue",i.uploaded="uploaded",i.failed="failed",i.inprogress="inprogress",(i=t.UploaderEvents||(t.UploaderEvents={})).uploadBegin="uploadbegin",i.beforeUploadFile="beforeuploadfile",i.uploadFile="uploadfile",i.uploadFail="uploadfail",i.uploadComplete="uploadcomplete",i.uploadProgress="uploadprogress",(i=t.ItemEvent||(t.ItemEvent={})).click="click",i.change="change",i.input="input",i.focus="focus",i.blur="blur",i.keydown="keydown",i.changeOptions="changeOptions",i.beforeShow="beforeShow",i.afterShow="afterShow",i.beforeHide="beforeHide",i.afterHide="afterHide",i.beforeValidate="beforeValidate",i.afterValidate="afterValidate",i.beforeUploadFile="beforeUploadFile",i.uploadFile="uploadfile",i.uploadBegin="uploadBegin",i.uploadComplete="uploadComplete",i.uploadFail="uploadFail",i.uploadProgress="uploadProgress",i.beforeChangeProperties="beforeChangeProperties",i.afterChangeProperties="afterChangeProperties",(i=t.ClearMethod||(t.ClearMethod={})).value="value",i.validation="validation",(i=t.Validation||(t.Validation={})).empty="",i.validEmail="email",i.validInteger="integer",i.validNumeric="numeric",i.validAlphaNumeric="alphanumeric",i.validIPv4="IPv4",(t=t.ValidationStatus||(t.ValidationStatus={}))[t.pre=0]="pre",t[t.error=1]="error",t[t.success=2]="success"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(2),n=(r.prototype.mount=function(e,t){t&&(this._view=t),e&&this._view&&this._view.mount&&(this._container=o.toNode(e),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},r.prototype.unmount=function(){var e=this.getRootView();e&&e.node&&(e.unmount(),this._view=null)},r.prototype.getRootView=function(){return this._view},r.prototype.getRootNode=function(){return this._view&&this._view.node&&this._view.node.el},r.prototype.paint=function(){this._view&&(this._view.node||this._container)&&(this._doNotRepaint=!1,this._view.redraw())},r);function r(e,t){this.config=t||{},this._uid=this.config.rootId||i.uid()}t.View=n,t.toViewLike=function(t){return{getRootView:function(){return t},paint:function(){return t.node&&t.redraw()},mount:function(e){return t.mount(e)}}}},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(144)),i(t(72))},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.SpreadsheetEvents||(t.SpreadsheetEvents={})).beforeValueChange="beforeValueChange",i.afterValueChange="afterValueChange",i.beforeStyleChange="beforeStyleChange",i.afterStyleChange="afterStyleChange",i.beforeFormatChange="beforeFormatChange",i.afterFormatChange="afterFormatChange",i.beforeSelectionSet="beforeSelectionSet",i.afterSelectionSet="afterSelectionSet",i.beforeSelectionRemove="beforeSelectionRemove",i.afterSelectionRemove="afterSelectionRemove",i.beforeRowAdd="beforeRowAdd",i.afterRowAdd="afterRowAdd",i.beforeRowDelete="beforeRowDelete",i.afterRowDelete="afterRowDelete",i.beforeColumnAdd="beforeColumnAdd",i.afterColumnAdd="afterColumnAdd",i.beforeColumnDelete="beforeColumnDelete",i.afterColumnDelete="afterColumnDelete",i.beforeFocusSet="beforeFocusSet",i.afterFocusSet="afterFocusSet",i.beforeEditStart="beforeEditStart",i.afterEditStart="afterEditStart",i.beforeAction="beforeAction",i.afterAction="afterAction",i.beforeEditEnd="beforeEditEnd",i.afterEditEnd="afterEditEnd",i.groupFill="groupFill",i.beforeSheetAdd="beforeSheetAdd",i.afterSheetAdd="afterSheetAdd",i.beforeSheetRemove="beforeSheetRemove",i.afterSheetRemove="afterSheetRemove",i.beforeSheetRename="beforeSheetRename",i.afterSheetRename="afterSheetRename",i.beforeSheetChange="beforeSheetChange",i.afterSheetChange="afterSheetChange",i.beforeSheetClear="beforeSheetClear",i.afterSheetClear="afterSheetClear",i.beforeClear="beforeClear",i.afterClear="afterClear",i.editLineInput="editLineInput",i.editLineFocus="editLineFocus",i.editLineBlur="editLineBlur",i.cellInput="cellInput",i.gridRedraw="gridRedraw",(t=t.Actions||(t.Actions={})).setCellStyle="setCellStyle",t.setCellValue="setCellValue",t.setCellFormat="setCellFormat",t.removeCellStyles="removeCellStyles",t.lockCell="lockCell",t.deleteRow="deleteRow",t.addRow="addRow",t.deleteColumn="deleteColumn",t.addColumn="addColumn",t.groupAction="groupAction",t.groupRowAction="groupRowAction",t.groupColAction="groupColAction",t.addSheet="addSheet",t.deleteSheet="deleteSheet",t.renameSheet="renameSheet",t.clearSheet="clearSheet",t.clear="clear",t.resizeCol="resizeCol",t.resizeRow="resizeRow",t.setValidation="setValidation",t.sortCells="sortCells"},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var c=n(5);t.getFormItemCss=function(e,t,n){void 0===n&&(n=!1);var i=e.labelPosition,o=e.required,r=e.disabled,s=e.hiddenLabel,a=void 0===(l=e.css)?"":l,l=e.$validationStatus,l=((e={})[c.ValidationStatus.pre]="",e[c.ValidationStatus.error]=" dhx_form-group--state_error",e[c.ValidationStatus.success]=" dhx_form-group--state_success",e[l]||""),i="left"===i?" dhx_form-group--inline":"",r=r?" dhx_form-group--disabled":"",s=s?" dhx_form-group--label_sr":"";return t?i+(n?"":l)+(o?" dhx_form-group--required":"")+r+s+" "+a:i+r+s+" "+a};var o=((n={})[c.Validation.validAlphaNumeric]=/^[a-zA-Z0-9_]+$/,n[c.Validation.validEmail]=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n[c.Validation.validInteger]=/^-?\d+$/,n[c.Validation.validIPv4]=/\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}\b/,n[c.Validation.validNumeric]=/^-?\d+(\.\d+)?$/,n);t.getValidationMessage=function(e){var t;return(t={undefined:e.preMessage})[c.ValidationStatus.pre]=e.preMessage,t[c.ValidationStatus.error]=e.errorMessage,t[c.ValidationStatus.success]=e.successMessage,t[e.$validationStatus]||""},t.validateTemplate=function(e,t){return!o[e]||o[e].test(t)},t.isBlock=function(e){return Boolean(e.rows)||Boolean(e.cols)},t.validateInput=function(e,t){var n=!0;return"function"==typeof t?n=t(e):(t=o[t])&&(n=t.test(e.toString())),n},t.baseInputValidate=function(e,t){var n=t.inputType,i=t.min,o=t.max,r=t.minlength,t=t.maxlength;return"number"===n?void 0!==i&&void 0!==o?Number(i)<=Number(o)&&Number(i)<=Number(e)&&Number(o)>=Number(e):void 0!==i?Number(i)<=Number(e):void 0!==o?Number(o)>=Number(e):0===e||"0"===e||!!e:void 0!==r&&void 0!==t?Number(r)<=String(e).length&&Number(t)>=String(e).length:void 0!==r?Number(r)<=String(e).length:void 0!==t?Number(t)>=String(e).length:"string"==typeof e&&!!e},t.isTimeFormat=function(e,t){return(12===t?/(^0?([1-9][0-2]?):[0-5][0-9]?([AP][M]?)$)/i:/(^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$)/i).test(e)},t.isVerify=function(t){return["required","validation","minlength","maxlength","min","max"].some(function(e){switch(e){case"required":return!!t[e];case"validation":return"function"==typeof t[e]||"email"===t[e]||"integer"===t[e]||"numeric"===t[e]||"alphanumeric"===t[e]||"IPv4"===t[e];case"minlength":case"maxlength":return"number"==typeof t[e]||"string"==typeof t[e];case"min":case"max":return("number"==typeof t[e]||"string"==typeof t[e])&&"number"===t.inputType}})},t.baseProps=["width","height","padding","css"],t.widgetConfig=function(e){e.width,e.type,e.id,e.name,e.hidden,e.editable,e.valueFormat,e.css,e.required,e.helpMessage,e.preMessage,e.successMessage,e.errorMessage,e.label,e.labelWidth,e.labelPosition,e.hiddenLabel,e.validation,e.icon;return i(e,["width","type","id","name","hidden","editable","valueFormat","css","required","helpMessage","preMessage","successMessage","errorMessage","label","labelWidth","labelPosition","hiddenLabel","validation","icon"])}},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(22)),i(t(63)),i(t(130)),i(t(131)),i(t(27)),i(t(162)),i(t(23)),i(t(66)),i(t(65)),i(t(163)),i(t(64)),i(t(48))},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.GridEvents||(t.GridEvents={})).scroll="scroll",i.expand="expand",i.filterChange="filterChange",i.beforeResizeStart="beforeResizeStart",i.resize="resize",i.afterResizeEnd="afterResizeEnd",i.cellClick="cellClick",i.cellRightClick="cellRightClick",i.cellMouseOver="cellMouseOver",i.cellMouseDown="cellMouseDown",i.cellDblClick="cellDblClick",i.headerCellClick="headerCellClick",i.footerCellClick="footerCellClick",i.headerCellMouseOver="headerCellMouseOver",i.footerCellMouseOver="footerCellMouseOver",i.headerCellMouseDown="headerCellMouseDown",i.footerCellMouseDown="footerCellMouseDown",i.headerCellDblClick="headerCellDblClick",i.footerCellDblClick="footerCellDblClick",i.headerCellRightClick="headerCellRightClick",i.footerCellRightClick="footerCellRightClick",i.beforeEditStart="beforeEditStart",i.afterEditStart="afterEditStart",i.beforeEditEnd="beforeEditEnd",i.afterEditEnd="afterEditEnd",i.beforeKeyDown="beforeKeyDown",i.afterKeyDown="afterKeyDown",i.beforeColumnHide="beforeColumnHide",i.afterColumnHide="afterColumnHide",i.beforeColumnShow="beforeColumnShow",i.afterColumnShow="afterColumnShow",i.beforeRowHide="beforeRowHide",i.afterRowHide="afterRowHide",i.beforeRowShow="beforeRowShow",i.afterRowShow="afterRowShow",i.beforeRowDrag="beforeRowDrag",i.dragRowStart="dragRowStart",i.dragRowOut="dragRowOut",i.dragRowIn="dragRowIn",i.canRowDrop="canRowDrop",i.cancelRowDrop="cancelRowDrop",i.beforeRowDrop="beforeRowDrop",i.afterRowDrop="afterRowDrop",i.afterRowDrag="afterRowDrag",i.beforeColumnDrag="beforeColumnDrag",i.dragColumnStart="dragColumnStart",i.dragColumnOut="dragColumnOut",i.dragColumnIn="dragColumnIn",i.canColumnDrop="canColumnDrop",i.cancelColumnDrop="cancelColumnDrop",i.beforeColumnDrop="beforeColumnDrop",i.afterColumnDrop="afterColumnDrop",i.afterColumnDrag="afterColumnDrag",i.beforeRowResize="beforeRowResize",i.afterRowResize="afterRowResize",i.beforeSort="beforeSort",i.afterSort="afterSort",(i=t.GridSystemEvents||(t.GridSystemEvents={})).cellTouchMove="cellTouchMove",i.cellTouchEnd="cellTouchEnd",i.headerCellTouchMove="headerCellTouchMove",i.headerCellTouchEnd="headerCellTouchEnd",(t=t.GridSelectionEvents||(t.GridSelectionEvents={})).beforeUnSelect="beforeUnSelect",t.afterUnSelect="afterUnSelect",t.beforeSelect="beforeSelect",t.afterSelect="afterSelect"},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(69)),i(t(141)),i(t(50))},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(110)),i(t(111)),i(t(115)),i(t(58)),i(t(44))},function(e,t,n){(function(o,r){!function(){var t=1,n={},i=!1;function u(e){o.setImmediate?r(e):o.importScripts?setTimeout(e):(n[++t]=e,o.postMessage(t,"*"))}function d(e){"use strict";if("function"!=typeof e&&null!=e)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var t,n,i=this,r=0,s=0,o=[];(i.promise=i).resolve=function(e){return t=i.fn,n=i.er,r||(s=e,r=1,u(c)),i},i.reject=function(e){return t=i.fn,n=i.er,r||(s=e,r=2,u(c)),i},i._d=1,i.then=function(e,t){if(1!=this._d)throw TypeError();var n=new d;return n.fn=e,n.er=t,3==r?n.resolve(s):4==r?n.reject(s):o.push(n),n},i.catch=function(e){return i.then(null,e)};var a=function(e){r=e||4,o.map(function(e){3==r&&e.resolve(s)||e.reject(s)})};try{"function"==typeof e&&e(i.resolve,i.reject)}catch(e){i.reject(e)}return i;function l(e,t,n,i){if(2==r)return i();if("object"!=typeof s&&"function"!=typeof s||"function"!=typeof e)i();else try{var o=0;e.call(s,function(e){o++||(s=e,t())},function(e){o++||(s=e,n())})}catch(e){s=e,n()}}function c(){var e;try{e=s&&s.then}catch(e){return s=e,r=2,c()}l(e,function(){r=1,c()},function(){r=2,c()},function(){try{1==r&&"function"==typeof t?s=t(s):2==r&&"function"==typeof n&&(s=n(s),r=1)}catch(e){return s=e,a()}s==i?(s=TypeError(),a()):l(e,function(){a(3)},a,function(){a(1==r&&3)})})}}(o=this).setImmediate||o.addEventListener("message",function(e){if(e.source==o)if(i)u(n[e.data]);else{i=!0;try{n[e.data]()}catch(e){}delete n[e.data],i=!1}}),d.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof d?t:new d(function(e){e(t)})},d.reject=function(n){if(1!=this._d)throw TypeError();return new d(function(e,t){t(n)})},d.all=function(i){if(1!=this._d)throw TypeError();if(!(i instanceof Array))return d.reject(TypeError());var o=new d;return function n(e,t){return t?o.resolve(t):e?o.reject(e):(0==i.reduce(function(e,t){return t&&t.then?e+1:e},0)&&o.resolve(i),void i.map(function(e,t){e&&e.then&&e.then(function(e){return i[t]=e,n(),e},n)}))}(),o},d.race=function(i){if(1!=this._d)throw TypeError();if(!(i instanceof Array))return d.reject(TypeError());if(0==i.length)return new d;var o=new d;return function n(e,t){return t?o.resolve(t):e?o.reject(e):(0==i.reduce(function(e,t){return t&&t.then?e+1:e},0)&&o.resolve(i),void i.map(function(e,t){e&&e.then&&e.then(function(e){n(null,e)},n)}))}(),o},d._d=1,e.exports=d}()}).call(this,n(45),n(112).setImmediate)},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t(1),o=t(1);i.locale={monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Monday"],cancel:"Cancel"};var _,r={"%d":function(e){e=e.getDate();return e<10?"0"+e:e},"%j":function(e){return e.getDate()},"%l":function(e){return i.locale.days[e.getDay()]},"%D":function(e){return i.locale.daysShort[e.getDay()]},"%m":function(e){e=e.getMonth()+1;return e<10?"0"+e:e},"%n":function(e){return e.getMonth()+1},"%M":function(e){return i.locale.monthsShort[e.getMonth()]},"%F":function(e){return i.locale.months[e.getMonth()]},"%y":function(e){return e.getFullYear().toString().slice(2)},"%Y":function(e){return e.getFullYear()},"%h":function(e){e=e.getHours()%12;return 0===e&&(e=12),e<10?"0"+e:e},"%g":function(e){e=e.getHours()%12;return 0===e&&(e=12),e},"%H":function(e){e=e.getHours();return e<10?"0"+e:e},"%G":function(e){return e.getHours()},"%i":function(e){e=e.getMinutes();return e<10?"0"+e:e},"%s":function(e){e=e.getSeconds();return e<10?"0"+e:e},"%a":function(e){return 12<=e.getHours()?"pm":"am"},"%A":function(e){return 12<=e.getHours()?"PM":"AM"},"%u":function(e){return e.getMilliseconds()}},m={"%d":function(e,t){/(^([0-9][0-9])$)/i.test(t)?e.setDate(Number(t)):e.setDate(Number(1))},"%j":function(e,t){/(^([0-9]?[0-9])$)/i.test(t)?e.setDate(Number(t)):e.setDate(Number(1))},"%m":function(e,t){var n=/(^([0-9][0-9])$)/i.test(t);n?e.setMonth(Number(t)-1):e.setMonth(Number(0)),n&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%n":function(e,t){var n=/(^([0-9]?[0-9])$)/i.test(t);n?e.setMonth(Number(t)-1):e.setMonth(Number(0)),n&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%M":function(e,t){var n=o.findIndex(i.locale.monthsShort,function(e){return e===t});-1===n?e.setMonth(0):e.setMonth(n),-1!==n&&e.getMonth()!==n&&e.setMonth(n)},"%F":function(e,t){var n=o.findIndex(i.locale.months,function(e){return e===t});-1===n?e.setMonth(0):e.setMonth(n),-1!==n&&e.getMonth()!==n&&e.setMonth(n)},"%y":function(e,t){/(^([0-9][0-9])$)/i.test(t)?e.setFullYear(Number("20"+t)):e.setFullYear(Number("2000"))},"%Y":function(e,t){/(^([0-9][0-9][0-9][0-9])$)/i.test(t)?e.setFullYear(Number(t)):e.setFullYear(Number("2000"))},"%h":function(e,t,n){/(^0[1-9]|1[0-2]$)/i.test(t)&&"pm"===n||"PM"===n?e.setHours(Number(t)):e.setHours(Number(0))},"%g":function(e,t,n){/(^[1-9]$)|(^0[1-9]|1[0-2]$)/i.test(t)&&"pm"===n||"PM"===n?e.setHours(Number(t)):e.setHours(Number(0))},"%H":function(e,t){/(^[0-2][0-9]$)/i.test(t)?e.setHours(Number(t)):e.setHours(Number(0))},"%G":function(e,t){/(^[1-9][0-9]?$)/i.test(t)?e.setHours(Number(t)):e.setHours(Number(0))},"%i":function(e,t){/(^([0-5][0-9])$)/i.test(t)?e.setMinutes(Number(t)):e.setMinutes(Number(0))},"%s":function(e,t){/(^([0-5][0-9])$)/i.test(t)?e.setSeconds(Number(t)):e.setSeconds(Number(0))},"%a":function(e,t){"pm"===t&&e.setHours(e.getHours()+12)},"%A":function(e,t){"PM"===t&&e.setHours(e.getHours()+12)}};function y(e){for(var t=[],n="",i=0;i<e.length;i++)"%"===e[i]?(0<n.length&&(t.push({type:_.separator,value:n}),n=""),t.push({type:_.datePart,value:e[i]+e[i+1]}),i++):n+=e[i];return 0<n.length&&t.push({type:_.separator,value:n}),t}function s(e,t,n){if("string"==typeof e){for(var i,o=[],r=0,s=null,a=0,l=y(t);a<l.length;a++){var c=l[a];if(c.type===_.separator){var u=e.indexOf(c.value,r);if(-1===u){if(n)return!1;throw new Error("Incorrect date, see docs: https://docs.dhtmlx.com/suite/calendar__api__calendar_dateformat_config.html")}s&&(o.push({formatter:s,value:e.slice(r,u)}),s=null),r=u+c.value.length}else c.type===_.datePart&&(s=c.value)}"%A"===s||"%a"===s?o.unshift({formatter:s,value:e.slice(r)}):s&&o.push({formatter:s,value:e.slice(r)}),o.reverse();for(var d=0,h=o;d<h.length;d++)"%A"!==(v=h[d]).formatter&&"%a"!==v.formatter||(i=v.value);for(var f=new Date(0),p=0,g=o;p<g.length;p++){var v=g[p];m[v.formatter]&&m[v.formatter](f,v.value,i)}return!!n||f}}(t=_=_||{})[t.separator=0]="separator",t[t.datePart=1]="datePart",i.getFormattedDate=function(e,n){return y(e).reduce(function(e,t){return t.type===_.separator?e+t.value:r[t.value]?e+r[t.value](n):e},"")},i.stringToDate=s;a.copy=function(e){return new Date(e)},a.fromYear=function(e){return new Date(e,0,1)},a.fromYearAndMonth=function(e,t){return new Date(e,t,1)},a.weekStart=function(e,t){t=(e.getDay()+7-t)%7;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)},a.monthStart=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},a.yearStart=function(e){return new Date(e.getFullYear(),0,1)},a.dayStart=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},a.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},a.addMonth=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth()+t)},a.addYear=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear()+t,e.getMonth())},a.withHoursAndMinutes=function(e,t,n,i){return void 0===i||!i&&12===t||i&&12!==t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,n):i&&12===t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,n):new Date(e.getFullYear(),e.getMonth(),e.getDate(),t+12,n)},a.setMonth=function(e,t){e.setMonth(t)},a.setYear=function(e,t){e.setFullYear(t)},a.mergeHoursAndMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())},a.isWeekEnd=function(e){return 0===e.getDay()||6===e.getDay()},a.getTwelweYears=function(e){e=e.getFullYear(),e-=e%12;return n.range(e,11+e)},a.getWeekNumber=function(e){6!==e.getDay()&&(e=a.addDay(e,6-e.getDay()));var t=(e.valueOf()-a.yearStart(e).valueOf())/864e5;return Math.floor((t-e.getDay()+10)/7)},a.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},a.toDateObject=function(e,t){return"string"==typeof e?s(e,t):new Date(e)},a.nullTimestampDate=new Date(0),t=a;function a(){}i.DateHelper=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),n=(o.prototype.getFocusId=function(){return this._activeWidgetId},o.prototype.setFocusId=function(e){this._activeWidgetId=e},o);function o(){var t=this;this._initHandler=function(e){return t._activeWidgetId=i.locate(e,"data-dhx-widget-id")},this._removeFocusClass=function(e){var t=document.body.classList;t.contains("utilityfocus")&&t.remove("utilityfocus")},this._addFocusClass=function(e){var t=document.body.classList;"Tab"===e.code?t.contains("utilityfocus")||t.add("utilityfocus"):t.contains("utilityfocus")&&t.remove("utilityfocus")},document.addEventListener("focusin",this._initHandler),document.addEventListener("click",this._initHandler),document.addEventListener("mousedown",this._removeFocusClass),document.addEventListener("keydown",this._addFocusClass)}t.focusManager=new n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(15),r=n(21),s=n(26),a={},l=[],c={decimal:".",thousands:","},u="$",d="(\\[\\$[\\w\\W]*?\\]|[\\$]{0,1})",h="([,. ]{0,1})",n="([#0]*)",f=new RegExp("\\[\\$([\\w\\W]*?)\\]|(\\$)"),p=new RegExp(d+n+h+n+h+n+"([%]{0,1})"+d),g={};function v(){return l}function _(t){return l[i.findIndex(l,function(e){return e.id===t})]}function m(e){return!isNaN(e-parseFloat(e))}function y(e){if(e&&"string"==typeof e){if(g[e])return g[e];var t,n=e.match(p),n={currencyBefore:(n=n)[1],digits:n[2],thousandsSeparator:n[3],optionalDigits:n[4],decimalSeparator:n[5],decimalDigits:n[6],percent:n[7],currencyAfter:n[8],decimalLength:0};return!n.decimalSeparator&&n.thousandsSeparator&&(n.decimalSeparator=n.thousandsSeparator,n.decimalDigits=n.optionalDigits,n.thousandsSeparator="",n.optionalDigits=""),n.currencyBefore&&(t=n.currencyBefore.match(f),n.currencyBefore=t[1]||t[2]),n.currencyAfter&&(t=n.currencyAfter.match(f),n.currencyAfter=t[1]||t[2]),n.percent&&(n.currencyBefore="",n.currencyAfter=""),n.decimalLength=n.decimalDigits?n.decimalDigits.split("0").length-1:n.decimalLength,"common"===e&&(n.decimalSeparator=".",n.decimalLength="",n.thousandsSeparator=","),g[e]=n}}function b(e,t){if(!t)return e;if(!m(e))return e;var n="";t.currencyBefore&&(n+=t.currencyBefore);var i=parseFloat(e),o=i<0;o&&(i=Math.abs(i));e=i.toString();t.percent&&(i*=100),t.digits&&(e=i.toFixed(t.decimalLength||2));var r=(null==t?void 0:t.digits)+(null==t?void 0:t.optionalDigits),i=e.split(".");if(r&&r.length>i[0].length){for(var s=i[0].split(""),a=i[0],l=0,c=r.length-1;-1<c;c--){var u=r[c],d=s[l];"0"!==u||d||(a="0"+a),l++}e=a+(1<i.length?"."+i[1]:"")}return n+=t.digits?function(e,t,n,i){void 0===t&&(t=""),void 0===i&&(i=3);for(var o=e.toString().split("."),r=[],s=1,a=o[0].length-1;-1<a;a--)r.push(o[0][a]),s===i&&a?(r.push(t),s=1):s++;return o[0]=r.reverse().join(""),o.join(n)}(e,t.thousandsSeparator,t.decimalSeparator,t.optionalDigits.length):e,n+=t.percent,t.currencyAfter&&(n+=t.currencyAfter),o&&(n="-"+n),n}function w(e){var t=c,n=(l.filter(function(e){return e.mask.startsWith("[$")})||[]).map(function(e){return e.mask.substring(2,e.mask.indexOf("]"))});if(n.length)for(var i=0;i<n.length;i++){var o=n[i];if(e.toString().startsWith(o))return w((""+e).substr(o.length))}return(""+e).replace(new RegExp("["+t.thousands+"$%s]","g"),"").replace(new RegExp("["+t.decimal+"]","g"),".")}t.getDefaultFormats=v,t.getFormat=_,t.isNumeric=m,t.initFormat=function(e,t,n){a=e.config,l=[{name:r.default.common,id:"common",mask:"",example:"1500.31"},{name:r.default.number,id:"number",mask:"#,##0.00",example:"1500.31"},{name:r.default.percent,id:"percent",mask:"#,##0.00%",example:"15.0031"},{name:r.default.currency,id:"currency",mask:"$#,##0.00",example:"1500.31"},{name:r.default.date,id:"date",mask:"mm-dd-yy",example:"44490",dateFormat:t},{name:r.default.time,id:"time",mask:"h:mm:ss "+(12<n?"":"am/pm"),example:"0.5625",timeFormat:n},{name:r.default.text,id:"text",mask:"@",example:"some text"}],a.formats.forEach(function(t){var e=i.findIndex(l,function(e){return e.id===t.id});0<=e?l[e]=t:l.push(t)}),n=y(_("number").mask),c={decimal:n.decimalSeparator,thousands:n.thousandsSeparator},n=y(_("currency").mask),u=n.currency||u,(a.formats=l).forEach(function(e){y(e.mask)})},t.getDefaultFormatsMap=function(){return l.reduce(function(e,t){return e[t.mask]=t.id,e},{})},t.getPureNumber=function(e){var t="string"==typeof e&&e.includes("%"),e=parseFloat((""+e).replace(/[^.\d]/g,""));return t?e/100:e},t.getCleanValue=w,t.getUnformattedValue=function(e,t){return"common"===t?e:(e=w(e),"percent"===t?(parseFloat(e)/100).toFixed(4):e)},t.detectCellFormat=function(e){if(!m(w(e)))return"";var t=""+e,n=t.indexOf("%"),i=0===t.indexOf("$");if(0===n||n===t.length-1)return _("percent").mask;if(i)return _("currency").mask;var o=l.filter(function(e){return e.mask.startsWith("[$")})||[],r=o.map(function(e){return e.mask.substring(2,e.mask.indexOf("]"))});if(r.length)for(var s=0;s<r.length;s++){var a=r[s];if(e.toString().startsWith(a))return o[s].mask}return _("number").mask},t.getFormattedValue=function(e,t){return"boolean"==typeof e?(""+e).toUpperCase():t&&"@"!==t.mask?"date"===t.id?m(e)?o.getFormattedDate(t.dateFormat,s.excelDateToJSDate(+e)):e:"time"!==t.id?b(e,y(t.mask)):e&&(t="%"+(12<t.timeFormat?"H":"h")+":%i:%s "+(12<t.timeFormat?"":"%A"),m(e)?o.getFormattedDate(t,s.excelDateToJSDate(+e)):"string"==typeof(e=s.timeStringToJS(e))?e:o.getFormattedDate(t,e)):e}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(2),c=n(6),u=n(7),o=(s=c.View,o(d,s),d.prototype._destructor=function(){this._helper&&this._helper.destructor(),this.config=this._handlers=this._helper=null,this.unmount()},d.prototype._getHandlers=function(){return{}},d.prototype._init=function(){},d.prototype._draw=function(){return this._drawLabel()},d.prototype._drawLabel=function(){var e=this.config,t=e.id,n=e.helpMessage,i=e.required;this.config.helpMessage&&(this._helper||(this._helper=new u.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));e=l.getLabelStyle(this.config);return e&&a.el((this.config.type.includes("group")?"legend":"label")+".dhx_label",{for:t||this._uid,class:n?"dhx_label--with-help":"",style:e.style},n?[(e.label||i)&&a.el("span.dhx_label__holder",e.label),a.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper,id:"dhx_label__help_"+(t||this._uid)})]:e.label)},d);function d(e,t){void 0===t&&(t={});var n=s.call(this,e,t)||this;n._handlers=r({showHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.show(e.target,{mode:"left"===n.config.labelPosition?"bottom":"right"})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.hide()}},n._getHandlers());return n.mount(e,a.create({render:function(){return n._draw()}})),n}t.Label=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),s=n(2);function a(e){for(var t=e.toLowerCase().match(/\w+/g),n=0,i="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?n+=4:"shift"===r?n+=2:"alt"===r?n+=1:i=r}return n+i}var l={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},n=(i.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},i.prototype.addHotKey=function(e,t){e=a(e);this._keysStorage[e]||(this._keysStorage[e]=[]),this._keysStorage[e].push({handler:t})},i.prototype.removeHotKey=function(e,n){var i,o,r=this;e?e&&n?(i=a(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")},this._keysStorage[i].forEach(function(e,t){o(e.handler)===o(n)&&(delete r._keysStorage[i][t],r._keysStorage[i]=r._keysStorage[i].filter(function(e){return e}))})):(e=a(e),delete this._keysStorage[e]):this._keysStorage={}},i.prototype.exist=function(e){e=a(e);return!!this._keysStorage[e]},i);function i(e){var o=this;this._keysStorage={},this._initHandler=function(e){var t;t=48<=e.which&&e.which<=57||65<=e.which&&e.which<=90?String.fromCharCode(e.which):(t=32===e.which?e.code:e.key,s.isIE()&&l[t]||t);var n=o._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(t&&t.toLowerCase())];if(n)for(var i=0;i<n.length;i++){if(o._beforeCall&&!1===o._beforeCall(e,r.focusManager.getFocusId()))return;n[i].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}t.KeyManager=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.transpose=function(e,t){for(var n=[],i=0;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++){n[r]=n[r]||[];var s=t?t(o[r]):o[r];n[r].push(s)}return n},t.getStyleByClass=function(e,t,n,i){return t=t.querySelector("."+n),n=t,n="string"==typeof(e='<div class="'+e+'"></div>')?(n.insertAdjacentHTML("beforeend",e),n.lastChild):(n.appendChild(e),e),e={color:"rgb(0, 0, 0)"===(e=window.getComputedStyle(n)).color?i.color:o.rgbToHex(e.color),background:"rgba(0, 0, 0, 0)"===e.backgroundColor?i.background:o.rgbToHex(e.backgroundColor),fontSize:parseFloat(e.fontSize)},t.removeChild(n),e.color===i.color&&e.background===i.background&&e.fontSize===i.fontSize?null:e},t.removeHTMLTags=function(e){return"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e?"":(""+(null==e?"":e)).replace(/<[^>]*>/g,"").replace(/["]/g,"&quot;").trim()},t.isCssSupport=function(t,n){try{return CSS.supports(t,n)}catch(e){var i=document.createElement("div");return i.style[t]=n,i.style[t]===n}},t.isRowEmpty=function(n){if(n)return Object.keys(n).reduce(function(e,t){return"id"!==t&&!t.startsWith("$")&&e&&void 0!==n[t]&&""!==n[t]?void 0:e},!0)},t.isSortable=function(e,t){return!1!==t.sortable&&e.sortable||t.sortable},t.isAutoWidth=function(t,e){if(e)return!1!==e.autoWidth&&t.autoWidth||e.autoWidth;var n=!1;return t.columns.map(function(e){(!1!==e.autoWidth&&t.autoWidth||e.autoWidth)&&(n=!0)}),n},t.isTooltip=function(e,t){return!1!==t.tooltip&&e.tooltip||t.tooltip},t.isHtmlEnable=function(e,t){return!1!==t.htmlEnable&&e.htmlEnable||t.htmlEnable},t.getTotalWidth=function(e){return e.reduce(function(e,t){return e+(t.$width||0)},0)},t.getTotalHeight=function(e){return e.reduce(function(e,t){return e+(t.$height||0)},0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={undo:"Undo",redo:"Redo",textColor:"Text color",backgroundColor:"Background color",bold:"Bold",italic:"Italic",underline:"Underline",halign:"Horizontal align",valign:"Vertical align",left:"Left",right:"Right",center:"Center",top:"Top",bottom:"Bottom",multiline:"Text wrapping",clip:"Clip",wrap:"Wrap",lockCell:"Lock cell",unlockCell:"Unlock cell",clear:"Clear",clearValue:"Clear value",clearStyles:"Clear styles",clearAll:"Clear all",columns:"Columns",rows:"Rows",addColumn:"Add column",removeColumn:"Remove column",addRow:"Add row",removeRow:"Remove row",format:"Format",common:"Common",number:"Number",currency:"Currency",percent:"Percent",text:"Text",date:"Date",time:"Time",help:"Help",deleteSheet:"Delete",renameSheet:"Rename",file:"File",import:"Import",export:"Export",downloadAs:"Download as...",importAs:"Import as...",edit:"Edit",insert:"Insert",data:"Data",validation:"Data validation",sort:"Sort",ascSort:"Sort A to Z",descSort:"Sort Z to A"}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.TreeFilterType||(t.TreeFilterType={})).all="all",i.level="level",i.leafs="leafs",(i=t.DataEvents||(t.DataEvents={})).afterAdd="afteradd",i.beforeAdd="beforeadd",i.removeAll="removeall",i.beforeRemove="beforeremove",i.afterRemove="afterremove",i.change="change",i.load="load",i.loadError="loaderror",i.beforeLazyLoad="beforelazyload",i.afterLazyLoad="afterlazyload",i.dataRequest="dataRequest",(i=t.DragEvents||(t.DragEvents={})).beforeDrag="beforeDrag",i.dragStart="dragStart",i.dragOut="dragOut",i.dragIn="dragIn",i.canDrop="canDrop",i.cancelDrop="cancelDrop",i.beforeDrop="beforeDrop",i.afterDrop="afterDrop",i.afterDrag="afterDrag",(t=t.DataDriver||(t.DataDriver={})).json="json",t.csv="csv",t.xml="xml"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),o=n(64);t.isEqualObj=function(e,t){for(var n in e)if(e[n]!==t[n]||Array.isArray(e[n]))return!1;return!0},t.naturalCompare=function(e,t){if(isNaN(e)||isNaN(t)){var i=[],o=[];for(e.replace(/(\d+)|(\D+)/g,function(e,t,n){i.push([t||1/0,n||""])}),t.replace(/(\d+)|(\D+)/g,function(e,t,n){o.push([t||1/0,n||""])});i.length&&o.length;){var n=i.shift(),r=o.shift(),r=n[0]-r[0]||n[1].localeCompare(r[1]);if(r)return r}return i.length-o.length}return e-t},t.findByConf=function(e,t){if("function"==typeof t){if(t.call(this,e))return e}else if(t.by&&t.match&&e[t.by]===t.match)return e},t.isDebug=function(){var e=window.dhx;if(void 0!==e)return void 0!==e.debug&&e.debug},t.dhxWarning=function(e){console.warn(e)},t.dhxError=function(e){throw new Error(e)},t.toProxy=function(e){var t=typeof e;return"string"==t?new i.DataProxy(e):"object"==t?e:void 0},t.toDataDriver=function(e){if("string"==typeof e){var t=window.dhx,t=t&&t.dataDrivers||o.dataDrivers;if(t[e])return new t[e];console.warn("Incorrect data driver type:",e),console.warn("Available types:",JSON.stringify(Object.keys(t)))}else if("object"==typeof e)return e},t.copyWithoutInner=function(e,t){var n,i={};for(n in e)n.startsWith("$")||t&&t[n]||(i[n]=e[n]);return i},t.isTreeCollection=function(e){return Boolean(e.getRoot)},t.hasJsonOrArrayStructure=function(e){if("object"==typeof e)return!0;if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return"[object Object]"===Object.prototype.toString.call(t)||Array.isArray(t)}catch(e){return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=n(1),b=n(20),w=n(15);function l(e,t){e[t]&&("string"==typeof e[t]?e[t]=[{text:""+e[t]}]:e[t]=e[t].map(function(e){return"string"==typeof e&&(e={text:e}),e}))}t.normalizeColumns=function(e,t){var n=e.columns,i=e.htmlEnable;void 0===t&&(t=!1);for(var o=0,r=n;o<r.length;o++){var s=r[o];s.$htmlEnable=!(!s.htmlEnable&&!i),s.$cellCss=s.$cellCss||{},l(s,"header"),l(s,"footer"),s.header.reduce(function(e,t){return e||!!t.content},!1)&&(s.$uniqueData=[]),s.minWidth&&s.minWidth<20&&(s.minWidth=20),s.maxWidth&&s.maxWidth<20&&(s.maxWidth=20);var a=s.minWidth||100;s.width&&(a=(a=s.maxWidth&&s.minWidth?s.width>=s.minWidth&&s.width<=s.maxWidth?s.width:s.width>=s.maxWidth?s.maxWidth:s.minWidth:s.maxWidth?s.width<=s.maxWidth?s.width:100<s.maxWidth?s.maxWidth:100:!s.minWidth||s.width>=s.minWidth?s.width:s.minWidth)<20?20:a),s.$width=s.$width&&!t?s.$width:a,s.$width>s.maxWidth&&(s.$width=s.maxWidth),s.$width<s.minWidth&&(s.$width=s.minWidth)}},t.countColumns=function(e,t){var i=0,o=0,r=0,s=!1,n=0,a=!1;return t.forEach(function(e){if(i=Math.max(i,e.header.length),r+=e.$width,e.footer&&(o=Math.max(o,e.footer.length),a=a||!0),!s)for(var t=0,n=e.header;t<n.length;t++)if(n[t].colspan)return void(s=!0)}),t.forEach(function(e){if(e.header.length<i)for(var t=0;t<i;t++)e.header[t]=e.header[t]||{text:""};if(a&&(e.footer=e.footer||[]),e.footer&&e.footer.length<o)for(t=0;t<o;t++)e.footer[t]=e.footer[t]||{text:""};e.header=e.header.map(function(e){return"object"!=typeof e&&(e={text:e}),e.css=e.css||"",e.text||e.css.includes("dhx_cell-empty")||(e.css+=" dhx_cell-empty dxi dxi-select-all"),e}),""===e.header[0].text&&n++}),e.$totalWidth=r,e.$headerLevel=i,e.$footerLevel=o,e.$colspans=s,e.$footer=a,n},t.calculatePositions=function(e,t,n,i,o){for(var r=i.columns||[],s=r.length,a=o||[],l=a.length,c=-1/0,u=1/0,d=0;d<s;d++)r[d].$width>c&&(c=r[d].$width),r[d].$width<u&&(u=r[d].$width);for(var h=-1/0,f=1/0,d=0;d<l;d++)a[d].$height>h&&(h=a[d].$height),a[d].$height<f&&(f=a[d].$height);f=f<i.rowHeight?f:i.rowHeight;for(var p=Math.round(c/u),o=Math.round(h/f),g=i.$totalWidth/s,e=Math.round(e/g),v=i.$totalHeight/l,t=Math.round(t/f),_=0,m=n.left,y=0;y<r.length;y++){if(!(0<(m-=r[y].$width)+g/2))break;_++}for(var b=0,w=n.top,y=0;y<a.length;y++){if(!(0<(w-=a[y].$height)+v/2))break;b++}return{xStart:0<=_-p?_-p:0,xEnd:_+e+p,yStart:0<=b-o?b-o:0,yEnd:b+t+o}},t.getUnique=function(e,t,n){var i=e.map(function(e){return e[t]});return n&&i.forEach(function(e,t){null!=e&&e.includes(", ")&&(e.split(", ").forEach(function(e){return i.push(e)}),delete i[t])}),i.filter(function(e,t,n){return n.indexOf(e)===t&&_.isDefined(e)}).sort()},t.getMaxRowHeight=function(e,t,n){void 0===n&&(n={font:"20px Roboto",lineHeight:20});var i=document.createElement("canvas"),o=i.getContext("2d",{alpha:!1});o.font=n.font;for(var r={},s=t.length,a=0;a<s;a++)t[a].template?r[t[a].id]={width:t[a].$width||0,htmlEnable:t[a].$htmlEnable,template:t[a].template,cols:t[a]}:r[t[a].id]={width:t[a].$width||0,htmlEnable:t[a].$htmlEnable};for(var l=[],c=[],u=0,d=Object.entries(e);u<d.length;u++){var h,f=d[u],p=f[0],g=f[1];!r[p]||"id"===p||"height"===p||p.startsWith("$")||"string"!=typeof g&&"number"!=typeof g||(h="",h=null!==(f=r[p])&&void 0!==f&&f.template?(f=r[p].template(g,e,r[p].cols),r[p].htmlEnable?b.removeHTMLTags(f):f):"string"==typeof g?r[p].htmlEnable?b.removeHTMLTags(g):g:g.toString(),l.push(h.split("\n").length),c.push(Math.round(o.measureText(h).width/(null===(p=r[p])||void 0===p?void 0:p.width))))}var v=Math.max(_.getMaxArrayNymber(l),_.getMaxArrayNymber(c));return i.remove(),v*n.lineHeight},t.getCalculatedRowHeight=function(e,t){void 0===t&&(t={rowHeight:40,padding:8});var n=t.rowHeight<40?e:e+2*t.padding;return e<t.rowHeight?t.rowHeight:n},t.getTreeCellWidthOffset=function(e){return 20+20*e.$level-(e.$items?20:0)},t.getMaxColsWidth=function(e,t,n,i){if(void 0===n&&(n={font:"normal 14.4px Arial"}),e.length&&t.length){var o=document.createElement("canvas"),r=o.getContext("2d",{alpha:!1});r.font=n.font;for(var s={},a=t.length,l=0;l<a;l++)t[l].template&&"data"===i?s[t[l].id]={width:20,htmlEnable:t[l].$htmlEnable,template:t[l].template,cols:t[l]}:s[t[l].id]={width:20,htmlEnable:t[l].$htmlEnable,format:t[l].format};for(var c=e.length,l=0;l<c;l++)for(var u=0,d=Object.entries(e[l]);u<d.length;u++){var h,f=d[u],p=f[0],g=f[1];s[p]&&"id"!==p&&"height"!==p&&!p.startsWith("$")&&("string"==typeof g||"number"==typeof g||g instanceof Date)&&(h=void 0,"function"==typeof(null===(f=s[p])||void 0===f?void 0:f.template)?(f=s[p].template(g,e[l],s[p].cols),(h=s[p].htmlEnable?b.removeHTMLTags(f):f)instanceof Date&&(h=w.getFormattedDate(s[p].format||"%M %d %Y",h))):h=s[p].htmlEnable?b.removeHTMLTags(g):g.toString(),(h=r.measureText(h).width)>s[p].width&&(s[p].width=h))}o.remove();for(var v={},_=0,m=Object.entries(s);_<m.length;_++){var y=m[_],p=y[0],g=y[1];v[p]=Math.ceil(g.width)}return v}},t.toFormat=function(r,e,s){if(!r&&"number"!=typeof r)return r;switch(e){case"number":case"percent":return s=s||"#",_.isDefined(r)&&!isNaN(Number(r))?function(e){r=r.toString();var t=s.replace(/#+/g,"#").split("#").filter(function(e){return e});r="percent"===e?(100*Number(r)).toString():r;var n=Math.trunc(Number(r)),i=(r<0&&0===Math.abs(n)?"-":"")+n,o=s.match(/0/g)&&s.match(/0/g).length,n=t.find(function(e){return!e.includes("0")}),n=n?i.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1"+n):i;return o&&(i=t.find(function(e){return e.includes("0")}).replace(/0+/g,""),t=r.split(".")[1]||"0",t=Number("0."+t).toFixed(o),1<=Number(t)&&(n++).toString(),n+=i+(t=t.toString().split(".")[1].padEnd(o,"0"))),"percent"===e?n+"%":n}(e):r;case"date":return s=s||"%M %d %Y","string"==typeof r?r=w.getFormattedDate(s,w.stringToDate(r,s)):"object"==typeof r&&(r=w.getFormattedDate(s,r)),r;default:return r}}},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(164)),i(t(165)),i(t(39))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(15);function r(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function s(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}function a(e){var t,n=0,i=0,o=0;if("string"==typeof e){var r=e.match(/\d+/g);if(!r)return e;e.toLowerCase().includes("pm")&&(t=!0),i=s(+r[0],23)+(t?12:0),n=s(+r[1],59),o=s(+r[2],59)}return new Date(1991,0,1,i,n,o)}t.getExcelDateFromJs=r,t.excelDateToJSDate=function(e){return e=new Date(Math.round(86400*(e-25569)*1e3)),new Date(e.getTime()+6e4*e.getTimezoneOffset())},t.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.addTime=function(e,t){return void 0===t&&(t=36e5),new Date(e.getTime()+t)},t.dateDiff=function(e,t){return t=t.getTime(),e=e.getTime(),parseInt(""+(t-e)/864e5)},t.timeDiff=function(e,t){var n=new Date,i=new Date;return n.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),i.setHours(t.getHours(),t.getMinutes(),t.getSeconds()),i=i.getTime(),n=n.getTime(),parseInt(""+(i-n))},t.timeStringToJS=a,t.isTimeCheck=function(e){return/([0-2][0-9]:[0-5][0-9]:[0-5][0-9])/i.test(e)},t.getExcelDateFromString=function(e,t){switch(t.id){case"date":var n=o.stringToDate(e,t.dateFormat,!0)?r(o.stringToDate(e,t.dateFormat)):e;break;case"time":var i=a(e);n="string"==typeof i?i:r(i)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),n=(o.prototype.updateUrl=function(e,t){for(var n in void 0===t&&(t={}),this._url=this.url=e||this._url,this.url+=this.url.includes("?")?"&":"?",t)this.config[n]=t[n],this.url+=n+"="+encodeURIComponent(t[n])+"&";this.url=this.url.slice(0,-1)},o.prototype.load=function(){return i.ajax.get(this.url,null,{responseType:"text"})},o.prototype.save=function(e,t){switch(t){case"delete":return i.ajax.delete(this.url,e);case"update":return i.ajax.put(this.url,e);case"insert":default:return i.ajax.post(this.url,e)}},o);function o(e,t){this.url=this._url=e,this.config=t}t.DataProxy=n},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=t(1),o=t(0),_=t(2);n.scrollViewConfig={enable:!1,autoHide:!0,timeout:1e3,scrollHandler:function(){}};i.prototype.enable=function(){this.config.enable=!0,this._getRootView().redraw()},i.prototype.disable=function(){this.config.enable=!1,this._getRootView().redraw()},i.prototype.render=function(e,t){var n=this;if(void 0===t&&(t=""),0===this._scrollWidth||!this.config.enable||!e.length)return e;t&&(this._uid=t);var i=this.config.enable?[o.el(".y-scroll",((i={})[this._wheelName]=this._handlers[this._wheelName],i._ref=t?"scroll-y-area-"+t:"scroll-y-area",i.onmousedown=this._handlers.onmousedownArea,i.onmouseenter=this._handlers.onmouseenter,i.onmouseleave=this._handlers.onmouseleave,i.style={width:"6px",height:"100%",right:0,top:0,position:"absolute"},i),[o.el(".scroll-runner",{_ref:t?"scroll-y-runner-"+t:"scroll-y-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",top:this._runnerYTop}})]),o.el(".x-scroll",((i={})[this._wheelName]=this._handlers[this._wheelName],i._ref=t?"scroll-x-area-"+t:"scroll-x-area",i.onmousedown=this._handlers.onmousedownArea,i.onmouseenter=this._handlers.onmouseenter,i.onmouseleave=this._handlers.onmouseleave,i.style={width:"100%",height:"6px",left:0,bottom:0,position:"absolute"},i),[o.el(".scroll-runner",{_ref:t?"scroll-x-runner-"+t:"scroll-x-runner",onmousedown:this._handlers.onmousedownRunner,style:{width:this._runnerWidth+"px",left:this._runnerXLeft}})])]:null;return o.el(".scroll-view-wrapper",[o.el(".scroll-view",{onscroll:this._handlers.onscroll,_ref:t?"scroll-view-"+t:"scroll-view",_hooks:{didInsert:function(){n.update()},didRecycle:function(){n.update()}},style:{width:"calc(100% + "+this._scrollWidth+"px)",height:"calc(100% + "+this._scrollHeight+"px)"}},e)].concat(i))},i.prototype.update=function(){var e,t,n,i,o,r=this._getRefs();r&&(o=r.area,e=r.areaX,t=r.areaY,n=r.runnerY,i=r.runnerX,this._visibleYArea=o.clientHeight/o.scrollHeight,this._visibleXArea=o.clientWidth/o.scrollWidth,this._scrollYTop=o.scrollTop,this._scrollXLeft=o.scrollLeft,this._runnerYTop=this._scrollYTop*this._visibleYArea,this._runnerXLeft=this._scrollXLeft*this._visibleXArea,this._runnerHeight=this._visibleYArea<1?o.clientHeight*this._visibleYArea:0,this._runnerWidth=this._visibleXArea<1?o.clientWidth*this._visibleXArea:0,r=n.style.top,o=i.style.left,n.style.opacity=1,n.style.top=this._runnerYTop+"px",n.style.height=this._runnerHeight+"px",i.style.opacity=1,i.style.left=this._runnerXLeft+"px",i.style.width=this._runnerWidth+"px",r!==n.style.top&&(t.style.opacity=.9,t.style.width="10px"),o!==i.style.left&&(e.style.opacity=.9,e.style.height="10px"),this.config.autoHide?this._autoHideFunc||(this._autoHideFunc=s.debounce(function(){n.style.opacity=0,t.style.width="6px",i.style.opacity=0,e.style.height="6px"},this.config.timeout)):this._autoHideFunc=s.debounce(function(){t.style.width="6px",e.style.height="6px"},this.config.timeout),this._autoHideFunc())},i.prototype._getRefs=function(){var e=this._getRootView(),t=!(!e.refs["scroll-view"]||!e.refs["scroll-x-runner"]&&!e.refs["scroll-y-runner"]),n=!(!this._uid||!e.refs["scroll-view-"+this._uid]||!e.refs["scroll-x-runner-"+this._uid]&&!e.refs["scroll-y-runner-"+this._uid]);if(e.refs)return t?{area:e.refs["scroll-view"].el,areaY:e.refs["scroll-y-area"].el,areaX:e.refs["scroll-x-area"].el,runnerY:e.refs["scroll-y-runner"].el,runnerX:e.refs["scroll-x-runner"].el}:n?{area:e.refs["scroll-view-"+this._uid].el,areaY:e.refs["scroll-y-area-"+this._uid].el,areaX:e.refs["scroll-x-area-"+this._uid].el,runnerY:e.refs["scroll-y-runner-"+this._uid].el,runnerX:e.refs["scroll-x-runner-"+this._uid].el}:void 0},t=i;function i(e,t){var v=this;void 0===t&&(t={}),this.config=s.extend({enable:n.scrollViewConfig.enable,autoHide:n.scrollViewConfig.autoHide,timeout:n.scrollViewConfig.timeout,scrollHandler:n.scrollViewConfig.scrollHandler},t),this._wheelName=_.isIE()?"onmousewheel":"onwheel",this._getRootView=e,this._scrollYTop=this._scrollXLeft=this._runnerYTop=this._runnerXLeft=this._runnerHeight=this._runnerWidth=0,this._visibleYArea=this._visibleXArea=1,this._scrollWidth=_.getScrollbarWidth(),this._scrollHeight=_.getScrollbarHeight(),this._handlers=((e={onscroll:function(e){v.config.scrollHandler(e),v.update()}})[this._wheelName]=function(e){var t=!!_.locateNodeByClassName(e.target,"y-scroll");e.preventDefault();var n,i=40*(0<(e.deltaY||-e.wheelDelta)?1:-1),e=v._getRefs().area;t?(t=e.scrollHeight-v._runnerHeight,n=v._scrollYTop+i,e.scrollTop=n<0?0:t<n?t:n):(n=e.scrollWidth-v._runnerWidth,i=v._scrollXLeft+i,e.scrollLeft=i<0?0:n<i?n:i),v.update()},e.onmousedownRunner=function(e){e.preventDefault();function t(e){var t;n?(t=e.pageY-u,o.scrollTop=t<=a?0:l<t?c:(t-a)/v._visibleYArea):(e=e.pageX-p,o.scrollLeft=e<=d?0:h<e?f:(e-d)/v._visibleXArea),v.update()}var n=!!_.locateNodeByClassName(e.target,"y-scroll"),i=v._getRefs(),o=i.area,r=i.runnerY,s=i.runnerX,i=o.getBoundingClientRect(),a=i.top+window.pageYOffset,l=i.bottom+window.pageYOffset,c=o.scrollHeight-v._runnerHeight,u=e.pageY-r.getBoundingClientRect().top-window.pageYOffset,d=i.left+window.pageXOffset,h=i.right+window.pageXOffset,f=o.scrollWidth-v._runnerWidth,p=e.pageX-s.getBoundingClientRect().left-window.pageXOffset,g=function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",g),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",t),document.addEventListener("mouseup",g)},e.onmousedownArea=function(e){var t,n,i,o;_.locateNodeByClassName(e,"scroll-runner")||(e.preventDefault(),t=!!_.locateNodeByClassName(e.target,"y-scroll"),n=(o=v._getRefs()).area,i=o.runnerY,o=o.runnerX,t?n.scrollTop+=(e.pageY-i.getBoundingClientRect().top)/v._visibleYArea:n.scrollLeft+=(e.pageX-o.getBoundingClientRect().left)/v._visibleXArea,v.update())},e.onmouseenter=function(e){var t,n;_.locateNodeByClassName(e,"scroll-runner")||(n=v._getRefs())&&(t=!!_.locateNodeByClassName(e.target,"y-scroll"),e=n.areaX,n=n.areaY,t&&0<v._runnerHeight?n.style.background="#eee":!t&&0<v._runnerWidth&&(e.style.background="#eee"))},e.onmouseleave=function(e){var t,n;_.locateNodeByClassName(e,"scroll-runner")||(n=v._getRefs())&&(t=!!_.locateNodeByClassName(e.target,"y-scroll"),e=n.areaX,n=n.areaY,t&&0<v._runnerHeight?n.style.background="transparent":!t&&0<v._runnerWidth&&(e.style.background="transparent"))},e)}n.ScrollView=t},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),d=n(1);t.getCount=function(e,t,n){var i={danger:" dhx_navbar-count--color_danger",secondary:" dhx_navbar-count--color_secondary",primary:" dhx_navbar-count--color_primary",success:" dhx_navbar-count--color_success"}[e.countColor]||" dhx_navbar-count--color_danger";return r.el(".dhx_navbar-count",{class:t+i+(!n&&99<parseInt(e.count,10)?" dhx_navbar-count--overlimit":"")},n&&99<parseInt(e.count,10)?"99+":e.count)},t.getIcon=function(e,t){return void 0===e&&(e=""),e.startsWith("dxi")&&(e="dxi "+e),r.el("span",{class:"dhx_"+t+"__icon "+e,"aria-hidden":"true"})};var s=function(e,t,n){var i="",o="",o=(i=n?"dhx_menu-item":"dhx_"+e+"__item")+(t.css?" "+t.css:"");return"spacer"!==t.type&&"separator"!==t.type||(o+=" "+i+"--"+t.type),"button"!==t.type||"sidebar"!==e||t.icon||(o+=" dhx_navbar-item--colapse_hidden"),o};t.navbarComponentMixin=function(e,t,n,i){var n=s(e,t,n),e="ribbon"===e&&("navItem"===t.type||"imageButton"===t.type);return r.el("li",o({_key:t.id,class:n+(t.icon&&!t.value&&e?" dhx_ribbon__item--icon":"")+(t.src&&!t.value&&e?" dhx_ribbon__item--icon":"")+(t.size&&e?" dhx_ribbon__item--"+t.size:""),".innerHTML":"customHTML"===t.type?t.html:void 0,"data-dhx-id":"customHTML"===t.type?t.id:void 0},(n=t.type,e={role:"none"},"separator"===n&&(e.role="separator",e["aria-orientation"]="vertical"),e)),"customHTML"!==t.type?[i]:void 0)},t.getNavbarButtonCSS=function(e,t){var n=e.color,i=e.size,o=e.view,r=e.full,s=e.icon,a=e.circle,l=e.loading,c=e.value,u=e.active,e=e.count;return({danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[n]||" dhx_button--color_primary")+({small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[i]||" dhx_button--size_medium")+({flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[o]||" dhx_button--view_flat")+(r?" dhx_button--width_full":"")+(a?" dhx_button--circle":"")+(l?" dhx_button--loading":"")+(u?" dhx_button--active":"")+(s&&!c?" dhx_button--icon":"")+(d.isDefined(e)?" dhx_button--count":"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y,b=1,w=2,x=3,_=4,E=5,C=6,S=7,I=8,d=9,k=10,M=11,P=12,i=1,a=3,o={1:"#ERROR",2:"#ERROR",3:"#REF!"},m=function(){return(m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function O(e,t,n){return n+64*t+64*e*4096}function D(e){return[e<2147483648?e>>18:e/262144&16777215,e>>6&4095,63&e]}function V(e){return e<2147483648?e>>18:e/262144&16777215}function s(e){return e>>6&4095}function r(e){return 63&e}function A(e,t){for(var n,i,o,r=e.code,s=e.source,a="",l=r.length,c=0;c<l;c+=3)switch(r[c]){case E:var u=void 0;r[c+6]===d&&(u=t.pageName(63&r[c+7])),a+=(-1!==(u=u||e.source.substr(r[c+1],r[c+2])).indexOf(" ")?"'"+u+"'":u)+"!";break;case S:a+=h(n=(o=D(r[c+4]))[0],i=o[1],r[c+5]);break;case _:a+=s.substr(r[c+1],r[c+2]).toUpperCase();break;case I:n=(u=D(r[c+4]))[0],i=u[1],u=(o=D(r[c+7]))[0],o=o[1],a+=h(n,i,r[c+5]),a+=":",a+=h(u,o,r[c+8]);break;case d:break;case w:a+="{{"+s.substr(r[c+1],r[c+2])+"}}";break;case x:a+="#REF!";break;case b:a+='"'+s.substr(r[c+1],r[c+2])+'"';break;default:a+=s.substr(r[c+1],r[c+2])}return a}function h(e,t,n){var i="";2&n&&(i+="$");var o="";for(t+=1;0<t;){var r=t%26;0===r&&(r=26),o=String.fromCharCode(64+r)+o,t=(t-r)/26}return i+=o,1&n&&(i+="$"),i+=e+1}function F(e){e=e.charCodeAt(0);return 48<=e&&e<=57}function R(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function T(e,t,n){for(var i,o=e.length,r=!0,s=t,a=!1,l=!1,c=!1,u=0;s<o;s++){var d=e[s];if("'"!==d){if(!a){c=!0;var h=d.charCodeAt(0);if((i=h)<=122?65<=i||35===i||36===i||46===i:191<i)h<=122?97<=h&&(l=!0):r=!1,1==u&&u++;else{if(!F(d))break;0==u&&u++}}}else{if(c)break;if(a){s++;break}a=!0}}var f,p=e[s],g=t,v=s-t;return a&&((v-=1+("'"===e[s-1]?1:0))<0&&(v=0),g++,n=E),0===n&&(":"===p&&r?(n=I,l&&(y=!0)):"!"===p?n="#"===e[g]?x:E:"("===p?(f=g,t=v,(t=e.substr(f,t)).toUpperCase()!==t&&(y=!0),n=_):"}"===p&&"}"===e[s-1]?n=w:1===u&&r?(n=S,l&&(y=!0)):n=C),[g,v,s,n]}function H(e,t,n){for(var i=0,o=0,r=1,s=1,a=0,l=!1,c=t.length-1;0<=c;c--){var u=t[c].charCodeAt(0);36!==u?u<58?(o+=(u-48)*r,r*=10):(l||(i=o,l=!(o=0),s+=r=1),o+=(u-(96<u?96:64))*r,r*=26):a+=s}e.push(d,O(i-1,o-1,n),a)}function l(e,t){var n=[];y=!1;for(var i=-1,o=0;o<e.length;o++){var r,s=e[o];if('"'!=s){if(!(-1<i))if("{"!=s||"{"!=e[o+1])if("'"==s||((f=s.charCodeAt(0))<=122?65<=f||35===f||36===f:191<f)){var a,l=T(e,o,0),c=l[0],u=l[1],d=l[2],h=l[3],f=n.length;if(h!==S&&h!==I||n[n.length-3]!==E?(a=t.z,n.push(h,c,u)):(g="'"===e[c-2]?1:0,l=n[f-2],p=n[f-1],void 0===(a=t.page(e.substr(l,p)))&&(n.push(x,0,0),a=0),n.push(h,c-p-2*g-1,u+p+2*g+1)),o=d-1,h===C)t.name(n,e,t);else if(h===I){var p=n.length;if(H(n,e.substr(c,u),a),c=(g=T(e,o+2,0))[0],u=g[1],d=g[2],(h=g[3])===E&&(c=(v=T(e,d+1,0))[0],u=v[1],d=v[2],h=v[3]),h!==S){n[p-3]=S;continue}H(n,e.substr(c,u),a);var g=n[p+1],v=n[p+4];(v<g||V(g)>V(v))&&(n[p+1]=v,n[p+4]=g),n[p-1]+=u+1,o=d-1}else h===S?H(n,e.substr(c,u),a):h!==x&&h!==E||o++}else o=R(s)?(h=function(e,t){for(var n;n=e[++t],R(n););return t}(e,o),n.push(P,o,h-o),h-1):F(s)?(r=function(e,t){for(var n;t++,n=e.charCodeAt(t),48<=n&&n<=57;);return t}(e,o),n.push(M,o,r-o),r-1):(s=void 0,"<"===(r=e)[_=o]?">"!==(s=r[_+1])&&"="!==s||_++:">"===r[_]&&"="===r[_+1]&&_++,_=_+1,n.push(k,o,_-o),_-1);else{var _=T(e,o+2,w),c=_[0],u=_[1],_=_[2];n.push(w,c,u),o=_+2-1}}else i=-1<i?(n.push(b,i+1,o-i-1),-1):o}var m={code:n,source:e,exec:null,broken:0,triggers:null};return y&&(m.source=A(m,t)),m}var c="              ";function u(e){for(var t=e.code,n=e.source,i="",o=t.length,r=0;r<o;r+=3){var s=t[r],a=void 0;switch(s){case _:a="method";break;case b:a="text";break;case E:a="page";break;case w:a="holder";break;case C:a="name";break;case S:a="arg";break;case I:a="range";break;case d:a="data";break;case k:a="op";break;case M:a="number";break;case x:a="error";break;case P:a="extra"}i+=s===d?c+(t[r+1]+" x "+t[r+2])+")\n":"["+a+"]"+(s=a,c.substr(0,10-s.length))+n.substr(t[r+1],t[r+2])+"\n"}return i}var f=[">","<","=","+"];function p(t){var e=function(e){for(var t=e.code,n=e.source,i="",o=t.length,r=0;r<o;r+=3){var s;switch(t[r]){case _:i+='ctx.m["'+n.substr(t[r+1],t[r+2]).toUpperCase()+'"]';break;case b:i+='"'+n.substr(t[r+1],t[r+2])+'"';break;case w:i+='ctx.p("'+n.substr(t[r+1],t[r+2])+'")';break;case C:case S:var a=void 0,l=void 0;if(t[r-3]===k?a=r-3:t[r-3]===P&&t[r-6]===k&&(a=r-6),t[r+6]===k?l=r+6:t[r+6]===P&&t[r+9]===k&&(l=r+9),a||l){var c=a?n[t[a+1]]:null,u=l?n[t[l+1]]:null;if("&"==c||"&"==u){i+="(ctx.v("+t[r+4]+') === null ? "" : ctx.v('+t[r+4]+"))";break}if(-1!=f.indexOf(c)||-1!=f.indexOf(u)){i+="(ctx.v("+t[r+4]+") === null ? 0 : ctx.v("+t[r+4]+"))";break}}i+="ctx.v("+t[r+4]+")";break;case I:i+="ctx.r("+t[r+4]+", "+t[r+7]+")";break;case k:1===t[r+2]?(s=n[t[r+1]],i+="&"===s?'+""+':"="===s?"==":";"===s?",":"{"===s?"[":"}"===s?"]":s):2===t[r+2]?(s=n.substr(t[r+1],t[r+2]),i+="<>"===s?"!=":s):i+=n.substr(t[r+1],t[r+2]);break;case M:i+=n.substr(t[r+1],t[r+2]);break;case x:return""}}return i}(t);if(!e)return t.broken=a,void(t.exec=null);try{t.exec=new Function("ctx","return "+e)}catch(e){t.broken=i,t.exec=null}}var g={null:"#NULL!",div0:"#DIV/0!",value:"#VALUE!",ref:"#REF!",name:"#NAME?",num:"#NUM!",na:"#N/A",data:"#GETTING_DATA"};function v(e){var t=new Date(e.getFullYear(),0,0),e=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(e/864e5)}function L(e){e=new Date(Math.round(86400*(e-25569)*1e3));return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function j(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function N(e){return!(!e&&0!==e||(e=+e,isNaN(e)))&&e}function $(e){if(1===e.length){var t=e[0];return"object"==typeof t?t:[t]}for(var n=[],i=0;i<e.length;i++)n=n.concat(e[i]);return n}function z(e){return!e&&0!==e}function B(e){return"string"==typeof e?"TRUE"===e:!!e}function W(e){var t="string"==typeof e?new Date(e):L(e);if(t.getTime())return t;throw e+" is invalid date"}function G(e){var t=N(e);if("number"!=typeof t)throw e+" is not a number";return t}function U(e,t,n,i,o){var r=N(e);r<0&&8==o&&(t=null);t=t?N(t):null;if("number"!=typeof r||"boolean"==typeof t)throw g.value;if(r<n&&(r=n),i<r&&(r=i),t<-1)throw g.num;t=t&&Math.floor(+t);e=e<0&&16===o?"FF":"",o=(i<2147483648?r>>>0&i-n:r>>>0).toString(o);if(t&&o.length>t)throw g.num;return(e+o).padStart(t,"0").toUpperCase()}function q(e){return 0<e?Math.floor(e):Math.ceil(e)}function Y(e){return e<0?Math.floor(e):Math.ceil(e)}function X(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=$(e),o=0;o<i.length;o++){var r=N(i[o]);"number"==typeof r&&(n+=r)}return n}function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=0,o=$(e),r=0;r<o.length;r++){var s=N(o[r]);"number"==typeof s&&(n+=s,i++)}return i?n/i:0}function J(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=$(e),i=0,o=0,r=0;r<n.length;r++){var s=n[r],a=N(n[r]);"number"==typeof a?(i+=a,o++):(!0===s&&i++,!s&&!1!==s||o++)}return o?i/o:0}function Z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=$(e),o=0;o<i.length;o++)"number"==typeof N(i[o])&&n++;return n}function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=$(e),o=0;o<i.length;o++)i[o]&&0!=+i[o]&&n++;return n}function ee(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=-1/0,i=$(e),o=0;o<i.length;o++){var r=N(i[o]);"number"==typeof r&&n<r&&(n=r)}return n===-1/0?0:n}function te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1/0,i=$(e),o=0;o<i.length;o++){var r=N(i[o]);"number"==typeof r&&r<n&&(n=r)}return n===1/0?0:n}function ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=!1,i=1,o=$(e),r=0;r<o.length;r++){var s=N(o[r]);"number"==typeof s&&(n=!0,i*=s)}return n?i:null}function ie(e,t,n){for(var i=$(e),o=t?0:-1,r=(n?J:K).apply(void 0,e),s=0,a=0;a<i.length;a++){var l=i[a],c=N(i[a]);if("number"!=typeof c){if(!n||"boolean"!=typeof l&&!l)continue;c=!0===l?1:0}o++,s+=Math.pow(c-r,2)}return o?s/o:0}function oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ie(e,!1,!1)}function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ie(e,!1,!0)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ie(e,!0,!1)}function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ie(e,!0,!0)}function le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(oe.apply(void 0,e))}function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(se.apply(void 0,e))}function ue(e,t){e=N(e),t=N(t);if("number"==typeof e&&"number"==typeof t)return Math.pow(e,t)}var de={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};var he=[];function fe(e){e=N(e);if("number"==typeof e&&-1<e){e=Math.floor(e);return 0===e||1===e?1:(0<he[e]||(he[e]=fe(e-1)*e),he[e])}}function pe(e,t){e=N(e),t=N(t);if("number"==typeof e&&"number"==typeof t)return fe(e)/(fe(t)*fe(e-t))}var ge=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function ve(e,t,n){void 0===n&&(n="i");var i=N(e),o=N(t);if("number"!=typeof i&&"number"!=typeof o)throw g.num;i="",o="";return e&&(i=e.toString()),t&&1!==t?o=t+n:1===t&&(o=n),0<t?(i?i+"+":"")+o:i+o}function _e(e,t){return void 0===t&&(t=null),U(e,t,-512,511,2)}function me(e,t){return void 0===t&&(t=null),U(e,t,-274877906944,274877906943,16)}function ye(e,t){return void 0===t&&(t=null),U(e,t,-536870912,536870911,8)}var be=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function we(e){for(var t,n=e<0,i=0,o=0,r=2/(2+(e=Math.abs(e))),s=4*r-2,a=be.length-1;0<a;a--)t=s*i-o+be[a],o=i,i=t;e=r*Math.exp(-e*e+.5*(be[0]+s*i)-o);return n?e-1:1-e}function xe(e,t){e=N(e),t=N(t);if("number"==typeof e)return"number"==typeof t?we(t)-we(e):we(e);throw g.value}var Ee=7,Ce=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];var Se=Math.pow(2,39);function Ie(e){if("string"!=typeof e)throw g.value;if(0<=["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e))return 0;var t=e.indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var i=e.substring(e.length-1,e.length),i="i"===i||"j"===i;if(0<=t||0<=n){if(!i)throw g.num;if(0<=t){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw g.num;return Number(e.substring(0,t))}if(isNaN(+e.substring(0,n))||isNaN(+e.substring(n+1,e.length-1)))throw g.num;return Number(e.substring(0,n))}if(i){if(isNaN(+e.substring(0,e.length-1)))throw g.num;return 0}if(isNaN(+e))throw g.num;return+e}function ke(e){if("string"!=typeof e)throw g.value;if(0<=["i","j"].indexOf(e))return 1;var t=(e=e.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var i=e.substring(e.length-1,e.length),i="i"===i||"j"===i;if(0<=t||0<=n){if(!i)throw g.num;if(0<=t){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw g.num;return Number(e.substring(t+1,e.length-1))}if(isNaN(+e.substring(0,n))||isNaN(+e.substring(n+1,e.length-1)))throw g.num;return-Number(e.substring(n+1,e.length-1))}if(i){i=+e.substring(0,e.length-1);if(isNaN(i))throw g.num;return i}if(isNaN(+e))throw g.num;return 0}function Me(e){var t=+Ie(e),e=+ke(e);return ve(Math.cos(t)*Math.cosh(e),-Math.sin(t)*Math.sinh(e))}function Pe(e){var t=+Ie(e),e=+ke(e);return ve(Math.cos(e)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(e)*(Math.exp(t)-Math.exp(-t))/2)}function Oe(e,t){var n=+Ie(e),i=+ke(e),o=+Ie(t),e=+ke(t),t=Math.pow(o,2)+Math.pow(e,2);return ve((n*o+i*e)/t,(i*o-n*e)/t)}function De(e){var t=+Ie(e),e=+ke(e);return ve(Math.sin(t)*Math.cosh(e),Math.cos(t)*Math.sinh(e))}function Ve(e){var t=+Ie(e),e=+ke(e);return ve(Math.cos(e)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(e)*(Math.exp(t)+Math.exp(-t))/2)}var Ae=Math.pow(2,29);function Fe(e,t,n){var i=N(t);if("number"!=typeof i||t<0||1<t||n&&(0===t||1===t))throw g.value;t=$(e).sort(function(e,t){return e-t});n&&(t=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}([0],t));e=(t.length+(n?0:-1))*i,n=Math.floor(e);if(void 0===t[n+1])return t[n];i=t[n+1]-t[n];return t[n]+i*(e-n)}function Re(e,t,n){t=N(t);if("number"!=typeof t)throw g.value;switch(t){case 0:if(n)throw g.value;return te.apply(void 0,e);case 1:return Fe(e,.25,n);case 2:return Fe(e,.5,n);case 3:return Fe(e,.75,n);case 4:if(n)throw g.value;return ee.apply(void 0,e);default:throw g.num}}function Te(e,t,n,i){var o=G(e),e=G(t),n=G(n);if(1==t)return 1/n;t=Math.exp(-Math.pow(o/n,e));return i?1-t:e/Math.pow(n,e)*Math.pow(o,e-1)*t}function He(e,t,n,i){void 0===i&&(i=!1);function o(e,t,n){return pe(t,e)*Math.pow(n,e)*Math.pow(1-n,t-e)}var r=G(e),s=G(t),a=G(n);if(!i)return o(r,s,a);for(var l=0,c=0;c<r+1;c++)l+=o(c,s,a);return l}function Le(e,t,n){var i=e.filter(function(e){return"number"==typeof e}),o=t.filter(function(e){return"number"==typeof e});if(i.length!==o.length)throw g.na;var r=i.length;if(0===r)throw g.div0;for(var s=i.reduce(function(e,t){return e+t},0)/r,a=o.reduce(function(e,t){return e+t},0)/r,l=0,c=0;c<r;c++)l+=(i[c]-s)*(o[c]-a);return l/(n?r-1:r)}function je(e,t){return Le(e,t,!1)}var Ne={ABS:function(e){if("number"==typeof(e=N(e)))return Math.abs(e)},ACOS:function(e){if("number"==typeof(e=N(e)))return Math.acos(e)},ACOSH:function(e){if("number"==typeof(e=N(e)))return Math.acosh(e)},ACOT:function(e){if("number"==typeof(e=N(e)))return Math.atan(1/e)},ACOTH:function(e){if("number"==typeof(e=N(e)))return.5*Math.log((e+1)/(e-1))},ADD:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e+t},ARABIC:function(e){if(!N(e)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(""+e)){var t=0;return(""+e).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,function(e){return t+=de[e],e}),+t}},ASIN:function(e){if("number"==typeof(e=N(e)))return Math.asin(e)},ASINH:function(e){if("number"==typeof(e=N(e)))return Math.asinh(e)},ATAN:function(e){if("number"==typeof(e=N(e)))return Math.atan(e)},ATAN2:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return Math.atan2(t,e)},ATANH:function(e){if("number"==typeof(e=N(e)))return Math.log((1+e)/(1-e))/2},AVEDEV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$(e).filter(function(e){return"number"==typeof e}),i=n.length;if(0===i)throw g.div0;var o=n.reduce(function(e,t){return e+t},0)/i;return n.reduce(function(e,t){return e+Math.abs(t-o)},0)/i},AVERAGE:K,AVERAGEA:J,BASE:function(e,t,n){if(void 0===n&&(n=0),e=N(e),t=N(t),n=N(n),"number"==typeof e&&"number"==typeof t&&"number"==typeof n){t=e.toString(t);return new Array(Math.max(n+1-t.length,0)).join("0")+t.toUpperCase()}},BINOMDIST:He,"BINOM.INV":function(e,t,n){for(var i=G(e),o=G(t),r=G(n),s=0;s<=i;s++)if(r<=He(s,i,o,!0))return s},"BINOM.DIST.RANGE":function(e,t,n,i){var o=G(e),r=G(t),n=G(n),s=N(i);"number"!=typeof s&&(s=n);for(var a=0,l=n;l<=s;l++)a+=pe(o,l)*Math.pow(r,l)*Math.pow(1-r,o-l);return a},"BINOM.DIST":He,BITAND:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e&t;throw g.value},BITLSHIFT:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return 0<t?e<<t:e>>-t;throw g.value},BITOR:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e|t;throw g.value},BITRSHIFT:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return 0<t?e>>t:e<<-t;throw g.value},BITXOR:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e^t;throw g.value},CEILING:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);var i=N(e),e=N(t),t=N(n);if("number"==typeof i&&"number"==typeof e&&"number"==typeof t)return 0===e?0:(e=Math.abs(e),0<=i?Math.ceil(i/e)*e:0===n?-1*Math.floor(Math.abs(i)/e)*e:-1*Math.ceil(Math.abs(i)/e)*e)},COMBIN:pe,COMBINA:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return 0===e&&0===t?1:pe(e+t-1,e-1)},COMPLEX:ve,CORREL:function(e,t){if(e.length!==t.length)throw g.na;for(var n=e.filter(function(e){return"number"==typeof e}),i=t.filter(function(e){return"number"==typeof e}),o=n.length,r=n.reduce(function(e,t){return e+t},0)/o,s=i.reduce(function(e,t){return e+t},0)/o,a=0,l=0,c=0,u=0;u<o;u++)a+=(n[u]-r)*(i[u]-s),l+=Math.pow(n[u]-r,2),c+=Math.pow(i[u]-s,2);if(!(t=Math.sqrt(l*c)))throw g.div0;return a/t},COS:function(e){if("number"==typeof(e=N(e)))return Math.cos(e)},COSH:function(e){if("number"==typeof(e=N(e)))return Math.cosh(e)},COT:function(e){if("number"==typeof(e=N(e)))return 1/Math.tan(e)},COTH:function(e){if("number"==typeof(e=N(e))){e=Math.exp(2*e);return(e+1)/(e-1)}},COUNT:Z,COUNTA:Q,COUNTBLANK:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=$(e),o=0;o<i.length;o++)0===i[o]||i[o]||n++;return n},COVAR:je,"COVARIANCE.P":je,"COVARIANCE.S":function(e,t){return Le(e,t,!0)},CSC:function(e){if("number"==typeof(e=N(e)))return 1/Math.sin(e)},CSCH:function(e){if("number"==typeof(e=N(e)))return 2/(Math.exp(e)-Math.exp(-e))},DEC2BIN:_e,DEC2HEX:me,DEC2OCT:ye,DECIMAL:function(e,t){if(e=N(e),t=N(t),!(""+e).match("/[2-9]/")&&"number"==typeof e&&"number"==typeof t&&1<t&&t<37)return parseInt(""+e,t)},DEGREES:function(e){if("number"==typeof(e=N(e)))return 180*e/Math.PI},DELTA:function(e,t){if(e=N(e),t=N(t),"number"==typeof e||"number"==typeof e)return+(e===t);throw g.value},DEVSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$(e),i=[];n.forEach(function(e){"number"==typeof e&&i.push(e)});var o=i.reduce(function(e,t){return e+t},0)/i.length;return i.reduce(function(e,t){return e+Math.pow(t-o,2)},0)},DIVIDE:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t&&0!==t)return e/t},EQ:function(e,t){return typeof e==typeof t&&e==t},ERF:xe,ERFC:function(e,t){if("number"==typeof(e=N(e)))return 1-xe(e,t);throw g.value},EVEN:function(e){var t=N(e);if("number"==typeof t){e=Y(t);return e%2?e+Math.sign(t):e}},EXP:function(e){if("number"==typeof(e=N(e)))return Math.exp(e);throw g.value},FACT:fe,FACTDOUBLE:function e(t){t=N(t);if("number"==typeof t)return(t=Math.floor(t))<=0?1:t*e(t-2)},FISHER:function(e){if("number"==typeof(e=N(e))&&-1<e&&e<1)return.5*Math.log((1+e)/(1-e));throw g.value},FISHERINV:function(e){if("number"!=typeof(e=N(e)))throw g.value;return((e=Math.exp(2*e))-1)/(e+1)},FLOOR:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t){t=Math.abs(t);return 0<=e?Math.floor(e/t)*t:-1*Math.ceil(Math.abs(e)/t)*t}},GAMMA:function e(t){var n=N(t);if("number"!=typeof n)throw g.value;if(Number.isInteger(n)&&n<=0)throw g.num;if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*e(1-n));--n;for(var i=Ce[0],o=1;o<Ee+2;o++)i+=Ce[o]/(n+o);t=n+Ee+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,n+.5)*Math.exp(-t)*i},GCD:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$(e),i=n.length;if(!i)return 1;for(var o=n[0],r=1;"number"!=typeof o;){if(o=n[r],r>n.length)throw"The arguments should contain at least one numeric value";r++}for(var s=o<0?-o:o;r<i;r++){var a=N(n[r]);if("number"==typeof a){for(var l=a<0?-a:a;s&&l;)l<s?s%=l:l%=s;s+=l}}return s},GEOMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$(e);if(n.some(function(e){return!Number.isFinite(e)||e<=0}))throw g.num;return Math.pow(n.reduce(function(e,t){return t*e},1),1/n.length)},GESTEP:function(e,t){void 0===t&&(t=0);var n=N(e),i=N(t);if("number"==typeof n&&"number"==typeof i)return+(t<=e);throw g.value},GT:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return t<e},GTE:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return t<=e},HARMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$(e);if(n.some(function(e){return!Number.isFinite(e)||e<=0}))throw g.num;var i=n.reduce(function(e,t){return e+1/t},0);return 1/(1/n.length*i)},HEX2BIN:function(e,t){return _e(parseInt(e.toString(),16),t)},HEX2DEC:function(e,t){var n=parseInt(e.toString(),16);if(!Number.isFinite(n))throw g.value;return(e=Se<n)&&(n=-(n-2*Se)),t=t?N(t):null,n=n.toString(),(e?"-":"")+(t?n.padStart(t,"0"):n)},HEX2OCT:function(e,t){return void 0===t&&(t=null),e=parseInt(e.toString(),16),Se<e&&(e^=Se),ye(e,t)},IMABS:function(e){var t=Ie(e),e=ke(e);if(!Number.isFinite(+t)||!Number.isFinite(+e))throw g.value;return Math.sqrt(Math.pow(+t,2)+Math.pow(+e,2))},IMAGINARY:ke,IMCONJUGATE:function(e){return ve(+Ie(e),-+ke(e))},IMCOS:Me,IMCOSH:Pe,IMCOT:function(e){return Oe(Me(e),De(e))},IMCSC:function(e){return Oe("1",De(e))},IMCSCH:function(e){return Oe("1",Ve(e))},IMDIV:Oe,IMEXP:function(e){var t=+Ie(e),n=+ke(e);return ve((e=Math.exp(t))*Math.cos(n),e*Math.sin(t))},IMLN:function(e){var t=+Ie(e),e=+ke(e);return ve(Math.log(Math.sqrt(t*t+e*e)),Math.atan(e/t))},IMPOWER:function(e,t){var n=N(t);if("number"!=typeof n)throw g.value;var i=+Ie(e),t=+ke(e),e=Math.sqrt(i*i+t*t),e=Math.pow(e,n),i=Math.atan(t/i);return ve(e*Math.cos(n*i),e*Math.sin(n*i))},IMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw g.value;for(var n,i,o,r=e[0],s=0,a=e.slice(1);s<a.length;s++){var l=a[s];n=r.toString(),i=l.toString(),l=o=void 0,o=+Ie(n),l=+ke(n),n=+Ie(i),i=+ke(i),r=ve(o*n-l*i,o*i+l*n)}return r.toString()},IMREAL:Ie,IMSEC:function(e){return Oe("1",Me(e))},IMSECH:function(e){return Oe("1",Pe(e))},IMSIN:De,IMSINH:Ve,IMSQRT:function(e){var t=+Ie(e),n=+ke(e),e=Math.sqrt(Math.sqrt(t*t+n*n)),t=Math.atan(n/t)/2;return ve(e*Math.cos(t),e*Math.sin(t))},IMSUB:function(e,t){var n=+Ie(e),e=+ke(e);return ve(n-+Ie(t),e-+ke(t))},IMSUM:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw g.value;for(var n,i,o=e[0],r=0,s=e.slice(1);r<s.length;r++){var a=s[r];n=o.toString(),i=a.toString(),a=void 0,a=+Ie(n),n=+ke(n),o=ve(a+ +Ie(i),n+ +ke(i))}return o.toString()},IMTAN:function(e){return Oe(De(e),Me(e))},INT:function(e){if("number"==typeof(e=N(e)))return Math.floor(e)},LARGE:function(e,t){var n=N(t),t=e.sort(function(e,t){return e-t});if("number"==typeof n&&!e.some(function(e){return"number"!=typeof N(e)}))return t[t.length-n];throw g.value},LN:function(e){if("number"==typeof(e=N(e)))return Math.log(e)},LOG:function(e,t){if(void 0===t&&(t=10),e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return Math.log(e)/Math.log(t)},LOG10:function(e){if("number"==typeof(e=N(e)))return Math.log(e)/Math.log(10)},LT:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e<t},LTE:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e<=t},MAX:ee,MEDIAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$(e);n.sort(function(e,t){return e-t});var i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2},MIN:te,MINUS:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e-t},MOD:function(e,t){var n=N(e),e=N(t);if("number"==typeof n&&"number"==typeof e&&0!==e){e=Math.abs(n%e);return 0<t?e:-e}},MROUND:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t&&-1<e*t)return Math.round(e/t)*t},MULTINOMIAL:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=$(e),i=0,o=1,r=0;r<n.length;r++){var s=N(n[r]);"number"==typeof s&&(i+=s,o*=fe(n[r]))}return fe(i)/o},MULTIPLY:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e*t},NE:function(e,t){return typeof e!=typeof t||e!=t},OCT2BIN:function(e,t){return void 0===t&&(t=null),(e=parseInt(e.toString(),8))&Ae&&(e=-(2*Ae-e)),_e(e,t)},OCT2DEC:function(e,t){if(void 0===t&&(t=null),t=t?N(t):null,(e=parseInt(e.toString(),8))&Ae&&(e=-(2*Ae-e)),!Number.isFinite(e)||"boolean"==typeof t)throw g.value;return e.toString().padStart(t||0,"0")},OCT2HEX:function(e,t){return void 0===t&&(t=null),(e=parseInt(e.toString(),8))&Ae&&(e=-(2*Ae-e)),me(e,t)},ODD:function(e){var t=N(e);if("number"==typeof t){e=Y(t);return e%2?e:e+Math.sign(t)}},PERCENTILE:Fe,"PERCENTILE.INC":Fe,"PERCENTILE.EXC":function(e,t){return Fe(e,t,!0)},PERMUT:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return fe(e)/fe(e-t);throw g.value},PI:function(){return Math.PI},POW:function(e,t){var n=N(e),i=N(t);if("number"==typeof n&&"number"==typeof i)return ue(e,t)},POWER:ue,PRODUCT:ne,QUARTILE:Re,"QUARTILE.INC":Re,"QUARTILE.EXC":function(e,t){return Re(e,t,!0)},QUOTIENT:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return q(e/t)},RADIANS:function(e){if("number"==typeof(e=N(e)))return e*Math.PI/180},RAND:function(){return Math.random()},RANDBETWEEN:function(e,t){if(e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t)return e+Math.ceil((t-e+1)*Math.random())-1},ROMAN:function(e){if("number"==typeof(e=N(e))){for(var t=String(e).split(""),n="",i=3;i--;)n=(ge[+t.pop()+10*i]||"")+n;return new Array(+t.join("")+1).join("M")+n}},ROUND:function(e,t){if(e=N(e),t=N(t)||0,"number"==typeof e&&"number"==typeof t)return parseFloat(e.toFixed(t))},ROUNDDOWN:function(e,t){if(e=N(e),t=N(t)||0,"number"==typeof e&&"number"==typeof t)return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},ROUNDUP:function(e,t){if(e=N(e),t=N(t)||0,"number"==typeof e&&"number"==typeof t)return Math.ceil(e*Math.pow(10,t))/Math.pow(10,t)},SEC:function(e){if("number"==typeof(e=N(e)))return 1/Math.cos(e)},SECH:function(e){if("number"==typeof(e=N(e)))return 2/(Math.exp(e)+Math.exp(-e))},SIGN:function(e){if("number"==typeof(e=N(e)))return 0===e?0:e/Math.abs(e);throw g.value},SIN:function(e){if("number"==typeof(e=N(e)))return Math.sin(e)},SINH:function(e){if("number"==typeof(e=N(e)))return Math.sinh(e)},SMALL:function(e,t){var n=N(t),t=e.sort(function(e,t){return e-t});if("number"==typeof n&&!e.some(function(e){return"number"!=typeof N(e)}))return t[n-1];throw g.value},SQRT:function(e){if("number"==typeof(e=N(e))&&0<=e)return Math.sqrt(e)},SQRTPI:function(e){if("number"==typeof(e=N(e))&&-1<e)return Math.sqrt(e*Math.PI)},STDEV:le,"STDEV.S":le,"STDEV.P":ce,STDEVA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(re.apply(void 0,e))},STDEVP:ce,STDEVPA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(ae.apply(void 0,e))},STEYX:function(e,t){if(e.length!==t.length)throw g.na;var n=e.filter(function(e){return"number"==typeof e}),i=t.filter(function(e){return"number"==typeof e}),o=n.length;if(2===o)throw g.div0;for(var r=n.reduce(function(e,t){return e+t},0)/o,s=i.reduce(function(e,t){return e+t},0)/o,a=0,l=0,c=0,u=0;u<o;u++)a+=(n[u]-r)*(i[u]-s),l+=Math.pow(n[u]-r,2),c+=Math.pow(i[u]-s,2);if(2===c)throw g.div0;return Math.sqrt((l-Math.pow(a,2)/c)/(o-2))},SUBTOTAL:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var e=N(e),i=$(t);if("number"==typeof e)switch(e){case 1:case 101:return K.apply(void 0,i);case 102:case 2:return Z.apply(void 0,i);case 103:case 3:return Q.apply(void 0,i);case 104:case 4:return ee.apply(void 0,i);case 105:case 5:return te.apply(void 0,i);case 106:case 6:return ne.apply(void 0,i);case 107:case 7:return;case 108:case 8:return ce.apply(void 0,i);case 109:case 9:return X.apply(void 0,i);case 110:case 10:return;case 111:case 11:return se.apply(void 0,i)}},SUM:X,SUMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0].length;for(o in e)if(e[o].length!==n)return;for(var i=0,o=0;o<e[0].length;o++){var r,s=!1,a=1;for(r in e){var l=N(e[r][o]);"number"==typeof l&&(a*=l,s=!0)}s&&(i+=a)}return i},SUMSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=$(e),o=0;o<i.length;o++){var r=N(i[o]);"number"==typeof r&&(n+=Math.pow(r,2))}return n},SUMX2MY2:function(e,t){if(!e.find(function(e){return"number"!=typeof N(e)})&&!t.find(function(e){return"number"!=typeof N(e)})){for(var n=0,i=0;i<e.length;i++)n+=e[i]*e[i]-t[i]*t[i];return n}},SUMX2PY2:function(e,t){if(!e.find(function(e){return"number"!=typeof N(e)})&&!t.find(function(e){return"number"!=typeof N(e)})){for(var n=0,i=0;i<e.length;i++)n+=e[i]*e[i]+t[i]*t[i];return n}},SUMXMY2:function(e,t){if(!e.find(function(e){return"number"!=typeof N(e)})&&!t.find(function(e){return"number"!=typeof N(e)})){for(var n=0,i=0;i<e.length;i++)n+=Math.pow(e[i]-t[i],2);return n}},TAN:function(e){if("number"==typeof(e=N(e)))return Math.tan(e)},TANH:function(e){if("number"==typeof(e=N(e)))return Math.tanh(e)},TRUNC:function(e){if("number"==typeof(e=N(e)))return q(e)},VAR:oe,"VAR.S":oe,"VAR.P":se,VARA:re,VARP:se,VARPA:ae,WEIBULL:Te,"WEIBULL.DIST":Te};var $e=/[\0-\x1F]/g;var ze=Object.freeze({__proto__:null,CONCATENATE:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $(e).join("")},LEFT:function(e,t){return z(e)?"":e.toString().substring(0,t)},MID:function(e,t,n){return z(e)?"":e.toString().substring(t,t+n)},RIGHT:function(e,t){return z(e)?"":e.toString().substring(e.length-t)},LOWER:function(e){return z(e)?"":e.toString().toLowerCase()},UPPER:function(e){return z(e)?"":e.toString().toUpperCase()},PROPER:function(e){if(z(e))return"";var t,n=e.toString().toLowerCase().split(" ");for(t in e="",n)e+=(e?" ":"")+n[t].substring(0,1).toUpperCase()+n[t].substring(1);return e},TRIM:function(e){return z(e)?"":e.toString().trim()},LEN:function(e){return z(e)?0:e.toString().length},CHAR:function(e){if("number"==typeof(e=N(e)))return String.fromCharCode(e)},CLEAN:function(e){return void 0===e&&(e=""),(""+e).replace($e,"")},CODE:function(e){return void 0===e&&(e=""),(""+e).charCodeAt(0)},EXACT:function(e,t){return e===t},FIND:function(e,t,n){if(void 0===n&&(n=0),"number"==typeof(n=N(n))&&t)return(""+t).indexOf(""+e,n-1)+1;throw"index cannot be string"},FIXED:function(e,t,n){if(void 0===t&&(t=2),void 0===n&&(n=!1),e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t){t=e.toFixed(t);if(B(n))return""+t;n=(""+t).split("."),t=n[0],n=n[1];return t.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+n}},NUMBERVALUE:function(e,t,n){if(void 0===t&&(t="."),void 0===n&&(n=","),"string"==typeof e&&"string"==typeof t&&"string"==typeof n)return Number(e.replace(t,".").replace(n,""))},REGEXEXTRACT:function(e,t){if("string"==typeof e&&"string"==typeof t){t=e.match(new RegExp(t));return t?t[1<t.length?t.length-1:0]:null}},REGEXMATCH:function(e,t){if("string"==typeof e&&"string"==typeof t)return!!e.match(new RegExp(t))},REGEXREPLACE:function(e,t,n){if("string"==typeof e&&"string"==typeof t)return e.replace(new RegExp(t),""+n)},REPT:function(e,t){if("number"==typeof(t=N(t)))return new Array(t+1).join(""+e)},SEARCH:function(e,t,n){if(void 0===n&&(n=0),"number"==typeof(n=N(n))){n=(""+t).toLowerCase().indexOf((""+e).toLowerCase(),n-1)+1;if(0!==n)return n;throw"not found"}},SUBSTITUTE:function(e,t,n,i){if(!e||!t||!n&&""!==n)return""+e;if(void 0===i)return(""+e).replace(new RegExp(""+t,"g"),""+n);for(var o=0,r=0;0<(""+e).indexOf(""+t,o);)if(o=(""+e).indexOf(""+t,o+1),++r===i)return(""+e).substring(0,o)+n+(""+e).substring(o+(""+t).length)},T:function(e){return"string"==typeof e&&"TRUE"!==e&&"FALSE"!==e?""+e:""},JOIN:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=[];return e.forEach(function(e){"object"==typeof e?i.push(e.join(""+t)):i.push(e)}),i.join(""+t)},REPLACE:function(e,t,n,i){if(t=N(t),n=N(n),"number"==typeof t&&"number"==typeof n){e=e.toString(),i=i.toString();return e.replace(e.substr(t-1,n),i)}},ARRAYTOTEXT:function(e,t){return t?"{"+e.map(function(e){return"string"==typeof e?'"'+e+'"':e}).join("; ")+"}":e.join("; ")}});function Be(n,e,t){void 0===t&&(t=0);var i,o=-1;return 0===t?o=e.indexOf(n):(i="string"==typeof n?"":-1/0*t,1===t?e.forEach(function(e,t){e<=n&&i<e&&(i=e,o=t)}):-1===t&&e.forEach(function(e,t){n<=e&&e<i&&(i=e,o=t)})),o+1}var We={LOOKUP:function(e,t,n){if(0===(e=Be(e,t,1)))throw"#N/A";return(n||t)[e-1]},HLOOKUP:function(e,t,n,i){var o=!0;if(void 0!==i&&(o=B(i)),i=t.$width||t.length,0===(o=Be(e,t.slice(0,i),o?1:0)))throw"#N/A";return t[i*((n||1)-1)+o-1]||null},VLOOKUP:function(e,t,n,i){var o=!0;void 0!==i&&(o=B(i));var r,s=t.$width||1,a=t.length/s;if(1==a)r=t;else{r=[];for(var l=0;l<a;l++)r.push(t[s*l])}if(0===(o=Be(e,r,o?1:0)))throw"#N/A";return t[s*(o-1)+(n||1)-1]||null},XLOOKUP:function(e,t,n,i,o,r){if(0!==(o=Be(e,t,o)))return(n||t)[o-1];if(void 0!==i)return i;throw"#N/A"},INDEX:function(e,t,n){return e[(e.$width||1)*(t-1)+(n||1)-1]||null},MATCH:function(e,t,n){var n=void 0===n?1:n;if(0===(n=Be(e,t,n)))throw"#N/A";return n},XMATCH:function(e,t,n,i){if(0===(n=Be(e,t,n)))throw"#N/A";return n}},Ge=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Ue=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],qe=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Ye(e,t){e=W(e),t=W(t);if(e&&t)return Math.round((e.getTime()-t.getTime())/864e5)}function Xe(e){var t=W(e);if(t){t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));e=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-e.getTime())/864e5+1)/7)}}function Ke(e,t,n,i){e=W(e),t=W(t);if(e&&t){for(var o=void 0===n?qe[1]:qe[n],r=i||[],s=0;s<r.length;s++){if((h=L(r[s]))instanceof Error)throw"The "+r[s]+" is not a  number";r[s]=h}for(var a=(t.getTime()-e.getTime())/864e5+1,l=Math.round(a),c=e,s=0;s<a;s++){var u=0<(new Date).getTimezoneOffset()?c.getUTCDay():c.getDay(),d=!1;u!==o[0]&&u!==o[1]||(d=!0);for(var h,f=0;f<r.length;f++)if((h=r[f]).getDate()===c.getDate()&&h.getMonth()===c.getMonth()&&h.getFullYear()===c.getFullYear()){d=!0;break}d&&l--,c.setDate(c.getDate()+1)}return l}}function Je(e,t,n,i){var o=W(e),r=N(t);if(o&&"number"==typeof r){for(var s=void 0===n?qe[1]:qe[n],a=i||[],l=0;l<a.length;l++){if((d=L(a[l]))instanceof Error)throw"The "+a[l]+" is not a  number";a[l]=d}for(var c=0;c<r;){o.setDate(o.getDate()+1);var u=o.getDay();if(u!==s[0]&&u!==s[1]){for(var d,h=0;h<a.length;h++)if((d=a[h]).getDate()===o.getDate()&&d.getMonth()===o.getMonth()&&d.getFullYear()===o.getFullYear()){c--;break}c++}}return j(o)}}function Ze(e){return 1===new Date(e,1,29).getMonth()}var Qe=function(e,t){var n=e.getFullYear(),i=new Date(n,2,1);if(Ze(n)&&e<i&&i<=t)return!0;n=t.getFullYear(),i=new Date(n,2,1);return Ze(n)&&i<=t&&e<i};function et(e,t,n){void 0===n&&(n=0);var i=W(e),o=W(t);if(i&&o){var r=i.getDate(),s=i.getMonth()+1,a=i.getFullYear(),l=o.getDate(),c=o.getMonth()+1,u=o.getFullYear(),d=365,t=u-a+1,h=(new Date(u+1,0,1).getTime()-new Date(a,0,1).getTime())/1e3/60/60/24/t;switch(n){case 0:return 31===r&&31===l?l=r=30:31===r?r=30:30===r&&31===l&&(l=30),(l+30*c+360*u-(r+30*s+360*a))/360;case 1:return a===u||a+1===u&&(c<s||s===c&&l<=r)?((a===u&&Ze(a)||Qe(i,o)||1===c&&29===l)&&(d=366),Ye(o.toDateString(),i.toDateString())/d):Ye(o.toDateString(),i.toDateString())/h;case 2:return Ye(o.toDateString(),i.toDateString())/360;case 3:return Ye(o.toDateString(),i.toDateString())/365;case 4:return(l+30*c+360*u-(r+30*s+360*a))/360}}}var tt={DATE:function(e,t,n){return j(new Date(e,t-1,n))},TIME:function(e,t,n){return(n=j(new Date(1900,0,1,e,t,n,0)))-Math.trunc(n)},DAY:function(e){return L(e).getDate()},MONTH:function(e){return L(e).getMonth()+1},YEAR:function(e){return L(e).getFullYear()},HOUR:function(e){return L(e).getHours()},MINUTE:function(e){return L(e).getMinutes()},SECOND:function(e){return L(e).getSeconds()},NOW:function(){return j(new Date)},DATEDIF:function(e,t,n){if("d"===(n=n.toLowerCase()))return t-e;var i,o,r=L(e),s=L(t);switch(n){case"y":return s.getFullYear()-r.getFullYear();case"m":return(i=12*(s.getFullYear()-r.getFullYear()))+s.getMonth()-r.getMonth();case"d":return Math.floor(t-e);case"md":if((o=s.getDate()-r.getDate())<0){var a=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();return s.getDate()+a-r.getDate()}return o;case"ym":return(i=s.getMonth()-r.getMonth())<0?12+i:i;case"yd":return(o=v(s)-v(r))<0?365+o:o}},DATEVALUE:function(e){if("string"==typeof e)return j(new Date(new Date(e).toDateString()))},DAYS:Ye,DAYS360:function(e,t,n){void 0===n&&(n=0);var i=W(e),o=W(t);if(i&&o){var r=i.getMonth(),s=o.getMonth(),a=void 0,e=void 0;return e=B(n)?(a=31===i.getDate()?30:i.getDate(),31===o.getDate()?30:o.getDate()):(t=new Date(i.getFullYear(),r+1,0).getDate(),n=new Date(o.getFullYear(),s+1,0).getDate(),a=i.getDate()===t?30:i.getDate(),o.getDate()===n?a<30?(s++,1):30:o.getDate()),360*(o.getFullYear()-i.getFullYear())+30*(s-r)+(e-a)}},EDATE:function(e,t){if(e=W(e),t=N(t),e&&"number"==typeof t)return e.setMonth(e.getMonth()+t),j(e)},EOMONTH:function(e,t){if(e=W(e),t=N(t),e&&"number"==typeof t)return j(new Date(e.getFullYear(),e.getMonth()+t+1,0))},ISOWEEKNUM:Xe,NETWORKDAYS:function(e,t,n){return Ke(e,t,1,n)},"NETWORKDAYS.INTL":Ke,TIMEVALUE:function(e){if("string"==typeof e){var t=e.split(" "),n=t[1],e=t[0].split(":"),t=new Date;return t.setHours(+e[0]),n&&"PM"===n.toUpperCase()&&t.setHours(t.getHours()+12),t.setMinutes(+e[1]),e[2]&&t.setSeconds(+e[2]),(3600*t.getHours()+60*t.getMinutes()+t.getSeconds())/86400}},WEEKNUM:function(e,t){void 0===t&&(t=1);var n=W(e);if(21===t)return Xe(t);var i=Ue[t],t=(e=new Date(n.getFullYear(),0,1)).getDay()<i?1:0,i=e.getTime()-24*Math.abs(e.getDay()-i)*60*60*1e3;return Math.floor((n.getTime()-i)/864e5/7+1)+t},WEEKDAY:function(e,t){return void 0===t&&(t=1),e=W(e).getDay(),Ge[t][e]},WORKDAY:function(e,t,n){return Je(e,t,1,n)},"WORKDAY.INTL":Je,YEARFRAC:et};var nt=Object.freeze({__proto__:null,IF:function(e,t,n){return e?t:n},AND:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)if(!B(e[n]))return!1;return!0},NOT:function(e){return!B(e)},OR:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)if(e[n])return!0;return!1},CHOOSE:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e=N(e),1<t.length&&"number"==typeof e){if(t.length<e)throw"the index number is greater than the length of the array of values";if(e<=0)throw"index cannot be less than or equal to 0";return t[--e]}},FALSE:function(){return!1},TRUE:function(){return!0}});var it=Object.freeze({__proto__:null,ISBLANK:z,ISBINARY:function(e){return/^[01]{1,10}$/.test(""+e)},ISEVEN:function(e){return"number"==typeof(e=N(e))&&e%2==0},ISODD:function(e){return"number"==typeof(e=N(e))&&e%2!=0},ISNONTEXT:function(e){return"string"!=typeof e},ISNUMBER:function(e){return"number"==typeof N(e)},ISTEXT:function(e){return"string"==typeof e},N:function(e){var t=N(e);return"number"==typeof t?t:(t=new Date(e)).getTime()?j(t):"TRUE"===e||!0===e?1:0}});function ot(e,t,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var r,e=G(e),t=G(t),n=G(n),i=G(i);return 0===e?r=(n+i)/t:(r=e*(n*(t=Math.pow(1+e,t))+i)/(t-1),1===o&&(r/=1+e)),-r}function rt(e,t,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var r=G(e),e=G(t),t=G(n),n=G(i);if(0!==r){i=Math.pow(1+r,e);return-(1===o?n*i+t*(1+r)*(i-1)/r:n*i+t*(i-1)/r)}}function st(e,t,n,i,o,r){void 0===o&&(o=0),void 0===r&&(r=0);e=G(e),n=G(n),t=G(t),i=G(i),o=ot(e,n,i,G(o),r),i=1===t?1===r?0:-i:1===r?rt(e,t-2,o,i,1)-o:rt(e,t-1,o,i,0);return i*e}var at=Object.freeze({__proto__:null,ACCRINT:function(e,t,n,i,o,r,s){void 0===o&&(o=0),void 0===s&&(s=0);var a=W(e),l=W(n),c=G(i),i=G(o),o=G(r),r=G(s);if(1!==o)throw"This function is only supported with frequency 1";if(-1===[0,1,2,3,4].indexOf(r))throw"Basis is "+s+". It's should be 0, 1, 2, 3 or 4";if(l<=a)throw"Settlement canot be before or equal to issue";return i*c*et(e,n,r)},PMT:ot,FV:rt,DB:function(e,t,n,i,o){void 0===o&&(o=12);var r=G(e),s=G(t),e=G(n),t=G(i),n=G(o);if(r<0||s<0||e<0||t<0)throw"Parameters cannot be negative";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(n))throw"Month is "+o+". It's should be beetwen 1 and 12";if(e<t)throw"Period cannot be greater than life";if(r<=s)return 0;for(var a=+(1-Math.pow(s/r,1/e)).toFixed(3),l=n=r*a*n/12,c=0,u=i===e?e-1:i,d=2;d<=u;d++)l+=c=(r-l)*a;return 1===i?n:i===e?(r-l)*a:c},DDB:function(e,t,n,i,o){void 0===o&&(o=2);var r=G(e),s=G(t),a=G(n),n=G(i),l=G(o);if(r<0||s<0||a<0||n<0||l<0)throw"Parameters cannot be negative";if(a<n)throw"Period cannot be greater than life";if(r<=s)return 0;for(var c=0,u=0,d=1;d<=i;d++)c+=u=Math.min(l/a*(r-c),r-s-c);return u},DOLLAR:function(e,t){if(void 0===t&&(t=2),e=N(e),t=N(t),"number"==typeof e&&"number"==typeof t){if(0<=t)return"$"+e.toFixed(t);t=Math.pow(10,-t);return"$"+Math.trunc(e/t)*t}},DOLLARDE:function(e,t){var n=G(e);if((t=G(t))<0)throw"Fraction cannot be negative";if(0<=t&&t<1)throw"Fraction cannot be zero";return t=parseInt(""+t,10),e=parseInt(""+e,10),e+=n%1*Math.pow(10,Math.ceil(Math.log(t)/Math.LN10))/t,t=Math.pow(10,Math.ceil(Math.log(t)/Math.LN2)+1),e=Math.round(e*t)/t},DOLLARFR:function(e,t){var n=G(e);if((t=G(t))<0)throw"Fraction cannot be negative";if(0<=t&&t<1)throw"Fraction cannot be zero";return t=parseInt(""+t,10),e=parseInt(""+e,10),e+=n%1*Math.pow(10,-Math.ceil(Math.log(t)/Math.LN10))*t},EFFECT:function(e,t){if(e=G(e),t=G(t),e<=0)throw"Rate cannot be less than or equal to zero";if(t<1)throw"Periods cannot be less than 1";return t=parseInt(""+t,10),Math.pow(1+e/t,t)-1},FVSCHEDULE:function(e,t){for(var e=G(e),n=t.map(G),i=n.length,o=e,r=0;r<i;r++)o*=1+n[r];return o},IRR:function(e,t){void 0===t&&(t=0);for(var n=$(e).map(G),e=G(t),i=[],o=!1,r=!1,s=0;s<n.length;s++)i[s]=0===s?0:i[s-1]+365,0<n[s]&&(o=!0),n[s]<0&&(r=!0);if(!o||!r)throw"Values should contain at least one positive value and one negative value";e=void 0===t?.1:e;for(var a,l,c,u=e;a=u-(c=function(e,t,n){for(var i=n+1,o=e[0],r=1;r<e.length;r++)o+=e[r]/Math.pow(i,(t[r]-t[0])/365);return o}(n,i,u))/function(e,t,n){for(var i=n+1,o=0,r=1;r<e.length;r++){var s=(t[r]-t[0])/365;o-=s*e[r]/Math.pow(i,1+s)}return o}(n,i,u),l=Math.abs(a-u),u=a,c=1e-10<l&&1e-10<Math.abs(c),c;);return u},IPMT:st,ISPMT:function(e,t,n,i){return e=G(e),t=G(t),n=G(n),G(i)*e*(t/n-1)},NPV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=$(e).map(G),i=G(n[0]),o=0,r=1;r<n.length;r++)o+=n[r]/Math.pow(1+i,r);return o},NOMINAL:function(e,t){if(e=G(e),t=G(t),e<=0)throw"Rate cannot be less then or equal to zero";if(t<1)throw"Periods cannot be less then 1";return t=parseInt(""+t,10),(Math.pow(e+1,1/t)-1)*t},NPER:function(e,t,n,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),e=G(e),t=G(t),n=G(n),i=G(i),o=G(o),i=t*(1+e*o)-i*e,o=n*e+t*(1+e*o),Math.log(i/o)/Math.log(1+e)},PDURATION:function(e,t,n){if(e=G(e),t=G(t),n=G(n),e<=0)throw"Rate cannot be less then or equal to zero";return(Math.log(n)-Math.log(t))/Math.log(1+e)},PPMT:function(e,t,n,i,o,r){return void 0===o&&(o=0),void 0===r&&(r=0),e=G(e),t=G(t),n=G(n),i=G(i),o=G(o),r=G(r),ot(e,n,i,o,r)-st(e,t,n,i,o,r)},PV:function(e,t,n,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),e=G(e),t=G(t),n=G(n),i=G(i),o=G(o),0===e?-n*t-i:((1-Math.pow(1+e,t))/e*n*(1+e*o)-i)/Math.pow(1+e,t)},SYD:function(e,t,n,i){return e=G(e),t=G(t),n=G(n),(e-t)*(n-G(i)+1)*2/(n*(n+1))},TBILLPRICE:function(e,t,n){if(e=W(e),t=W(t),n=G(n),"number"==typeof n&&e<t)return 100*(1-n*Math.round((t.getTime()-e.getTime())/864e5)/360)},TBILLYIELD:function(e,t,n){if(e=W(e),t=W(t),n=G(n),"number"==typeof n&&e<t)return(100-n)/n*360/Math.round((t.getTime()-e.getTime())/864e5)}}),lt={number:Ne,string:ze,date:tt,other:nt,information:it,financial:at,lookup:We},ct=m(m(m(m(m(m(m({},Ne),ze),tt),nt),it),at),We);var ut=Math.pow(10,8);function dt(e){if(e.keys)return Array.from(e.keys());var n=[];return e.forEach(function(e,t){return n.push(t)}),n}function ht(e){if(e.values)return e.values();var n=[];e.forEach(function(e,t){return n.push(t)});var t=0;return{add:function(e){n.push(e)},next:function(){var e=n[t];return{done:++t>n.length,value:e}}}}var ft=(pt.prototype.setValue=function(e,t,n,i){""===t&&(t=null),this._removeTriggers(e,null),this._setter(e,t,n)&&(i||this.trigger(e))},pt.prototype.clean=function(e){this._removeTriggers(e,null)},pt.prototype.getValue=function(e){return this._getter(e)},pt.prototype.setPlaceholder=function(n,e){var i=this;"*"===n?Object.entries(e).forEach(function(e){return i.setPlaceholder(e[0],e[1])}):(null===e?delete this._holders[n]:this._holders[n]=e,this.each(function(e,t){!function(e,t,n){for(var i=0;i<e.length;i+=3)if(e[i]===w&&t.substr(e[i+1],e[i+2])==n)return!0;return!1}(t.code,t.source,n)||i.setMath(e,t.source,i._parseContext)}))},pt.prototype.getPlaceholder=function(e){if("*"===e)return this._holders;e=this._holders[e];return void 0===e?null:e},pt.prototype.setMath=function(e,t,n,i){n=this._generate(t,n),n=this._setMathAt(e,n);i||this._execAndTrigger(n)},pt.prototype.refresh=function(e){this._execAndTrigger(e)},pt.prototype.getMath=function(e){return this._data.get(e)},pt.prototype.trigger=function(e,t){var n=this._triggers.get(e);if(n){e=!t;t=t||new Set;for(var i=0;i<n.length;i++)t.add(n[i]);e&&this.triggerSet(t)}return null},pt.prototype.triggerSet=function(t){for(var n=this,e=new Map;t.size;){var i=ht(t),o=!1;e:for(var r=i.next();!r.done;r=i.next()){var s=this._data.get(r.value),a=e.get(r.value);if(!a||(1==a&&(a=this._check_for_loops(r.value,s.triggers,e)),2!=a)){var l=s.triggers;if(l)for(var c=0;c<l.length;c++)if(t.has(l[c]))continue e;this._execAndTrigger(r.value,t),a||e.set(r.value,1),t.delete(r.value),o=!0}}if(!o)return void t.forEach(function(e){return n._errorAndTrigger(e,t)})}},pt.prototype.getStats=function(){return{math:this._data.size,trigger:this._triggers.size}},pt.prototype._check_for_loops=function(e,t,n){var i=new Set;t.forEach(function(e){return i.add(e)});for(var o=ht(i),r=o.next();!r.done;r=o.next()){if(r.value==e)return n.set(e,2),2;var s=n.get(r.value);if(s&&1<s)return n.set(e,s),s;s=this._data.get(r.value);s&&s.triggers&&s.triggers.forEach(function(e){return t=i,n=e,void((e=o).add?t.has(n)||e.add(n):t.add(n));var t,n})}return n.set(e,3),3},pt.prototype._setMathAt=function(e,t){if(this._removeTriggers(e,t)){if(t.triggers)if(-1===t.triggers.indexOf(e)&&3!==t.broken)for(var n=0;n<t.triggers.length;n++){var i=t.triggers[n],o=this._triggers.get(i);void 0===o&&(o=[],this._triggers.set(i,o)),o.push(e)}else t=m(m({},t),{broken:a});return this._data.set(e,t),e}},pt.prototype._removeTriggers=function(t,e){var n=this._data.get(t);if(!n)return!0;if(n===e)return!1;var i=n.triggers;if(i&&n.broken!==a)for(var o=0;o<i.length;o++){var r=i[o],s=this._triggers.get(r);s&&((s=s.filter(function(e){return e!==t})).length?this._triggers.set(r,s):this._triggers.delete(r))}return this._data.delete(t),!0},pt.prototype.parse=function(e,t){return this._parser(e,t||this._parseContext)},pt.prototype.exec=function(e,t){t=this._generate(e,t);return this._exec(t)},pt.prototype.each=function(t){var n=this;dt(this._data).forEach(function(e){return t(e,n._data.get(e))})},pt.prototype.setLogger=function(e){this._err_handler=e},pt.prototype._setErr=function(e,t){return e.broken=2,t&&this._err_handler&&this._err_handler(t),o[e.broken]},pt.prototype._exec=function(t){if(0<t.broken&&2!==t.broken)return o[t.broken];try{var e=t.exec(this._context);return t.broken=0,"number"==typeof e?isFinite(e)?Math.round(e*ut)/ut:this._setErr(t):e}catch(e){return this._setErr(t,e)}},pt.prototype.toString=function(e,t){return A(e,t||this._parseContext)},pt.prototype.regenerate=function(r,s,a){var l=this;a=m({},a||this._parseContext),dt(this._data).forEach(function(e){var t=!1,n=l._data.get(e),i=63&e;if(s&&i===r)l._removeTriggers(e,null);else{for(var o=0;o<n.code.length;o+=3)if(n.code[o]===d&&(63&n.code[o+1])===r){t=!0;break}t&&(a.z=i,s?l.setMath(e,n.source,a):(n.source=A(n,a),n.code=l._parser(n.source,a).code))}})},pt.prototype.recalculate=function(n,i){var o=this;i=m({},i||this._parseContext);var r=new Set;this.each(function(e){if(n){var t=o._data.get(e);if(t.broken&&2!==t.broken)return i.z=63&e,void o.setMath(e,t.source,i)}r.add(e)}),this.triggerSet(r)},pt.prototype._generate=function(e,t,n){t=n||this._parser(e,t||this._parseContext);return this._printer(t),t.triggers=function(e){for(var t=[],n=e.code,i=n.length,o=0;o<i;o+=3)switch(n[o]){case S:case C:var r=n[o+4];t.push(r);break;case I:!function(e,t,n){for(var i=(o=D(e))[0],o=o[1],r=(t=D(t))[0]-i,s=t[1]-o,a=0;a<=r;a++)for(var l=0;l<=s;l++)n(e+64*l+4096*a*64)}(n[o+4],n[o+7],function(e){return t.push(e)})}{var s;10<t.length&&(s=new Set,t=t.filter(function(e){return!s.has(e)&&(s.add(e),!0)}))}return t.length?t:null}(t),t},pt.prototype._execAndTrigger=function(e,t){this.$count+=1;var n=this._data.get(e);n&&(n=this._exec(n),this._setter(e,n)&&this.trigger(e,t))},pt.prototype._errorAndTrigger=function(e,t){var n=this._data.get(e),n=this._setErr(n);this._setter(e,n)&&this.trigger(e,t)},pt.prototype.debug=function(e){console.log(u(this.parse(e)))},pt.prototype.transpose=function(e,a,l,c){var u=this;c=c||this._parseContext;var e=D(e),d=e[0],h=e[1],f=e[2],p=new Map,g=new Map,v=new Set;dt(this._data).forEach(function(e){var t=D(e),n=t[0],i=t[1],o=t[2],r=u._data.get(e),s=o===c.z?c:m(m({},c),{z:o}),t=u._transpose(r,d,h,a,l,c,s),s=e;o===f&&(h<=i||d<=n)&&(s=O(d<=n?n+a:n,h<=i?i+l:i,o)),r===t&&e===s||(g.set(e,t),o===f&&(l<0&&h<=i&&i<h-l||a<0&&d<=n&&n<d-a)||(p.set(s,t),r.broken!==t.broken&&v.add(s)))}),dt(p).forEach(function(e){return u._setMathAt(e,p.get(e))}),Array.from(g.keys()).forEach(function(e){p.has(e)||u._removeTriggers(e,null)}),0<a&&this._triggerRow(d,a,v),0<l&&this._triggerColumn(h,l,v),a<0&&this._triggerColumn(d-1,2,v),l<0&&this._triggerColumn(h-1,2,v),this.triggerSet(v)},pt.prototype._triggerColumn=function(n,e,i){var o=this,r=e?n+e:n;dt(this._triggers).forEach(function(e){var t=s(e);n<=t&&t<r&&o.trigger(e,i)})},pt.prototype._triggerRow=function(n,e,i){var o=this,r=e?n+e:n;dt(this._triggers).forEach(function(e){var t=V(e);n<=t&&t<r&&o.trigger(e,i)})},pt.prototype.transposeMath=function(e,t,n,i){return"string"==typeof e&&(e=this.parse(e,i)),i=i||this._parseContext,this._transpose(e,-1,-1,t,n,i,i).source},pt.prototype._transpose=function(e,t,n,i,o,r,s){for(var a,l,c,u,d,h,f,p=!0,g=e.code,v=!(t<0||n<0),_=0;_<g.length;_+=3)g[_]===S?(u=(h=D(g[_+4]))[0],f=h[1],d=h[2],r.z===d&&(c=g[_+5],!v&&3==c||((v||0==(1&c))&&0!==i&&t<=u&&(p&&(g=[].concat(g),p=!1),((u+=i)<t||u<0)&&(g[_]=x)),(v||0==(2&c))&&0!==o&&n<=f&&(p&&(g=[].concat(g),p=!1),((f+=o)<n||f<0)&&(g[_]=x)),p||(g[_+4]=O(u,f,d)),_+=3))):g[_]===I&&(a=g[_+5],l=g[_+8],!v&&3===a&&3===l||(c=(h=D(g[_+4]))[0],u=h[1],d=h[2],h=(f=D(g[_+7]))[0],f=f[1],r.z===d&&(0!==i&&((v||0==(1&a))&&(0<i?t<=c:t<c)&&(p&&(g=[].concat(g),p=!1),(c+=i)<0&&(g[_]=x)),(v||0==(1&l))&&t<=h&&(p&&(g=[].concat(g),p=!1),(h+=i)<c&&(g[_]=x))),0!==o&&((v||0==(2&a))&&(0<o?n<=u:n<u)&&(p&&(g=[].concat(g),p=!1),(u+=o)<0&&(g[_]=x)),(v||0==(2&l))&&n<=f&&(p&&(g=[].concat(g),p=!1),(f+=o)<u&&(g[_]=x))),p||(g[_+4]=O(c,u,d),g[_+7]=O(h,f,d)),_+=6)));if(p)return e;e={code:g,broken:e.broken,source:e.source,triggers:null,exec:null},e=this._parser(A(e,s),s);return this._generate(e.source,s,e)},pt);function pt(e){var c=this;(e=e||{get:null,set:null})&&(this._getter=e.get,this._setter=e.set),this._parser=l,this._printer=p,this._parseContext={name:function(){},pageName:function(){return""},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={v:function(e){if(-1===e)throw new Error;e=c._getter(e);return void 0===e?null:e},r:function(e,t){var n=D(e),i=n[0],n=n[1],t=D(t),o=t[0]-i,r=t[1]-n+1,s=[];s.$width=r;for(var a=0;a<=o;a++)for(var l=0;l<r;l++)s[a*r+l]=c._getter(e+64*l+4096*a*64);return s},m:ct,e:function(e){throw e},p:function(e){return c.getPlaceholder(e)}}}var gt=(vt.prototype.getMeta=function(){return this._meta},vt.prototype.setMeta=function(e){this._meta=m(m({},this._meta),e)},vt.prototype.getID=function(){return this._id},vt.prototype.cellID=function(e,t){return O(e,t,this._id)},vt.prototype.getSize=function(){var e=this._data.length,t=0;return this._data.forEach(function(e){e&&e.length>t&&(t=e.length)}),[e,t]},vt.prototype.getContext=function(){return this._parseContext},vt.prototype.addRow=function(e,t){this._data.splice.apply(this._data,_t(e,t)),this._store.transpose(O(e,0,this._id),t,0,this._parseContext)},vt.prototype.removeRow=function(e,t){this._data.splice(e,t),this._store.transpose(O(e,0,this._id),-t,0,this._parseContext)},vt.prototype.addColumn=function(e,t){var n=_t(e,t);this._data.forEach(function(e){e&&e.splice.apply(e,n)}),this._store.transpose(O(0,e,this._id),0,t,this._parseContext)},vt.prototype.removeColumn=function(t,n){this._data.forEach(function(e){e&&e.splice(t,n)}),this._store.transpose(O(0,t,this._id),0,-n,this._parseContext)},vt.prototype.setCell=function(e,t,n){var i=this._data[e],o=(i=i||(this._data[e]=[]))[t];i[t]=o?m(m(m({},o),n),{value:o.value}):n,void 0!==n.value&&this.setValue(e,t,n.value)},vt.prototype.setValue=function(e,t,n,i){"string"==typeof n&&1<n.length&&"="===n[0]?this._store.setMath(O(e,t,this._id),n.substr(1),this._parseContext):this._store.setValue(O(e,t,this._id),n,i)},vt.prototype.getCell=function(e,t,n){var i=this._data[e],o=i?i[t]:null;return o||!n?o:o=(o=(i=i||(this._data[e]=[]))[t])||(i[t]={value:""})},vt.prototype.getValue=function(e,t,n){if(n){n=this._store.getMath(O(e,t,this._id));if(n)return"="+n.source}t=this.getCell(e,t,!1);return t?t.value:null},vt.prototype.getRange=function(e,t,n,i){for(var o=[],r=e;r<=n;r++)for(var s=t;s<=i;s++)o.push(this.getValue(r,s,!1));return o},vt.prototype.getCellRange=function(e,t,n,i){for(var o=[],r=e;r<=n;r++)for(var s=t;s<=i;s++)o.push(this.getCell(r,s));return o},vt.prototype.eachCell=function(i){this._data.forEach(function(e,n){e&&e.forEach(function(e,t){e&&i(n,t,e)})})},vt.prototype.serialize=function(o){var r=this,s=[];return this.eachCell(function(e,t,n){var i;n=m({},n),!o||(i=r._store.getMath(O(e,t,r.getID())))&&(n.value="="+i.source),s.push([e,t,n])}),s},vt.prototype.parse=function(e,s){var a=this;this._store.each(function(e){(63&e)===a._id&&a._store.clean(e)}),this._data=[];var l=new Set;e.forEach(function(e){var t,n=e[0],i=e[1],o=e[2],r=(o=(a._data[n]||(a._data[n]=[]))[i]=m({},o)).value;r&&("string"==typeof r&&1<r.length&&"="===r[0]?(t=O(n,i,a._id),e=r.substr(1),a._store.setMath(t,e,a.getContext(),!0),l.add(t)):s&&(o.value=null,t=O(n,i,a._id),a._store.setValue(t,r,null,!0),a._store.trigger(t,l)))}),this._store.triggerSet(l)},vt);function vt(e,t,n){this._data=[],this._id=e,this._store=t,this._meta={},this._parseContext=m(m({},n),{z:e})}function _t(e,t){for(var n=[e,0],i=0;i<t;i++)n.push(null);return n}var mt=(yt.prototype.get=function(e){return this._store.getMath(this._ranges.get(e))},yt.prototype.toId=function(e){return this._ranges.get(e)},yt.prototype.add=function(e,t){var n=this._ranges.get(e)||this._next_id();this._store.setMath(n,t,this._page.getContext()),this._ranges.set(e,n),this._refresh(e)},yt.prototype.remove=function(e){this._ranges.delete(e),this._counter=1,this._refresh(e)},yt.prototype.serialize=function(){var t=this;return Array.from(this._ranges.keys()).map(function(e){return[e,t.get(e).source]})},yt.prototype.parse=function(e){var t=this;e.forEach(function(e){return t.add(e[0],e[1])})},yt.prototype._refresh=function(i){var o=this,e=i.indexOf("!"),r="";-1!==e&&(r=i.substr(0,e),i=i.substr(e+1)),this._store.each(function(e,t){var n;!function(e,t,n,i){for(var o=0;o<e.length;o+=3)if(e[o]===C){if(""!==n){if(e[o-3]===E&&t.substr(e[o-2],e[o-1])!==n)continue;return!0}if(t.substr(e[o+1],e[o+2])===i)return!0}return!1}(t.code,t.source,r,i)||(n=63&e,o._store.setMath(e,t.source,o._pageGetter(n).getContext()))})},yt.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,O(this._counter,0,this._page.getID())},yt.prototype.renamePage=function(i,o){var r=this;i+="!",o&&(o+="!"),this._ranges.forEach(function(e,t,n){0===t.indexOf(i)&&(o?n.set(t.replace(i,o),e):r._store.clean(e),n.delete(t))})},yt);function yt(e,t,n){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=e,this._page=t,this._pageGetter=n}bt.prototype.addPage=function(e){for(;this._pages[this._pCounter];)this._pCounter++;var t=this._pCounter,n=new gt(t,this._store,this._parseContext);return this._pageName2ID.set(e,t),this._pages[t]=n,this._pageNames[t]=e,n},bt.prototype.renamePage=function(e,t){var n;e!==t&&(n=this._pageName2ID.get(e),this._pageName2ID.delete(e),this._pageName2ID.set(t,n),this._pageNames[n]=t,this._ranges.renamePage(e,t),t=this._pages[n].getContext(),this._store.regenerate(n,!1,t))},bt.prototype.removePage=function(e){var t=this._pageName2ID.get(e),n=this._pages[t].getContext();this._pageName2ID.delete(e),this._pages[t]=this._pageNames[t]=null,this._pCounter=0,this._ranges.renamePage(e,null),this._store.regenerate(t,!0,n)},bt.prototype.getPage=function(e){return"string"==typeof e&&(e=this._pageName2ID.get(e)),this._pages[e]},bt.prototype.getRanges=function(){return this._ranges},bt.prototype.getStore=function(){return this._store},We=bt;function bt(){var r=this;this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(e){return r._pageName2ID.get(e)},pageName:function(e){return r._pageNames[e]},pageObj:function(e){return r._pages[e]},name:function(e,t,n){var i=e.length,o=t.substr(e[i-2],e[i-1]);o=e[i-6]===E?(i=t.substr(e[i-5],e[i-4]),r._ranges.toId(i+"!"+o)||r._ranges.toId(o)):r._ranges.toId(n.pageName(n.z)+"!"+o)||r._ranges.toId(o),e.push(d,o||-1,0)},z:0},this._store=new ft({get:function(e){var t=D(e),n=t[0],e=t[1],t=t[2];return r._pages[t].getValue(n,e)},set:function(e,t,n){var i=D(e),o=i[0],e=i[1],i=i[2],e=r._pages[i].getCell(o,e,!0);return null==n&&(n=e.$format||0),e.$format=n,"string"==typeof t&&1!=n&&t&&parseFloat(t)==t&&(t=parseFloat(t)),e.value!==t&&(e.value=t,!0)}});var e=this._pages[63]=new gt(63,this._store,this._parseContext);this._ranges=new mt(this._store,e,this.getPage.bind(this))}t.D_COMMON=0,t.D_STRING=1,t.DataPage=gt,t.DataStore=We,t.Store=ft,t.T_ARG=S,t.T_DATA=d,t.T_ERROR=x,t.T_METHOD=_,t.T_NAME=C,t.T_NUMBER=M,t.T_OPERATOR=k,t.T_PAGE=E,t.T_PLACEHOLDER=w,t.T_RANGE=I,t.T_SPACE=P,t.T_TEXT=b,t.addMethod=function(e,t){ct[e]=t},t.column=s,t.fromId=D,t.methodGroups=lt,t.methods=ct,t.page=r,t.row=V,t.str2id=function(e){var t=[];return H(t,e,0),t[1]},t.str2pos=function(e){var t=[];return H(t,e,0),D(t[1]).slice(0,2)},t.str2range=function(e){var t=[];e.split(":").map(function(e){return H(t,e,0)});var n=(i=D(t[1]))[0],e=i[1],i=D(t[4]);return[n,e,i[0],i[1]]},t.toId=O},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(67)),i(t(160)),i(t(11)),i(t(32));var o=t(33);n.getTreeCell=o.getTreeCell,i(t(24)),i(t(20))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWidth=function(e,i,o){return e=e.filter(function(e){return!e.hidden}),i?e.reduce(function(e,t,n){t=t.$width;return e+=o<=n&&n<o+i?t:0},0):e[o].$width},t.getHeight=function(e,i,o){return e=e.filter(function(e){return!e.hidden}),i?e.reduce(function(e,t,n){t=t.$height;return e+=o<=n&&n<o+i?t:0},0):e[o].$height}},function(e,t,n){"use strict";var S=this&&this.__assign||function(){return(S=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var I=n(1),k=n(0),M=n(32),b=n(20),i=n(11),w=n(134),u=n(2),x=n(24);function o(e,t,n,i,o){t=u.locateNodeByClassName(o.target,"dhx_grid-fixed-cols-wrap")?0:t;var r,s,a,l=u.locateNodeByClassName(o.target,"dhx_grid-cell"),c=u.locateNodeByClassName(o.target,"dhx_span-cell");(l||c)&&i&&(r=(a=l?l.parentNode:c).parentNode,s=l?Array.prototype.indexOf.call(a.childNodes,l):n.columns.findIndex(function(e){return e.id===c.getAttribute("data-dhx-col-id")}),s=n.columns.filter(function(e){return!e.hidden})[t+s],a=l?Array.prototype.indexOf.call(r.childNodes,a):Number(c.getAttribute("data-dhx-id"))-1,a=n.data[""+((l?e:0)+a)],(i.toLocaleLowerCase().includes("touch")?n._events:n.events).fire(i,[a,s,o]))}function P(e,t,n){return{onclick:[o,e,t,n,i.GridEvents.cellClick],onmouseover:[o,e,t,n,i.GridEvents.cellMouseOver],onmousedown:[o,e,t,n,i.GridEvents.cellMouseDown],ondblclick:[o,e,t,n,i.GridEvents.cellDblClick],oncontextmenu:[o,e,t,n,i.GridEvents.cellRightClick],ontouchstart:[o,e,t,n,i.GridEvents.cellMouseDown],ontouchmove:[o,e,t,n,i.GridSystemEvents.cellTouchMove],ontouchend:[o,e,t,n,i.GridSystemEvents.cellTouchEnd]}}function E(e,t,n,i){var o=i.$editable&&i.$editable.row===t.id&&i.$editable.col===n.id,r="",s=n.align?" dhx_align-"+n.align:"dhx_align-left";i.dragMode&&"row"===i.dragItem&&(r+=(t.$drophere&&!o?" dhx_grid-cell--drophere":"")+(t.$dragtarget&&!o?" dhx_grid-cell--dragtarget":"")+(o?"":" dhx_grid-cell--drag"));var a=x.getTreeCellWidthOffset(t);return k.el(".dhx_grid-cell",S({class:"dhx_tree-cell "+(n.$cellCss[t.id]||"")+" "+(t.$items?"dhx_grid-expand-cell":"")+" "+(o?"dhx_tree-editing-cell":"")+" "+r+s,style:{width:n.$width,height:t.$height,padding:t.$items?0:"0 0 0 "+a+"px"},"data-dhx-col-id":n.id},{role:"gridcell","aria-colindex":1}),[t.$items?k.el(".dhx_grid-expand-cell-icon",S(S({class:t.$opened?"dxi dxi-chevron-up":"dxi dxi-chevron-down","data-dhx-id":t.id},{role:"button","aria-label":t.$opened?"Collapse group":"Expand group"}),{style:{padding:t.$level?"0 0 0 "+(4+a)+"px":"0 0 0 4px"}})):null,k.el(".dhx_tree-cell",{class:s+(i.autoHeight?" dhx_tree-cell_auto-height":"")},[e])])}t.getHandlers=P,t.getTreeCell=E,t.getCells=function(g){if(!g.data||!g.columns)return[];var v=g.$positions,i=g.data?g.data.slice(v.yStart,v.yEnd):[],o=g.columns.slice(v.xStart,v.xEnd),e=g.leftSplit,t=g.topSplit,_=g.selection.getCell(),m=!0,y="render",e=e&&e===g.columns.length,t=t&&t===g.data.length;return e&&(y="fixedCols"),t&&(y="fixedRows"),e&&t&&(y="both"),i.map(function(p,e){var t=i.length-1===e,n="";return g.rowCss&&(n=g.rowCss(p)),p.$css&&(n+=p.$css),k.el(".dhx_grid-row",S({style:{height:t?p.$height+1:p.$height},"data-dhx-id":p.id,class:n,_key:p.id,_flags:k.KEYED_LIST},{role:"row","aria-rowindex":v.yStart+e+1}),p.$customRender?[p.$customRender(p,g)]:o.map(function(n,e){var t;if(!n.hidden){var i=p[n.id];(n.editable||g.editable&&!1!==n.editable)&&("select"===n.editorType||"combobox"===n.editorType||"multiselect"===n.editorType)&&n.options&&(i=(i="string"==typeof i&&"multiselect"===n.editorType?i.split(",").map(function(e){return e.trim()}):[null==i?void 0:i.toString()]).map(function(t){var e;return null!==(e=null===(e=n.options.find(function(e){return e.id&&e.id.toString()===t}))||void 0===e?void 0:e.value)&&void 0!==e?e:t}).join(", "));var o=x.toFormat(i,n.type,n.format),r=function(e,t,n,i){return S({role:"gridcell","aria-colindex":t,"aria-readonly":i?"false":"true"},(t=e,i=p,e={tabindex:-1},_?_.row.id===i.id&&_.column.id===t.id&&(e.tabindex=0):m&&(e.tabindex=0,e.onfocus=function(e){var t;g.selection&&!_&&(t=e.target.parentNode.getAttribute("data-dhx-id"),(e=e.target.getAttribute("data-dhx-col-id"))&&t&&(g.selection.setCell(t,e),_=g.selection.getCell()))}),m=!1,e))},s=n.template?n.template(o,p,n):"boolean"!=typeof(t=o)&&"boolean"!==n.type||"string"==typeof t?t||0===t?t:"":""+Boolean(t);"string"==typeof s&&(s=b.isHtmlEnable(g,n)?k.el("div.dhx_grid-cell__content",S({".innerHTML":s},{role:"button","aria-label":"Edit content"})):s);var a,l,c,u,d=((n.$cellCss&&n.$cellCss[p.id]||"")+" dhx_"+n.type+"-cell").replace(/\s+/g," "),h=n.$width,f=g.$editable&&g.$editable.row===p.id&&g.$editable.col===n.id;return((f||"boolean"===n.type&&(g.editable&&(null===(c=n.editable)||void 0===c||c)||!g.editable&&n.editable))&&(a=g.leftSplit,u=g.topSplit,l=g.columns,i=g.data,c=a&&l.indexOf(n)<a,i=u&&i.indexOf(p)<u,(u=c||i)&&!(u&&("fixedCols"===y&&!i||"fixedRows"===y&&!c||"both"===y)?!0:!1)||(u=p,i=n,c=g,s=w.getEditor(u,i,c).toHTML(),d+=" dhx_grid-cell__editable",a===l.indexOf(n)+1&&--h)),"tree"===g.type&&g.firstColId===n.id)?E(s,p,n,g):(g.dragMode&&"row"===g.dragItem&&(d+=(p.$drophere&&!f?" dhx_grid-cell--drophere":"")+(p.$dragtarget&&!f?" dhx_grid-cell--dragtarget":"")+(f?"":" dhx_grid-cell--drag")),n.align&&(d+=" dhx_align-"+n.align),b.isHtmlEnable(g,n)&&(d+=" dhx_grid-cell__content_html-enable"),g.autoHeight&&(d+=" dhx_grid-cell__content_auto-height"),k.el(".dhx_grid-cell",S({class:d,style:{width:h,height:p.$height+"px"},_key:n.id,"data-dhx-col-id":n.id},r(n,v.xStart+e+1,0,g.editable)),[s]))}}))})},t.getSpans=function(m,y){var b=[],w=m.$positions,x=m.columns,E=m.data;if(!x.length||!m.spans)return null;for(var C=m.spans.sort(function(e,t){return"string"==typeof e.row&&"string"==typeof t.row?e.row.localeCompare(t.row):e.row-t.row}),e=0;e<C.length;e++)!function(e){var t=C[e].row,n=C[e].column,i=C[e].rowspan,o=C[e].colspan,r=C[e].css;if(1===i)return;var s=I.findIndex(x,function(e){return""+e.id==""+n}),a=I.findIndex(E,function(e){return""+e.id==""+t});if(s<0||a<0)return;var l=x[s],c=E[a];if(l.hidden)return;var u=C[e].text||(void 0===c[n]?"":c[n]);u="string"==typeof(u=(l.template||function(e,t,n){return e||0===e?e:""})(u,c,l))?k.el("div.dhx_span-cell-content",{".innerHTML":u}):u;for(var d=0,h=0;h<a;h++)d+=E[h].$height;for(var f=d-(y?0:1),p=0,g=s-1;0<=g;g--)p+=x[g].$width;var v=s===x.length-1,_=s+o===x.length,e=l.header[0].text?" dhx_span-cell":" dhx_span-cell dhx_span-cell--title";e+=r?" "+r:"",e+=0===a?" dhx_span-first-row":"",e+=0===s?" dhx_span-first-col":"",e+=v||_?" dhx_span-last-col":"",e+=o?" dhx_span-string-cell":" dhx_span-"+(l.type||"string")+"-cell",e+=l.align?" dhx_align-"+l.align:" dhx_align-left";l=1<o?M.getWidth(x,o,s):l.$width,c=1<i?M.getHeight(E,i,a):c.$height;b.push(k.el("div",S({class:e,style:{width:l,height:c,top:f,left:p},"data-dhx-col-id":n,"data-dhx-id":t,"aria-hidden":"true"},P(w.yStart,w.xStart,m)),[u]))}(e);return b},t.getShifts=function(e){var t=e.columns.slice(0,e.$positions.xStart),e=e.data.slice(0,e.$positions.yStart);return{x:b.getTotalWidth(t),y:b.getTotalHeight(e)}}},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(138)),i(t(75))},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(76)),i(t(155)),i(t(81))},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(77)),i(t(153)),i(t(78)),i(t(51))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.SelectionEvents||(t.SelectionEvents={})).beforeUnSelect="beforeunselect",t.afterUnSelect="afterunselect",t.beforeSelect="beforeselect",t.afterSelect="afterselect"},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(84)),i(t(176))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(10);t.DataEvents=n.DataEvents,(t=t.NavigationBarEvents||(t.NavigationBarEvents={})).inputCreated="inputCreated",t.click="click",t.openMenu="openMenu",t.beforeHide="beforeHide",t.afterHide="afterHide",t.inputFocus="inputFocus",t.inputBlur="inputBlur",t.inputChange="inputChange"},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var a=t(1),l=t(8),n=t(180),i=t(181),o=t(182),c=t(183),u=t(184),d=t(185),h=t(186),f=t(187),p=t(188),g=t(189),v=t(190),_=t(191),m=t(192),y=t(193),b=t(194),w=t(195),x=t(196),E=t(197),C=t(198),S=t(4),I=t(199),t=t(200);r.actions={setCellStyle:y.SetCellStyle,setCellValue:b.SetCellValue,setCellFormat:m.SetCellFormat,removeCellStyles:v.RemoveCellStyles,lockCell:g.LockCell,deleteRow:u.DeleteRow,addRow:i.AddRow,deleteColumn:c.DeleteColumn,addColumn:n.AddColumn,groupAction:h.GroupAction,groupRowAction:p.GroupRowAction,groupColAction:f.GroupColAction,addSheet:o.AddSheet,deleteSheet:d.DeleteSheet,renameSheet:_.RenameSheet,clear:w.Clear,clearSheet:x.ClearSheet,resizeCol:E.ResizeCol,resizeRow:C.ResizeRow,setValidation:I.SetValidation,sortCells:t.SortCells};k.prototype.execute=function(e,t){if(Array.isArray(e)){o=(o=e,n=this._config,i=o.map(function(e){var t=e.groupAction||e.action;if(t)return new r.actions[t](s(s({},e),n))}),{do:function(){i.map(function(e){return e.do()})},undo:function(){i.map(function(e){return e.undo()})}});return o.do(),this._actions.push(o),void this._sheets.push(this._config.spreadsheet.activeSheetName)}var n,i,o;a.extend(t,this._config),r.actions[e]&&(o=new r.actions[e](t),this._events.fire(l.SpreadsheetEvents.beforeAction,[e,S.cleanActionConfig(t)])&&(o.do(),t.action===l.Actions.addSheet||t.action===l.Actions.deleteSheet||t.action===l.Actions.renameSheet?this._sheets.push(null):this._sheets.push(this._config.spreadsheet.activeSheetName),this._actions.push(o),e!==l.Actions.resizeCol&&e!==l.Actions.resizeRow&&this._events.fire(l.SpreadsheetEvents.afterAction,[e,S.cleanActionConfig(t)])))},k.prototype.undo=function(){var e,t,n=this._actions.pop();n&&(n.undo(),(e=this._sheets.pop())&&(t=this._dataStore.getPage(e),this._config.spreadsheet._changeSheet(t.getMeta().toolbarId)),this._redoActions.push(n),this._redoSheets.push(e))},k.prototype.redo=function(){var e,t,n=this._redoActions.pop();n&&(n.do(),(e=this._redoSheets.pop())&&(t=this._dataStore.getPage(e),this._config.spreadsheet._changeSheet(t.getMeta().toolbarId)),this._actions.push(n),this._sheets.push(e))},t=k;function k(e){this._config=e,this._actions=[],this._redoActions=[],this._sheets=[],this._redoSheets=[],this._dataStore=e.dataStore,this._events=e.events}r.ActionsManager=t},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),u=n(17),o=n(4);function d(e,t){return'<div class="dxi dxi-'+t+' dhx_toolbar-button__icon dhx_toolbar-button__colorpicker" style="border-bottom: solid 3px '+e+'"></div>'}function r(e,t){void 0===t&&(t="1500.31");var n=e.name,e=u.getFormattedValue(t,e);return'<div class="dhx_format-item"><span class="dhx_format-name">'+(i.default[n]||n)+' </span><span class="dhx_format-helper">'+e+"</span></div>"}t.getColorpickerTemplate=d,t.updateToolbar=function(l,c,n){var e=[];(n=a({locked:!1,format:u.getFormat("common")},n)).css&&(e="string"==typeof n.css?n.css.split(" "):n.css);for(var t,i={},o=0,r=e;o<r.length;o++)var s=r[o],i=a(a({},i),dhx.css.get(s));for(t in!function(a){for(var e in a){var t=function(e){switch(e){case"color":l.data.update(e,{html:d(a[e]||"#4C4C4C","format-color-text")});break;case"background":case"background-color":l.data.update("background",{html:d(a[e]||"#FFF","format-color-fill")});break;case"text-align":if(!l.data.exists("halign"))return{value:void 0};var t="halign-"+a[e];l.data.update("halign",{icon:l.data.getItem(t).icon});var n={};l.data.getItem("halign").items.forEach(function(e){n[e.id]=!1,c.data.update(e.id,{active:e.id===t})}),n[t]=!0,l.setState(n);break;case"vertical-align":if(!l.data.exists("valign"))return{value:void 0};var i="valign-"+a[e],o={};l.data.getItem("valign").items.forEach(function(e){o[e.id]=!1,c.data.update(e.id,{active:e.id===i})}),o[i]=!0,l.setState(o),l.data.update("valign",{icon:l.data.getItem(i).icon});break;case"multiline":if(!l.data.exists("multiline"))return{value:void 0};var r="multiline-"+a[e],s={};l.data.getItem("multiline").items.forEach(function(e){s[e.id]=!1,c.data.update(e.id,{active:e.id===r})}),s[r]=!0,l.setState(s),l.data.update("multiline",{icon:l.data.getItem(r).icon});break;case"font-weight":l.data.update("font-weight-bold",{active:"bold"==a[e]||"700"==a[e]});break;case"font-style":l.data.update("font-style-italic",{active:"italic"===a[e]});break;case"text-decoration":l.data.update("text-decoration-underline",{active:"underline"===a[e]})}}(e);if("object"==typeof t)return t.value}}(a({color:"#4C4C4C",background:"#FFF","text-align":"left","vertical-align":"center","font-style":"","font-weight":"","text-decoration":"",multiline:"clip"},i)),(e=l.data.getItem("format"))&&e.items.map(function(e){return e.active=!1}),n)!function(e){switch(e){case"locked":l.data.getItem("lock")&&l.data.update("lock",{active:n[e]});break;case"format":var t=u.getDefaultFormatsMap()[n[e].mask]||"common";l.data.getItem("format")&&l.data.update("format",{value:u.getFormat(t).name||t}),l.data.getItem(t)&&l.data.update(t,{active:!0}),c.data.getItems("format").forEach(function(e){c.data.update(e.id,{active:t===e.id})})}}(t)},t.getToggledValue=function(e,t,n,i){return e=o.getCellInfo(t,e),(dhx.css.get(e.css)||{})[n]?"":i},t.getFormatItem=r,t.getFormatsDropdown=function(e){return e.formats.map(function(e){return{id:e.id,css:"dhx_format-name-wrap",twoState:!0,group:"format",html:r(e,e.example)}})}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,m=n(0),y=n(1),b=n(9),a=n(18),l=n(3),c=n(5),o=(s=a.Label,o(u,s),u.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._isValid=this._propsItem=this._propsItem=null,s.prototype._destructor.call(this),this.unmount()},u.prototype.setProperties=function(e){if(e&&!y.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},u.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},u.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(c.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[t]))},u.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[n,e]))},u.prototype.isVisible=function(){return!this.config.hidden},u.prototype.disable=function(){this.config.disabled=!0,this.paint()},u.prototype.enable=function(){this.config.disabled=!1,this.paint()},u.prototype.isDisabled=function(){return this.config.disabled},u.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue():t;if(e||this.events.fire(c.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?b.validateInput(t,this.config.validation):this.config.required?!(!b.baseInputValidate(t,this.config)||!String(t).trim().length):b.baseInputValidate(t,this.config),e||(this.config.$validationStatus=this._isValid?c.ValidationStatus.success:c.ValidationStatus.error,this.events.fire(c.ItemEvent.afterValidate,[t,this._isValid])),this._isValid},u.prototype.clearValidate=function(){this.config.$validationStatus=c.ValidationStatus.pre,this.paint()},u.prototype.clear=function(){""!==this.config.value&&(this.config.value="",this.events.fire(c.ItemEvent.change,[this.getValue()]))},u.prototype.setValue=function(e){void 0!==e&&this.config.value!==e&&(this.config.value=e,this.events.fire(c.ItemEvent.change,[this.getValue()]),b.isVerify(this.config)&&this.validate())},u.prototype.getValue=function(){var e=this.config,t=e.inputType,e=e.value;return"number"===t&&"number"==typeof e||null===e?e:"number"===t&&"string"==typeof e?e.length?Number(e):"":"string"==typeof e?e.length?e:"":void 0===e?"":String(e)},u.prototype.focus=function(){var e=this;m.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},u.prototype.blur=function(){var e=this;m.awaitRedraw().then(function(){e.getRootView().refs.input.el.blur()})},u.prototype._initView=function(e){var t,n=this;if(y.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:"input",id:e.id,name:e.name,disabled:!1,hidden:!1,inputType:"text",required:!1,validation:void 0,maxlength:void 0,minlength:void 0,min:void 0,max:void 0,icon:"",placeholder:"",autocomplete:!1,readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&m.awaitRedraw().then(function(){n.hide(!0)}),this.paint()},u.prototype._initHandlers=function(){var e=this;this.events.on(c.ItemEvent.change,function(){return e.paint()}),this.events.on(c.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?c.ValidationStatus.success:c.ValidationStatus.error,e.paint()})},u.prototype._getHandlers=function(){var t=this;return{oninput:function(e){e=e.target.value;t.config.value=e,t.events.fire(c.ItemEvent.input,[e])},onchange:function(e){e=e.target.value;t.config.value=e,t.events.fire(c.ItemEvent.change,[t.getValue()]),b.isVerify(t.config)&&t.validate(),t.paint()},onfocus:function(){t.events.fire(c.ItemEvent.focus,[t.getValue()]),t.paint()},onblur:function(){t._uid&&(t.events.fire(c.ItemEvent.blur,[t.getValue()]),t.paint())},onkeydown:function(e){t.events.fire(c.ItemEvent.keydown,[e])}}},u.prototype._draw=function(){var e=this.config,t=e.id,n=e.value,i=e.disabled,o=e.name,r=e.icon,s=e.placeholder,a=e.required,l=e.inputType,c=e.hidden,u=e.autocomplete,d=e.readOnly,h=e.maxlength,f=e.minlength,p=e.max,g=e.min,v=e.label,_=e.helpMessage,e=c?" dhx_form-group--hidden":"",c=(null===(c=null===(c=null===(c=this.getRootView())||void 0===c?void 0:c.refs)||void 0===c?void 0:c.input)||void 0===c?void 0:c.el)===document.activeElement;return m.el("div.dhx_form-group",{class:b.getFormItemCss(this.config,b.isVerify(this.config),c)+e},[this._drawLabel(),m.el(".dhx_input__wrapper",{},[m.el("div.dhx_input__container",{},[this.config.icon?m.el(".dhx_input__icon",{class:this.config.icon}):null,m.el("input.dhx_input",{type:["text","number","password"].includes(l)?l:"text","data-dhx-id":o||t,id:t||this._uid,placeholder:s||"",value:y.isDefined(n)?n:"",name:o||"",disabled:i,required:a,readOnly:d,maxlength:h,minlength:f,max:p,min:g,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,class:r?"dhx_input--icon-padding":"",autocomplete:u?"on":"off",_ref:"input","aria-label":v||_||"type "+(o||l||"text"),"aria-describedby":_?"dhx_label__help_"+(t||this._uid):null})]),b.getValidationMessage(this.config)&&m.el("span.dhx_input__caption",b.getValidationMessage(this.config))])])},u);function u(e,t){void 0===t&&(t={});var n=s.call(this,null,t)||this;return n.events=new l.EventSystem,n._propsItem=["inputType","required","validation","icon","placeholder","autocomplete","readOnly","maxlength","minlength","min","max","step","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._props=r(b.baseProps,n._propsItem),n._isValid=!0,n._initView(t),n._initHandlers(),n}t.Input=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(10);(n=t.FileStatus||(t.FileStatus={})).queue="queue",n.uploaded="uploaded",n.failed="failed",n.inprogress="inprogress",(n=t.UploaderEvents||(t.UploaderEvents={})).uploadBegin="uploadbegin",n.beforeUploadFile="beforeuploadfile",n.uploadFile="uploadfile",n.uploadFail="uploadfail",n.uploadComplete="uploadcomplete",n.uploadProgress="uploadprogress",(t.ProgressBarEvents||(t.ProgressBarEvents={})).cancel="cancel",(t=t.VaultMode||(t.VaultMode={})).grid="grid",t.list="list"},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.RealPosition||(t.RealPosition={})).left="left",i.right="right",i.top="top",i.bottom="bottom",i.center="center",(i=t.Position||(t.Position={})).right="right",i.bottom="bottom",i.center="center",i.left="left",i.top="top",(t=t.MessageContainerPosition||(t.MessageContainerPosition={})).topLeft="top-left",t.topRight="top-right",t.bottomLeft="bottom-left",t.bottomRight="bottom-right"},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";function i(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return t+t+n+n+i+i});e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function o(e){var t,n,i,o=e.r/255,r=e.g/255,s=e.b/255,a=Math.max(o,r,s),l=a-Math.min(o,r,s),c=function(e){return(a-e)/6/l+.5};return 0==l?t=n=0:(n=l/a,i=c(o),e=c(r),c=c(s),o===a?t=c-e:r===a?t=1/3+i-c:s===a&&(t=2/3+e-i),t<0?t+=1:1<t&&--t),{h:Math.floor(360*t),s:n,v:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.HSVtoRGB=function(e){var t,n={r:0,g:0,b:0},i=e.h/60,o=e.s,r=e.v,e=Math.floor(i)%6,i=i-Math.floor(i),s=255*r*(1-o),a=255*r*(1-o*i),l=255*r*(1-o*(1-i));switch(r*=255,e){case 0:n.r=r,n.g=l,n.b=s;break;case 1:n.r=a,n.g=r,n.b=s;break;case 2:n.r=s,n.g=r,n.b=l;break;case 3:n.r=s,n.g=a,n.b=r;break;case 4:n.r=l,n.g=s,n.b=r;break;case 5:n.r=r,n.g=s,n.b=a}for(t in n)n[t]=Math.round(n[t]);return n},t.RGBToHex=function(n){return Object.keys(n).reduce(function(e,t){t=n[t].toString(16).toUpperCase();return e+(t=1===t.length?"0"+t:t)},"#")},t.HexToRGB=i,t.RGBToHSV=o,t.HexToHSV=function(e){return o(i(e))},t.isHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={cancel:"Cancel",select:"Select",rightClickToDelete:"Right click to delete",customColors:"Custom colors",addNewColor:"Add new color"}},function(e,t,n){"use strict";(function(c){Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),d=n(23);function h(e){return e?e.includes("json")?"json":e.includes("xml")?"xml":"text":"text"}function i(o,r,s,e,a){var i,l=e||{};return a&&(l.Accept="application/"+a),"GET"!==s&&(l["Content-Type"]=l["Content-Type"]||"application/json"),"GET"===s&&((e=r&&"object"==typeof r?(i=r,Object.keys(i).reduce(function(e,t){var n="object"==typeof i[t]?JSON.stringify(i[t]):i[t];return e.push(t+"="+encodeURIComponent(n)),e},[]).join("&")):r&&"string"==typeof r?r:"")&&(o+=o.includes("?")?"&":"?",o+=e),r=null),window.fetch?window.fetch(o,{method:s,body:r?JSON.stringify(r):null,headers:l}).then(function(t){if(!t.ok)return t.text().then(function(e){return c.reject({status:t.status,statusText:t.statusText,message:e})});var e=a||h(t.headers.get("Content-Type"));if("raw"===e)return{headers:Object.fromEntries(t.headers.entries()),url:t.url,body:t.body};if(204!==t.status)switch(e){case"json":return t.json();case"xml":var n=d.toDataDriver(u.DataDriver.xml);return n?t.text().then(function(e){return n.toJsonObject(e)}):t.text();default:return t.text()}}):new c(function(e,t){var n,i=new XMLHttpRequest;for(n in i.onload=function(){200<=i.status&&i.status<300?("raw"===a&&e({url:i.responseURL,headers:i.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(function(e,t){t=t.split(": ");return e[t[0]]=t[1],e},{}),body:i.response}),204===i.status?e():e(function(e,t){switch(t){case"json":return JSON.parse(e);case"text":return e;case"xml":var n=d.toDataDriver(u.DataDriver.xml);return n?n.toJsonObject(e):{parseError:"Incorrect data driver type: 'xml'"};default:return e}}(i.responseText,a||h(i.getResponseHeader("Content-Type"))))):t({status:i.status,statusText:i.statusText})},i.onerror=function(){t({status:i.status,statusText:i.statusText,message:i.responseText})},i.open(s,o),l)i.setRequestHeader(n,l[n]);switch(s){case"POST":case"DELETE":case"PUT":i.send(void 0!==r?JSON.stringify(r):"");break;case"GET":default:i.send()}})}t.ajax={get:function(e,t,n){return i(e,t,"GET",n&&n.headers,void 0!==n?n.responseType:void 0)},post:function(e,t,n){return i(e,t,"POST",n&&n.headers,void 0!==n?n.responseType:void 0)},put:function(e,t,n){return i(e,t,"PUT",n&&n.headers,void 0!==n?n.responseType:void 0)},delete:function(e,t,n){return i(e,t,"DELETE",n&&n.headers,void 0!==n?n.responseType:void 0)}}}).call(this,n(14))},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(139)),i(t(74))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.LayoutEvents||(t.LayoutEvents={})).beforeShow="beforeShow",t.afterShow="afterShow",t.beforeHide="beforeHide",t.afterHide="afterHide",t.beforeResizeStart="beforeResizeStart",t.resize="resize",t.afterResizeEnd="afterResizeEnd",t.beforeAdd="beforeAdd",t.afterAdd="afterAdd",t.beforeRemove="beforeRemove",t.afterRemove="afterRemove",t.beforeCollapse="beforeCollapse",t.afterCollapse="afterCollapse",t.beforeExpand="beforeExpand",t.afterExpand="afterExpand"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.ListEvents||(t.ListEvents={})).click="click",t.doubleClick="doubleclick",t.focusChange="focuschange",t.beforeEditStart="beforeEditStart",t.afterEditStart="afterEditStart",t.beforeEditEnd="beforeEditEnd",t.afterEditEnd="afterEditEnd",t.itemRightClick="itemRightClick",t.itemMouseOver="itemMouseOver",t.contextmenu="contextmenu"},function(e,t,n){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var d=n(17),h=n(4);function o(e,t){return'<div class="dhx_custom_header_cell">\n\t\t\t'+e+'\n\t\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id='+t+'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<i class="dxi dxi-dots-vertical dhx_header_icon" data-dhx-id='+t+"></i>\n\t</div>"}t.getHeaderCell=o,t.getIndexRowCell=function(e){return'<div class="dhx_custom_index_cell">'+e+'\n\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id='+(e-1)+'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>'},t.updateColumns=function(e){var t=e.columns,i=0;t.map(function(e,t){var n;e.width=e.width||120,i+=e.hidden?0:e.width,"$index"!==e.id&&(n=h.getLetterFromNumber(t),e.header=[{text:o(n,t),css:""}],e.$letter=n)}),e.$totalWidth=i},t.updateRowsIndex=function(e){e.map(function(e,t){e.$index=t+1})},t.removeRowsCss=function(t){t.data.map(function(e){t.removeRowCss(e.id,"dhx_selected_row")})},t.setAutoHeightToRow=function(e,t,n,i){var o=(l=n.getMeta()).cols,r=l.rows,s=(c=h.getCellIds(e)).row,a=c.col,l="wrap"===i,c=h.getCellInfo(e,n),i=r[s],e=c.value,c=c.format;if(e){var c=d.getFormattedValue(e,c),a=null===(a=o[a])||void 0===a?void 0:a.width,c=h.getTextHeight(c,a);if(i.wrap=(i.wrap||0)+(l?1:-1),r[s]=u({},i),n.setMeta({rows:r}),!(null!==(a=r[s])&&void 0!==a&&a.changedByUser||l&&c<=r[s].height||!l&&i.wrap))return r[s]=u(u({},i),{height:l?c:t.config.rowHeight}),n.setMeta({rows:r}),!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.WindowEvents||(t.WindowEvents={})).resize="resize",t.headerDoubleClick="headerdoubleclick",t.move="move",t.afterShow="aftershow",t.afterHide="afterhide",t.beforeShow="beforeshow",t.beforeHide="beforehide"},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,d=n(0),a=n(3),h=n(9),l=n(7),c=n(5),u=n(18),f=n(1),o=(s=u.Label,o(p,s),p.prototype.setProperties=function(e,t){if(void 0===t&&(t=!1),e&&!f.isEmptyObj(e)&&(t||this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()]))){for(var n in e)this._props.includes(n)&&(this.config[n]=e[n]);t||this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},p.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},p.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[this.getValue()]))},p.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[this.getValue(),e]))},p.prototype.isVisible=function(){return!this.config.hidden},p.prototype.disable=function(){this.config.disabled=!0,this.paint()},p.prototype.enable=function(){this.config.disabled=!1,this.paint()},p.prototype.isDisabled=function(){return this.config.disabled},p.prototype.validate=function(e){if(void 0===e&&(e=!1),e||this.events.fire(c.ItemEvent.beforeValidate,[this.getValue()]))return(this.config.required||this.config.$required)&&(this._isValid=!!this.config.checked),e||(this.config.$validationStatus=this._isValid?c.ValidationStatus.success:c.ValidationStatus.error,this.events.fire(c.ItemEvent.afterValidate,[this.getValue(),this._isValid])),this._isValid},p.prototype.clearValidate=function(){this.config.$validationStatus=c.ValidationStatus.pre,this.paint()},p.prototype.setValue=function(e,t){void 0===t&&(t=!1),void 0!==e&&e!==this.config.checked&&(this.config.checked=!!e,t||(this.events.fire(c.ItemEvent.change,[this.getValue()]),h.isVerify(this.config)&&this.validate()))},p.prototype.getValue=function(){var e=this.config,t=e.value,e=e.checked;return t?e?t:"":!!e},p.prototype.clear=function(e){this.config.checked&&(this.config.checked=!1,e||this.events.fire(c.ItemEvent.change,[this.getValue()]))},p.prototype.destructor=function(){this.events&&this.events.clear(),this._inGroup=this._propsItem=this._props=this._isValid=this._uid=this.events=null,s.prototype._destructor.call(this),this.unmount()},p.prototype.focus=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},p.prototype.blur=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.blur()})},p.prototype.isChecked=function(){return!!this.config.checked},p.prototype._initView=function(e){var t=this;if(this._inGroup=this.config.$group,this._inGroup){for(var n in this.config={type:e.type,id:e.id,text:"",width:"content",height:"content",padding:0},e)"id"!==n&&"type"!==n&&"name"!==n&&(this.config[n]=e[n]);this._handlers={onchange:function(e){t.config.checked=e.target.checked,t.events.fire(c.ItemEvent.change,[t.getValue()]),h.isVerify(t.config)&&t.validate()},onfocus:function(){return t.events.fire(c.ItemEvent.focus,[t.getValue(),t.config.id])},onblur:function(){var e;return null===(e=t.events)||void 0===e?void 0:e.fire(c.ItemEvent.blur,[t.getValue(),t.config.id])},onkeydown:function(e){t.events.fire(c.ItemEvent.keydown,[e,t.config.id])}}}else{for(var n in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==n&&"type"!==n&&"name"!==n&&(this.config[n]=e[n]);this.config.helpMessage&&(this._helper=new l.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.show(e.target,{mode:"left"===t.config.labelPosition?"bottom":"right"})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.hide()},onchange:function(e){t.config.checked=e.target.checked,t.events.fire(c.ItemEvent.change,[t.getValue()]),h.isVerify(t.config)&&t.validate()},onfocus:function(){return t.events.fire(c.ItemEvent.focus,[t.getValue()])},onblur:function(){var e;return null===(e=t.events)||void 0===e?void 0:e.fire(c.ItemEvent.blur,[t.getValue()])},onkeydown:function(e){t.events.fire(c.ItemEvent.keydown,[e])}}}this.config.hidden&&d.awaitRedraw().then(function(){t.hide(!0)})},p.prototype._initHandlers=function(){var e=this;this.events.on(c.ItemEvent.change,function(){return e.paint()}),this.events.on(c.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?c.ValidationStatus.success:c.ValidationStatus.error,e.paint()})},p.prototype._draw=function(){var e=this.config,t=e.id,n=e.value,i=e.checked,o=e.disabled,r=e.name,s=e.required,a=e.$required,l=e.text,c=e.label,u=e.labelWidth,e=e.helpMessage;return d.el("label.dhx_checkbox.dhx_form-group.dhx_form-group--checkbox",{class:h.getFormItemCss(this.config,h.isVerify(this.config)||!!a)},this._inGroup?[d.el(".dhx_checkbox__holder",[d.el("input.dhx_checkbox__input",{type:"checkbox",id:t,value:n||"",name:r||"",disabled:o,checked:i,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input"}),d.el("span.dhx_checkbox__visual-input"),d.el("span.dhx_text",[l])])]:[c||u||e||s?this._drawLabel():null,d.el(".dhx_checkbox__container",[d.el(".dhx_checkbox__holder",[d.el("input.dhx_checkbox__input",{type:"checkbox","data-dhx-id":r||t,id:t,value:n,name:r,disabled:o,checked:i,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input","aria-label":c||"checkbox "+(l||""),"aria-describedby":e?"dhx_label__help_"+(t||this._uid):null}),d.el("span.dhx_checkbox__visual-input"),d.el("span.dhx_text",[l])]),s&&h.getValidationMessage(this.config)&&d.el("span.dhx_input__caption",h.getValidationMessage(this.config))])])},p);function p(e,t){void 0===t&&(t={});var n=s.call(this,e,t)||this;n.events=new a.EventSystem,n._isValid=!0,n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","text"],n._props=r(h.baseProps,n._propsItem),n._initView(t),n._initHandlers();return n.mount(e,d.create({render:function(){return n._draw()}})),n}t.Checkbox=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={dragAndDrop:"Drag & drop",or:"or",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={apply:"apply",reject:"reject"}},function(e,t,n){"use strict";function i(e){var t=document.activeElement;t.classList.contains("dhx_alert__apply-button")&&"Enter"===e.key||t.classList.contains("dhx_alert__confirm-reject")||t.classList.contains("dhx_alert__confirm-aply")||e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0}),t.blockScreen=function(e){var t=document.createElement("div");return t.className="dhx_alert__overlay "+(e||""),document.body.appendChild(t),document.addEventListener("keydown",i),function(){document.body.removeChild(t),document.removeEventListener("keydown",i)}}},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),d=n(44),h=750,f=200;function u(e,t,n,i,o,r){var s,a,l;switch(void 0===o&&(o=8),void 0===r&&(r=0),1<r&&(t=d.Position.center),t){case d.Position.center:return(a=e.left+window.pageXOffset+(e.width-n)/2)+o<window.pageXOffset&&(a=e.left+window.pageXOffset),{left:a,top:l=e.top+window.pageYOffset+(e.height-i)/2,pos:s=d.RealPosition.center};case d.Position.right:return(s=d.RealPosition.right,(a=e.right+window.pageXOffset+o)+n>window.innerWidth+window.pageXOffset)?u(e,d.Position.left,n,i,o,++r):{left:a,top:l=window.pageYOffset+e.top+(e.height-i)/2,pos:s};case d.Position.left:return(s=d.RealPosition.left,(a=window.pageXOffset+e.left-n-o)<0)?u(e,d.Position.right,n,i,o,++r):{left:a,top:l=window.pageYOffset+e.top+(e.height-i)/2,pos:s};case d.Position.top:return s=d.RealPosition.top,(a=window.pageXOffset+e.left+(e.width-n)/2)+n>window.innerWidth+window.pageXOffset?a=window.innerWidth+window.pageXOffset-n:a<0&&(a=0),(l=window.pageYOffset+e.top-i-o)-i<0?u(e,d.Position.bottom,n,i,o,++r):{left:a,top:l,pos:s};case d.Position.bottom:default:return(a=window.pageXOffset+e.left+(e.width-n)/2)+n>window.innerWidth+window.pageXOffset?a=window.innerWidth+window.pageXOffset-n:a<0&&(a=0),s=d.RealPosition.bottom,(l=window.pageYOffset+e.bottom+o)+i>window.innerHeight+window.pageYOffset?u(e,d.Position.top,n,i,o,++r):{left:a,top:l,pos:s}}}t.findPosition=u;var p=document.createElement("div"),g=document.createElement("span");g.className="dhx_tooltip__text",p.appendChild(g),p.setAttribute("role","tooltip"),p.style.position="absolute";var v,_=null,m=!1,y=null,b=null;function w(e){return e&&e.classList.contains("dhx_popup--window")&&e.classList.contains("dhx_popup--window_active")?2147483647:null!=e&&e.classList.contains("dhx_popup--window")||null!=e&&e.classList.contains("dhx_popup--window_modal")?2147483646:e&&e.offsetParent?w(e.offsetParent):null}function x(e,t,n,i,o,r,s){void 0===o&&(o=!1),void 0===r&&(r=8);var a=e.getBoundingClientRect();s?g.innerHTML=t:g.textContent=t,document.body.appendChild(p),p.className="dhx_widget dhx_tooltip"+(o?" dhx_tooltip--forced":"");var t=p.getBoundingClientRect(),r=u(a,n,t.width,t.height,r),l=r.left,c=r.top,r=r.pos,e=w(e);switch(e&&(p.style.zIndex=e.toString()),r){case d.RealPosition.bottom:case d.RealPosition.top:case d.RealPosition.left:case d.RealPosition.right:case d.RealPosition.center:p.style.left=l+"px",p.style.top=c+"px"}p.className+=" dhx_tooltip--"+r+" "+(i||""),m=!0,o||setTimeout(function(){p.className+=" dhx_tooltip--animate"})}function r(t,e,n){var i=n.force,o=n.showDelay,r=n.hideDelay,s=n.position,a=n.css,l=n.htmlEnable,c=n.margin;i||(b=setTimeout(function(){x(t,e,s||d.Position.bottom,a,!1,c,l)},o||h));var u=function(){var e;m&&(e=r,_&&(y=setTimeout(function(){document.body.removeChild(p),m=!1,y=null},e||f))),clearTimeout(b),t.removeEventListener("mouseleave",u),t.removeEventListener("blur",u),document.removeEventListener("mousedown",u),v=_=null};i&&x(t,e,s,a,i,c,l),t.addEventListener("mouseleave",u),t.addEventListener("blur",u),document.addEventListener("mousedown",u),v=u}function s(e,t){var n=o.toNode(t.node);n!==_&&(v&&(v(),v=null),_=n,y?(clearTimeout(y),y=null,r(n,e,i(i({},t),{force:!0}))):r(n,e,t))}function a(e){e=o.locateNode(e,"dhx_tooltip_text");e&&s(e.getAttribute("dhx_tooltip_text"),{position:e.getAttribute("dhx_tooltip_position")||d.Position.bottom,node:e})}t.getZIndex=w,t.tooltip=s,t.enableTooltip=function(){document.addEventListener("mousemove",a)},t.disableTooltip=function(){document.removeEventListener("mousemove",a)}},function(e,t,n){},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(122)),i(t(62)),i(t(61)),i(t(46));t=t(47);n.locale=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grayShades=["#000000","#4C4C4C","#666666","#808080","#999999","#B3B3B3","#CCCCCC","#E6E6E6","#F2F2F2","#FFFFFF"],t.palette=[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.ColorpickerEvents||(t.ColorpickerEvents={})).change="change",t.apply="apply",t.cancelClick="cancelClick",t.modeChange="modeChange",t.selectClick="selectClick",t.colorChange="colorChange",t.viewChange="viewChange"},function(e,t,n){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(126),s=n(129),a=n(27),c=n(23),u=n(22),p=n(1),n=(d.prototype._reset=function(){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this._meta=new WeakMap,this._loaded=!1},d.prototype.add=function(e,n){var i=this;if(this.events.fire(u.DataEvents.beforeAdd,[e])){e=Array.isArray(e)?e.map(function(e,t){return 0!==t&&(n+=1),i._add(e,n)}):this._add(e,n);return this._applySmart(),e}},d.prototype.remove=function(e){var t=this;e&&(e instanceof Array?i(e).map(function(e){t._remove(e)}):this._remove(e))},d.prototype.removeAll=function(){this._reset(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},d.prototype.exists=function(e){return!!this._pull[e]},d.prototype.getNearId=function(e){if(!this._pull[e])return this._order[0].id||""},d.prototype.getItem=function(e){return this._pull[e]},d.prototype.update=function(e,t,n){var i=this.getItem(e);i?c.isEqualObj(t,i)||(t.id&&e!==t.id?(c.dhxWarning("this method doesn't allow change id"),c.isDebug()):(t.parent&&i.parent&&t.parent!==i.parent&&this.move(e,-1,this,t.parent),p.extend(this._pull[e],t,!1),this.config.update&&this.config.update(this._pull[e]),n||this._onChange("update",e,this._pull[e])),this._applySmart()):c.dhxWarning("item not found")},d.prototype.getIndex=function(t){if(!t)return-1;var e=p.findIndex(this._order,function(e){return e&&e.id.toString()===t.toString()});return this._pull[t]&&0<=e?e:void 0},d.prototype.getId=function(e){if(this._order[e])return this._order[e].id},d.prototype.getLength=function(){return this._order.length},d.prototype.isDataLoaded=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._order.length),p.isNumeric(e)&&p.isNumeric(t)?0===this._order.slice(e,t).filter(function(e){return e&&e.$empty}).length:(this._loaded||(this._loaded=!this.find(function(e){return e.$empty})),!!this._loaded)},d.prototype.filter=function(e,t){var n;this.isDataLoaded()?(t&&t.add||(this._order=this._initOrder||this._order,this._initOrder=null),!e||"function"==typeof e||void 0!==(n=e).by&&void 0!==n.match&&(e=n.compare?function(e){return n.compare(e[n.by],n.match,e,n.multi)}:function(e){return e[n.by]==n.match}),this._filter=t&&t.smartFilter?e:null,this._applyFilters(e),this.events.fire(u.DataEvents.change)):c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype.find=function(e){for(var t in this._pull){var n=c.findByConf(this._pull[t],e);if(n)return n}return null},d.prototype.findAll=function(e){var t,n=[];for(t in this._pull){var i=c.findByConf(this._pull[t],e);i&&n.push(i)}return n},d.prototype.sort=function(e,t){this.isDataLoaded()?(t&&t.smartSorting&&(this._sorter=e),e&&this._applySorters(e),this.events.fire(u.DataEvents.change)):c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype.copy=function(e,n,i,o){var r=this;return e instanceof Array?e.map(function(e,t){return r._copy(e,n,i,o,t)}):this._copy(e,n,i,o)},d.prototype.move=function(e,n,i,o,t){var r=this;return e instanceof Array?e.map(function(e,t){return r._move(e,n,i,o,t)}):this._move(e,n,i,o,0,t)},d.prototype.forEach=function(e){for(var t=0;t<this._order.length;t++)e.call(this,this._order[t],t,this._order)},d.prototype.load=function(e,t){return"string"==typeof e&&(this.dataProxy=e=new a.DataProxy(e)),this.dataProxy=e,this._loader.load(e,t)},d.prototype.parse=function(e,t){return this._reset(),this._loader.parse(e,t)},d.prototype.$parse=function(e){var t=this.config.approximate;t&&(e=this._approximate(e,t.value,t.maxNum)),this._parse_data(e),this._applySmart(),this.events.fire(u.DataEvents.change,["load"]),this.events.fire(u.DataEvents.load)},d.prototype.save=function(e){"string"==typeof e&&(e=new a.DataProxy(e)),this._loader.save(e)},d.prototype.changeId=function(e,t,n){var i;void 0===t&&(t=p.uid()),n||this.isDataLoaded()?(i=this.getItem(e))?(i.id=t,p.extend(this._pull[e],i),this._pull[t]=this._pull[e],n||this._onChange("update",t,this._pull[t]),delete this._pull[e]):c.dhxWarning("item not found"):c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype.isSaved=function(){return!this._changes.order.length},d.prototype.map=function(e){for(var t=[],n=0;n<this._order.length;n++)t.push(e.call(this,this._order[n],n,this._order));return t},d.prototype.mapRange=function(e,t,n){e<0&&(e=0),t>this._order.length-1&&(t=this._order.length-1);for(var i=this._order.slice(e,t),o=[],r=e;r<=t;r++)o.push(n.call(this,this._order[r],r,i));return o},d.prototype.reduce=function(e,t){for(var n=0;n<this._order.length;n++)t=e.call(this,t,this._order[n],n);return t},d.prototype.serialize=function(e){void 0===e&&(e=u.DataDriver.json);for(var n=[],i=this,t=0;t<this._order.length;t++)!function(e){var t=l({},i._order[e]);Object.keys(t).forEach(function(e){e.startsWith("$")&&delete t[e]}),n.push(t)}(t);e=c.toDataDriver(e);if(e)return e.serialize(n)},d.prototype.getInitialData=function(){return this._initOrder},d.prototype.setMeta=function(e,t,n){var i;e&&((i=this._meta.get(e))||(i={},this._meta.set(e,i)),i[t]=n)},d.prototype.getMeta=function(e,t){e=this._meta.get(e);return e?e[t]:null},d.prototype.getMetaMap=function(e){return this._meta.get(e)},d.prototype.setRange=function(e,t){this._range=t?[e,t]:null},d.prototype.getRawData=function(e,t,n,i){if(n=n||this._order,1===i)return n;var o;if(this._range&&(e=this._range[0]+e,t=-1===t||e+(o=Math.abs(t-e))>this._range[1]?this._range[1]:e+o),!t||0===e&&(-1===t||t===n.length))return n;if(e>=n.length)return[];(-1===t||t>n.length)&&(t=n.length);n=n.slice(e,t);return 0!==n.filter(function(e){return e.$empty}).length&&this.events.fire(u.DataEvents.dataRequest,[e,t]),n},d.prototype._add=function(e,t){if(this.isDataLoaded()){t=this._addCore(e,t);return this._onChange("add",e.id,e),this.events.fire(u.DataEvents.afterAdd,[e]),t}c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._remove=function(e){if(this.isDataLoaded()){var t=this._pull[e];if(t){if(!this.events.fire(u.DataEvents.beforeRemove,[t]))return;this._removeCore(t.id),this._onChange("remove",e,t)}this.events.fire(u.DataEvents.afterRemove,[t])}else c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._copy=function(e,t,n,i,o){if(this.isDataLoaded()){if(!this.exists(e))return null;var r=p.uid();return(o&&(t=-1===t?-1:t+o),n)?n instanceof d||!i?n.exists(e)?(n.add(l(l({},c.copyWithoutInner(this.getItem(e))),{id:r}),t),r):(n.add(c.copyWithoutInner(this.getItem(e)),t),e):void n.add(c.copyWithoutInner(this.getItem(e)),t):(this.add(l(l({},c.copyWithoutInner(this.getItem(e))),{id:r}),t),r)}c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._move=function(e,t,n,i,o,r){if(this.isDataLoaded()){if(o&&(t=-1===t?-1:t+o),n&&n!==this&&this.exists(e)){var s=p.copy(this.getItem(e),!0);return r&&(s.id=r),(!r&&n.exists(e)||n.exists(r))&&(s.id=p.uid()),i&&(s.parent=i),n.add(s,t),this.remove(e),s.id}if(this.getIndex(e)===t)return null;s=this._order.splice(this.getIndex(e),1)[0];return-1===t&&(t=this._order.length),this._order.splice(t,0,s),this.events.fire(u.DataEvents.change,[e,"update",this.getItem(e)]),e}c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._addCore=function(e,t){var n;return this.config.init&&(e=this.config.init(e)),e.id=null!==(n=e.id)&&void 0!==n?n:p.uid(),this._pull[e.id]&&c.dhxError("Item "+e.id+" already exist"),this._initOrder&&!c.isTreeCollection(this)&&this._addToOrder(this._initOrder,e,t),this._addToOrder(this._order,e,t),e.id},d.prototype._removeCore=function(t){0<=this.getIndex(t)&&(this._order=this._order.filter(function(e){return e.id!==t}),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==t}),delete this._pull[t])},d.prototype._parse_data=function(e){var t=this._order.length;this.config.prep&&(e=this.config.prep(e));for(var n=0,i=e;n<i.length;n++){var o=i[n];this._addCore(o,t++)}},d.prototype._approximate=function(e,t,n){for(var i=e.length,o=t.length,r=Math.floor(i/n),s=Array(Math.ceil(i/r)),a=0,l=0;l<i;l+=r){for(var c=p.copy(e[l]),u=Math.min(i,l+r),d=0;d<o;d++){for(var h=0,f=l;f<u;f++)h+=e[f][t[d]];c[t[d]]=h/(u-l)}s[a++]=c}return s},d.prototype._onChange=function(e,t,n){for(var i=0,o=0,r=this._changes.order;o<r.length;o++){var s=r[o],a=this._changes.order.indexOf(s);if(s.id===t&&!s.saving&&(i+=1,a===this._changes.order.length-1||this._changes.order[a+1].id!==t))return s.error&&(s.error=!1),s=l(l({},s),{obj:n,status:e}),10<(i+=1)?this._changes.order.splice(a,i-10,s):this._changes.order.splice(a+1,0,s),this._loader.updateChanges(this._changes),"remove"===e&&n.$emptyRow?void 0:void this.events.fire(u.DataEvents.change,[t,e,n])}this._changes.order.push({id:t,status:e,obj:l({},n),saving:!1}),this._loader.updateChanges(this._changes),this.events.fire(u.DataEvents.change,[t,e,n])},d.prototype._addToOrder=function(e,t,n){0<=n&&e[n]?(this._pull[t.id]=t,e.splice(n,0,t)):(this._pull[t.id]=t,e.push(t))},d.prototype._applySmart=function(){this._filter&&this._applyFilters(),this._sorter&&this._applySorters()},d.prototype._applySorters=function(e){this._sort.sort(this._order,e,this._sorter),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,e,this._sorter)},d.prototype._applyFilters=function(t){var e,n=this._filter;t===n&&(t=null),(t||n)&&(e=this._order.filter(function(e){return(!t||t(e))&&(!n||n(e))}),this._initOrder||(this._initOrder=this._order),this._order=e)},d);function d(e,t){var i=this;this._changes={order:[]},this.config=e||{},this._sort=new s.Sort,this._loader=new r.Loader(this,this._changes),this.events=t||new o.EventSystem(this),this.events.on(u.DataEvents.dataRequest,function(e,t){var n=i.dataProxy;n&&n.updateUrl&&(n.updateUrl(null,{from:e,limit:n.config.limit||t-e}),i.load(n))}),this.events.on(u.DataEvents.loadError,function(e){setTimeout(function(){"string"!=typeof e?c.dhxError(e):c.dhxWarning(e)},0)}),this._reset()}t.DataCollection=n},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(65),r=n(66),n=n(127);t.dataDrivers={json:o.JsonDriver,csv:r.CsvDriver},t.dataDriversPro=i(i({},t.dataDrivers),{xml:n.XMLDriver})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.toJsonArray=function(e){return this.getRows(e)},o.prototype.serialize=function(e){return e},o.prototype.getFields=function(e){return e},o.prototype.getRows=function(e){return"string"==typeof e?JSON.parse(e):e},o);function o(){}t.JsonDriver=i},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=(r.prototype.getFields=function(e,t){for(var n=new RegExp('(?<!")'+this.config.columnDelimiter+'(?!")'),i=e.trim().split(n),o={},r=0;r<i.length;r++)o[t?t[r]:r+1]=isNaN(Number(i[r]))?i[r].replace(/"[,;"]"/gi,function(e){return e.split("").splice(1,1).slice(-1,1).join("")}):parseFloat(i[r]);return o},r.prototype.getRows=function(e){return e.trim().split(this.config.rowDelimiter)},r.prototype.toJsonArray=function(e){var t=this,n=this.getRows(e),i=this.config.names;return this.config.skipHeader&&(e=n.splice(0,this.config.skipHeader),this.config.nameByHeader&&(i=e[0].trim().split(this.config.columnDelimiter))),n.map(function(e){return t.getFields(e,i)})},r.prototype.serialize=function(e,t){var n=e[0]?Object.keys(e[0]).filter(function(e){return!e.startsWith("$")}).join(this.config.columnDelimiter)+this.config.columnDelimiter+this.config.rowDelimiter:"",e=this._serialize(e);return t?e:n+e},r.prototype._serialize=function(e){var o=this;return e.reduce(function(e,i){var t=Object.keys(i).reduce(function(e,t,n){return t.startsWith("$")||"items"===t?e:""+e+i[t].replaceAll(/[,;"]/gi,function(e){return'"'+e+'"'})+(n===i.length-1?"":o.config.columnDelimiter)},"");return i.items?e+(e?"\n":"")+t+o._serialize(i.items):""+e+(e?o.config.rowDelimiter:"")+t},"")},r);function r(e){this.config=i(i({},{skipHeader:0,nameByHeader:!1,rowDelimiter:"\n",columnDelimiter:","}),e),this.config.nameByHeader&&(this.config.skipHeader=1)}t.CsvDriver=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=this&&this.__assign||function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),r=n(3),l=n(2),p=n(1),c=n(19),u=n(6),h=n(10),d=n(132),_=n(24),f=n(32),m=n(20),v=n(133),y=n(11),b=n(68),w=n(15),x=n(157),E=n(158),C=n(13),S=n(159),I=n(16),o=(s=u.View,o(k,s),k.prototype.destructor=function(){this._destroyContent(),this.keyManager&&this.keyManager.destructor(),this.events.events={},this.events.context=null,this._activeFilters=this._filterData=this._scroll=this.content=null,this.unmount()},k.prototype.setColumns=function(e){var t=this;this.config.columns=e,this._parseColumns(!0),this._adjustColumns(),this._checkFilters(),this._checkMarks(),this.paint(),this.config.keyNavigation&&a.awaitRedraw().then(function(){t._initHotKey(!0),t.paint()})},k.prototype.addRowCss=function(e,t){var n=this.data.getItem(e),e=n.$css||"";e.match(new RegExp(t,"g"))||(n.$css=e+" "+t,this.paint())},k.prototype.removeRowCss=function(e,t){e=this.data.getItem(e),t=e.$css?e.$css.replace(t,""):"";e.$css=t,this.paint()},k.prototype.addCellCss=function(e,t,n){t=this._getColumn(t);t&&(t.$cellCss[e]?t.$cellCss[e]+=t.$cellCss[e].match(new RegExp(n,"g"))?"":" "+n:this.data.getItem(e)&&(t.$cellCss[e]=n+" "),this.paint())},k.prototype.removeCellCss=function(e,t,n){t=this._getColumn(t);t&&(t.$cellCss[e]?(t.$cellCss[e]=t.$cellCss[e].replace(n,""),this.paint()):this.data.getItem(e)&&(t.$cellCss[e]=""))},k.prototype.showColumn=function(e){var t=this._getColumn(e);t&&t.hidden&&this.events.fire(y.GridEvents.beforeColumnShow,[t])&&(t.hidden=!1,this.config.$totalWidth+=t.$width,(e=this._hiddenFilters&&this._hiddenFilters[t.id])&&(this._activeFilters[t.id]=e,delete this._hiddenFilters[t.id]),this.paint(),this._checkFilters(),this.events.fire(y.GridEvents.afterColumnShow,[t]))},k.prototype.hideColumn=function(e){var t=this._getColumn(e);t&&!t.hidden&&this.events.fire(y.GridEvents.beforeColumnHide,[t])&&(t.hidden=!0,this.config.$totalWidth-=t.$width,(e=this._activeFilters&&this._activeFilters[t.id])&&(this._hiddenFilters||(this._hiddenFilters={}),this._hiddenFilters[t.id]=e,delete this._activeFilters[t.id],this.data.filter()),this.paint(),this._checkFilters(),this.events.fire(y.GridEvents.afterColumnHide,[t]))},k.prototype.isColumnHidden=function(e){e=this._getColumn(e);if(e)return!!e.hidden},k.prototype.showRow=function(e){var t;p.isDefined(e)&&(t=e.toString(),(e=this.data.getItem(t))&&e.hidden&&this.events.fire(y.GridEvents.beforeRowShow,[e])&&(this.data.update(t,{hidden:!1}),this.data.filter(function(e){return!e.hidden}),this.events.fire(y.GridEvents.afterRowShow,[e])))},k.prototype.hideRow=function(e){var t;p.isDefined(e)&&(t=e.toString(),(e=this.data.getItem(t))&&this.events.fire(y.GridEvents.beforeRowHide,[e])&&(this.data.update(t,{hidden:!0}),this.data.filter(function(e){return!e.hidden}),this.events.fire(y.GridEvents.afterRowHide,[e])))},k.prototype.isRowHidden=function(e){if(p.isDefined(e)){e=this.data.getItem(e.toString());return e?!!e.hidden:void 0}},k.prototype.getScrollState=function(){return{x:this._scroll.left,y:this._scroll.top}},k.prototype.scroll=function(e,t){var n=this.getRootView().refs.grid_body.el.querySelector(".scroll-view")||this.getRootView().refs.grid_body.el;n.scrollLeft=!e&&0!==e||"number"!=typeof e?n.scrollLeft:e,n.scrollTop=!t&&0!==t||"number"!=typeof t?n.scrollTop:t,this.paint()},k.prototype.scrollTo=function(t,n){var e=this.selection.getCell(),i=this.config.columns.filter(function(e){return!e.hidden}),o=p.findIndex(i,function(e){return e.id==n}),r=e?e.column:this.config.columns[0],s=p.findIndex(i,function(e){return e.id==r.id}),a=this.config.leftSplit?m.getTotalWidth(i.slice(0,this.config.leftSplit)):0,l=m.getTotalWidth(i.slice(0,o))-(o-s<0?a:0),c=this.data.getRawData(0,-1),u=p.findIndex(c,function(e){return e.id==t}),d=m.getTotalHeight(c.slice(0,u)),h=this.getScrollState(),f=this.config.width+h.x,e=this.config.height+h.y-this.config.headerRowHeight*this.config.$headerLevel,s=d-h.y-c[u].$height,a=l-h.x-i[o].$width,e=d+2*c[u].$height+18-e,f=l+2*i[o].$width+18-f,e=0<s&&e<0?0:s<0?s:e,f=0<a&&f<0?0:a<0?a:f;this.scroll(f+h.x,e+h.y)},k.prototype.adjustColumnWidth=function(t,e){void 0===e&&(e=!0);var n=this.config.columns.filter(function(e){return!e.hidden}),i=n.filter(function(e){return e.id===t}),r=this._adjustColumnsWidth(this.config.data,i,e);this.config.$totalWidth=n.reduce(function(e,t){var n,i,o;return r[t.id]&&(t.$fixed=!0,n=t.maxWidth,i=t.minWidth,o=r[t.id],t.$width=o,n&&n<o&&(t.$width=n),i&&t.$width<i&&(t.$width=i)),e+t.$width},0),this.paint()},k.prototype.getCellRect=function(t,n){var e=this.config.columns.filter(function(e){return!e.hidden}),i=this.data.getRawData(0,-1),o=this.getSpan(t,n),r=p.findIndex(e,function(e){return e.id==n}),s=p.findIndex(i,function(e){return e.id==t});return{x:m.getTotalWidth(e.slice(0,r)),y:m.getTotalHeight(i.slice(0,s)),height:null!=o&&o.rowspan?f.getHeight(i,o.rowspan,s):i[s]?i[s].$height:0,width:null!=o&&o.colspan?f.getWidth(e,o.colspan,r):e[r]?e[r].$width:0}},k.prototype.getColumn=function(t){var e=p.findIndex(this.config.columns,function(e){return e.id==t});if(0<=e)return this.config.columns[e]},k.prototype.addSpan=function(t){this.config.spans=this.config.spans||[];var e=p.findIndex(this.config.spans,function(e){return""+e.row==""+t.row&&""+e.column==""+t.column});0<=e?this.config.spans[e]=t:(this.config.spans.push(t),this.paint())},k.prototype.getSpan=function(t,n){if(this.config.spans){var e=p.findIndex(this.config.spans,function(e){return""+e.row==""+t&&""+e.column==""+n});return this.config.spans[e]}},k.prototype.removeSpan=function(t,n){var e;this.config.spans&&(e=p.findIndex(this.config.spans,function(e){return""+e.row==""+t&&""+e.column==""+n}),this.config.spans.splice(e,1),this.paint())},k.prototype.editCell=function(e,t,n){var i,o=this.data.getItem(e),r=this.getColumn(t);o&&r?(i=r.editorType,n||("date"===r.type&&(n="datePicker"),"boolean"===r.type&&(n="checkbox"),i&&(n=i)),this.events.fire(y.GridEvents.beforeEditStart,[o,r,n])&&(null!==(i=this.config.$editable)&&void 0!==i&&i.editor||this.config.$editable&&this.config.$editable.row===e&&this.config.$editable.col===t&&this.config.$editable.editorType===n||(this.config.$editable={row:o.id,col:r.id,editorType:n},this.selection.config.disabled||this.selection.setCell(e.toString(),t.toString()),this.paint(),this.events.fire(y.GridEvents.afterEditStart,[o,r,n])))):h.dhxWarning("item not found")},k.prototype.editEnd=function(e){this.config.$editable&&this.config.$editable.editor&&this.config.$editable.editor.endEdit(e)},k.prototype.getSortingState=function(){return{dir:this._sortDir,by:this._sortBy}},k.prototype.getHeaderFilter=function(n){var i=this,e=this.getColumn(n);if(e){var o=null;return e.header.forEach(function(e){var t;e.content&&(t=i.content[e.content].element[n],o="comboFilter"===e.content?t:i.getRootView().refs[n+"_filter"].el)}),o}},k.prototype.edit=function(e,t,n){this.editCell(e,t,n)},k.prototype._createView=function(){var n=this;return a.create({render:function(e,t){return b.render(e,t,n._htmlEvents,n.selection,n._uid)}},this)},k.prototype._parseColumns=function(e){void 0===e&&(e=!1),_.normalizeColumns(this.config,e);e=this.config.columns.filter(function(e){return!e.hidden});_.countColumns(this.config,e)},k.prototype._parseData=function(){this.config.data=this._prepareData(this.data),this._detectColsTypes(),this._checkFilters(),this._checkMarks(),this.data.filter(function(e){return!e.hidden}),this._render()},k.prototype._createCollection=function(e){this.data=new h.DataCollection({prep:e},this.events)},k.prototype._getRowIndex=function(e){return this.data.getIndex(e)},k.prototype._setEventHandlers=function(){function n(e){return 1}var d=this;this.data.events.on(h.DataEvents.load,function(){d.data.filter(function(e){return e}),d._parseData(),d._checkFilters()}),this.data.events.on(h.DataEvents.change,function(t,e,n){if("setPage"!==e){if("add"===e||"update"===e||"remove"===e?(!t||"remove"!==e||(i=d.selection.getCells().find(function(e){return e.row.id===t}))&&d.selection.removeCell(i.row.id,i.column.id),d.config.data=d._prepareData(d.data)):d._adjustColumns(),t&&(d._filterData=d.data.map(function(e){return e})||[],d._checkFilters()),d._detectColsTypes(),d._removeMarks(),d._checkMarks(),d.config.autoEmptyRow&&(!d._activeFilters||p.isEmptyObj(d._activeFilters))){var i=d.data.find({by:"$emptyRow",match:!0});if(i){if(i.id===t)return;d.data.move(i.id,d.data.getLength()-1)}else d._addEmptyRow()}d._render()}else a.awaitRedraw().then(function(){var e=d.config.columns.find(function(e){return!0!==e.hidden});d.scrollTo(d.data.getId(n[0]).toString(),e.id.toString()),d._render()})}),this.data.events.on(h.DataEvents.removeAll,function(){d.config.columns.map(function(t){t.header.map(function(e){!e.content||"selectFilter"!==e.content&&"comboFilter"!==e.content||(t.$uniqueData=[])})})}),this.events.on(h.DragEvents.beforeDrag,function(e,t){return d.data.getItem(e.start)?d.events.fire(y.GridEvents.beforeRowDrag,[e,t]):"column"===d.config.dragItem||"both"===d.config.dragItem?d.events.fire(y.GridEvents.beforeColumnDrag,[e,t]):void 0}),this.events.on(h.DragEvents.dragStart,function(e,t){n({$dragtarget:!0}),d.data.getItem(e.start)?d.events.fire(y.GridEvents.dragRowStart,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.dragColumnStart,[e,t])}),this.events.on(h.DragEvents.dragIn,function(e,t){d.data.getItem(e.start)?d.events.fire(y.GridEvents.dragRowIn,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.dragColumnIn,[e,t])}),this.events.on(h.DragEvents.dragOut,function(e,t){d.data.getItem(e.start)?d.events.fire(y.GridEvents.dragRowOut,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.dragColumnOut,[e,t])}),this.events.on(h.DragEvents.canDrop,function(e,t){n({$drophere:!0}),d.data.getItem(e.start)||d.data.getItem(e.target)?d.events.fire(y.GridEvents.canRowDrop,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.canColumnDrop,[e,t])}),this.events.on(h.DragEvents.cancelDrop,function(e,t){n({$drophere:void 0}),d.data.getItem(e.start)?d.events.fire(y.GridEvents.cancelRowDrop,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.cancelColumnDrop,[e,t])}),this.events.on(h.DragEvents.beforeDrop,function(e,t){return"row"!==d.config.dragItem||"both"!==d.config.dragMode&&"target"!==d.config.dragMode?"column"===d.config.dragItem||"both"===d.config.dragItem?d.events.fire(y.GridEvents.beforeColumnDrop,[e,t]):void 0:d.events.fire(y.GridEvents.beforeRowDrop,[e,t])}),this.events.on(h.DragEvents.afterDrop,function(t,e){var n;if(d.data.getItem(t.start)){d.events.fire(y.GridEvents.afterRowDrop,[t,e]);for(var i=d.data.getItem(t.start),o=0,r=d.config.columns;o<r.length;o++){var s=r[o];void 0===i[s.id]&&d.data.update(i.id,((n={})[s.id]=null,n),!0)}var a,l=d.data.getInitialData(),c=null==l?void 0:l.findIndex(function(e){return e.id===t.start}),u=null==l?void 0:l.findIndex(function(e){return e.id===t.target});for(a in-1<c&&-1<u&&null!=l&&l.splice(u,0,null==l?void 0:l.splice(c,1)[0]),d.config.data=d._prepareData(l||d.data.map(function(e){return e})),d.data.parse(d.config.data),d._activeFilters)d.data.filter(d._activeFilters[a],{add:!0})}else"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.afterColumnDrop,[t,e])}),this.events.on(h.DragEvents.afterDrag,function(e,t){n({$dragtarget:void 0}),d.data.getItem(e.start)?d.events.fire(y.GridEvents.afterRowDrag,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.afterColumnDrag,[e,t]),d.config.data=d._prepareData(d.data instanceof Array?d.data.map(function(e){return e}):d.data.getInitialData()||d.data),d.data.parse(d.config.data)}),this.events.on(y.GridEvents.cellMouseDown,function(e,t,n){n.targetTouches?(d._touch.timer=setTimeout(function(){d._dragStart(n)},d._touch.duration),d._touch.timeStamp?(d._touch.dblDuration>=d._touch.timeStamp-+n.timeStamp.toFixed()&&((!1!==t.editable&&d.config.editable||t.editable)&&d.editCell(e.id,t.id,t.editorType),n.preventDefault(),d.events.fire(y.GridEvents.cellDblClick,[e,t,n])),d._touch.timeStamp=null):d._touch.timeStamp=+n.timeStamp.toFixed(),setTimeout(function(){d._touch.timeStamp=null},d._touch.dblDuration)):d._dragStart(n)}),this._events.on(y.GridSystemEvents.cellTouchMove,function(e,t,n){d._touch.start&&n.preventDefault(),d._clearTouchTimer()}),this._events.on(y.GridSystemEvents.cellTouchEnd,function(){d._touch.start=!1,d._clearTouchTimer()}),this.events.on(y.GridEvents.filterChange,function(t,e,n){var i;t=null!=t?t:"",!d.config.autoEmptyRow||(i=d.data.find({by:"$emptyRow",match:!0}))&&d.data.remove(i.id),d._activeFilters||(d._activeFilters={});var o,r=d._getColumn(e),s=r.header.filter(function(e){return e.content===n&&void 0!==e.customFilter})[0];for(o in""!==t?("combobox"!==r.editorType&&"select"!==r.editorType&&"multiselect"!==r.editorType||!r.options||(t=Array.isArray(t)?t.map(function(t){var e;return(null===(e=r.options.find(function(e){return"string"==typeof e?e===t:e.value===t}))||void 0===e?void 0:e.id)||t}):null!==(i=null===(i=r.options.find(function(e){return"string"==typeof e?e===t:e.value===t}))||void 0===i?void 0:i.id)&&void 0!==i?i:t),d._activeFilters[e]={by:e,match:t,compare:null!==(s=null==s?void 0:s.customFilter)&&void 0!==s?s:d.content[n].match,multi:"multiselect"===(null==r?void 0:r.editorType)}):delete d._activeFilters[e],d.data.filter(function(e){return e}),d._activeFilters)d.data.filter(d._activeFilters[o],{add:!0})}),this.events.on(y.GridEvents.scroll,function(e){d._scroll={top:e.y,left:e.x},d.editEnd(),d.paint()}),this.events.on(y.GridEvents.cellDblClick,function(e,t){(!1!==t.editable&&d.config.editable||t.editable)&&d.editCell(e.id,t.id,t.editorType)}),this.events.on(y.GridEvents.afterEditEnd,function(e,t,n){var i,o;null!==(i=d.config.$editable)&&void 0!==i&&i.editor&&(d.config.$editable.col!==n.id||d.config.$editable.row!==t.id)||(t=d.config.$editable?(o=d.config.$editable.row,d.config.$editable.col):(o=t.id,n.id),delete(n=d.data.getItem(o)).$emptyRow,void 0!==e&&d.data.update(o,g(g({},n),((n={})[t]=e,n))),d.config.$editable=null,d._checkFilters(),d.paint())}),this.events.on(y.GridEvents.headerCellMouseDown,function(e,t){var n=t.target.getAttribute("dhx_resized");n&&d.events.fire(y.GridEvents.beforeResizeStart,[e,t])&&E.startResize(d,n.toString(),t,function(){d.paint(),d.config.$resizing=null,d.events.fire(y.GridEvents.afterResizeEnd,[e,t])}),t.targetTouches&&(d._touch.timeStamp?(d._touch.dblDuration>=d._touch.timeStamp-+t.timeStamp.toFixed()&&(t.preventDefault(),d.events.fire(y.GridEvents.headerCellDblClick,[e,t])),d._touch.timeStamp=null):d._touch.timeStamp=+t.timeStamp.toFixed(),setTimeout(function(){d._touch.timeStamp=null},d._touch.dblDuration))}),this.events.on(y.GridEvents.footerCellDblClick,function(e,t){t.targetTouches&&(d._touch.timeStamp?(d._touch.dblDuration>=d._touch.timeStamp-+t.timeStamp.toFixed()&&(t.preventDefault(),d.events.fire(y.GridEvents.footerCellDblClick,[e,t])),d._touch.timeStamp=null):d._touch.timeStamp=+t.timeStamp.toFixed(),setTimeout(function(){d._touch.timeStamp=null},d._touch.dblDuration))}),this.events.on(y.GridEvents.resize,function(){d._parseColumns(),d._checkFilters()})},k.prototype._addEmptyRow=function(){var e=this.data.getId(this.data.getLength()-1),t=this.data.getItem(e),e=this.config.columns.filter(function(e){return!e.hidden});m.isRowEmpty(t)||this.data.add(e.reduce(function(e,t){return e[t.id]="",e},{$emptyRow:!0}))},k.prototype._sort=function(n,e,t){var i=this;e?this._sortDir=e:this._sortBy===n?this._sortDir="asc"===this._sortDir?"desc":"asc":this._sortDir="asc";this._sortBy=n,this.data.sort({by:n,dir:this._sortDir,as:null!=t?t:function(e){var t=i.getColumn(n);return e&&"date"===t.type?("string"==typeof e?w.stringToDate(e,t.format):e).getTime():e?""+e:""}}),this.events.fire(y.GridEvents.afterSort,[this.getColumn(n),this._sortDir])},k.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},k.prototype._checkFilters=function(){var o=this,n=this._filterData;if(n){this.config.columns.forEach(function(t){t.header.forEach(function(e){!e.content||"selectFilter"!==e.content&&"comboFilter"!==e.content||(e=t.header.find(function(e){return e.filterConfig}),e=_.getUnique(n,t.id,e?e.filterConfig.multiselection:null),t.$uniqueData&&t.$uniqueData.length>e.length?e.forEach(function(e){t.$uniqueData.includes(e)||t.$uniqueData.push(e)}):t.$uniqueData=e)})});var e,r=this;for(e in this._activeFilters)!function(t){var n=r.config.columns.find(function(e){return e.id===t}),e=n.header.find(function(e){return!!e.content}),i=!1,i=Array.isArray(r._activeFilters[t].match)?r._activeFilters[t].match.reduce(function(e,t){if(n.$uniqueData.find(function(e){return e.toString()===t}))return!0},!1):n.$uniqueData.find(function(e){return e.toString()===o._activeFilters[t].match});!e||"selectFilter"!==e.content&&"comboFilter"!==e.content||i?r.data.filter(r._activeFilters[t],{add:!0}):(delete r._activeFilters[t],r.data.filter())}(e)}},k.prototype._adjustColumns=function(){var e,r,t,n=this;"boolean"==typeof this.config.adjust||"data"===this.config.adjust||"header"===this.config.adjust||"footer"===this.config.adjust?(t=this.config.columns.filter(function(e){return!e.hidden})).length&&(e=this.config.data&&this.config.data.length?this.config.data:this.data.map(function(e){return e}),r=this._adjustColumnsWidth(e,t),this.config.$totalWidth=t.reduce(function(e,t){t.$fixed=!0;var n=t.maxWidth,i=t.minWidth,o=r[t.id];return t.$width=o,n&&n<o&&(t.$width=n),i&&t.$width<i&&(t.$width=i),e+t.$width},0)):(t=this.config.columns.filter(function(e){return!e.hidden&&e.adjust})).length&&t.forEach(function(e){n.adjustColumnWidth(e.id,e.adjust)})},k.prototype._prepareData=function(e){var t=this;return this.config.autoHeight&&(this.config.autoHeight=!1),this._adjustColumns(),e.map(function(e){return e.$height=e.height||t.config.rowHeight,e})},k.prototype._adjustColumnsWidth=function(e,t,n){void 0===n&&(n=this.config.adjust);var i={};if("header"===n||!0===n){var o=t.filter(function(e){return e.header});if(u=_.getMaxColsWidth(this._prepareColumnData(o,"header"),o,{font:"bold 14.4px Arial"},"header"))for(var r=0,s=Object.entries(u);r<s.length;r++)var a=s[r],l=a[0],c=a[1],i=Object.assign(i,((a={})[l]=+c+(m.isSortable(this.config,this.getColumn(l))?36:16),a))}if("footer"===n||!0===n){var u,o=t.filter(function(e){return e.footer});if(u=_.getMaxColsWidth(this._prepareColumnData(o,"footer"),o,{font:"bold 14.4px Arial"},"footer"))for(var d=0,h=Object.entries(u);d<h.length;d++){var f=h[d],l=f[0],c=f[1];(i[l]&&i[l]<+c+16||!i[l])&&(i=Object.assign(i,((f={})[l]=+c+16,f)))}}if(("data"===n||!0===n)&&(u=_.getMaxColsWidth(e,t,{font:"normal 14.4px Arial"},"data")))for(var p=0,g=Object.entries(u);p<g.length;p++){var v=g[p],l=v[0],c=v[1];(i[l]&&i[l]<+c+16||!i[l])&&(i=Object.assign(i,((v={})[l]=+c+16,v)))}return i},k.prototype._prepareColumnData=function(e,t){for(var n,i,o=[],r=0;r<e.length;r++){for(var s=[],a=0;a<(null===(n=e[a])||void 0===n?void 0:n[t].length);a++){var l={};null!==(n=null===(n=e[r])||void 0===n?void 0:n[t][a])&&void 0!==n&&n.text?(l[e[r].id]=(null===(i=null===(i=e[r])||void 0===i?void 0:i[t][a])||void 0===i?void 0:i.text)||"",s.push(l)):null!==(i=null===(i=e[r])||void 0===i?void 0:i[t][a])&&void 0!==i&&i.content&&(l[e[r].id]=this.content[null===(i=null===(i=e[r])||void 0===i?void 0:i[t][a])||void 0===i?void 0:i.content].toHtml(this.getColumn(e[r].id),this.config)||"",s.push(l))}for(var c=0;c<s.length;c++)for(var u=0,d=Object.entries(s[c]);u<d.length;u++){var h=d[u],f=h[0],p=h[1];o[c]=g({},o[c])||{},o[c]=Object.assign(o[c],((h={})[f]=p,h))}}return o},k.prototype._dragStart=function(e){if(this.config.dragMode&&("row"===this.config.dragItem||"both"===this.config.dragItem)&&!this.config.$editable){var t=this._getColumn(e.target.getAttribute("data-dhx-col-id"));if(!1!==(null==t?void 0:t.draggable)){t=l.locateNode(e,"data-dhx-id"),t=t&&t.getAttribute("data-dhx-id");return e.targetTouches&&(this._touch.start=!0),h.dragManager.onMouseDown(e,[t])}}},k.prototype._getColumn=function(e){for(var t=0,n=this.config.columns;t<n.length;t++){var i=n[t];if(i.id==e)return i}},k.prototype._init=function(){this.events=new r.EventSystem(this),this._events=new r.EventSystem(this),this._attachDataCollection(),this.export=new d.Exporter(this),this._setEventHandlers()},k.prototype._attachDataCollection=function(){var t=this;if(this.config.data instanceof h.DataCollection)return this.data=this.config.data,void(this.config.data=this.data.serialize());this._createCollection(function(e){return e.spans&&(t.config.spans=e.spans,e=e.data),e})},k.prototype._setMarks=function(i,o){for(var e=this.data.map(function(e){return{id:e.id,data:e[i.id],row:e}}),r=this.data.map(function(e){return e[i.id]}),t=0,n=e;t<n.length;t++)!function(e){var t,n=o(e.data,r,e.row,i);n&&(i.$cellCss=i.$cellCss||{},t=(i.$cellCss[e.id]||"").split(" "),n.split(" ").map(function(e){t.includes(e)||t.push(e)}),i.$cellCss[e.id]=t.join(" "))}(n[t])},k.prototype._checkMarks=function(){var t=this;this.config.columns.map(function(e){var o=e.mark;o&&("function"==typeof o?t._setMarks(e,o):t._setMarks(e,function(e,t){var n=[];t.forEach(function(e){null!=e&&""!==e&&n.push(parseFloat(e))});var i=p.getMinArrayNymber(n),t=p.getMaxArrayNymber(n);return o.max&&t===parseFloat(e)?o.max:!(!o.min||i!==parseFloat(e))&&o.min}))})},k.prototype._removeMarks=function(){this.config.columns.forEach(function(e){e.mark&&(e.$cellCss={})})},k.prototype._detectColsTypes=function(){this.config.columns.forEach(function(e){return e.type?e:e.format?(e.type="number",e):void(e.type||(e.type="string"))})},k.prototype._destroyContent=function(){for(var e in this.content)"comboFilter"===e&&this.content[e].destroy()},k.prototype._render=function(){this.paint()},k.prototype._initHotKey=function(e){void 0===e&&(e=!1);var t=S.getKeysHandlers(this);for(n in t)this.keyManager.exist(n)||this.keyManager.addHotKey(n,t[n]);if(!e)for(var n in this.config.hotkeys)this.keyManager.addHotKey(n,this.config.hotkeys[n])},k);function k(e,t){var r=s.call(this,e,t)||this;r._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null},r.config=p.extend({rowHeight:40,headerRowHeight:40,footerRowHeight:40,keyNavigation:!0,sortable:!0,columns:[],data:[],tooltip:!0,rootParent:"string"==typeof e&&e||r._uid,headerSort:!0},t),r.content=x.getContent(),r._scroll={top:0,left:0},r.config.autoWidth=r.config.autoWidth||r.config.fitToContainer,r.config.adjust=r.config.adjust||r.config.columnsAutoWidth,r.config.editable=r.config.editable||r.config.editing,r.config.leftSplit=r.config.leftSplit||r.config.splitAt,r.config.sortable&&r.config.headerSort||(r.config.sortable=!1),r.config.columns.forEach(function(e){e.format=e.format||e.dateFormat});function i(e,t,n){var i;e&&t&&m.isTooltip(r.config,t)&&(i=_.toFormat(e[t.id],t.type,t.format),t.tooltipTemplate?i=t.tooltipTemplate(i,e,t):i&&t.template&&(i=t.template(i,e,t)),i&&C.tooltip(i,{css:"dhx_grid_tooltip",node:n,htmlEnable:m.isHtmlEnable(r.config,t)}))}function n(e,t){var n;t&&m.isTooltip(r.config,t)&&((n=e.target.querySelector(".dhx_grid-header-cell-text span")&&e.target.querySelector(".dhx_grid-header-cell-text span").textContent||e.target.querySelector(".dhx_grid-footer-cell-text span")&&e.target.querySelector(".dhx_grid-footer-cell-text span").textContent||"")&&C.tooltip(n,{css:"dhx_grid_tooltip",node:e.target,htmlEnable:m.isHtmlEnable(r.config,t)}))}return r._htmlEvents={onclick:l.eventHandler(function(e){return l.locate(e)},{"dhx_grid-header-cell--sortable":function(e,t){var n,i=e.target.getAttribute("dhx_resized"),o=r._getColumn(t);o&&m.isSortable(r.config,o)&&!i&&r.events.fire(y.GridEvents.beforeSort,[o,r._sortDir?"asc":"desc"])&&(e=(n=null===(e=l.locateNodeByClassName(e,"dhx_grid-header-cell"))||void 0===e?void 0:e.querySelector(".dhx_grid-header-cell-text_content").innerHTML)?o.header.find(function(e){return e.text===n}):null,o="asc"===r._sortDir?"desc":"asc",r._sort(t,o,null==e?void 0:e.sortAs))},"dhx_grid-expand-cell":function(e,t){e.target.classList.contains("dhx_grid-expand-cell-icon")&&r.events.fire(y.GridEvents.expand,[t])}}),onscroll:function(e){r.events.fire(y.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])},onmouseover:{".dhx_grid-cell":function(e){var t=r.data.getItem(e.composedPath()[1].getAttribute("data-dhx-id")),n=r._getColumn(e.target.getAttribute("data-dhx-col-id"));i(t,n,e.target)},".dhx_grid-cell:not(.dhx_tree-cell) .dhx_grid-cell__content, .dhx_tree-cell :not(.dhx_grid-cell__content)":function(e){var t=e.composedPath(),n=r.data.getItem(t[2].getAttribute("data-dhx-id")),t=r._getColumn(t[1].getAttribute("data-dhx-col-id"));i(n,t,e.target)},".dhx_grid-cell.dhx_tree-cell .dhx_grid-cell__content":function(e){var t=e.composedPath(),n=r.data.getItem(t[3].getAttribute("data-dhx-id")),e=r._getColumn(t[2].getAttribute("data-dhx-col-id"));i(n,e,t[2])},".dhx_span-cell:not(.dhx_grid-header-cell)":function(e){var t,n=r.data.getItem(e.target.getAttribute("data-dhx-id")),i=r._getColumn(e.target.getAttribute("data-dhx-col-id")),o=r.getSpan(n.id,i.id);n&&o&&m.isTooltip(r.config,o)&&(t=o.text||_.toFormat(n[i.id],i.type,i.format),o.tooltipTemplate?t=o.tooltipTemplate(t,o):i.template&&(t=i.template(t,n,i)),t&&C.tooltip(t,{css:"dhx_grid_tooltip",node:e.target,htmlEnable:!0}))},".dhx_grid-header-cell:not(.dhx_span-cell)":function(e){var t=r._getColumn(e.target.getAttribute("data-dhx-id"));n(e,t)},".dhx_grid-footer-cell:not(.dhx_span-cell)":function(e){var t=r._getColumn(e.target.getAttribute("data-dhx-id"));n(e,t)},".dhx_grid-header-cell.dhx_span-cell":function(e){var t=r._getColumn(e.target.getAttribute("data-dhx-id")),n=t&&t.header.find(function(e){return!(!e.rowspan&&!e.colspan)});t&&n&&m.isTooltip(r.config,t)&&((n=n.text||"")&&C.tooltip(n,{css:"dhx_grid_tooltip",node:e.target,htmlEnable:m.isHtmlEnable(r.config,t)}))},".dhx_grid-header-cell-text_content":function(e){var t=e.composedPath(),n=r._getColumn(t[1].getAttribute("data-dhx-id"));n&&m.isTooltip(r.config,n)&&((e=t[2].querySelector(".dhx_grid-header-cell-text_content")&&t[2].querySelector(".dhx_grid-header-cell-text_content").textContent||"")&&C.tooltip(e,{css:"dhx_grid_tooltip",node:t[1],htmlEnable:m.isHtmlEnable(r.config,n)}))}}},(r.config.dragMode||r.config.dragItem)&&(h.dragManager.setItem(r._uid,r),r.config.dragItem||(r.config.dragItem="row"),r.config.dragMode||(r.config.dragMode="both")),r._init(),r.config.columns&&r._parseColumns(!0),r.config.data&&r.config.data instanceof Array&&r.config.data.length&&r.config.columns&&r.data.parse(r.config.data),r.selection=new v.Selection(r,{disabled:!r.config.selection},r.events,r._uid),r.mount(e,r._createView()),r.config.autoWidth&&r.config.autoHeight&&r._prepareData(r.config.data),a.awaitRedraw().then(function(){r.config.keyNavigation&&(r.keyManager=new c.KeyManager(function(e,t){return!(t!==r._uid||!r.events.fire(y.GridEvents.beforeKeyDown,[e]))&&(r.events.fire(y.GridEvents.afterKeyDown,[e]),!0)}),r._initHotKey(),I.focusManager.setFocusId(r._uid))}),t.autoEmptyRow&&0===r.data.getLength()&&(r._addEmptyRow(),r.paint()),r}t.Grid=o},function(e,t,n){"use strict";var y=this&&this.__assign||function(){return(y=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var b=n(0),d=n(2),a=n(24),w=n(20),x=n(33),E=n(82),C=n(83),h=n(1),S=2;function I(e,t,n){var i=e.config,o=i.columns.filter(function(e){return!e.hidden}),r=a.calculatePositions(n.width,n.height,e._scroll,i,t),s=o.slice(r.xStart,r.xEnd),n=t.slice(r.yStart,r.yEnd);return y(y({},i),{data:t,columns:o,scroll:e._scroll,$positions:r,headerHeight:i.$headerLevel*i.headerRowHeight,footerHeight:i.$footerLevel*i.footerRowHeight,firstColId:o[0]&&o[0].id,events:e.events,_events:e._events,currentColumns:s,currentRows:n,sortBy:e._sortBy,sortDir:e._sortDir,content:e.content,gridId:e._uid})}function k(e){if(e&&(e.tagName||(e=e._parent._container),e)){var t=e.currentStyle||window.getComputedStyle(e),n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)||0,t=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)||0;return{width:e.clientWidth-n,height:e.clientHeight-t}}}function M(o,e){var t,n=x.getCells(o),i=x.getSpans(o),r=o.columns;o.$resizing&&(a=h.findIndex(r,function(e){return e.id===o.$resizing}),l=w.getTotalWidth(r.slice(0,a))+r[a].$width,t=b.el(".dhx_grid-resize-line",{style:{top:0,left:l,height:o.$totalHeight}}));var s,a="string"==typeof(a=o.selection?o.selection.toHTML():null)?b.el("div.dhx_selection",{".innerHTML":a}):a,l=o.$positions,c={};if(o.eventHandlers)for(var u in o.eventHandlers)o.eventHandlers.hasOwnProperty(u)&&(s=o.eventHandlers[u],c[u]=d.eventHandler(function(e){return t=e,n=d.locate(t,"data-dhx-id"),i=d.locate(t,"data-dhx-col-id"),e=o.currentRows.filter(function(e){return e.id===n})[0],t=o.currentColumns.filter(function(e){return e.id===i})[0],{row:n?e:{},col:i?t:{}};var t,n,i},y({},s)));return b.el(".dhx_data-wrap",y({style:{height:o.$totalHeight,width:o.$totalWidth,"padding-left":e.x,"padding-top":e.y},role:"presentation"},c),[b.el(".dhx_grid_data",y(y({_flags:b.KEYED_LIST},x.getHandlers(l.yStart,l.xStart,o)),{role:"rowgroup","aria-rowcount":o.data.length}),n),b.el(".dhx_span-spans",{role:"presentation"},i),b.el(".dhx_grid_selection",{_ref:"selection","aria-hidden":"true"},[a,t])])}function P(e,t,n){n=n.height-S,n=t?n:n-e.headerHeight;return!e.$footer||t?n:n-e.footerHeight}function O(t,e,o,r,n){void 0===o&&(o=!0),void 0===r&&(r=!1),void 0===n&&(n=!1);var s,i=!n&&t.$totalHeight>=e.height-t.headerRowHeight?d.getScrollbarWidth():0,a=e.width-S-i,l=t.columns.filter(function(e){return!e.hidden}),i=l.filter(function(e){return!e.width&&!e.$fixed&&w.isAutoWidth(t,e)}),c=w.getTotalWidth(l.filter(function(e){return e.width||e.$fixed||!w.isAutoWidth(t,e)})),u=i.reduce(function(e,t){return e+(t.gravity||1)},0);a<t.$totalWidth?(s=i.reduce(function(e,t){return e+(t.maxWidth||t.$width)},0),i.length&&i.forEach(function(e){var t=0,n=(t=o?Math.abs(a-s)*((e.gravity||1)/u):Math.abs(a-c)*((e.gravity||1)/u))<e.minWidth,i=t>e.maxWidth;n||i?n?(c+=e.$width-t,e.$fixed=!0):i&&(e.$width=e.maxWidth,e.$fixed=!0):e.$width=t,e.$width<20&&(e.$width=20)})):i.forEach(function(e){var t=Math.abs(a-c)*((e.gravity||1)/u),n=t<e.minWidth,i=t>e.maxWidth;n||i?n?(c+=e.$width-t,r&&(e.$fixed=!0)):i&&(e.$width=e.maxWidth,r&&(e.$fixed=!0)):e.$width=t,e.$width<20&&(e.$width=20),!o&&e.$fixed&&delete e.$fixed}),o&&O(t,e,!1,r,n)}t.getRenderConfig=I,t.render=function(e,t,n,i,o){t._container||(t.config.width=1,t.config.height=1),e&&e.node&&e.node.parent&&e.node.parent.el&&(m=k(e.node.parent.el),t.config.width=m.width,t.config.height=m.height);var r=t.config;if(!r)return b.el("div");if(!r.columns.length)return b.el(".dhx_grid",{"data-dhx-root-id":r.rootParent});var s=t.data.getRawData(0,-1,null,2);r.columns.reduce(function(e,t){return t.hidden&&e},!0)?r.$totalHeight=0:r.$totalHeight=s.reduce(function(e,t){return e+(t.$height||0)},0);var a=k(t._container),l={width:r.width||a&&a.width||0,height:r.height||a&&a.height||0};w.isAutoWidth(r)&&(O(r,l),r.$totalWidth=w.getTotalWidth(r.columns.filter(function(e){return!e.hidden}))),r.width=l.width,r.height=l.height;var c=I(t,s,l);c.selection=i,c.datacollection=t.data;var u,d,h,f,p=x.getShifts(c),g=w.isCssSupport("position","sticky"),v=P(c,g,l),_={wrapper:l,sticky:g,shifts:p,gridBodyHeight:v},m=C.getFixedRows(c,y(y({},_),{name:"header",position:"top"})),a=c.$footer?C.getFixedRows(c,y(y({},_),{name:"footer",position:"bottom"})):null,s=c.$totalWidth+S<l.width?"dhx_grid-less-width":"",i=c.$totalHeight+S<l.height?"dhx_grid-less-height":"";return e.node||(e=t.getScrollState(),u=e.x,d=e.y,b.awaitRedraw().then(function(){t.scroll(u,d)})),b.el(".dhx_grid.dhx_widget",y({class:(c.css||"")+(g?"":" dhx_grid_border")+(r.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":o,"data-dhx-root-id":r.rootParent},(h=c.data,f=r.columns,e=c.editable,o=c.multiselection,{role:"grid","aria-rowcount":h.length,"aria-colcount":f.filter(function(e){return!e.hidden}).length,"aria-readonly":e?"false":"true","aria-multiselectable":o?"true":"false"})),[b.resizer(function(e){return w.isAutoWidth(t.config)&&e&&(r.$totalWidth=0,O(r,l,!0,!0)),t.paint()}),b.el(".dhx_grid-content",{style:y({},l),onclick:n.onclick,onmouseover:n.onmouseover,class:(s+" "+i).trim(),role:"presentation"},[g?null:m,b.el(".dhx_grid-body",{style:{height:v,width:l.width-S},onscroll:n.onscroll,_ref:"grid_body",role:"presentation"},[b.el("div",{},[g?m:null,M(c,p),g?a:null])]),E.getFixedColsHeader(c,_),E.getFixedCols(c,_),C.getFixedDataRows(c,_),g?null:a])])},t.proRender=function(e,t,n,i,o){t._container||(t.config.width=1,t.config.height=1),e&&e.node&&e.node.parent&&e.node.parent.el&&(v=k(e.node.parent.el),t.config.width=v.width,t.config.height=v.height);var r=t.config;if(!r)return b.el("div");if(!r.columns.length)return b.el(".dhx_grid",{"data-dhx-root-id":r.rootParent});var s=t.data.getRawData(0,-1,null,2);r.columns.reduce(function(e,t){return t.hidden&&e},!0)?r.$totalHeight=0:r.$totalHeight=s.reduce(function(e,t){return e+(t.$height||0)},0);var a=k(t._container),l={width:r.width||a&&a.width||0,height:r.height||a&&a.height||0};w.isAutoWidth(r)&&(O(r,l,!0,!1,t.scrollView&&t.scrollView.config.enable),r.$totalWidth=w.getTotalWidth(r.columns.filter(function(e){return!e.hidden}))),r.width=l.width,r.height=l.height;var c=I(t,s,l);c.selection=i,c.datacollection=t.data;var u,d,h=x.getShifts(c),f=w.isCssSupport("position","sticky"),p=P(c,f,l),g={wrapper:l,sticky:f,shifts:h,gridBodyHeight:p},v=C.getFixedRows(c,y(y({},g),{name:"header",position:"top"})),a=c.$footer?C.getFixedRows(c,y(y({},g),{name:"footer",position:"bottom"})):null,s=c.$totalWidth+S<l.width?"dhx_grid-less-width":"",i=c.$totalHeight+S<l.height?"dhx_grid-less-height":"";return e.node||(e=t.getScrollState(),u=e.x,d=e.y,b.awaitRedraw().then(function(){t.scroll(u,d)})),h=b.el("div",{},[f?v:null,M(c,h),f?a:null]),b.el(".dhx_grid.dhx_widget",{class:(c.css||"")+(f?"":" dhx_grid_border")+(r.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":o,"data-dhx-root-id":r.rootParent,role:"grid","aria-rowcount":c.data.length,"aria-colcount":r.columns.filter(function(e){return!e.hidden}).length},[b.resizer(function(e){return w.isAutoWidth(t.config)&&e&&(r.$totalWidth=0,O(r,l,!0,!0)),t.paint()}),b.el(".dhx_grid-content",{style:y({},l),onclick:n.onclick,onmouseover:n.onmouseover,class:(s+" "+i).trim(),role:"presentation"},[f?null:v,b.el(".dhx_grid-body",{style:{height:p,width:l.width-S},onscroll:n.onscroll,_ref:"grid_body",role:"presentation"},[t.scrollView&&t.scrollView.config.enable?t.scrollView.render([h]):h]),E.getFixedColsHeader(c,g),E.getFixedCols(c,g),C.getFixedDataRows(c,g),f?null:a])])}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(50),a=n(70),l=n(0),o=(r=a.Cell,o(c,r),c.prototype.destructor=function(){for(var e in this._all){var t;Object.prototype.hasOwnProperty.call(this._all,e)&&((t=this._all[e]).getWidget()&&"function"==typeof t.getWidget().destructor&&t.getWidget().destructor(),t.destructor())}this.config=this._cells=this._root=this._xLayout=this._isViewLayout=null,this._all={},this.unmount()},c.prototype.toVDOM=function(){if(this._isViewLayout){var e=[this.getCell(this.config.activeView).toVDOM()];return r.prototype.toVDOM.call(this,e)}var t=[];return this._inheritTypes(),this._cells.forEach(function(e){e=e.toVDOM();Array.isArray(e)?t=t.concat(e):t.push(e)}),r.prototype.toVDOM.call(this,t)},c.prototype.removeCell=function(t){if(this.events.fire(s.LayoutEvents.beforeRemove,[t])){var e=this.config.parent||this;if(e!==this)return e.removeCell(t);e=this.getCell(t);e&&(e=e.getParent(),delete this._all[t],e._cells=e._cells.filter(function(e){return e.id!=t}),e.paint()),this.events.fire(s.LayoutEvents.afterRemove,[t])}},c.prototype.addCell=function(e,t){var n;void 0===t&&(t=-1),this.events.fire(s.LayoutEvents.beforeAdd,[e.id])&&(n=this._createCell(e),t<0&&(t=this._cells.length+t+1),this._cells.splice(t,0,n),this.paint(),this.events.fire(s.LayoutEvents.afterAdd,[e.id]))},c.prototype.getId=function(e){return e<0&&(e=this._cells.length+e),this._cells[e]?this._cells[e].id:void 0},c.prototype.getRefs=function(e){return this._root.getRootView().refs[e]},c.prototype.getCell=function(e){return this._root._all[e]},c.prototype.forEach=function(e,t,n){if(void 0===n&&(n=1/0),this._haveCells(t)&&!(n<1))for(var i=(t?this._root._all[t]:this._root)._cells,o=0;o<i.length;o++){var r=i[o];e.call(this,r,o,i),this._haveCells(r.id)&&r.forEach(e,r.id,--n)}},c.prototype.cell=function(e){return this.getCell(e)},c.prototype._getCss=function(e){var t=this._xLayout?"dhx_layout-columns":"dhx_layout-rows",n=this.config.align?" "+t+"--"+this.config.align:"";if(e)return t+" dhx_layout-cell"+(this.config.align?" dhx_layout-cell--"+this.config.align:"");var i=this.config.parent?r.prototype._getCss.call(this):"dhx_widget dhx_layout",e=this.config.parent?"":" dhx_layout-cell";return i+(this.config.full?e:" "+t)+n},c.prototype._parseConfig=function(){var t=this,e=this.config,n=e.rows||e.cols||e.views||[];this._xLayout=!e.rows,this._cells=n.map(function(e){return t._createCell(e)})},c.prototype._createCell=function(e){var t=e.rows||e.cols||e.views?(e.parent=this._root,new c(this,e)):new a.Cell(this,e);return this._root._all[t.id]=t,e.init&&e.init(t,e),t},c.prototype._haveCells=function(e){if(e){e=this._root._all[e];return e._cells&&0<e._cells.length}return 0<Object.keys(this._all).length},c.prototype._inheritTypes=function(e){var t,n=this;void 0===e&&(e=this._cells),Array.isArray(e)?e.forEach(function(e){return n._inheritTypes(e)}):((t=e.config).rows||t.cols)&&(e=e.getParent(),!t.type&&e&&(e.config.type?t.type=e.config.type:this._inheritTypes(e)))},c);function c(e,t){var n=r.call(this,e,t)||this;return n._root=n.config.parent||n,n._all={},n._parseConfig(),n.config.activeTab&&(n.config.activeView=n.config.activeTab),n.config.views&&(n.config.activeView=n.config.activeView||n._cells[0].id,n._isViewLayout=!0),t.parent||(t=l.create({render:function(){return n.toVDOM()}},n),n.mount(e,t)),n}t.Layout=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,c=n(1),u=n(0),s=n(6),a=n(50),d=n(140),h=n(3),f=n(31),o=(r=s.View,o(p,r),p.prototype.paint=function(){var e;this.isVisible()&&((e=this.getRootView())?e.redraw():this._parent.paint())},p.prototype.isVisible=function(){if(!this._parent)return!(!this._container||!this._container.tagName)||Boolean(this.getRootNode());var e=this._parent.config.activeView;return(!e||e===this.id)&&(!this.config.hidden&&(!this._parent||this._parent.isVisible()))},p.prototype.hide=function(){this.events.fire(a.LayoutEvents.beforeHide,[this.id])&&(this.config.hidden=!0,this._parent&&this._parent.paint&&this._parent.paint(),this.events.fire(a.LayoutEvents.afterHide,[this.id]))},p.prototype.show=function(){var e=this;this.events.fire(a.LayoutEvents.beforeShow,[this.id])&&(this._parent&&this._parent.config&&void 0!==this._parent.config.activeView?this._parent.config.activeView=this.id:this.config.hidden=!1,this._parent&&!this._parent.isVisible()&&this._parent.show(),this.paint(),this._ui instanceof f.Grid&&this._ui.config.keyNavigation&&u.awaitRedraw().then(function(){e._ui.setColumns(e._ui.config.columns),e.paint()}),this.events.fire(a.LayoutEvents.afterShow,[this.id]))},p.prototype.expand=function(){this.events.fire(a.LayoutEvents.beforeExpand,[this.id])&&(this.config.collapsed=!1,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(a.LayoutEvents.afterExpand,[this.id]),this.paint())},p.prototype.collapse=function(){this.events.fire(a.LayoutEvents.beforeCollapse,[this.id])&&(this.config.collapsed=!0,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(a.LayoutEvents.afterCollapse,[this.id]),this.paint())},p.prototype.toggle=function(){this.config.collapsed?this.expand():this.collapse()},p.prototype._checkNextSize=function(e){var t=null!=e?e:this._getNextCell();return!!t&&(this._isXDirection()&&t.config.$autoWidth&&t.config.width?!(t.config.width=void 0):!this._isXDirection()&&t.config.$autoHeight&&t.config.height?!(t.config.height=void 0):!e&&t._checkNextSize())},p.prototype.getParent=function(){return this._parent},p.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this.id=null,this._parent=this._handlers=this._uid=this._disabled=this._resizerHandlers=null,this.unmount()},p.prototype.getWidget=function(){return this._ui},p.prototype.getCellView=function(){return this._parent&&this._parent.getRefs(this._uid)},p.prototype.attach=function(e,t){var n=this;return this.config.html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof s.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui instanceof f.Grid&&this._ui.config.keyNavigation&&u.awaitRedraw().then(function(){n._ui.setColumns(n._ui.config.columns),n.paint()}),this._ui},p.prototype.attachHTML=function(e){this.config.html=e,this.paint()},p.prototype.toVDOM=function(e){if(null===this.config&&(this.config={}),!this.config.hidden){var t,n=this._calculateStyle(),i=c.isDefined(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:this.config.padding+"px"}:"",n=this.config.full||this.config.html?n:l(l({},n),i);this.config.html||(t=this._ui?((o=this._ui.getRootView()).render&&(o=u.inject(o)),[o]):e||null);var o=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?u.el(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),l(l({},this._resizerHandlers),{_ref:"resizer_"+this._uid,tabindex:0}),[u.el("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,r={};if(this.config.on)for(var s in this.config.on)r["on"+s]=this.config.on[s];var a="",e=this.config.cols||this.config.rows;if(this.config.type&&e)switch(this.config.type){case"line":a=" dhx_layout-line";break;case"wide":a=" dhx_layout-wide";break;case"space":a=" dhx_layout-space"}i=u.el("div",l(l(((e={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,e),r),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?a:""),style:n}),this.config.full?[u.el("div",{tabindex:this.config.collapsable?"0":"-1",role:this.config.collapsable?"button":null,"aria-label":this.config.collapsable?"click to "+(this.config.collapsed?"expand":"collapse"):null,class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&u.el("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&u.el(".dhx_layout-cell-header__image-wrapper",[u.el("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&u.el("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?u.el("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):u.el("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:u.el("div",{style:l(l({},i),{height:"calc(100% - "+(this.config.headerHeight||37)+"px)"}),".innerHTML":this.config.html,class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?a:"")},t)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?t:[this.config.collapsed?null:u.el(".dhx_layout-cell-content",{".innerHTML":this.config.html,style:i})]);return o?[i,o]:i}},p.prototype._getCss=function(e){return"dhx_layout-cell"},p.prototype._initHandlers=function(){function t(e){var t;r.isActive&&(t=(e.targetTouches?e.targetTouches[0]:e).clientX,e=(e.targetTouches?e.targetTouches[0]:e).clientY,t=r.xLayout?t-r.range.min+window.pageXOffset:e-r.range.min+window.pageYOffset,e=r.xLayout?"width":"height",t<0?t=r.resizerLength/2:t>r.size&&(t=r.size-r.resizerLength),o.config[e]=t-r.resizerLength/2+"px",r.nextCell.config[e]=r.size-t-r.resizerLength/2+"px",r.nextCell._getAnyFlexCell()&&(r.nextCell._getAnyFlexCell().config[e]=void 0),o.paint(),o.events.fire(a.LayoutEvents.resize,[o.id]))}function n(e){var t,n,i;e.targetTouches&&e.preventDefault(),3!==e.which&&(r.isActive&&s(e),o.events.fire(a.LayoutEvents.beforeResizeStart,[o.id])&&(document.body.classList.add("dhx_no-select--resize"),n=o.getCellView(),i=(t=o._getNextCell()).getCellView(),e=o._getResizerView(),n=n.el.getBoundingClientRect(),e=e.el.getBoundingClientRect(),i=i.el.getBoundingClientRect(),r.xLayout=o._isXDirection(),r.left=n.left+window.pageXOffset,r.top=n.top+window.pageYOffset,r.collapsedSize=o._getCollapsedSize(o,t),r.margin=d.getMarginSize(o.getParent().config,r.xLayout),r.range=d.getBlockRange(n,i,r.xLayout),r.size=r.range.max-r.range.min-r.margin-r.collapsedSize,r.isActive=!0,r.nextCell=t,r.resizerLength=r.xLayout?e.width:e.height))}var o=this,r={left:null,top:null,isActive:!(this._handlers={enterCollapse:function(e){13===e.keyCode&&o._handlers.toggle()},collapse:function(){o.config.collapsable&&o.collapse()},expand:function(){o.config.collapsable&&o.expand()},toggle:function(){o.config.collapsable&&o.toggle()}}),range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,margin:null,collapsedSize:null},s=function(e){r.isActive=!1,document.body.classList.remove("dhx_no-select--resize"),e.targetTouches?(document.removeEventListener("touchend",s),document.removeEventListener("touchmove",t)):(document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",t)),o.events.fire(a.LayoutEvents.afterResizeEnd,[o.id])};this._resizerHandlers={onmousedown:function(e){n(e),document.addEventListener("mouseup",s),document.addEventListener("mousemove",t)},ontouchstart:function(e){n(e),document.addEventListener("touchend",s),document.addEventListener("touchmove",t)},ondragstart:function(e){return e.preventDefault()}}},p.prototype._getCollapsedSize=function(e,t){var n=0,i=this._parent,e=i._cells.indexOf(e),o=i._cells.indexOf(t);if(o-e==1)return n;for(var r=e+1;r<o;r++)i._cells[r].config.collapsed&&(this._isXDirection()?n+=45:n+=Number(i._cells[r].config.headerHeight)||37);return n},p.prototype._getCollapseIcon=function(){return this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-right":this._isXDirection()&&!this.config.collapsed?"dxi dxi-chevron-left":!this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-up":this._isXDirection()||this.config.collapsed?void 0:"dxi dxi-chevron-down"},p.prototype._isLastCell=function(){var e=this._parent;return e&&e._cells.indexOf(this)===e._cells.length-1},p.prototype._getNextCell=function(){var e=this._parent,t=e._cells.indexOf(this),t=!this._isLastCell()&&e._cells[t+1];return!!t&&(t.config.hidden||t.config.collapsed?t._getNextCell():t)},p.prototype._getAnyFlexCell=function(){var t=this,e=this._parent,n=this._isXDirection()?"$autoWidth":"$autoHeight",e=e._cells.filter(function(e){return!0===e.config[n]&&e!==t});return!!e.length&&e[e.length-1]},p.prototype._getResizerView=function(){return this._parent.getRefs("resizer_"+this._uid)},p.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},p.prototype._calculateStyle=function(){var e=this.config;if(e){var t={},n=!1,i=!1;isNaN(Number(e.width))||(e.width=e.width+"px"),isNaN(Number(e.height))||(e.height=e.height+"px"),isNaN(Number(e.minWidth))||(e.minWidth=e.minWidth+"px"),isNaN(Number(e.minHeight))||(e.minHeight=e.minHeight+"px"),isNaN(Number(e.maxWidth))||(e.maxWidth=e.maxWidth+"px"),isNaN(Number(e.maxHeight))||(e.maxHeight=e.maxHeight+"px"),"content"===e.width&&(n=!0),"content"===e.height&&(i=!0),this._isXDirection()&&!e.width&&(e.$autoWidth=!0),this._isXDirection()||e.height||(e.$autoHeight=!0);var o=e.width,r=e.height,s=e.cols,a=e.rows,l=e.minWidth,c=e.minHeight,u=e.maxWidth,d=e.maxHeight,h=e.gravity,f=e.collapsed,p=e.$fixed,g=-1===Math.sign(h)?0:h;"boolean"==typeof h&&(g=h?1:0);var v="boolean"==typeof h?!h:-1===Math.sign(h);this._isXDirection()?(p||o||void 0===h&&(l||u))&&(v=!0):(p||r||void 0===h&&(c||d))&&(v=!0);var _,v=v?0:g||1,g=this._isXDirection()?"x":"y";return void 0!==l&&(t.minWidth=l),void 0!==c&&(t.minHeight=c),void 0!==u&&(t.maxWidth=u),void 0!==d&&(t.maxHeight=d),void 0===this._parent&&(g=!0),void 0!==o&&"content"!==o?t.width=o:!0===g?t.width="100%":"x"===g&&(n?t.flex="0 0 auto":(_=this._isXDirection()?"1px":"auto",t.flex=v+" "+(s||a?"0 "+_:"1 auto"))),void 0!==r&&"content"!==r?t.height=r:!0===g?t.height="100%":"y"===g&&(i?t.flex="0 0 auto":(_=this._isXDirection()?"auto":"1px",t.flex=v+" "+(s||a?"0 "+_:"1 auto"))),!0===g&&void 0===e.width&&void 0===e.height&&(t.flex=v+" 1 auto"),f&&(this._isXDirection()?t.width="auto":t.height="auto",t.flex="0 0 auto"),t}},p);function p(e,t){t=r.call(this,e,t)||this;return t._disabled=[],e&&e.isVisible&&(t._parent=e),t._parent&&t._parent.events?t.events=t._parent.events:t.events=new h.EventSystem(t),t.config.full=void 0===t.config.full?Boolean(t.config.header||t.config.collapsable||t.config.headerHeight||t.config.headerIcon||t.config.headerImage):t.config.full,t._initHandlers(),t.id=t.config.id||c.uid(),t}t.Cell=o},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(143)),i(t(73))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.PopupEvents||(t.PopupEvents={})).beforeHide="beforeHide",t.beforeShow="beforeShow",t.afterHide="afterHide",t.afterShow="afterShow",t.click="click"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.SliderEvents||(t.SliderEvents={})).change="change",t.focus="focus",t.blur="blur",t.keydown="keydown",t.mousedown="mousedown",t.mouseup="mouseup"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.TimepickerEvents||(t.TimepickerEvents={})).change="change",t.beforeApply="beforeApply",t.afterApply="afterApply",t.beforeClose="beforeClose",t.afterClose="afterClose",t.apply="apply",t.close="close",t.save="save"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.CalendarEvents||(t.CalendarEvents={})).change="change",t.beforeChange="beforechange",t.modeChange="modeChange",t.monthSelected="monthSelected",t.yearSelected="yearSelected",t.cancelClick="cancelClick",t.dateMouseOver="dateMouseOver",t.dateHover="dateHover"},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),h=n(0),s=n(3),f=n(2),a=n(150),l=n(6),c=n(10),u=n(12),p=n(36),g=n(7),v=n(154),_=n(79),m=n(37),y=n(80),b=n(81);function w(e){return e.icon?'<span class="'+e.icon+' dhx_combobox-options__icon"></span> <span class="dhx_combobox-options__value">'+e.value+"</span>":e.src?'<img src="'+e.src+'" class="dhx_combobox-options__image" alt='+e.value+'></img> <span class="dhx_combobox-options__value">'+e.value+"</span>":'<span class="dhx_combobox-options__value">'+e.value+"</span>"}var x,o=(x=l.View,o(E,x),E.prototype.focus=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.focus()},E.prototype.blur=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.blur(),this.popup.hide()},E.prototype.enable=function(){this.config.disabled=!1,this.paint()},E.prototype.disable=function(){this.config.disabled=!0,this.paint()},E.prototype.isDisabled=function(){return this.config.disabled},E.prototype.clear=function(){if(this.config.disabled)return!1;this.list.selection.remove(),this._state.value="",this._filter(),this.paint()},E.prototype.getValue=function(e){var t=this.list.selection.getId();return e?r.wrapBox(t):Array.isArray(t)?t.join(","):t},E.prototype.setValue=function(e){return this._setValue(e)},E.prototype.addOption=function(e){e&&"string"==typeof e&&this.data.add({value:e})},E.prototype.destructor=function(){this.popup&&this.popup.destructor(),this.events&&this.events.clear(),this.list&&this.list.destructor(),this._helper&&this._helper.destructor(),this._layout&&this._layout.destructor(),this.config=this.events=this.list=this.popup=null,this._helper=this._keyListener=this._handlers=this._state=this._uid=this._isPopupConfiqureted=null,this.unmount()},E.prototype.setState=function(e){switch(e){case"success":this._state.currentState=b.ComboState.success;break;case"error":this._state.currentState=b.ComboState.error;break;default:this._state.currentState=b.ComboState.default}this.paint()},E.prototype._setValue=function(e,t){var n=this;if(void 0===t&&(t=!1),this.config.disabled||!this._exsistId(e))return!1;this._filter(),this.config.multiselection||(this.list.selection.remove(),this._state.value=""),this.config.multiselection?("string"==typeof e&&(e=e.split(",")),"number"==typeof e&&(e=[e]),e.forEach(function(e){n.list.selection.add(e,!1,!1,t)})):(e=r.unwrapBox(e),this.list.selection.add(e,!1,!1,t),(e=this.data.getItem(e))&&(this._state.value=this._getItemText(e))),this.paint()},E.prototype._createLayout=function(){var e=this.list=new p.List(null,{template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!1,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),t=this._layout=new u.Layout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});t.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&t.getCell("select-unselect-all").attach(y.selectAllView)},E.prototype._initHandlers=function(){var n=this;this.config.helpMessage&&(this._helper=new g.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={addOption:function(){return n.addOption(n._state.value)},showHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.show(e.target,{mode:"left"===n.config.labelPosition?"bottom":"right"})},selectAll:function(){n._state.unselectActive?(n.list.selection.remove(),n.config.selectAllButton&&(n._layout.getCell("select-unselect-all").attach(y.selectAllView),n._state.unselectActive=!1)):(n.data.filter(),n.list.selection.add(),n.config.selectAllButton&&(n._layout.getCell("select-unselect-all").attach(y.unselectAllView),n._state.unselectActive=!0)),n._changePopupPosition(),n.paint()},onkeydown:function(e){"Tab"===e.key&&n.popup.isVisible()?n._hideOptions():(n.popup.isVisible()||e.which!==a.KEY_CODES.DOWN_ARROW||n._showOptions(),n.popup.isVisible()&&e.which===a.KEY_CODES.RIGHT_ARROW&&n.config.readOnly&&!n.config.multiselection&&(n.list.moveFocus(p.MOVE_DOWN),e.preventDefault()),n.popup.isVisible()&&e.which===a.KEY_CODES.LEFT_ARROW&&n.config.readOnly&&!n.config.multiselection&&(n.list.moveFocus(p.MOVE_UP),e.preventDefault()),n.popup.isVisible()&&e.which===a.KEY_CODES.DOWN_ARROW&&(n.list.moveFocus(p.MOVE_DOWN),e.preventDefault()),n.popup.isVisible()&&e.which===a.KEY_CODES.UP_ARROW&&(n.list.moveFocus(p.MOVE_UP),e.preventDefault()),n.popup.isVisible()&&e.which===a.KEY_CODES.ESC&&n._hideOptions(),n.popup.isVisible()&&e.which===a.KEY_CODES.ENTER&&(0!==n.data.getLength()?n.setValue(n.list.getFocus()||n._state.value):n.config.newOptions&&n.addOption(n._state.value),n.config.multiselection?n._updatePopup():n._hideOptions())),n.events.fire(b.ComboboxEvents.keydown,[e,n.popup.isVisible()&&n.list.getFocus()])},onkeyup:function(e){n.config.multiselection&&!n.config.itemsCount&&(n._state.ignoreNext?n._state.ignoreNext=!1:e.which===a.KEY_CODES.BACKSPACE&&!n._state.value&&n.config.multiselection&&n.list.selection.getId().length&&(e=(e=n.list.selection.getId())[e.length-1],n.list.selection.remove(e),n._changePopupPosition(),n.paint()))},oninput:function(e){n.config.disabled||(e=e.target.value,n.events.fire(b.ComboboxEvents.input,[e]),n._state.value=e,n._filter(),e.length?n._state.canDelete=!1:(n._state.ignoreNext=!0,n._state.canDelete=!0),n.config.multiselection||(n.list.selection.remove(),n.paint()),n.popup.isVisible()||n._showOptions(),n._updatePopup())},oninputclick:function(e){if(!n.config.disabled){if(n.focus(),e.target.classList.contains("dhx_combobox__action-remove")){var t=f.locate(e);return t?(n.list.selection.remove(t),n._changePopupPosition(),void n.paint()):void 0}if(e.target.classList.contains("dhx_combobox__action-clear-all"))return n.list.selection.getId().forEach(function(e){return n.list.selection.remove(e)}),n.config.selectAllButton&&n._state.unselectActive&&(n._layout.getCell("select-unselect-all").attach(y.selectAllView),n._state.unselectActive=!1),void n.paint();e.preventDefault(),n.popup.isVisible()?n.focus():n._showOptions()}},toggleIcon:function(){n.focus(),n.popup.isVisible()?n._hideOptions():n._showOptions()},onfocus:function(){var e;return null===(e=n.events)||void 0===e?void 0:e.fire(b.ComboboxEvents.focus,[])},onblur:function(){var e;return null===(e=n.events)||void 0===e?void 0:e.fire(b.ComboboxEvents.blur,[])}}},E.prototype._initEvents=function(){var n=this;this.data.events.on(c.DataEvents.load,function(){n.config.value&&n._setValue(n.config.value,!0)}),this.data.events.on(c.DataEvents.afterAdd,function(e){n._setValue(e.id),n.config.multiselection?n._changePopupPosition():n._hideOptions()}),this.list.events.on(p.ListEvents.click,function(){n.config.multiselection||n._hideOptions(),n._changePopupPosition()}),this.list.selection.events.on(m.SelectionEvents.afterSelect,function(){var e=n.getValue(n.config.multiselection);n.events.fire(b.ComboboxEvents.change,[e]),n._updateSelectedItem(e)}),this.list.selection.events.on(m.SelectionEvents.afterUnSelect,function(){var e,t=n.config.multiselection;n.config.readOnly&&!t||(e=n.getValue(t),n.events.fire(b.ComboboxEvents.change,[e]),t&&n._updateSelectedItem(e))}),this.popup.events.on(g.PopupEvents.beforeShow,function(){if(!n.popup.isVisible()&&!n._isPopupConfiqureted)return n._configurePopup(),!1}),this.config.readOnly&&this.popup.events.on(g.PopupEvents.afterShow,function(){var e;n._state.value?(e=n.list.selection.getId(),n.list.setFocus(e)):n.list.setFocus(n.data.getId(0)),n._keyListener.startNewListen(function(e){return n._findBest(e)})})},E.prototype._showOptions=function(){this.events.fire(b.ComboboxEvents.beforeOpen)&&(this._state.value.length&&(this._state.canDelete=!0),this._filter(),this._configurePopup()&&(this.events.fire(b.ComboboxEvents.open),this.events.fire(b.ComboboxEvents.afterOpen)))},E.prototype._configurePopup=function(){this._isPopupConfiqureted=!0;var e=this.getRootView();return!!(e&&e.refs&&e.refs.holder)&&(this.popup.isVisible()||this._updatePopup(),!0)},E.prototype._hideOptions=function(){var e=this;this.events.fire(b.ComboboxEvents.beforeClose)&&(this.config.readOnly&&this._keyListener.endListen(),this.list.setFocus(this.data.getId(0)),this.config.multiselection||this.config.readOnly||this.list.selection.contains()||(this._state.value=""),h.awaitRedraw().then(function(){return e.popup.isVisible()&&e.popup.hide()}),this.events.fire(b.ComboboxEvents.afterClose),this.events.fire(b.ComboboxEvents.close),this._filter(),this.paint())},E.prototype._filter=function(){var e,t,n,i=this;this.config.readOnly||(this.data.filter(function(e){return i.config.filter?i.config.filter(e,i._state.value):r.isEqualString(i._state.value,i._getItemText(e))}),this.config.multiselection?this.list.setFocus(this.data.getId(0)):(t=this.data.getIndex(this.list.selection.getId()),this.list.setFocus(this.data.getId(-1<t?t:0))),e=this._layout.getCell("list"),t=this._layout.getCell("not-found"),0===this.data.getLength()?(this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").hide(),e.hide(),this._state.creatingState=!0,n=this.config.newOptions?this._state.value:"",t.height=y.emptyListHeight(n,this.getRootView().refs.holder.el.offsetWidth),t.attach(y.emptyListView,n),t.show()):(this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").show(),!(this._state.value&&this.data.find(function(e){return e.value===i._state.value}))&&this._state.value?(this._state.creatingState=this.config.newOptions,e.show(),this.config.newOptions?(n=this._state.value,t.height=y.emptyListHeight(n,this.getRootView().refs.holder.el.offsetWidth),t.attach(y.emptyListView,n),t.show()):t.hide()):(this._state.creatingState=!1,t.isVisible()&&(e.show(),t.hide()))))},E.prototype._findBest=function(t){var n=this,e=this.data.find(function(e){return r.isEqualString(t,n._getItemText(e))});e&&this.list.selection.getId()!==e.id&&(this.list.setFocus(e.id),this.paint())},E.prototype._exsistId=function(e){var t=this;return e instanceof Array?e.every(function(e){return t.data.exists(e)}):this.data.exists(e)},E.prototype._draw=function(){if(!this.config)return h.el("div");var e=this.config,t=e.multiselection,n=e.labelPosition,i=e.hiddenLabel,o=e.required,r=e.disabled,s=e.css,a=e.helpMessage,l=e.readOnly,c=e.placeholder,u=t?null:this.data.getItem(this.list.selection.getId()),e=!this.list.selection.getId()||"object"==typeof this.list.selection.getId()&&0===this.list.selection.getId().length,t=f.getLabelStyle(this.config);return h.el("div",{"data-dhx-widget-id":this._uid,onkeydown:this._handlers.onkeydown,onkeyup:this._handlers.onkeyup,class:"dhx_widget dhx_combobox"+("left"===n?" dhx_combobox--label-inline":"")+(i?" dhx_combobox--sr_only":"")+(o?" dhx_combobox--required":"")+(r?" dhx_combobox--disabled":"")+(s?" "+s:"")},[t?h.el("label.dhx_label.dhx_combobox__label",{style:t.style,class:a?"dhx_label--with-help":"",onclick:this._handlers.oninputclick},a?[(t.label||o)&&h.el("span.dhx_label__holder",t.label),h.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,id:"dhx_label__help_"+this._uid})]:t.label):null,h.el("div.dhx_combobox-input-box"+(r?".dhx_combobox-input-box--disabled":"")+(l?".dhx_combobox-input-box--readonly":"")+(this._state.currentState===b.ComboState.error?".dhx_combobox-input-box--state_error":"")+(this._state.currentState===b.ComboState.success?".dhx_combobox-input-box--state_success":""),{_ref:"holder"},[h.el("div.dhx_combobox-input__icon",{onclick:this._handlers.toggleIcon},[h.el("span"+(this.popup.isVisible()?".dxi.dxi-menu-up":".dxi.dxi-menu-down"))]),h.el("div.dhx_combobox-input-list-wrapper",{onclick:this._handlers.oninputclick},[h.el("ul.dhx_combobox-input-list",d(this._drawSelectedItems(),[h.el("li.dhx_combobox-input-list__item.dhx_combobox-input-list__item--input",[h.el("input.dhx_combobox-input",{oninput:this._handlers.oninput,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_ref:"input",_key:this._uid,type:"text",placeHolder:e&&c?c:void 0,value:l&&u?this._getItemText(u):this._state.value,readOnly:l||r,required:o,"aria-label":l?"Select value":"Type or select value","aria-describedby":a?"dhx_label__help_"+this._uid:null,"aria-expanded":!0})])]))])])])},E.prototype._drawSelectedItems=function(){var e,n=this;if(!this.config.multiselection)return[];if(this.config.itemsCount){var t=this.list.selection.getId().length;return t?[h.el("li.dhx_combobox-input-list__item.dhx_combobox-tag",[h.el("span.dhx_combobox-tag__value",(e=t,"function"==typeof(t=this.config.itemsCount)?t(e):e+" "+_.default.selectedItems)),h.el("button.dhx_button.dhx_combobox-tag__action.dhx_combobox__action-clear-all",{"aria-label":"clear all"},[h.el("span.dhx_button__icon.dxi.dxi-close-circle")])])]:[]}return this.list.selection.getId().map(function(e){var t=n.data.getItem(e);return t?h.el("li.dhx_combobox-input-list__item.dhx_combobox-tag",{"data-dhx-id":e},[n._drawImageOrIcon(t),h.el("span.dhx_combobox-tag__value",n._getItemText(t)),h.el("button.dhx_button.dhx_button--icon.dhx_combobox-tag__action.dhx_combobox__action-remove",{type:"button","aria-label":"remove"},[h.el("span.dhx_button__icon.dxi.dxi-close-circle")])]):null})},E.prototype._drawImageOrIcon=function(e){return e.src?h.el("img.dhx_combobox-tag__image",{src:e.src,alt:""}):e.icon?h.el("span.dhx_combobox-tag__icon",{class:e.icon}):null},E.prototype._getItemText=function(e){return e?e.value:null},E.prototype._updateSelectedItem=function(e){this.config.multiselection?(this.config.selectAllButton&&!this._state.unselectActive&&this.data.getLength()===e.length?(this._layout.getCell("select-unselect-all").attach(y.unselectAllView),this._state.unselectActive=!0):this.config.selectAllButton&&this._state.unselectActive&&(this._layout.getCell("select-unselect-all").attach(y.selectAllView),this._state.unselectActive=!1),this._state.value&&(this._state.value="",this._state.canDelete=0===e.length,this._filter())):this._state.value=null!==(e=this._getItemText(this.data.getItem(e)))&&void 0!==e?e:"",this.paint()},E.prototype._changePopupPosition=function(){var e=this;this.config.multiselection&&h.awaitRedraw().then(function(){e._updatePopup()})},E.prototype._updatePopup=function(){var e=this.getRootView().refs.holder.el;this.popup.getContainer().style.width=e.offsetWidth+"px";var t=this.data.getLength()*(this.config.itemHeight||36);"string"==typeof this.config.listHeight&&this.config.listHeight.includes("px")&&(this.config.listHeight=this.config.listHeight.replace("px",""));t=t<this.config.listHeight?t:this.config.listHeight;this.popup.getContainer().style.height=Number(t)+(this.config.selectAllButton&&this.config.multiselection&&this._layout.getCell("select-unselect-all").isVisible()?33:0)+(this._state.creatingState?this._layout.getCell("not-found").height:0)+"px",this.popup.show(e,{mode:"bottom"})},E);function E(e,t){var n=x.call(this,e,r.extend({template:w,listHeight:224,itemHeight:36,disabled:!1,readOnly:!1,newOptions:!1,htmlEnable:!0},t))||this;n.config.itemsCount=n.config.itemsCount||n.config.showItemsCount,n.config.helpMessage=n.config.helpMessage||n.config.help,n.config.cellHeight&&36===n.config.itemHeight&&(n.config.itemHeight=n.config.cellHeight),n.config.labelInline&&(n.config.labelPosition="left"),Array.isArray(n.config.data)?(n.events=new s.EventSystem(n),n.data=new c.DataCollection({}),n.data.parse(n.config.data)):n.config.data?(n.data=n.config.data,n.events=new s.EventSystem(n),n.events.context=n):(n.events=new s.EventSystem(n),n.data=new c.DataCollection({})),n.popup=new g.Popup,n.popup.events.on(g.PopupEvents.afterShow,function(){n.paint()}),n.popup.events.on(g.PopupEvents.afterHide,function(){n.config.multiselection&&(n._state.value=""),n.paint()}),n.popup.events.on(g.PopupEvents.beforeHide,function(e){e&&n._hideOptions()}),(n.config.readonly||n.config.readOnly)&&(n.config.readOnly=n.config.readOnly||n.config.readonly,n._keyListener=new v.KeyListener),n._state={value:"",ignoreNext:!1,canDelete:!1,unselectActive:!1,currentState:b.ComboState.default,creatingState:!1},n._initHandlers(),n._createLayout(),n.config.value&&n._setValue(n.config.value,!0),n._initEvents();t=h.create({render:function(){return n._draw()},hooks:{didRedraw:function(){n.popup.isVisible()&&(n.focus(),n._configurePopup())}}});return n.mount(e,t),n}t.Combobox=o},function(e,r,t){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(r,"__esModule",{value:!0});var l=t(1),c=t(10),u=t(0),d=t(19),h=t(37),o=t(6),f=t(78),p=t(2),g=t(51),v=t(151);r.MOVE_UP=1,r.MOVE_DOWN=2;var _,n=(_=o.View,n(m,_),m.prototype._didRedraw=function(e){},m.prototype._dblClick=function(e){var t=p.locate(e);t&&(t=this.data.getItem(t).id,this.config.editable&&this.editItem(t),this.events.fire(g.ListEvents.doubleClick,[t,e]))},m.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},m.prototype._dragStart=function(e){var t=this;this._touch.start=!0;var n=[],i=p.locateNode(e,"data-dhx-id"),o=i&&i.getAttribute("data-dhx-id"),i=this.selection.getId();return this.config.multiselection&&i instanceof Array&&(i.map(function(e){e!==o&&t.getRootView().refs[e]&&n.push(t.getRootView().refs[e].el)}),i=a(i)),"string"==typeof i&&(i=[i]),this.config.dragMode&&!this._edited?c.dragManager.onMouseDown(e,i||[o],n):null},m.prototype.disableSelection=function(){this.selection.disable()},m.prototype.enableSelection=function(){this.selection.enable()},m.prototype.editItem=function(e){this._edited=e,this.data.getItem(this._edited)&&this.events.fire(g.ListEvents.beforeEditStart,[e])?(this.paint(),this.events.fire(g.ListEvents.afterEditStart,[e])):this._edited=null},m.prototype.editEnd=function(e,t){var n;this._edited&&(null!==e&&(n=this.data.getItem(t),this.data.update(t,s(s({},n),{value:e})),this._changed=!0),this._edited=null,this.paint())},m.prototype.getFocusItem=function(){return this.data.getItem(this._focus)},m.prototype.setFocus=function(e){this._focus!=e&&this.data.exists(e)&&(this._focus=e,this.showItem(e),this.events.fire(g.ListEvents.focusChange,[this.data.getIndex(this._focus),this._focus]),this.paint())},m.prototype.getFocus=function(){return this._focus},m.prototype.destructor=function(){this.events&&this.events.clear(),this.keyManager&&this.keyManager.destructor(),this.selection&&this.selection.destructor(),this.config=this.events=this.selection=this.keyManager=null,this._handlers=this._focus=this._edited=this._events=this._topOffset=this._visibleHeight=this._touch=null,this.unmount()},m.prototype.showItem=function(e){var t,n,i,o=this.getRootView();o&&o.node&&o.node.el&&void 0!==e&&((t=this.getRootNode())&&(n=this.config.virtual,i=this.data.getIndex(e),o=Math.floor(i/t.children.length)||0,e=t.children[i-t.children.length*o],(n||e)&&(o=n?parseInt(this.config.itemHeight):e.clientHeight,(e=n?i*o:e.offsetTop)>=t.scrollTop+t.clientHeight-o?t.scrollTo(0,e-t.clientHeight+o):e<t.scrollTop&&t.scrollTo(0,e))))},m.prototype._renderItem=function(e,t){var n=this.config.itemHeight;if(e.$empty)return u.el("li",{class:"dhx_list-item",style:{height:n}});var i=this.config.template&&this.config.template(e)||e.html,o=e.id==this._focus;if(e.id==this._edited)return v.getEditor(e,this).toHTML();var r=this.data.getMetaMap(e),o=s(s(s(s({},this._events),{class:"dhx_list-item"+(r&&r.selected?" dhx_list-item--selected":"")+(o?" dhx_list-item--focus":"")+(r&&r.drop&&!this._edited?" dhx_list-item--drophere":"")+(r&&r.drag&&!this._edited?" dhx_list-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_list-item--drag":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,_ref:e.id.toString(),style:{height:n},_key:e.id}),this.getItemAriaAttrs(this,e)),{tabindex:o?0:-1});if(i)return i===e.html||this.config.htmlEnable?(o[".innerHTML"]=i,u.el("li",o)):u.el("li",o,i);e=e.text||e.value;return this.config.htmlEnable?o[".innerHTML"]=e:o.class+=" dhx_list-item--text",this.config.htmlEnable?u.el("li",o):u.el("li",o,e)},m.prototype._renderList=function(){var n=this,e=this._getRange(),t=this.data.getRawData(e[0],e[1]).map(function(e,t){return n._renderItem(e,t)});return this.config.virtual&&(t=a([u.el(".div",{style:{height:e[2]+"px"}})],t,[u.el(".div",{style:{height:e[3]+"px"}})])),u.el("ul.dhx_widget.dhx_list",s(s({style:{"max-height":this.config.height,position:"relative"},tabindex:0,class:(this.config.css||"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),t)},m.prototype.moveFocus=function(e,t){var n,i,o=this.data.getLength();o&&(i=(n=this._focus)?this.data.getIndex(n):-1,t=t||1,e===r.MOVE_DOWN?n=this.data.getId(Math.min(i+t,o-1)):e===r.MOVE_UP&&(n=this.data.getId(Math.max(i-t,0))),this.setFocus(n))},m.prototype._getRange=function(){if(this.config.virtual){var e=this._visibleHeight||parseInt(this.config.height),t=parseInt(this.config.itemHeight),n=this.data.getRawData(0,-1).length,i=n*t,o=this._topOffset,o=Math.max(0,Math.min(o,i-e)),r=Math.floor(o/t),e=Math.min(n-r,Math.floor(e/t)+5);return this._topOffset=o,[r,e+r,r*t,i-t*(e+r)]}return[0,-1,0,0]},m.prototype._getHotkeys=function(){var i=this;return{arrowDown:function(e){i.moveFocus(r.MOVE_DOWN),i._changed&&(i._changed=!1),e.preventDefault()},arrowUp:function(e){i.moveFocus(r.MOVE_UP),i._changed&&(i._changed=!1),e.preventDefault()},escape:function(){i.editEnd(null),i._changed&&(i._changed=!1)},enter:function(e){var t,n;i._changed?i._changed=!1:(n=(t=i.selection.getItem())instanceof Array?null===(n=t[0])||void 0===n?void 0:n.id:null==t?void 0:t.id,i.config.editable&&!i._edited&&(t&&n===i._focus||!t)?i.editItem(i._focus):i.selection.add(i._focus),i.events.fire(g.ListEvents.click,[i._focus,e]))},"shift+enter":function(e){i.selection.add(i._focus,!1,!0),i.events.fire(g.ListEvents.click,[i._focus,e])},"ctrl+enter":function(e){i.selection.add(i._focus,!0,!1),i.events.fire(g.ListEvents.click,[i._focus,e])},"ctrl+a":function(e){i.config.multiselection&&(e.preventDefault(),i.selection.remove(),i.data.map(function(e){return e.id}).forEach(function(e){"ctrlClick"===i.config.multiselection?i.selection.add(e,!0):i.selection.add(e)}))}}},m.prototype._initHotKey=function(){var e,t=this._getHotkeys();for(e in t)this.keyManager.addHotKey(e,t[e]);for(e in this.config.hotkeys)this.keyManager.addHotKey(e,this.config.hotkeys[e])},m.prototype.getItemAriaAttrs=function(e,t){var n,i,o;return s(s({role:"option","aria-selected":t.$selected?"true":"false"},(o=t,(i=e).config.dragMode&&!i._edited?{"aria-grabbed":Boolean(o.$dragtarget&&!i._edited).toString()}:{})),(n=e).config.editable?{"aria-roledescription":n._edited?"Press Enter to stop editing":"Double click to edit content"}:{})},m.prototype._getListAriaAttrs=function(e,t){return{role:"listbox","aria-label":"Listbox "+(e.title||"")+", count of options = "+t+"."+(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},m);function m(e,t){void 0===t&&(t={});var i=this,n=t.itemHeight||(t.virtual?37:null);n&&"number"==typeof n&&(n=n.toString()+"px"),(i=_.call(this,e,l.extend({itemHeight:n,keyNavigation:!0,editable:!1,selection:!0,htmlEnable:!0},t))||this)._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null};t=i.config.data;t instanceof c.DataCollection?(i.data=t,i.events=t.events):(i.data=new c.DataCollection({}),i.events=i.data.events,t&&i.data.parse(t)),i.selection=new f.Selection({disabled:!i.config.selection,multiselection:i.config.multiselection},i.data,i.events),i.config.keyNavigation&&(i.keyManager=new d.KeyManager(function(e,t){return t==i._uid&&(!i._edited||i._edited&&"escape"!==e.key)}),i._initHotKey()),i.events.on(c.DataEvents.change,function(e,t,n){"setPage"===t&&i.showItem(i.data.getId(n[0])),i.paint()}),i.events.on(h.SelectionEvents.afterUnSelect,function(){return i.paint()}),i.events.on(h.SelectionEvents.afterSelect,function(e){e&&i.config.selection&&(i._focus=e),i.paint()}),i.events.on(g.ListEvents.afterEditEnd,i.editEnd.bind(i));t=function(t){return function(e){i.data.setMeta(i.data.getItem(e.target),"drop",t),i.paint()}};i.events.on(c.DragEvents.canDrop,t(!0)),i.events.on(c.DragEvents.cancelDrop,t(!1));t=function(t){return function(e){e.source.map(function(e){return i.data.setMeta(i.data.getItem(e),"drag",t)}),i.paint()}};i.events.on(c.DragEvents.dragStart,t(!0)),i.events.on(c.DragEvents.afterDrag,t(!1)),i._handlers={onmousedown:function(e){i._dragStart(e)},ontouchstart:function(e){i._touch.timer=setTimeout(function(){i._dragStart(e)},i._touch.duration),i._touch.timeStamp?(i._touch.dblDuration>=i._touch.timeStamp-+e.timeStamp.toFixed()&&(e.preventDefault(),i._dblClick(e)),i._touch.timeStamp=null):i._touch.timeStamp=+e.timeStamp.toFixed(),setTimeout(function(){i._touch.timeStamp=null},i._touch.dblDuration)},ontouchmove:function(e){i._touch.start&&e.preventDefault(),i._clearTouchTimer()},ontouchend:function(){i._touch.start=!1,i._clearTouchTimer()},ondragstart:function(){return!(i.config.dragMode&&!i._edited)&&null},oncontextmenu:function(e){var t=p.locate(e);t&&i.events.fire(g.ListEvents.itemRightClick,[t,e])},onclick:function(e){var t=p.locate(e);t&&(i.selection.add(t,e.ctrlKey||e.metaKey,e.shiftKey),i._focus=t,i.events.fire(g.ListEvents.click,[t,e]),i.paint())},ondblclick:function(e){i._dblClick(e)},onscroll:function(e){i.config.virtual&&(i._topOffset=e.target.scrollTop,i._visibleHeight=e.target.offsetHeight,i.paint())},onmouseover:function(e){var t=p.locate(e);t&&t!==p.locate(e.relatedTarget)&&i.events.fire(g.ListEvents.itemMouseOver,[t,e])}};t=i.config.eventHandlers;if(t)for(var o=0,r=Object.entries(t);o<r.length;o++){var s=r[o],a=s[0],s=s[1];i._handlers[a]=p.eventHandler(function(e){return p.locate(e)},s,i._handlers[a])}i.config.dragMode&&c.dragManager.setItem(i._uid,i),i._topOffset=i._visibleHeight=0;t=u.create({render:function(){return i._renderList()},hooks:{didMount:function(e){i.config.virtual&&(i._visibleHeight=e.node.el.offsetHeight)},didRedraw:function(e){return i._didRedraw(e)}}});return i.mount(e,t),i}r.List=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37),o=n(10),n=(r.prototype.enable=function(){this.config.disabled=!1},r.prototype.disable=function(){this.remove(),this.config.disabled=!0},r.prototype.getId=function(){return this.config.multiselection?this._selected:this._selected[0]},r.prototype.getItem=function(){var t=this;return this.config.multiselection?this._selected.map(function(e){return t._data.getItem(e)}):this._selected.length?this._data.getItem(this._selected[0]):null},r.prototype.contains=function(e){return e?this._selected.includes(e):0<this._selected.length},r.prototype.remove=function(e){var t=this;e?this._unselectItem(e):(this._selected.forEach(function(e){return t._unselectItem(e)}),this._selected=[])},r.prototype.add=function(e,t,n,i){var o,r=this;this.config.disabled||(void 0!==e?(o=this.config.multiselection,n&&this._selected.length&&o?this._addMulti(e,i):this._addSingle(e,o&&("ctrlClick"!==o||t),i)):this._data.serialize().filter(function(e){e=e.id;return!r._selected.includes(e)}).forEach(function(e){e=e.id;r._addMulti(e,i)}))},r.prototype.destructor=function(){var t=this;this._selected.forEach(function(e){return t._unselectItem(e,!0)})},r.prototype._addMulti=function(e,t){var n=this._selected[this._selected.length-1],i=this._data.getIndex(n),o=this._data.getIndex(e);for(o<i&&(i=(e=[o,i])[0],o=e[1]);i<=o;i++){var r=this._data.getId(i);this._selectItem(r,t)}},r.prototype._addSingle=function(t,e,n){var i=this;e||this._selected.forEach(function(e){e!=t&&i._unselectItem(e)}),e&&this._selected.includes(t)?this._unselectItem(t,n):this._selectItem(t,n)},r.prototype._selectItem=function(e,t){var n=this._data.getItem(e);n&&!this._data.getMeta(n,"selected")&&(t||this.events.fire(i.SelectionEvents.beforeSelect,[e]))&&(this._selected.push(e),this._data.setMeta(n,"selected",!0),t||this.events.fire(i.SelectionEvents.afterSelect,[e]))},r.prototype._unselectItem=function(t,e){(e||this.events.fire(i.SelectionEvents.beforeUnSelect,[t]))&&(this._selected=this._selected.filter(function(e){return e!==t}),this._data.setMeta(this._data.getItem(t),"selected",!1),e||this.events.fire(i.SelectionEvents.afterUnSelect,[t]))},r);function r(e,t,n){var i=this;this.config=e,this.events=n,this._data=t,this._selected=[],this._data.events.on(o.DataEvents.removeAll,function(){i._selected=[]}),"string"==typeof this.config.multiselection&&(["click","ctrlClick"].includes(this.config.multiselection)||(this.config.multiselection=!1)),this._data.events.on(o.DataEvents.beforeRemove,function(e){var t;i._nextSelection=null,1===i._selected.length&&(t=i._data.getIndex(e.id),1<(e=i._data.getLength())&&(t=e==t-1?t-1:t+1,i._nextSelection=i._data.getId(t)))}),this._data.events.on(o.DataEvents.afterRemove,function(e){e=i._selected.indexOf(e.id);-1!==e&&i._selected.splice(e,1),i._nextSelection&&(i.add(i._nextSelection),i._nextSelection=null)})}t.Selection=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={notFound:"Not Found",selectAll:"Select All",unselectAll:"Unselect All",selectedItems:"selected items",createItem:"Create"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(79);t.selectAllView=function(){return i.el(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.selectAll)},t.unselectAllView=function(){return i.el(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.unselectAll)},t.emptyListView=function(e){return i.el("ul.dhx_list",[i.el("li.dhx_list-item.dhx_combobox-options__item"+(e?".dhx_combobox-options__action-create-option":""),{},e?o.default.createItem+' "'+e+'"':o.default.notFound)])},t.emptyListHeight=function(e,t){var n=document.createElement("canvas").getContext("2d",{alpha:!1});return n.font="normal 14px Roboto",e=e?o.default.createItem+' "'+e+'"':o.default.notFound,13+20*Math.ceil(n.measureText(e).width/(t-16))}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.ComboboxEvents||(t.ComboboxEvents={})).change="change",i.focus="focus",i.blur="blur",i.keydown="keydown",i.input="input",i.beforeOpen="beforeOpen",i.afterOpen="afterOpen",i.beforeClose="beforeClose",i.afterClose="afterClose",i.open="open",i.close="close",(t=t.ComboState||(t.ComboState={}))[t.default=0]="default",t[t.error=1]="error",t[t.success=2]="success"},function(e,t,n){"use strict";var f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var g=n(0),v=n(2),_=n(33),m=n(83),y=n(20);t.getFixedColsHeader=function(e,t){if("number"==typeof e.leftSplit){for(var n=0,i=0;i<e.leftSplit;i++)e.columns[i].hidden&&n++;if(n!==e.leftSplit){for(var o=e.columns.slice(0,e.leftSplit-n),r=0,s=0,a=o;s<a.length;s++)r+=a[s].$width;o=0<=e.leftSplit&&m.getFixedRows(f(f({},e),{currentColumns:o,$positions:f(f({},e.$positions),{xStart:0,xEnd:e.leftSplit}),scroll:{top:0,left:0},columns:o}),f(f({},t),{name:"header",position:"top",shifts:{x:0,y:0}})),t=f(f({},t),{name:"header",position:"top"});return o&&g.el(".dhx_"+t.name+"-fixed-cols",f({style:{position:"absolute",top:0,left:0,maxWidth:r,overflow:"hidden"}},{role:"rowgroup","aria-rowcount":o.length}),o.body)}}},t.getFixedCols=function(e,t){if("number"==typeof e.leftSplit){for(var n=0,i=0;i<e.leftSplit;i++)e.columns[i].hidden&&n++;if(n!==e.leftSplit){var o=e.$totalWidth<=t.wrapper.width?0:v.getScrollbarWidth(),r=e.$totalHeight+e.headerHeight+e.footerHeight,s=r>t.gridBodyHeight?r-o:r<t.gridBodyHeight-o?r:t.gridBodyHeight,a=e.columns.slice(0,e.leftSplit-n);e.fixedColumnsWidth=y.getTotalWidth(a);var l=_.getCells(f(f({},e),{columns:a,$positions:f(f({},e.$positions),{xStart:0,xEnd:e.leftSplit})})),c=t.sticky,u=f(f({},t),{name:"footer",position:"bottom"}),d=0<=e.leftSplit&&m.getRows(f(f({},e),{currentColumns:a,$positions:f(f({},e.$positions),{xStart:0,xEnd:e.leftSplit})}),f(f({},t),{name:"footer",position:"bottom"})),h=0;d&&d.forEach(function(e){return h+=e.attrs.style.height});r=function(e){return{role:"rowgroup","aria-rowcount":e}},a=c?d&&g.el(".dhx_"+u.name+"-fixed-cols",f({style:{position:"absolute",top:s<t.gridBodyHeight?s-h:null,left:0,bottom:s>=t.gridBodyHeight?0+(c?o:0)+"px":null}},r(d.length)),d):null,u=e.$positions,d=_.getSpans(e,!0);return[g.el(".dhx_grid-fixed-cols-wrap",f({style:{height:s>=t.gridBodyHeight?(c?t.gridBodyHeight:t.gridBodyHeight+e.headerHeight)-o:s,paddingTop:e.headerHeight,overflow:"hidden",width:e.fixedColumnsWidth}},{role:"presentation","aria-label":"Fixed column"}),[g.el(".dhx_grid-fixed-cols",f(f({style:{top:-e.scroll.top+e.headerHeight-1+"px",paddingTop:t.shifts.y,height:e.$totalHeight,position:"absolute"},_flags:g.KEYED_LIST},_.getHandlers(u.yStart,u.xStart,e)),r(e.data.length)),p([d&&g.el(".dhx_span-spans",{role:"presentation"},[d])],l)),g.el(".dhx_frozen-cols-border",{role:"presentation"})]),e.$footer?a:null]}}}},function(e,t,n){"use strict";var y=this&&this.__assign||function(){return(y=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var b=n(0),f=n(2),m=n(32),w=n(20),i=n(11),p=n(33),g=n(82),x=2;function o(e,t,n,i){n&&(n.toLocaleLowerCase().includes("touch")?t._events:t.events).fire(n,[e,i])}function E(e,t,n){return{onclick:[o,e,n,i.GridEvents[t+"CellClick"]],onmouseover:[o,e,n,i.GridEvents[t+"CellMouseOver"]],onmousedown:[o,e,n,i.GridEvents[t+"CellMouseDown"]],ontouchstart:[o,e,n,i.GridEvents[t+"CellMouseDown"]],ondblclick:[o,e,n,i.GridEvents[t+"CellDblClick"]],oncontextmenu:[o,e,n,i.GridEvents[t+"CellRightClick"]],ontouchmove:[o,e,n,i.GridSystemEvents[t+"CellTouchMove"]],ontouchend:[o,e,n,i.GridSystemEvents[t+"CelltouchEnd"]]}}function C(e,t,n,i,o,r,s){void 0===o&&(o="");var a=t.type?"dhx_"+t.type+"-cell":"dhx_string-cell",e=n.content[e.content]&&n.content[e.content].toHtml(t,n),l={};return n.columns.forEach(function(e){var t=!!n.content[e[i][s].content];l[e.id]=t&&n.content[e[i][s].content].toHtml(e,n)||e[i][s].text}),b.el("."+a,{style:{class:o.trim(),padding:0}},[e&&("string"==typeof e||"number"==typeof e?b.el("div",{class:"dhx_grid-footer-cell-text",role:"presentation",".innerHTML":t.template&&"string"==typeof e?t.template(e,l,t):e}):e)])}function a(f,e){if(!f.data||!f.columns)return[];var t,p=f.$positions,g=e.name,v=f.currentColumns,_=f[g+"RowHeight"]||40,m=(t=g,e=(e=v).map(function(e){return e[t]||[{}]}),w.transpose(e));return m.map(function(e,h){return b.el(".dhx_"+g+"-row",y({style:{height:_}},{role:"row","aria-rowindex":h+1}),e.map(function(i,e){var t=i.css||"",n=v[e],o=p.xStart+e+1,r="dxi dxi-sort-variant dhx_grid-sort-icon",s="none";f.sortBy&&""+n.id===f.sortBy&&!i.content&&(r+=" dhx_grid-sort-icon--"+(u=f.sortDir||"asc"),t+=" dhx_grid-"+g+"-cell--sorted ",s="asc"===u?"ascending":"descending");var a=w.isSortable(f,n)&&i.text&&"footer"!==g&&!1!==i.headerSort;a&&(t+=" dhx_grid-header-cell--sortable");var l=0===e?"dhx_first-column-cell":"",c=e===v.length-1?"dhx_last-column-cell":"";i.content||(i.align?t+=" dhx_grid-header-cell--align_"+i.align+" ":t+=" dhx_grid-header-cell--"+("number"===n.type||"percent"===n.type||"date"===n.type?"align_right":"align_left")+" "),t+=l+" "+c;var u=(void 0!==n.resizable?n:f).resizable;u&&(u=b.el("div",{class:"dhx_resizer_grip_wrap","aria-hidden":"true"},[b.el("div",{class:"dhx_resizer_grip",dhx_resized:n.id,style:{height:100*m.length+"%"}},[b.el("div",{class:"dhx_resizer_grip_line"})])]),("footer"===g||0<h)&&(u=null)),i.align&&(t+=" dhx_align-"+i.align);l=function(e,t,n){t={"aria-colindex":t};return"footer"===e||i.content?t.role="gridcell":(t.role="columnheader",t["aria-sort"]=n),t};if(i.content)return b.el(".dhx_grid-"+g+"-cell.dhx_grid-custom-content-cell",y(y({class:t.trim(),"data-dhx-id":n.id,_key:e,style:{width:n.$width,height:"footer"===g?_+x/2+"px":_+"px"}},E(n,g,f)),l(g,o,s)),[C(i,n,f,g,"",0,h),u||null]);var d,c="dhx_grid-header-cell-text_content";return f.autoHeight&&(c+=" dhx_grid-header-cell-text_content-auto-height"),b.el(".dhx_grid-"+g+"-cell",y(y({class:t.trim(),"data-dhx-id":n.id,_key:e,style:{width:n.$width,height:"footer"===g?_+x/2+"px":_+"px"}},E(n,g,f)),l(g,o,s)),[b.el("div.dhx_grid-header-cell-text",{role:"presentation"},[b.el("span",y(y({class:c},(d=i.text,a?{role:"button","aria-label":"Sort by "+d}:{})),{".innerHTML":i.text})),u||null]),a&&b.el("div",{class:r,"aria-hidden":"true"})])}))})}function l(d,h){var f=d.columns,e=w.transpose(f.map(function(e){return e[h.name]||[]})),p=d[h.name+"RowHeight"]||40,g=h.name,v=d.$positions,_=0;return e.map(function(e,u){return _=0,b.el(".dhx_span-row",{style:{top:p*u+"px",height:p},class:"dhx_header-row","aria-hidden":"true"},e.map(function(e,t){var n=f[t];v.xStart;_+=n.hidden?0:n.$width;var i=0===t?"dhx_first-column-cell":"",o=t===f.length-1||(e.colspan||0)+(t-1)>=f.length-1?"dhx_last-column-cell":"",r=p;e.rowspan&&(r=r*e.rowspan-1);var s=w.isSortable(d,n)&&e.rowspan&&e.text&&"footer"!==h.name,a="dxi dxi-sort-variant dhx_grid-sort-icon";d.sortBy&&""+n.id===d.sortBy&&!e.content&&(a+=" dhx_grid-sort-icon--"+(d.sortDir||"asc"));var l=n.align?"dhx_align-"+n.align:"number"!==n.type&&"percent"!==n.type&&"date"!==n.type||e.colspan?"dhx_align-left":"dhx_align-right",c="dhx_grid-header-cell "+i+" "+o+" "+(e.rowspan?"dhx_span-cell__rowspan":"")+" "+(e.align?"dhx_align-"+e.align:l)+" "+(e.css||"");s&&(c+=" dhx_grid-header-cell--sortable"),e.content||(e.align?c+=" dhx_grid-header-cell--align_"+e.align+" ":c+=" dhx_grid-header-cell--"+("number"===n.type||"percent"===n.type||"date"===n.type?"align_right":"align_left")+" ");i=null;e.content&&((i=C(e,n,d,g,c,0,u)).attrs.style=y(y({},i.attrs.style),{width:"100%",borderRight:"0"}));o="";0<_-n.$width&&(o="1px solid #e4e4e4");l="dhx_grid-header-cell-text_content";return d.autoHeight&&(l+=" dhx_grid-header-cell-text_content-auto-height"),e.colspan||e.rowspan?b.el(".dhx_span-cell",y({style:{width:m.getWidth(f,e.colspan,t),height:"footer"===g?r+x/2:r,left:_-n.$width,borderLeft:o,top:p*u},class:c.trim(),"data-dhx-id":n.id},E(n,g,d)),[i||e.rowspan?b.el("div.dhx_grid-header-cell-text",{role:"presentation"},[b.el("span",{class:l,".innerHTML":e.text})]):b.el("span",{class:l,".innerHTML":e.text}),s&&b.el("div",{class:a})]):null}).filter(function(e){return e}))})}function v(e){return{role:"rowgroup","aria-rowcount":e}}t.getRows=a,t.getFixedSpans=l,t.getFixedRows=function(e,t){var n=a(e,t),i=l(e,t),o=null;"footer"!==t.name||t.sticky||(o=0<=e.leftSplit&&a(y(y({},e),{currentColumns:e.columns.slice(0,e.leftSplit),$positions:y(y({},e.$positions),{xStart:0,xEnd:e.leftSplit})}),t));var r,s=((s={position:"sticky"})[t.position]=0,s);return t.sticky||(s.left=-e.scroll.left,r=-e.scroll.left,s.position="relative"),b.el(".dhx_"+t.name+"-wrapper",{class:t.sticky?"":"dhx_compatible-"+t.name,style:y(y({},s),{left:t.sticky?r:0,height:"footer"===t.name?e[t.name+"Height"]+x/2:e[t.name+"Height"],width:t.sticky?e.$totalWidth:t.wrapper.width-x}),role:"presentation"},[b.el(".dhx_grid-"+t.name,{style:{height:"footer"===t.name?e[t.name+"Height"]+x/2:e[t.name+"Height"],left:r,paddingLeft:t.shifts.x,width:e.$totalWidth},role:"presentation"},[b.el(".dhx_"+t.name+"-rows",y({},v(h(n).length)),h(n)),b.el(".dhx_"+t.name+"-spans",{style:{marginLeft:-t.shifts.x},class:"dhx_"+t.name+"-rows",role:"presentation"},i),o&&b.el(".dhx_"+t.name+"-fixed-cols",{style:{position:"absolute",top:0,left:e.scroll.left+"px",height:"100%"}},o)]),b.el("div",{style:{width:e.$totalWidth},role:"presentation"})])},t.getFixedDataRows=function(e,t){if("number"==typeof e.topSplit){var n=e.$totalWidth,i=e.topSplit,o=e.$positions,r=e.data,s=e.$totalHeight,a=e.width,l=r.slice(0,i),c=p.getCells(y(y({},e),{data:l,$positions:y(y({},o),{yStart:0,yEnd:i})})),u=l.reduce(function(e,t){return e+t.$height},0),d=p.getSpans(e,!0),i=g.getFixedCols(y(y({},e),{headerHeight:0,data:l,scroll:y(y({},e.scroll),{top:-1}),$positions:y(y({},o),{yStart:0,yEnd:i}),$totalHeight:u}),y(y({},t),{shifts:y(y({},t.shifts),{y:0})}))||[];return[b.el(".dhx_grid-fixed-data-rows-wrap",{style:{top:e.headerHeight,overflow:"hidden",height:u>t.wrapper.height?t.wrapper.height:u,width:n<a?n:s>=t.gridBodyHeight?a-f.getScrollbarWidth()-2:a-2}},h([b.el(".dhx_grid-fixed-cols",y(y({style:{left:-e.scroll.left+"px",paddingLeft:t.shifts.x,position:"absolute",width:n},_flags:b.KEYED_LIST},p.getHandlers(0,o.xStart,e)),v(r.length)),h([d&&b.el(".dhx_span-spans",{role:"presentation"},[d])],c))],i))]}}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(1),l=n(0),c=n(2),u=n(13),d=n(25),o=(s=d.Navbar,o(h,s),h.prototype.getState=function(e){if(!a.isDefined(e)||this.data.getItem(e)){var t,n={};for(t in this.data.eachChild(this.data.getRoot(),function(e){e.twoState&&!e.group?n[e.id]=e.active:"input"!==e.type&&"selectButton"!==e.type&&"datePicker"!==e.type||(n[e.id]=e.value)},!1),this._groups)this._groups[t].active&&(n[t]=this._groups[t].active);return e?n[e]:n}},h.prototype.setState=function(i){var o,e,r=this;for(e in i)!function(t){if(r._groups&&r._groups[t])r._groups[t].active&&(r.data.update(r._groups[t].active,{active:!1}),r._groups[t].active=i[t],r.data.update(i[t],{active:!0}));else{var e=r.data.getItem(t);switch(e.type){case"input":r.data.update(t,{value:i[t]});break;case"selectButton":var n=null===(o=e.items)||void 0===o?void 0:o.find(function(e){return e.value===i[t]});r.data.update(t,{value:i[t],icon:null==n?void 0:n.icon});break;default:r.data.update(t,{active:i[t]})}}}(e)},h.prototype._customHandlers=function(){var n=this;return{input:function(e){var t=c.locate(e);n.data.update(t,{value:e.target.value})},tooltip:function(e){var t=c.locateNode(e);t&&(e=t.getAttribute("data-dhx-id"),(e=n.data.getItem(e)).tooltip&&u.tooltip(e.tooltip,{node:t,position:u.Position.bottom}))}}},h.prototype._getFactory=function(){return d.createFactory({widget:this,defaultType:"navItem",allowedTypes:["button","imageButton","selectButton","navItem","menuItem","separator","spacer","title","input","customHTML","datePicker","customHTMLButton"],widgetName:"toolbar"})},h.prototype._draw=function(e){var n=this,t=this.data.getLength()?this.data.reduce(function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}},0)+24:null;return l.el("nav.dhx_widget.dhx_toolbar",{style:{height:t},class:this.config.css||""},[l.el("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},{role:"toolbar","aria-label":e||""}),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",function(e){var t;9!==e.which||(t=c.locateNode(document.activeElement))&&(e=t.getAttribute("data-dhx-id"),(e=n.data.getItem(e)).tooltip&&u.tooltip(e.tooltip,{node:t,position:u.Position.bottom,force:!0}))},!0)}}}),this.data.map(function(e){return n._factory(e)},this.data.getRoot(),!1))])},h.prototype._getMode=function(e,t){return e.id===t?"bottom":"right"},h.prototype._close=function(e){this._activePosition=null,this._currentRoot=null,s.prototype._close.call(this,e)},h.prototype._setRoot=function(e){this.data.getParent(e)===this.data.getRoot()&&(this._currentRoot=e)},h);function h(e,t){var n=s.call(this,e,a.extend({navigationType:"click"},t))||this;n._currentRoot=null;return n.mount(e,l.create({render:function(){return n._draw(e)}})),n}t.Toolbar=o},function(e,t,n){"use strict";var w=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var x=n(17),E=n(4),C=n(26);function S(e,t){var n=E.getCellIndex(e),e=E.getCellIndex(t),t=e.col-n.col,n=e.row-n.row;return{x:t,y:n,isLargerByX:Math.abs(t)>Math.abs(n)}}function I(e){var t=e.map(function(e){return parseFloat(e)}),n=t.reduce(function(e,t){return e+t},0),e=t.length;return(n/e*2-2*t[0])/(e-1)}function k(e){for(var t=C.dateDiff(e[0],e[1]),n=1;n<e.length-1;n++)C.dateDiff(e[n],e[n+1])!==t&&(t=0,n=e.length);return t}function M(e){for(var t=C.timeDiff(e[0],e[1]),n=1;n<e.length-1;n++)C.timeDiff(e[n],e[n+1])!==t&&(t=0,n=e.length);return t}t.getCellsDiff=S,t.getLastCopyingCell=function(e,t){E.isRangeId(e)&&(e=e.split(":")[1]);var n=E.getCellIndex(e),e=(i=S(e,t)).x,t=i.y,i=i.isLargerByX,t=n.row+t,e=n.col+e,e=i?e:n.col,t=i?n.row:t;return E.getCellNameByIndex(t,e)},t.getProgressionStep=I,t.getDateStep=k,t.getTimeStep=M,t.getAutoFilledCells=function(r,e,t,s){var n=r.filter(function(e){return x.isNumeric(e.value)&&"common"===e.format.id&&"number"===e.format.id}).map(function(e){return e.value}),i=r.filter(function(e){return x.isNumeric(e.value)&&"date"===e.format.id}).map(function(e){return C.excelDateToJSDate(e.value)}),o=r.filter(function(e){return x.isNumeric(e.value)&&"time"===e.format.id}).map(function(e){return C.excelDateToJSDate(e.value)});function a(e,t){return e=E.getCellIndex(e),t=E.getCellIndex(t),e.row===t.row?e.col>t.col:e.row>t.row}1===n.length&&n.push(+n[0]+1);var l=i.length<2?1:k(i),c=o.length<2?36e5:M(o),u=E.getCellsArray(e),d=I(n),h=parseFloat(n[n.length-1]),f=i[i.length-1],p=o[o.length-1],g=0,v=(m=e.split(":"))[0],_=m[1],m=(e=t.split(":"))[0],e=e[1],y=S(v===m&&_?_:v,m).isLargerByX,b=a(v,a(m,e)?e:m);return b&&(l=-l,f=i[0],c=-c,p=o[0],d=I(w(n.reverse())),h=parseFloat(n[n.length-1])),n=E.getCellsArray(t).filter(function(e){return!u.includes(e)}),b&&(n=n.reverse(),r=r.reverse()),t=n.map(function(e,t){var n,i=r[g].value.toString().startsWith("="),o=r[g].value;if(i&&(i=n=0,t=b?-1*(t+g+u.length+1):t-g+u.length,y?i=t:n=t,o=s.transposeMath(o,n,i)),x.isNumeric(o))switch(r[g].format.id){case"date":f=C.addDay(f,l),o=C.getExcelDateFromJs(f);break;case"time":p=C.addTime(p,c),o=C.getExcelDateFromJs(p);break;default:o=(h+=d).toFixed(5)}return g=void 0!==r[g+1]?g+1:0,o}),b&&(t=t.reverse()),{cells:n[0]+":"+n[n.length-1],value:t}}},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(87)),i(t(217))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),i=n(0),o=n(3),r=n(19),c=n(16),s=n(12),a=n(38),u=n(215),f=n(53),d=n(216),h=n(25),n=(p.prototype.paint=function(){this._layout.paint()},p.prototype.isFullScreen=function(){return this._fullScreen},p.prototype.setFullScreen=function(){this._fullScreen||(this._fullScreen=!0,this.setSize(window.innerWidth,window.innerHeight),this.setPosition(window.pageXOffset,window.pageYOffset))},p.prototype.unsetFullScreen=function(){this._fullScreen&&(this._fullScreen=!1,this.setSize(this._oldSizes.width,this._oldSizes.height),this.setPosition(this._oldPosition.left,this._oldPosition.top))},p.prototype.setSize=function(e,t){this._oldSizes={width:this._popup.offsetWidth,height:this._popup.offsetHeight};var n={width:this._oldSizes.width,height:this._oldSizes.height};l.isDefined(e)&&(this.config.width=n.width=e),l.isDefined(t)&&(this.config.height=n.height=t),this._popup.style.width=n.width+"px",this._popup.style.height=n.height+"px",this.events.fire(f.WindowEvents.resize,[n,this._oldSizes,{left:!0,top:!0,bottom:!0,right:!0}])},p.prototype.getSize=function(){return{width:this._popup.offsetWidth,height:this._popup.offsetHeight}},p.prototype.setPosition=function(e,t){this._oldPosition={left:this._popup.offsetLeft,top:this._popup.offsetTop};var n={left:this._oldPosition.left,top:this._oldPosition.top};l.isDefined(e)&&(this.config.left=n.left=e),l.isDefined(t)&&(this.config.top=n.top=t),this._popup.style.left=n.left+"px",this._popup.style.top=n.top+"px",this.events.fire(f.WindowEvents.resize,[n,this._oldPosition,{left:!0,top:!0,bottom:!0,right:!0}])},p.prototype.getPosition=function(){return{left:this._popup.offsetLeft,top:this._popup.offsetTop}},p.prototype.show=function(e,t){if(void 0===e&&(e=this.config.left),void 0===t&&(t=this.config.top),this.events.fire(f.WindowEvents.beforeShow,[{left:e,top:t}])){this.isVisible()&&this.hide(),d.default.setActive(this._uid),this._popup.className+=" dhx_popup dhx_widget"+(this.config.modal?" dhx_popup--window_modal":" dhx_popup--window")+(this.config.css?" "+this.config.css:""),this._popup.style.position=this.config.modal?"fixed":"absolute",this._popup.setAttribute("data-dhx-widget-id",this._uid);var n=this._getContainerParams(),i=n.containerInnerWidth,o=n.containerInnerHeight,r=n.containerXOffset,s=n.containerYOffset,a=this.config.width=this.config.width||this.config.minWidth||i/2,n=this.config.height=this.config.height||this.config.minHeight||o/2;if(this.config.left=e=l.isDefined(e)?e:(i-a)/(this.config.modal?2:2+r),this.config.top=t=l.isDefined(t)?t:(o-n)/(this.config.modal?2:2+s),this._isActive)return this._popup.style.left=e+"px",void(this._popup.style.top=t+"px");this.config.viewportOverflow&&d.default.openFreeWindow(this.config.node),this.config.modal&&this._blockScreen(),this._popup.style.width=a+"px",this._popup.style.height=n+"px",this._popup.style.left=e+"px",this._popup.style.top=t+"px",this.config.node.appendChild(this._popup),this._popup.focus(),this._isActive=!0,this.events.fire(f.WindowEvents.afterShow,[{left:e,top:t}]),c.focusManager.setFocusId(this._uid)}},p.prototype.hide=function(){this._hide()},p.prototype._hide=function(e){this._isActive&&this.events.fire(f.WindowEvents.beforeHide,[{left:this.config.left,top:this.config.top},e])&&(this.config.viewportOverflow&&d.default.closeFreeWindow(this.config.node),this._blocker&&(this.config.node.removeChild(this._blocker),this.config.closable&&this._keyManager.removeHotKey(null,this),this._blocker=null),this.config.node.removeChild(this._popup),this._isActive=!1,this.events.fire(f.WindowEvents.afterHide,[{left:this.config.left,top:this.config.top},e]))},p.prototype.isVisible=function(){return this._isActive},p.prototype.getWidget=function(){return this._layout.getCell("content").getWidget()},p.prototype.getContainer=function(){return this.getRootView().data._container},p.prototype.attach=function(e,t){this._layout.getCell("content").attach(e,t)},p.prototype.attachHTML=function(e){this._layout.getCell("content").attachHTML(e)},p.prototype.getRootView=function(){return this._layout.getRootView()},p.prototype.destructor=function(){this._isActive&&this.hide(),this.header&&this.header.destructor(),this.footer&&this.footer.destructor(),this.events&&this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._layout&&this._layout.destructor(),this.config=this.header=this.footer=this.events=null,this._popup=this._uid=this._handlers=this._isActive=this._keyManager=this._fullScreen=this._oldSizes=this._oldPosition=null},p.prototype.fullScreen=function(){this.setFullScreen()},p.prototype._initHandlers=function(){var n=this;this._handlers={headerDblClick:function(e){return n.events.fire(f.WindowEvents.headerDoubleClick,[e])},move:function(e){3!==e.which&&(e.preventDefault(),d.default.setActive(n._uid),u.detectDrag(e).then(function(e){e&&n._startDrag(e.x,e.y)}))},resize:{".dhx_window-resizer":function(t){3!==t.which&&(t.preventDefault(),d.default.setActive(n._uid),u.detectDrag(t).then(function(e){e&&((e=t.target.classList).contains("dhx_window-resizer--left")?n._startResize({left:!0}):e.contains("dhx_window-resizer--right")?n._startResize({right:!0}):e.contains("dhx_window-resizer--top")?n._startResize({top:!0}):e.contains("dhx_window-resizer--bottom")?n._startResize({bottom:!0}):e.contains("dhx_window-resizer--bottom_left")?n._startResize({left:!0,bottom:!0}):e.contains("dhx_window-resizer--bottom_right")?n._startResize({bottom:!0,right:!0}):e.contains("dhx_window-resizer--top_left")?n._startResize({top:!0,left:!0}):e.contains("dhx_window-resizer--top_right")&&n._startResize({top:!0,right:!0}))}))}},setActive:function(){d.default.setActive(n._uid)}}},p.prototype._initUI=function(){var n=this,e=[],t=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;t&&e.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),e.push({id:"content",css:t?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&e.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&e.push({id:"resizers",height:"content",css:"resizers"});var i,e=this._layout=new s.Layout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:e,on:{click:this._handlers.setActive},id:this._uid});t&&(i=this.header=new a.Toolbar,this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),i.events.on(h.NavigationBarEvents.click,function(e,t){"close"===e&&n._hide(t)})),e.getCell("header").attach(i)),this.config.footer&&(i=this.footer=new a.Toolbar,e.getCell("footer").attach(i)),this.config.resizable&&e.getCell("resizers").attach(function(){return n._drawResizers()})},p.prototype._drawResizers=function(){return i.el(".dhx-resizers",{onmousedown:this._handlers.resize},[i.el(".dhx_window-resizer.dhx_window-resizer--left",{_ref:"left"}),i.el(".dhx_window-resizer.dhx_window-resizer--right",{_ref:"right"}),i.el(".dhx_window-resizer.dhx_window-resizer--bottom",{_ref:"bottom"}),i.el(".dhx_window-resizer.dhx_window-resizer--top",{_ref:"top"}),i.el(".dhx_window-resizer.dhx_window-resizer--bottom_right",{_ref:"bottomRight"}),i.el(".dhx_window-resizer.dhx_window-resizer--bottom_left",{_ref:"bottomLeft"}),i.el(".dhx_window-resizer.dhx_window-resizer--top_right",{_ref:"topRight"}),i.el(".dhx_window-resizer.dhx_window-resizer--top_left",{_ref:"topLeft"})])},p.prototype._startDrag=function(e,t){var a=this;this.config.node.classList.add("dhx_window--stop_selection");function n(e){var t,n,i,o={left:a._popup.offsetLeft,top:a._popup.offsetTop},r=e.pageX-l,s=e.pageY-c;a.config.viewportOverflow||(t=(i=a._getContainerParams()).containerXOffset,n=i.containerYOffset,e=i.containerInnerWidth,i=i.containerInnerHeight,r<t?r=t:t+e-u<r&&(r=t+e-u),s<n?s=n:n+i-d<s&&(s=n+i-d)),a.config.left=r,a.config.top=s,a._popup.style.left=r+"px",a._popup.style.top=s+"px",s={left:r,top:s},a.events.fire(f.WindowEvents.move,[s,o,{left:!0,top:!0,bottom:!0,right:!0}])}var l=e-this._popup.offsetLeft,c=t-this._popup.offsetTop,u=this._popup.offsetWidth,d=this._popup.offsetHeight,i=function(){document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",n),a.config.node.classList.remove("dhx_window--stop_selection")};document.addEventListener("mouseup",i),document.addEventListener("mousemove",n)},p.prototype._startResize=function(r){var e,t,s=this,a=100|this.config.minWidth,l=100|this.config.minHeight,c=this._popup.offsetLeft,u=this._popup.offsetTop,d=this._popup.offsetWidth,h=this._popup.offsetHeight,n=this.getRootView().refs;switch(!0){case r.bottom&&r.left:t="dhx_window-body-pointer--bottom_left",e=n.bottomLeft;break;case r.bottom&&r.right:t="dhx_window-body-pointer--bottom_right",e=n.bottomLeft;break;case r.top&&r.left:t="dhx_window-body-pointer--top_left",e=n.bottomLeft;break;case r.top&&r.right:t="dhx_window-body-pointer--top-right",e=n.right;break;case r.top:t="dhx_window-body-pointer--top",e=n.bottomLeft;break;case r.bottom:t="dhx_window-body-pointer--bottom",e=n.bottomLeft;break;case r.left:t="dhx_window-body-pointer--left",e=n.bottomLeft;break;case r.right:t="dhx_window-body-pointer--right",e=n.right}e.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(t);function i(e){var t=(o=s._getContainerParams()).containerInnerWidth,n=o.containerInnerHeight,i=o.containerXOffset,o=o.containerYOffset,e={width:s._notInNode()?e.pageX-c:e.pageX-s.config.node.offsetLeft-c,height:s._notInNode()?e.pageY-u:e.pageY-s.config.node.offsetTop-u,left:s._notInNode()?e.pageX:e.pageX-s.config.node.offsetLeft,top:s._notInNode()?e.pageY:e.pageY-s.config.node.offsetTop};r.right&&(e.width<a?e.width=a:e.width>i+t-c&&(e.width=i+t-c),s._popup.style.width=e.width+"px"),r.bottom&&(e.height<l?e.height=l:e.height>o+n-u&&(e.height=o+n-u),s._popup.style.height=e.height+"px"),r.left&&(c+d-e.left<a&&(e.left=c+d-a),e.width=c+d-e.left,s.config.left=e.left,s._popup.style.left=e.left+"px",s._popup.style.width=e.width+"px"),r.top&&(e.top<o?e.top=o:u+h-e.top<l&&(e.top=u+h-l),e.height=u+h-e.top,s.config.top=e.top,s._popup.style.top=e.top+"px",s._popup.style.height=e.height+"px"),s.config.width=s._popup.offsetWidth,s.config.height=s._popup.offsetHeight,s.events.fire(f.WindowEvents.resize,[e,{left:c,top:u,height:h,width:d},r])}var o=function(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",i),s.config.node.classList.remove("dhx_window--stop_selection"),s.config.node.classList.remove(t),e.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",o),document.addEventListener("mousemove",i)},p.prototype._blockScreen=function(){var i=this,e=document.createElement("div");e.className="dhx_window__overlay",this.config.node.appendChild(e),this._blocker=e,this.config.closable&&(e.addEventListener("click",function(e){return i._hide(e)}),this._keyManager.addHotKey("escape",function(e){var t=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window_modal")),n=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window")),n=t.concat(n);1!==n.length?(n.sort(function(e,t){return+window.getComputedStyle(t).zIndex-+window.getComputedStyle(e).zIndex}),n[n.length-1]===i._popup&&i._hide(e)):i._hide(e)}))},p.prototype._notInNode=function(){return this.config.node===document.body||this.config.modal},p.prototype._getContainerParams=function(){var e=this._notInNode();return{containerInnerWidth:e?window.innerWidth:this.config.node.offsetWidth,containerInnerHeight:e?window.innerHeight:this.config.node.offsetHeight,containerXOffset:e?window.pageXOffset:this.config.node.scrollLeft,containerYOffset:e?window.pageYOffset:this.config.node.scrollTop}},p);function p(e){var n=this;this.config=l.extend({movable:!1,resizable:!1,closable:e.modal},e),this.config.node&&"string"==typeof this.config.node?this.config.node=document.getElementById(this.config.node):this.config.node||(this.config.node=document.body),this._uid=l.uid(),this.events=new o.EventSystem(this);e=this._popup=document.createElement("div");e.tabIndex=1,e.setAttribute("role","dialog"),e.setAttribute("aria-modal",""+(this.config.modal||!1)),this.config.modal||d.default.add(this._uid,this._popup),this._fullScreen=!1,this._isActive=!1,this._keyManager=new r.KeyManager(function(e,t){return t===n._uid}),this._initHandlers(),this._initUI(),this.config.html&&this.attachHTML(this.config.html)}t.Window=n},function(e,d,h){"use strict";(function(e){var i,t=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n},C=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(d,"__esModule",{value:!0});var o,r=h(3),s=h(6),a=h(12),S=h(1),I=h(89),k=h(90),M=h(54),P=h(91),O=h(42),D=h(92),V=h(93),A=h(94),F=h(95),R=h(96),T=h(97),l=h(9),H=h(98),L=h(100),j=h(101),N=h(102),$=h(5),c=h(0),t=(o=s.View,t(u,o),u.prototype.paint=function(){o.prototype.paint.call(this),this.layout.paint()},u.prototype.send=function(i,o,r){var s=this;if(void 0===o&&(o="POST"),this.events.fire($.FormEvents.beforeSend))return new e(function(e,t){var n=new XMLHttpRequest;switch(n.onload=function(){200<=n.status&&n.status<300?e(n.response||n.responseText):t({status:n.status,statusText:n.statusText})},n.onloadend=function(){n.readyState===XMLHttpRequest.DONE&&200===n.status&&s.events.fire($.FormEvents.afterSend)},n.onerror=function(){t({status:n.status,statusText:n.statusText})},"GET"===o&&(i+="?"+encodeURIComponent(JSON.stringify(s.getValue()))),n.open(o,i),r||n.setRequestHeader("Content-Type","application/json"),o){case"POST":s._send(),n.send(r?s.getValue(!0):JSON.stringify(s.getValue()));break;case"DELETE":case"PUT":n.send(r?s.getValue(!0):JSON.stringify(s.getValue()));break;case"GET":default:n.send()}})},u.prototype.clear=function(e){switch(e){case $.ClearMethod.value:this._clear();break;case $.ClearMethod.validation:this._clearValidate();break;default:this._clear(),this._clearValidate()}this.paint()},u.prototype.setValue=function(e){for(var t in e)for(var n in this._attachments)"function"==typeof this._attachments[n].setValue&&this._attachments[n].config.name===t&&this._attachments[n].setValue(e[t])},u.prototype.getValue=function(e){if(e){var t,i=new FormData,o=this;for(t in this._state)!function(n){Array.isArray(o._state[n])?o._state[n].forEach(function(e,t){return i.append(n+"["+t+"]",e)}):i.append(n,o._state[n])}(t);return i}return n({},this._state)},u.prototype.getItem=function(e){for(var t in this._attachments)if(t==e)return this._attachments[t]},u.prototype.validate=function(e){for(var t in void 0===e&&(e=!1),this._isValid=!0,this._attachments)"function"==typeof this._attachments[t].validate&&l.isVerify(this._attachments[t].config)&&!this._attachments[t].validate(e)&&(this._isValid=!1,e||this.events.fire($.FormEvents.validationFail,[t,this._attachments[t]]));return this._isValid},u.prototype.setProperties=function(e,t){if("string"==typeof e&&t&&!S.isEmptyObj(t))for(var n in this._attachments)"function"==typeof this._attachments[n].setProperties&&n===e&&this._attachments[n].setProperties(t);if("object"==typeof e&&!S.isEmptyObj(e))for(var n in this._attachments)"function"!=typeof this._attachments[n].setProperties||S.isEmptyObj(e[n])||this._attachments[n].setProperties(e[n])},u.prototype.getProperties=function(e){if(e)for(var t in this._attachments)if("function"==typeof this._attachments[t].getProperties&&t===e)return this._attachments[t].getProperties();var n={};for(t in this._attachments)"function"==typeof this._attachments[t].getProperties&&(n[t]=this._attachments[t].getProperties());return n},u.prototype.show=function(){if(this.config.hidden||Object.values(this._attachments).some(function(e){return!e.config.hidden}))for(var e in this._formContainerShow(),this._attachments)"function"==typeof this._attachments[e].show&&this._attachments[e].show()},u.prototype.hide=function(e){if(!this.config.hidden||e)for(var t in this._formContainerHide(),this._attachments)"function"==typeof this._attachments[t].hide&&this._attachments[t].hide(e)},u.prototype.setFocus=function(e){for(var t in this._attachments){var n=this._attachments[t];"radiogroup"!==n.config.type&&"checkboxgroup"!==n.config.type||n.focus(e),n.config.name===e&&n.focus()}},u.prototype.blur=function(e){for(var t in e||this.forEach(function(e){"function"==typeof e.blur&&e.blur()}),this._attachments){var n=this._attachments[t];"radiogroup"!==n.config.type&&"checkboxgroup"!==n.config.type||n.blur(e),n.config.name===e&&n.blur()}},u.prototype.isVisible=function(e){if(!e)return!this.config.hidden;for(var t in this._attachments)if(t===e)return!this._attachments[t].config.hidden},u.prototype.disable=function(){for(var e in this.config.disabled=!0,this._attachments)"function"==typeof this._attachments[e].disable&&this._attachments[e].disable()},u.prototype.enable=function(){for(var e in this.config.disabled=!1,this._attachments)"function"==typeof this._attachments[e].enable&&this._attachments[e].enable()},u.prototype.isDisabled=function(e){if(!e)return this.config.disabled;for(var t in this._attachments)if(t===e)return this._attachments[t].config.disabled},u.prototype.forEach=function(e){for(var t=Object.values(this._attachments),n=0;n<t.length;n++)e.call(this,t[n],n,t)},u.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this._attachments=this._state=this._uid=this.container=this.events=this._isValid=null,this.unmount()},u.prototype.getRootView=function(){return this.layout.getRootView()},u.prototype._addLayoutItem=function(e){var n=this,t=e.id=e.id||S.uid(),i=e.name=e.name||t.toString();e.type=e.type&&e.type.toLowerCase();var o=e.width,r=e.height,s=e.css,t=e.padding,a=E(e,["css","padding"]),l=s?s+" dhx_form-element":"dhx_form-element",s=!("spacer"===e.type||void 0===e.type);switch(s&&!o&&(o="content"),s&&!r&&(r="content"),a.type){case"button":a.full&&(l+=" dhx_button--full-gravity");var c=this._attachments[i]=new k.Button(null,a);c.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),c.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),c.events.on($.ItemEvent.click,function(e){e.preventDefault(),n.events.fire($.FormEvents.click,[i,e]),n.events.fire($.FormEvents.buttonClick,[i,e]),c.config.submit&&n.validate()&&c.config.url&&n.send(c.config.url)}),c.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),c.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),c.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),c.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),c.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),c.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),c.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"datepicker":var u=this._attachments[i]=new I.DatePicker(null,a);this._state[i]=u.getValue("Date"===a.valueFormat),u.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),u.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=u.getValue("Date"===a.valueFormat),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),u.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),u.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),u.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),u.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),u.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),u.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),u.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),u.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),u.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),u.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"checkbox":var d=this._attachments[i]=new M.Checkbox(null,a);this._state[i]=d.getValue(),d.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),d.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=d.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),d.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),d.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),d.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),d.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),d.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),d.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),d.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),d.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),d.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),d.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"checkboxgroup":var h=this._attachments[i]=new P.CheckboxGroup(null,a);this._state[i]=h.getValue(),h.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),h.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=h.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),h.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),h.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),h.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),h.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),h.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),h.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),h.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),h.events.on($.ItemEvent.focus,function(e,t){n.events.fire($.FormEvents.focus,[i,e,t])}),h.events.on($.ItemEvent.blur,function(e,t){n.events.fire($.FormEvents.blur,[i,e,t])}),h.events.on($.ItemEvent.keydown,function(e,t){n.events.fire($.FormEvents.keydown,[e,i,t])});break;case"combo":var f=this._attachments[i]=new R.Combo(null,a);this._state[i]=f.getValue(),f.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),f.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=f.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),f.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),f.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),f.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),f.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),f.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),f.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),f.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),f.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),f.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),f.events.on($.ItemEvent.keydown,function(e,t){n.events.fire($.FormEvents.keydown,[e,i,t])});break;case"input":var p=this._attachments[i]=new O.Input(null,a);this._state[i]=p.getValue(),p.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),p.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=p.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),p.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),p.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),p.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),p.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),p.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),p.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),p.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),p.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),p.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),p.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"radiogroup":var g=this._attachments[i]=new D.RadioGroup(null,a);this._state[i]=g.getValue(),g.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),g.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=g.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),g.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),g.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),g.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),g.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),g.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),g.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),g.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),g.events.on($.ItemEvent.focus,function(e,t){n.events.fire($.FormEvents.focus,[i,e,t])}),g.events.on($.ItemEvent.blur,function(e,t){n.events.fire($.FormEvents.blur,[i,e,t])}),g.events.on($.ItemEvent.keydown,function(e,t){n.events.fire($.FormEvents.keydown,[e,i,t])});break;case"select":var v=this._attachments[i]=new V.Select(null,a);this._state[i]=v.getValue(),v.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),v.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=v.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),v.events.on($.ItemEvent.changeOptions,function(e){n.layout.getCell(i).config.options=C(e)}),v.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),v.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),v.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),v.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),v.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),v.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),v.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),v.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),v.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),v.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"simplevault":a.$vaultHeight=r;var _=this._attachments[i]=new H.SimpleVault(null,a);this._state[i]=_.getValue(),_.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),_.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=_.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),_.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),_.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),_.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),_.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),_.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),_.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),_.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])});break;case"slider":var m=this._attachments[i]=new T.SliderForm(null,a);this._state[i]=m.getValue(),m.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),m.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),m.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),m.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),m.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),m.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),m.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),m.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"textarea":var y=this._attachments[i]=new A.Textarea(null,a);this._state[i]=y.getValue(),y.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),y.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=y.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),y.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),y.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),y.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),y.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),y.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),y.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),y.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),y.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),y.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),y.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"text":"content"===o&&(l+=" dhx_form-element--fit-content");var b=this._attachments[i]=new F.Text(null,a);this._state[i]=b.getValue(),b.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),b.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=b.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),b.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),b.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),b.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),b.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),b.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),b.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),b.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])});break;case"timepicker":var w=this._attachments[i]=new L.TimePicker(null,a);this._state[i]=a.value&&w.getValue("timeObject"===a.valueFormat)||"",w.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),w.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=w.getValue("timeObject"===a.valueFormat),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),w.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),w.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),w.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),w.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),w.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),w.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),w.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),w.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),w.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),w.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"colorpicker":var x=this._attachments[i]=new j.ColorPicker(null,a);this._state[i]=x.getValue(),x.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),x.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=x.getValue(),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),x.events.on($.ItemEvent.change,function(e){n._state[i]=e,n.events.fire($.FormEvents.change,[i,e])}),x.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),x.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),x.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),x.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])}),x.events.on($.ItemEvent.beforeValidate,function(e){return n.events.fire($.FormEvents.beforeValidate,[i,e])}),x.events.on($.ItemEvent.afterValidate,function(e,t){n.events.fire($.FormEvents.afterValidate,[i,e,t])}),x.events.on($.ItemEvent.focus,function(e){n.events.fire($.FormEvents.focus,[i,e])}),x.events.on($.ItemEvent.blur,function(e){n.events.fire($.FormEvents.blur,[i,e])}),x.events.on($.ItemEvent.keydown,function(e){n.events.fire($.FormEvents.keydown,[e,i])});break;case"spacer":default:m=this._attachments[i]=new N.Spacer(null,a);m.events.on($.ItemEvent.beforeChangeProperties,function(e){return n.events.fire($.FormEvents.beforeChangeProperties,[i,e])}),m.events.on($.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n.events.fire($.FormEvents.afterChangeProperties,[i,e]),n.paint()}),m.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire($.FormEvents.beforeHide,[i,e])}),m.events.on($.ItemEvent.beforeShow,function(e){return n.events.fire($.FormEvents.beforeShow,[i,e])}),m.events.on($.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire($.FormEvents.afterHide,[i,e])}),m.events.on($.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire($.FormEvents.afterShow,[i,e])})}t={id:i,width:o,height:r,padding:t,css:l};return"gravity"in e&&(t.gravity=e.gravity),t},u.prototype._changeProps=function(e,t){var n,i=["width","height","css","padding"];for(n in t)i.includes(n)&&(this.layout.getCell(e).config[n]=t[n])},u.prototype._addLayoutItems=function(e){var n=this;return e.map(function(e){if(l.isBlock(e)){var t={width:"content",height:"content"};return n._createLayoutConfig(e,t),t}return n._addLayoutItem(e)})},u.prototype._checkLayoutConfig=function(e,t){return S.isDefined(e.css)&&(t.css=e.css),S.isDefined(e.title)&&(t.header=e.title),S.isDefined(e.padding)&&(t.padding=e.padding),S.isDefined(e.gravity)&&(t.gravity=e.gravity),S.isDefined(e.width)&&(t.width=e.width),S.isDefined(e.height)&&(t.height=e.height),S.isDefined(e.align)&&(t.align=e.align),t},u.prototype._createLayoutConfig=function(e,t){t=this._checkLayoutConfig(e,t),S.isDefined(e.rows)?t.rows=this._addLayoutItems(e.rows):S.isDefined(e.cols)&&(t.cols=this._addLayoutItems(e.cols))},u.prototype._initUI=function(e){var t=this._attachments={},n={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,n);var i,o=this.layout=new a.Layout(e,n);for(i in t)o.getCell(i).attach(t[i])},u.prototype._initHandlers=function(){var e=this;this.events.on($.FormEvents.afterShow,function(){e._formContainerShow()}),this.events.on($.FormEvents.afterHide,function(){Object.values(e._attachments).some(function(e){return!e.config.hidden})||e._formContainerHide()})},u.prototype._clear=function(){for(var e in this._state={},this._attachments){var t=this._attachments[e].config.name;"function"==typeof this._attachments[e].clear&&(this._attachments[e].clear(),t?this._state[t]=this._attachments[e].getValue():this._state[e]=this._attachments[e].getValue())}},u.prototype._clearValidate=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].clearValidate&&this._attachments[e].clearValidate()},u.prototype._formContainerShow=function(){this.config.hidden=!1,this.getRootView().node&&(this.getRootView().node.el.style.display="flex")},u.prototype._formContainerHide=function(){this.config.hidden=!0,this.getRootView().node&&(this.getRootView().node.el.style.display="none")},u.prototype._send=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].send&&this._attachments[e].send()},u);function u(e,t){var n=o.call(this,null,S.extend({disabled:!1,hidden:!1},t))||this;return n._isValid=!0,n._state={},n.events=new r.EventSystem(n),n.container=e,n._initUI(e),n.config.hidden&&n.hide(!0),n.config.disabled&&n.disable(),n.events.on($.FormEvents.afterShow,function(){n._formContainerShow()}),n.events.on($.FormEvents.afterHide,function(){Object.values(n._attachments).some(function(e){return!e.config.hidden})||n._formContainerHide()}),n.events.on($.FormEvents.change,function(){return n.paint()}),c.awaitRedraw().then(function(){var e=n.layout.getRootNode();e&&(e.setAttribute("role","form"),n.config.title&&e.setAttribute("aria-label",n.config.title))}),n}d.Form=t}).call(this,h(14))},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(34),l=n(15),c=n(3),d=n(0),u=n(1),h=n(18),f=n(7),p=n(5),g=n(9),v=n(19),o=(s=h.Label,o(_,s),_.prototype.destructor=function(){this.events&&this.events.clear(),this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.events=this._uid=this._propsCalendar=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},_.prototype.setProperties=function(e){if(e&&!u.isEmptyObj(e)&&this.events.fire(p.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsCalendar.includes(t)&&(this.calendar.config[t]=e[t]));this.events.fire(p.ItemEvent.afterChangeProperties,[this.getProperties()]),this.calendar.paint(),this.paint()}},_.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},_.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(p.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(p.ItemEvent.afterShow,[t]))},_.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(p.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(p.ItemEvent.afterHide,[n,e]))},_.prototype.isVisible=function(){return!this.config.hidden},_.prototype.disable=function(){this.config.disabled=!0,this.paint()},_.prototype.enable=function(){this.config.disabled=!1,this.paint()},_.prototype.isDisabled=function(){return this.config.disabled},_.prototype.validate=function(e,t){void 0===e&&(e=!1);var n=void 0===t?this.getValue():t,t="Date"===this.config.valueFormat?n instanceof Date:l.stringToDate(n,this.calendar.config.dateFormat,!0);if(e||this.events.fire(p.ItemEvent.beforeValidate,[n]))return this._isValid=this.config.validation?this.config.validation(n):!!t,e||this.events.fire(p.ItemEvent.afterValidate,[n,this._isValid]),this._isValid},_.prototype.clearValidate=function(){this.config.$validationStatus=p.ValidationStatus.pre,this.paint()},_.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&(this.calendar.setValue(e),g.isVerify(this.config)&&this.validate())},_.prototype.getValue=function(e){var t=this.config,n=t.value,t=t.valueFormat;return(n instanceof Date||!e||""===n)&&(n instanceof Date||"Date"!==t||""===n)?n||"":l.stringToDate(n,this.calendar.config.dateFormat)||""},_.prototype.focus=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},_.prototype.blur=function(){var e=this;d.awaitRedraw().then(function(){e._popup.hide(),e.getRootView().refs.input.el.blur()})},_.prototype.clear=function(){""!==this.config.value&&(this.config.value="",this.calendar.clear(),this.events.fire(p.ItemEvent.change,[this.getValue()]))},_.prototype.getWidget=function(){return this.calendar},_.prototype._initView=function(e){var t,n=this;if(u.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",mode:"calendar",mark:void 0,disabledDates:void 0,weekStart:"sunday",weekNumbers:!1,timePicker:!1,dateFormat:"%d/%m/%y",timeFormat:24,thisMonthOnly:!1,valueFormat:"string",required:!1,validation:void 0,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new f.Popup,this.calendar=new a.Calendar(null,g.widgetConfig(e)),this._popup.attach(this.calendar),this.config.hidden&&d.awaitRedraw().then(function(){n.hide(!0)})},_.prototype._initHandlers=function(){var i=this;this.calendar.events.on(a.CalendarEvents.change,function(){var e=i.calendar.getValue("Date"===i.config.valueFormat);i.config.value!==e&&(i.config.value=e,i.events.fire(p.ItemEvent.change,[e]),i._popup.hide(),i.paint())}),this.events.on(p.ItemEvent.afterValidate,function(){i.config.$validationStatus=i._isValid?p.ValidationStatus.success:p.ValidationStatus.error,i.paint()}),this.events.on(p.ItemEvent.blur,function(){i._popupIsFocus=!1,i.paint()}),this._popup.events.on(f.PopupEvents.afterHide,function(){document.activeElement!==i.getRootView().refs.input.el&&i.events.fire(p.ItemEvent.blur,[i.getValue()]),i.paint()}),document.addEventListener("keydown",function(e){var t,n=document.activeElement;(null===(t=null===(t=null===(t=i.getRootView())||void 0===t?void 0:t.refs)||void 0===t?void 0:t.input)||void 0===t?void 0:t.el)!==n&&!i._popup.isVisible()||i.events.fire(p.ItemEvent.keydown,[e])}),document.addEventListener("mousedown",function(){i._popup.getContainer()!==document.activeElement&&(i._popupIsFocus=!1)})},_.prototype._getHandlers=function(){var t=this;return{onblur:function(){t._popup.isVisible()||t.events.fire(p.ItemEvent.blur,[t.getValue()]),t.paint()},onfocus:function(){var e;t._popup.isVisible()||(e=t.getRootView().refs.input.el,t._popup.show(e),t.events.fire(p.ItemEvent.focus,[t.getValue()]),t.paint())},oninput:function(e){e=e.target.value;t.events.fire(p.ItemEvent.input,[e])},onchange:function(e){e=e.target.value;t.config.editable&&l.stringToDate(e,t.calendar.config.dateFormat,!0)?t.setValue(e):(""===e&&t.clear(),g.isVerify(t.config)&&t.validate(),t.paint())}}},_.prototype._initHotkeys=function(){var e,n=this,t={"shift+tab":function(){n._applyTab()},tab:function(){n._applyTab()},escape:function(){n._popup.isVisible()&&n.getRootView().refs.input.el.focus(),n._popup.hide()},enter:function(){var e;n._popup.isVisible()||(e=n.getRootView().refs.input.el,n._popup.show(e))},arrowRight:function(e){var t=n._popup.getContainer();n._popup.isVisible()&&!n._popupIsFocus&&(e.preventDefault(),t.focus(),n._popupIsFocus=!0)}};for(e in t)this._keyManager.addHotKey(e,t[e])},_.prototype._draw=function(){var e=this.config,t=e.icon,n=e.required,i=e.disabled,o=e.placeholder,r=e.name,s=e.id,a=e.editable,l=e.label,c=e.helpMessage,e=this.config.value instanceof Date?this.calendar.getValue():this.config.value,u=this._popup.isVisible()||(null===(u=null===(u=null===(u=this.getRootView())||void 0===u?void 0:u.refs)||void 0===u?void 0:u.input)||void 0===u?void 0:u.el)===document.activeElement;return d.el("div.dhx_form-group",{class:g.getFormItemCss(this.config,g.isVerify(this.config),u)},[this._drawLabel(),d.el(".dhx_input__wrapper",[d.el("div.dhx_input__container",{},[d.el(".dhx_input__icon",{class:t||"dxi dxi-calendar-today"}),d.el("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":r||s,_key:this._uid,_ref:"input",value:e,type:"text",required:n,disabled:i,class:u&&"dhx_input--focus",placeholder:o||"",name:r||"",id:s||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,autocomplete:"off",readOnly:!a,"aria-label":l||(a?"type or":"")+" select date","aria-describedby":c?"dhx_label__help_"+(s||this._uid):null})]),g.getValidationMessage(this.config)&&d.el("span.dhx_input__caption",{},g.getValidationMessage(this.config))])])},_.prototype._applyTab=function(){var e;document.activeElement===(null===(e=null===(e=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.content)||void 0===e?void 0:e.el)||this._popupIsFocus||this._popup.hide()},_);function _(e,t){var n=s.call(this,null,t)||this;n.events=new c.EventSystem,n._isValid=!0,n._popupIsFocus=!1,n._propsItem=["required","validation","valueFormat","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsCalendar=["mode","mark","disabledDates","weekStart","weekNumbers","timePicker","dateFormat","timeFormat","thisMonthOnly"],n._props=r(g.baseProps,n._propsItem,n._propsCalendar),n._keyManager=new v.KeyManager(function(){var e,t=document.activeElement;return(null===(e=null===(e=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===t||n._popup.isVisible()}),n._initView(t),n._initHandlers(),n._initHotkeys();return n.mount(e,d.create({render:function(){return n._draw()}})),n}t.DatePicker=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,p=n(0),l=n(6),c=n(5),u=n(3),d=n(1),h=n(9),o=(a=l.View,o(f,a),f.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this._propsItem=this._props=this.events=this._handlers=this._uid=null,this.unmount()},f.prototype.setProperties=function(e){if(e&&!d.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.config.text=this.config.text||this.config.value,this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},f.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},f.prototype.show=function(){var e=this.config,t=e.text;e.hidden&&this.events.fire(c.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[t]))},f.prototype.hide=function(e){var t=this.config,n=t.text;t.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[n,e]))},f.prototype.isVisible=function(){return!this.config.hidden},f.prototype.disable=function(){this.config.disabled=!0,this.paint()},f.prototype.enable=function(){this.config.disabled=!1,this.paint()},f.prototype.isDisabled=function(){return this.config.disabled},f.prototype.focus=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.button.el.focus()})},f.prototype.blur=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.button.el.blur()})},f.prototype._draw=function(){var e=this.config,t=e.color,n=e.size,i=e.view,o=e.full,r=e.loading,s=e.circle,a=e.icon,l=e.text,c=e.disabled,u=e.submit,d=e.id,h=e.name,f={danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[t]||" dhx_button--color_primary",e={small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[n]||" dhx_button--size_medium",t={flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[i]||" dhx_button--view_flat",n=o?" dhx_button--width_full":"",i=s?" dhx_button--circle":"",o=r?" dhx_button--loading":"",s=a&&!l?" dhx_button--icon":"";return p.el("button",{disabled:c,id:d,"data-dhx-id":h||d,onclick:this._handlers.onclick,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,type:u?"submit":"button",class:"dhx_button"+f+e+t+n+i+o+s,_ref:"button"},[a&&p.el("span.dhx_button__icon",{class:a}),l&&p.el("span.dhx_button__text",l),r&&p.el("span.dhx_button__loading",[p.el("span.dhx_button__loading-icon.dxi.dxi-loading")])])},f);function f(e,t){var n=a.call(this,e,r({disabled:!1,hidden:!1,submit:!1,full:!1,circle:!1,loading:!1,view:"flat",size:"medium",color:"primary",width:"content",height:"content",padding:0,url:"",text:"",icon:""},t))||this;n._propsItem=["submit","url","text","icon","view","size","color","full","circle","loading"],n._props=s(h.baseProps,n._propsItem),n.config.text=n.config.text||n.config.value||"",n.events=new u.EventSystem,n._handlers={onclick:function(e){return n.events.fire(c.ItemEvent.click,[e])},onblur:function(){return n.events.fire(c.ItemEvent.blur,[n.config.text])},onfocus:function(){return n.events.fire(c.ItemEvent.focus,[n.config.text])},onkeydown:function(e){return n.events.fire(c.ItemEvent.keydown,[e])}},n.config.hidden&&p.awaitRedraw().then(function(){n.hide(!0)});return n.mount(e,p.create({render:function(){return n._draw()}})),n}t.Button=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0),c=n(12),u=n(3),d=n(54),h=n(18),f=n(5),p=n(1),g=n(9),v=n(7),o=(a=h.Label,o(_,a),_.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._isValid=this._buttons=null,a.prototype._destructor.call(this),this.unmount()},_.prototype.setProperties=function(t,e){if(void 0!==t&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof t&&!p.isEmptyObj(t)){for(var n in t)this._props.includes(n)&&(this.config[n]=t[n]);t.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}var i;"string"!=typeof t||!e||p.isEmptyObj(e)||(i=this._buttons.find(function(e){return e.config.id===t}))&&i.setProperties(e,!0),this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},_.prototype.getProperties=function(t){if(void 0!==t)return this._buttons.find(function(e){return e.config.id===t}).getProperties();var e,n={};for(e in this.config)this._props.includes(e)&&(n[e]=this.config[e]);return n},_.prototype.getValue=function(t){if(void 0===t){var n={};return this._buttons.forEach(function(e){n[e.config.id]=e.getValue()}),n}var e=this._buttons.find(function(e){return e.config.id===t});if(t&&e)return e.getValue()},_.prototype.setValue=function(e){if(void 0!==e&&!p.isEmptyObj(e)){for(var i=!1,o=this,t=0,n=Object.entries(e);t<n.length;t++){var r=n[t];!function(t,e){var n=o._buttons.find(function(e){return e.config.id===t});n&&(n.setValue(!!e,!0),i=!0)}(r[0],r[1])}i&&(this.events.fire(f.ItemEvent.change,[this.getValue()]),g.isVerify(this.config)&&this.validate())}},_.prototype.isChecked=function(t){if(void 0===t){var n={};return this._buttons.forEach(function(e){n[e.config.id]=e.isChecked()}),n}var e=this._buttons.find(function(e){return e.config.id===t});if(t&&e)return e.isChecked()},_.prototype.focus=function(t){var n=this;l.awaitRedraw().then(function(){if(n._buttons.length){if(!t)return n._buttons[0].focus();var e=n._buttons.find(function(e){return e.config.id===t});e&&e.focus()}})},_.prototype.blur=function(){var e=this;l.awaitRedraw().then(function(){e._buttons.length&&e._buttons.forEach(function(e){e.blur()})})},_.prototype.show=function(){this.config.hidden&&this.events.fire(f.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[this.getValue()]))},_.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[this.getValue(),e]))},_.prototype.isVisible=function(){return!this.config.hidden},_.prototype.disable=function(){this.config.disabled=!0,this.paint()},_.prototype.enable=function(){this.config.disabled=!1,this._buttons.length&&this._buttons.forEach(function(e){e.enable()}),this.paint()},_.prototype.isDisabled=function(){return this.config.disabled},_.prototype.clear=function(){this._buttons.some(function(e){return e.isChecked()})&&(this._buttons.forEach(function(e){e.clear(!0)}),this.events.fire(f.ItemEvent.change,[this.getValue()]))},_.prototype.validate=function(e){var t=this;if(void 0===e&&(e=!1),e||this.events.fire(f.ItemEvent.beforeValidate,[this.getValue()]))return this.config.required&&(this._isValid=this._buttons.some(function(e){return e.config.$required&&!!e.config.checked})),e||(this._buttons.forEach(function(e){e.config.$validationStatus=t._isValid?f.ValidationStatus.success:f.ValidationStatus.error}),this.config.$validationStatus=this._isValid?f.ValidationStatus.success:f.ValidationStatus.error,this.events.fire(f.ItemEvent.afterValidate,[this.getValue(),this._isValid])),this._isValid},_.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this._buttons.forEach(function(e){e.clearValidate()}),this.paint()},_.prototype._initView=function(n){var e,i=this;if(p.isEmptyObj(n)||!n.options||p.isEmptyObj(n.options))throw new Error("Check the configuration is correct");for(e in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach(function(e){e.destructor()}),this._buttons=[]),this.config={type:n.type,id:n.id,name:n.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},n)"id"!==e&&"type"!==e&&"name"!==e&&(this.config[e]=n[e]);this.config.helpMessage&&(this._helper=new v.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage));var t=this.config.options.rows||this.config.options.cols;t.forEach(function(e){e.id=e.id||p.uid(),e.$group=!0}),this.layout=new c.Layout(null,this.config.options),t.forEach(function(e){var t=new d.Checkbox(null,r(r({},e),{disabled:n.disabled,name:n.name,$required:n.required}));i._buttons.push(t),i.layout.getCell(e.id).attach(t),t.events.on(f.ItemEvent.change,function(){i.events.fire(f.ItemEvent.change,[i.getValue()]),g.isVerify(i.config)&&i.validate()}),t.events.on(f.ItemEvent.focus,function(e,t){i.events.fire(f.ItemEvent.focus,[i.getValue(),t])}),t.events.on(f.ItemEvent.blur,function(e,t){i.events.fire(f.ItemEvent.blur,[i.getValue(),t])}),t.events.on(f.ItemEvent.keydown,function(e,t){i.events.fire(f.ItemEvent.keydown,[e,t])})}),this.config.value&&this.setValue(this.config.value),this.clearValidate(),this.config.hidden&&l.awaitRedraw().then(function(){i.hide(!0)})},_.prototype._initHandlers=function(){var e=this;this.events.on(f.ItemEvent.change,function(){e.config.value=e.getValue(),e.paint()}),this.events.on(f.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?f.ValidationStatus.success:f.ValidationStatus.error,e.paint()})},_.prototype._draw=function(){var e=this.config.hidden?" dhx_form-group--hidden":"",t=this.config,n=t.label,i=t.labelWidth,o=t.helpMessage,r=t.required,s=t.name,t=t.id;return l.el("fieldset.dhx_form-group-fieldset",{},[l.el("div.dhx_form-group.dhx_form-group--checkbox-group",{class:g.getFormItemCss(this.config,g.isVerify(this.config))+e,"data-dhx-id":s||t,role:"radiogroup"},[n||i||o||r?this._drawLabel():null,l.el("div.dhx_checkbox-group--container",{},[this.layout&&l.inject(this.layout.getRootView()),r&&g.getValidationMessage(this.config)&&l.el("span.dhx_input__caption",g.getValidationMessage(this.config))])])])},_);function _(e,t){var n=a.call(this,null,t)||this;n.events=new u.EventSystem,n._buttons=[],n._isValid=!0,n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],n._props=s(g.baseProps,n._propsItem),n._initView(t),n._initHandlers();return n.mount(e,l.create({render:function(){return n._draw()}})),n}t.CheckboxGroup=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0),c=n(1),u=n(12),d=n(7),h=n(3),f=n(222),p=n(9),g=n(18),v=n(5),o=(a=g.Label,o(_,a),_.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._isValid=this._buttons=null,a.prototype._destructor.call(this),this.unmount()},_.prototype.setProperties=function(t,e){if(void 0!==t&&this.events.fire(v.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof t&&!c.isEmptyObj(t)){for(var n in t)this._props.includes(n)&&(this.config[n]=t[n]);t.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}var i;"string"!=typeof t||!e||c.isEmptyObj(e)||(i=this._buttons.find(function(e){return e.config.id===t}))&&i.setProperties(e),this.events.fire(v.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},_.prototype.getProperties=function(t){if(void 0!==t)return this._buttons.find(function(e){return e.config.id===t}).getProperties();var e,n={};for(e in this.config)this._props.includes(e)&&(n[e]=this.config[e]);return n},_.prototype.getValue=function(){var t=this;return this._buttons.forEach(function(e){e.getValue()&&(t.config.value=e.getValue()||"")}),this.config.value||""},_.prototype.setValue=function(e){e!==this.config.value&&(this._setValue(e),this.events.fire(v.ItemEvent.change,[e]),p.isVerify(this.config)&&this.validate())},_.prototype.focus=function(t){var n=this;l.awaitRedraw().then(function(){if(n._buttons.length){if(!t)return n._buttons[0].focus();var e=n._buttons.find(function(e){return e.config.id===t});return e?e.focus():void 0}})},_.prototype.blur=function(){var e=this;l.awaitRedraw().then(function(){e._buttons.length&&e._buttons.forEach(function(e){return e.blur()})})},_.prototype.show=function(){this.config.hidden&&this.events.fire(v.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(v.ItemEvent.afterShow,[this.getValue()]))},_.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(v.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(v.ItemEvent.afterHide,[this.getValue(),e]))},_.prototype.isVisible=function(){return!this.config.hidden},_.prototype.disable=function(){this.config.disabled=!0,this.paint()},_.prototype.enable=function(){this.config.disabled=!1,this._buttons.length&&this._buttons.forEach(function(e){e.enable()}),this.paint()},_.prototype.isDisabled=function(){return this.config.disabled},_.prototype.clear=function(){""!==this.config.value&&(this._buttons.forEach(function(e){e.clear()}),this.config.value="",this.events.fire(v.ItemEvent.change,[this.config.value]))},_.prototype.validate=function(e){var t=this;if(void 0===e&&(e=!1),e||this.events.fire(v.ItemEvent.beforeValidate,[this.getValue()]))return this.config.required&&(this._isValid=this._buttons.some(function(e){return t.config.required&&!!e.config.checked})),e||(this._buttons.forEach(function(e){e.config.$validationStatus=t._isValid?v.ValidationStatus.success:v.ValidationStatus.error}),this.config.$validationStatus=this._isValid?v.ValidationStatus.success:v.ValidationStatus.error,this.events.fire(v.ItemEvent.afterValidate,[this.getValue(),this._isValid])),this._isValid},_.prototype.clearValidate=function(){this.config.$validationStatus=v.ValidationStatus.pre,this._buttons.map(function(e){e.clearValidate()}),this.paint()},_.prototype._initView=function(n){var e,i=this;if(c.isEmptyObj(n)||!n.options||c.isEmptyObj(n.options))throw new Error("Check the configuration is correct");for(e in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach(function(e){e.destructor()}),this._buttons=[]),this.config={type:n.type,id:n.id,name:n.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},n)"id"!==e&&"type"!==e&&"name"!==e&&(this.config[e]=n[e]);this.config.hidden&&l.awaitRedraw().then(function(){i.hide(!0)});var t=this.config.options.rows||this.config.options.cols;t.map(function(e){e.id=e.id||c.uid()}),this.layout=new u.Layout(null,this.config.options),t.map(function(e){var t=new f.RadioButton(null,r(r({},e),{$disabled:n.disabled,$name:n.name,$required:n.required}));i._buttons.push(t),i.layout.getCell(e.id).attach(t),t.events.on(f.RadioButtonEvents.change,function(){i._buttons.map(function(e){e.config.id!==t.config.id&&e.setValue(!1)}),i.events.fire(v.ItemEvent.change,[i.getValue()]),p.isVerify(i.config)&&i.validate()}),t.events.on(f.RadioButtonEvents.focus,function(e,t){i.events.fire(v.ItemEvent.focus,[e,t])}),t.events.on(f.RadioButtonEvents.blur,function(e,t){i.events.fire(v.ItemEvent.blur,[e,t])}),t.events.on(f.RadioButtonEvents.keydown,function(e,t){i.events.fire(v.ItemEvent.keydown,[e,t])})})},_.prototype._initHandlers=function(){var e=this;this.events.on(v.ItemEvent.change,function(){e.config.value=e.getValue(),e.paint()}),this.events.on(v.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?v.ValidationStatus.success:v.ValidationStatus.error,e.paint()})},_.prototype._draw=function(){var e=this.config,t=e.label,n=e.labelWidth,i=e.helpMessage,o=e.required,r=e.hidden,s=e.name,e=e.id,r=r?" dhx_form-group--hidden":"";return l.el("fieldset.dhx_form-group-fieldset",{},[l.el("div.dhx_form-group.dhx_form-group--radio-group",{class:p.getFormItemCss(this.config,p.isVerify(this.config))+r,"data-dhx-id":s||e},[t||n||i||o?[this._drawLabel()]:null,l.el("div.dhx_radio-group--container",{},[this.layout&&l.inject(this.layout.getRootView()),o&&p.getValidationMessage(this.config)&&l.el("span.dhx_input__caption",p.getValidationMessage(this.config))])])])},_.prototype._setValue=function(t){void 0!==t&&-1!==this._buttons.findIndex(function(e){return e.config.value===t})&&this._buttons.forEach(function(e){t===e.config.value?e.setValue(!0):e.setValue(!1)})},_);function _(e,t){var n=a.call(this,null,t)||this;n.events=new h.EventSystem,n._buttons=[],n._isValid=!0,n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],n._props=s(p.baseProps,n._propsItem),n._initView(t),n._initHandlers(),n.config.value&&n._setValue(n.config.value),n.clearValidate(),n.config.helpMessage&&(n._helper=new d.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),n._helper.attachHTML(n.config.helpMessage));return n.mount(e,l.create({render:function(){return n._draw()}})),n}t.RadioGroup=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,u=n(0),a=n(1),l=n(18),d=n(9),c=n(3),h=n(5),o=(s=l.Label,o(f,s),f.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},f.prototype.setProperties=function(e){if(e&&!a.isEmptyObj(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},f.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},f.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},f.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[n,e]))},f.prototype.isVisible=function(){return!this.config.hidden},f.prototype.disable=function(){this.config.disabled=!0,this.paint()},f.prototype.enable=function(){this.config.disabled=!1,this.paint()},f.prototype.isDisabled=function(){return this.config.disabled},f.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.config,n=t.value,t=t.validation;if(e||this.events.fire(h.ItemEvent.beforeValidate,[n]))return this._isValid=t?this.config.validation(n):void 0!==n&&!!String(n).length,e||this.events.fire(h.ItemEvent.afterValidate,[n,this._isValid]),this._isValid},f.prototype.clearValidate=function(){this.config.$validationStatus=h.ValidationStatus.pre,this.paint()},f.prototype.clear=function(){this.config.value!==this.config.options[0].value&&(this.config.value=this.config.options[0].value,this.events.fire(h.ItemEvent.change,[this.getValue()]))},f.prototype.setValue=function(t){void 0!==t&&t!==this.config.value&&-1!==this.config.options.findIndex(function(e){return e.value===t})&&(this.config.value=t,this.events.fire(h.ItemEvent.change,[t]),d.isVerify(this.config)&&this.validate())},f.prototype.focus=function(){var e=this;u.awaitRedraw().then(function(){e.getRootView().refs.select.el.focus()})},f.prototype.blur=function(){var e=this;u.awaitRedraw().then(function(){e.getRootView().refs.select.el.blur()})},f.prototype.getValue=function(){return this.config.value},f.prototype.setOptions=function(e){if(!e||!e.length)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");this._checkOptions(e),this.config.options=r(e),this.config.value=this.config.options[0].value,this.events.fire(h.ItemEvent.changeOptions,[r(e)]),this.paint()},f.prototype.getOptions=function(){return this.config.options},f.prototype._initView=function(e){var t,n=this;if(a.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this._checkOptions(e.options),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,validation:void 0,icon:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0,options:e.options,value:e.options[0].value},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&u.awaitRedraw().then(function(){n.hide(!0)}),this.paint()},f.prototype._initHandlers=function(){var e=this;this.events.on(h.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?h.ValidationStatus.success:h.ValidationStatus.error,e.paint()}),this.events.on(h.ItemEvent.changeOptions,function(){e.events.fire(h.ItemEvent.change,[e.getValue()]),d.isVerify(e.config)&&e.validate()}),this.events.on(h.ItemEvent.change,function(){return e.paint()})},f.prototype._getHandlers=function(){var n=this;return{onchange:function(t){var e=n.config.options.map(function(e){return e.value}).find(function(e){return e==t.target.value});n.config.value=e,n.events.fire(h.ItemEvent.change,[e]),d.isVerify(n.config)&&n.validate()},onblur:function(){n._uid&&(n.events.fire(h.ItemEvent.blur,[n.getValue()]),n.paint())},onfocus:function(){n.events.fire(h.ItemEvent.focus,[n.getValue()]),n.paint()}}},f.prototype._draw=function(){var e=this.config,t=e.id,n=e.options,i=e.icon,o=e.value,r=e.label,s=e.labelWidth,a=e.helpMessage,l=e.required,c=e.name,e=(null===(e=null===(e=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.select)||void 0===e?void 0:e.el)===document.activeElement;return u.el(".dhx_form-group",{class:d.getFormItemCss(this.config,d.isVerify(this.config),e)},[(r||s||a)&&this._drawLabel(),u.el(".dhx_input__wrapper",{},[u.el("div.dhx_input__container",{},[u.el(".dhx_input__icon",{class:i||"dxi dxi-menu-down"}),u.el("select.dhx_select.dhx_input",{id:t,"data-dhx-id":c||t,tabindex:0,class:e&&"dhx_input--focus",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,_ref:"select",required:l},n.length&&n.map(function(e){return u.el("option",{value:e.value,disabled:e.disabled,selected:o===e.value},e.content)}))]),d.getValidationMessage(this.config)&&u.el("span.dhx_input__caption",d.getValidationMessage(this.config))])])},f.prototype._checkOptions=function(e){if(0===e.length)throw new Error("Property options* cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");e.forEach(function(e){if(!e.hasOwnProperty("value")||!e.hasOwnProperty("content"))throw new Error("The object must contain two required properties value and content, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect")})},f);function f(e,t){var n=s.call(this,null,t)||this;return n.events=new c.EventSystem,n._isValid=!0,n._propsItem=["required","validation","icon","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._props=r(d.baseProps,n._propsItem),n._initView(t),n._initHandlers(),n}t.Select=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,p=n(0),g=n(9),a=n(42),l=n(5),v=n(1),o=(s=a.Input,o(c,s),c.prototype.setValue=function(e){void 0!==e&&this.config.value!==e&&(this.config.value=e,this.events.fire(l.ItemEvent.change,[this.getValue()]),g.isVerify(this.config)&&this.validate())},c.prototype.getValue=function(){var e;return String(null!==(e=this.config.value)&&void 0!==e?e:"")},c.prototype.focus=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.textarea.el.focus()})},c.prototype.blur=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.textarea.el.blur()})},c.prototype.setProperties=function(e){if(e&&!v.isEmptyObj(e)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},c.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},c.prototype._initView=function(e){var t,n=this;if(v.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,validation:void 0,maxlength:void 0,minlength:void 0,placeholder:"",readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&p.awaitRedraw().then(function(){n.hide(!0)}),this.paint()},c.prototype._draw=function(){var e=this.config,t=e.id,n=e.value,i=e.disabled,o=e.name,r=e.placeholder,s=e.required,a=e.resizable,l=e.readOnly,c=e.maxlength,u=e.minlength,d=e.label,h=e.helpMessage,f=e.height,e=(null===(e=null===(e=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.textarea)||void 0===e?void 0:e.el)===document.activeElement;return p.el("div.dhx_form-group.dhx_form-group--textarea",{class:g.getFormItemCss(this.config,g.isVerify(this.config),e)},[this._drawLabel(),p.el(".dhx_input__wrapper",[p.el("textarea.dhx_input.dhx_input--textarea",{type:"text",id:t,"data-dhx-id":o||t,placeholder:r||"",value:v.isDefined(n)?n:"",name:o||"",disabled:i,required:s,readOnly:l,maxlength:c,minlength:u,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,_hooks:{didInsert:function(e){"content"===f&&((e=e.el).style.height=e.scrollHeight+"px")}},style:{resize:a?"both":"none"},_ref:"textarea","aria-label":d||(l?n:"")+" type text","aria-describedby":h?"dhx_label__help_"+(t||this._uid):null}),g.getValidationMessage(this.config)&&p.el("span.dhx_input__caption",{},g.getValidationMessage(this.config))])])},c);function c(){var e=null!==s&&s.apply(this,arguments)||this;return e._propsItem=["required","validation","placeholder","readOnly","maxlength","minlength","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],e._props=r(g.baseProps,e._propsItem),e}t.Textarea=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(1),c=n(9),u=n(42),d=n(5),o=(s=u.Input,o(h,s),h.prototype.setProperties=function(e){if(e&&!l.isEmptyObj(e)&&this.events.fire(d.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(d.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},h.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},h.prototype._initView=function(e){var t,n=this;if(l.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",inputType:"text",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&a.awaitRedraw().then(function(){n.hide(!0)}),this.paint()},h.prototype._draw=function(){var e=this.config,t=e.id,n=e.value,i=e.name,o=e.inputType,r=e.label,e=(null!=n?n:"").toString().length;return a.el("div.dhx_form-group.dhx_form-group--textinput",{class:c.getFormItemCss(this.config)},[this._drawLabel(),a.el(".dhx_input__wrapper",[a.el("input.dhx_input.dhx_input--textinput",{type:["text","number","password"].includes(o)?o:"text",readOnly:!0,id:t,"data-dhx-id":i||t,value:null!=n?n:"",name:i,_ref:"input",tabindex:-1,role:"presentation","aria-label":r||n,size:20<e?e:20})])])},h);function h(){var e=null!==s&&s.apply(this,arguments)||this;return e._propsItem=["inputType","label","labelWidth","labelPosition","hiddenLabel","helpMessage"],e._props=r(c.baseProps,e._propsItem),e}t.Text=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(1),c=n(9),u=n(35),d=n(3),h=n(18),f=n(5),o=(s=h.Label,o(p,s),p.prototype.destructor=function(){this.events&&this.events.clear(),this.combobox&&this.combobox.destructor(),this.events=this._uid=this._propsCombo=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},p.prototype.setProperties=function(t){var n=this;a.awaitRedraw().then(function(){if(t&&!l.isEmptyObj(t)&&n.events.fire(f.ItemEvent.beforeChangeProperties,[n.getProperties()])){for(var e in t)n._props.includes(e)&&(n.config[e]=t[e]);n._initView(n.config),n._initHandlers(),n.events.fire(f.ItemEvent.afterChangeProperties,[n.getProperties()]),n.combobox.paint(),n.paint()}})},p.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},p.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},p.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[n,e]))},p.prototype.isVisible=function(){return!this.config.hidden},p.prototype.disable=function(){this.config.disabled=!0,this.combobox.disable(),this.paint()},p.prototype.enable=function(){this.config.disabled=!1,this.combobox.enable(),this.paint()},p.prototype.isDisabled=function(){return this.config.disabled},p.prototype.clear=function(){this.config.value&&(this.config.value="",this.combobox.clear())},p.prototype.getValue=function(){return this.config.multiselection?this.combobox.getValue(!0)||[""]:this.combobox.getValue()||""},p.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&e&&this.combobox.setValue(e)},p.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue():t;if(e||this.events.fire(f.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?this.config.validation(t):("string"==typeof t||t instanceof Array)&&this._exsistData(t),e||(this.config.$validationStatus=this._isValid?f.ValidationStatus.success:f.ValidationStatus.error,this.config.required&&this._validationStatus(),this.events.fire(f.ItemEvent.afterValidate,[t,this._isValid])),this._isValid},p.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this._validationStatus(),this.paint()},p.prototype.getWidget=function(){return this.combobox},p.prototype.focus=function(){var e=this;a.awaitRedraw().then(function(){e.combobox.focus()})},p.prototype.blur=function(){var e=this;a.awaitRedraw().then(function(){e.combobox.blur()})},p.prototype._initView=function(e){var t=this;if(l.isEmptyObj(e))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",readOnly:!1,template:void 0,filter:void 0,multiselection:!1,selectAllButton:!1,itemsCount:void 0,itemHeight:32,virtual:!1,listHeight:224,required:!1,validation:void 0,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0};var n,i={};for(n in e)"id"!==n&&"type"!==n&&"name"!==n&&(this.config[n]=e[n],"validation"!==n&&(i[n]=e[n]));this.combobox=new u.Combobox(null,i),this.config.hidden&&a.awaitRedraw().then(function(){t.hide(!0)}),this.paint()},p.prototype._initHandlers=function(){var n=this;this.combobox.events.on(u.ComboboxEvents.change,function(){var e=n.config.value=n.getValue();n.events.fire(f.ItemEvent.change,[e]),c.isVerify(n.config)&&n.validate(),n.paint()}),this.combobox.events.on(u.ComboboxEvents.focus,function(){n.events.fire(f.ItemEvent.focus,[n.getValue()]),n.paint()}),this.combobox.events.on(u.ComboboxEvents.blur,function(){n.events.fire(f.ItemEvent.blur,[n.getValue()]),n.paint()}),this.combobox.events.on(u.ComboboxEvents.keydown,function(e,t){"Enter"===e.code&&e.preventDefault(),n.events.fire(f.ItemEvent.keydown,[e,t])}),this.events.on(f.ItemEvent.afterValidate,function(){n.config.$validationStatus=n._isValid?f.ValidationStatus.success:f.ValidationStatus.error,n.paint()})},p.prototype._validationStatus=function(){var e;if(!(this.combobox.popup.isVisible()||(null===(e=null===(e=null===(e=this.combobox.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===document.activeElement))switch(this.config.$validationStatus){case f.ValidationStatus.success:return this.combobox.config.css=(this.config.css||"")+"dhx_form-group--state_success";case f.ValidationStatus.error:return this.combobox.config.css=(this.config.css||"")+"dhx_form-group--state_error";case f.ValidationStatus.pre:default:return this.combobox.config.css=this.config.css||""}return this.combobox.config.css=this.config.css||""},p.prototype._getRootView=function(){return this.combobox.getRootView()},p.prototype._draw=function(){var e=this.config,t=e.labelWidth,n=e.labelPosition,i=e.name,e=e.id;return a.el(".dhx_form-group",{"data-dhx-id":i||e},[a.inject(this._getRootView()),a.el("div",{style:{"margin-left":t&&"left"===n?"calc("+t+" + 16px)":""},class:this._validationStatus()},[a.el("span.dhx_input__caption",c.getValidationMessage(this.config))])])},p.prototype._exsistData=function(e){var t=this;return e instanceof Array?!!e.length&&e.every(function(e){return t.combobox.data.exists(e)}):"string"==typeof e?this.combobox.data.exists(e):void 0},p);function p(e,t){var n=s.call(this,null,t)||this;return n.events=new d.EventSystem,n._isValid=!0,n._propsItem=["required","validation","placeholder","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","readonly","readOnly"],n._propsCombo=["template","filter","multiselection","selectAllButton","itemsCount","itemHeight","virtual","listHeight"],n._props=r(c.baseProps,n._propsItem,n._propsCombo),n._initView(t),n._initHandlers(),n}t.Combo=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0),c=n(1),u=n(71),d=n(3),h=n(18),f=n(5),p=n(9),o=(a=h.Label,o(g,a),g.prototype.destructor=function(){this.events&&this.events.clear(),this.slider&&this.slider.destructor(),this.events=this._uid=this._propsSlider=this._propsItem=this._props=null,a.prototype._destructor.call(this),this.unmount()},g.prototype.setProperties=function(e){if(e&&!c.isEmptyObj(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this._initView(this.config),this._initHandlers(),this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.slider.paint(),this.paint()}},g.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},g.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},g.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[n,e]))},g.prototype.isVisible=function(){return!this.config.hidden},g.prototype.disable=function(){this.config.disabled=!0,this.slider.disable(),this.paint()},g.prototype.enable=function(){this.config.disabled=!1,this.slider.enable(),this.paint()},g.prototype.isDisabled=function(){return this.config.disabled},g.prototype.clear=function(){var e=this.config,t=e.value,e=e.min;t[0]!==e&&this.slider.setValue(e)},g.prototype.getValue=function(){return this.slider.getValue()},g.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&this.slider.setValue(e)},g.prototype.getWidget=function(){return this.slider},g.prototype.focus=function(e){var t=this;l.awaitRedraw().then(function(){t.slider.focus(e)})},g.prototype.blur=function(){var e=this;l.awaitRedraw().then(function(){e.slider.blur()})},g.prototype._initView=function(e){var t=this;if(c.isEmptyObj(e))throw new Error("Check the configuration is correct");this.slider&&this.slider.destructor();var n,i={type:e.type,id:e.id,name:e.name,mode:"horizontal",min:0,max:100,step:1,range:!1,inverse:!1,tick:void 0,tickTemplate:void 0,majorTick:void 0,tooltip:!0,disabled:!1,hidden:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content",padding:0};for(n in e)"id"!==n&&"type"!==n&&"name"!==n&&(i[n]=e[n]);this.config=r({type:this.config.type},i),this.slider=new u.Slider(null,i),this.config.disabled&&this.slider.disable(),this.config.value=this.slider.getValue(),this.config.hidden&&l.awaitRedraw().then(function(){t.hide(!0)})},g.prototype._initHandlers=function(){var t=this;this.slider.events.on(u.SliderEvents.change,function(){var e;t._uid&&(e=t.config.value=t.slider.getValue(),t.events.fire(f.ItemEvent.change,[e]),t.paint())}),this.slider.events.on(u.SliderEvents.focus,function(){t.events.fire(f.ItemEvent.focus,[t.getValue()])}),this.slider.events.on(u.SliderEvents.blur,function(){t.events.fire(f.ItemEvent.blur,[t.getValue()])}),this.slider.events.on(u.SliderEvents.keydown,function(e){t.events.fire(f.ItemEvent.keydown,[e])})},g.prototype._getRootView=function(){return this.slider.paint(),this.slider.getRootView()},g.prototype._drawSlider=function(){var e=this.config,t=e.name,e=e.id;return l.el("div.dhx_form-group",{"data-dhx-id":t||e},[l.inject(this._getRootView())])},g);function g(e,t){var n=a.call(this,null,t)||this;n.events=new d.EventSystem,n._propsItem=["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],n._propsSlider=["min","max","step","mode","range","inverse","tooltip","tick","tickTemplate","majorTick"],n._props=s(p.baseProps,n._propsItem,n._propsSlider),n._initView(t),n._initHandlers();return n.mount(e,l.create({render:function(){return n._drawSlider()}})),n}t.SliderForm=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0),c=n(3),u=n(2),d=n(6),h=n(1),f=n(10),p=n(223),g=n(7),v=n(9),_=n(229),m=n(5),o=(a=d.View,o(y,a),y.prototype.destructor=function(){this.events&&this.events.clear(),this._helper&&this._helper.destructor(),this.config=this.events=this._uid=this._helper=this._handlers=this._uploader=this.data=null,this._propsItem=this._propsSimpleVault=this._props=this._isValid=this._dragover=this._dragoverTimeout=null,this.unmount()},y.prototype.setProperties=function(e){if(e&&!h.isEmptyObj(e)&&this.events.fire(m.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsSimpleVault.includes(t)&&(this._uploader.config[t]=e[t]));this.events.fire(m.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},y.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},y.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(m.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(m.ItemEvent.afterShow,[t]))},y.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(m.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(m.ItemEvent.afterHide,[n,e]))},y.prototype.isVisible=function(){return!this.config.hidden},y.prototype.disable=function(){this.config.disabled=!0,this.paint()},y.prototype.enable=function(){this.config.disabled=!1,this.paint()},y.prototype.isDisabled=function(){return this.config.disabled},y.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.config,n=t.required,t=t.value;if(e||this.events.fire(m.ItemEvent.beforeValidate,[t]))return this._isValid=!n||0<this.data.getLength(),e||this.events.fire(m.ItemEvent.afterValidate,[t,this._isValid]),this._isValid},y.prototype.clearValidate=function(){this.config.$validationStatus=m.ValidationStatus.pre,this.paint()},y.prototype.clear=function(){0!==this.getValue().length&&(this.data.removeAll(),this.paint())},y.prototype.getValue=function(){return this.data.serialize()},y.prototype.selectFile=function(){this._uploader.selectFile()},y.prototype.send=function(e){v.isVerify(this.config)&&!this.validate(!0)||this._uploader.send(e)},y.prototype.setValue=function(e){e.length&&(this.data.parse(e),v.isVerify(this.config)&&this.validate())},y.prototype._initView=function(e){var t,n=this;if(h.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:e.type,id:e.id,name:e.name,fieldName:e.fieldName||e.name||e.id,params:void 0,disabled:!1,hidden:!1,singleRequest:!1,target:"",value:[],label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&l.awaitRedraw().then(function(){n.hide(!0)}),this.config.value.length&&this.setValue(this.config.value),this.paint()},y.prototype._initHandlers=function(){var i=this;this.data.events.on(m.ItemEvent.change,function(e,t){var n=i.config.value=i.getValue();i.events.fire(m.ItemEvent.change,[n]),t&&v.isVerify(i.config)&&i.validate(),i.paint()}),this.events.on(m.ItemEvent.afterValidate,function(){i.config.$validationStatus=i._isValid?m.ValidationStatus.success:m.ValidationStatus.error,i.paint()}),this._uploader.events.on("beforeUploadFile",function(e){return i.events.fire(m.ItemEvent.beforeUploadFile,[e,i.config.value])}),this._uploader.events.on("uploadBegin",function(e){i.events.fire(m.ItemEvent.uploadBegin,[e,i.config.value])}),this._uploader.events.on("uploadComplete",function(e){i.events.fire(m.ItemEvent.uploadComplete,[e,i.config.value])}),this._uploader.events.on("uploadFail",function(e){i.events.fire(m.ItemEvent.uploadFail,[e,i.config.value])}),this._uploader.events.on("uploadFile",function(e,t){i.events.fire(m.ItemEvent.uploadFile,[e,i.config.value,t])}),this._uploader.events.on("uploadProgress",function(e){i.events.fire(m.ItemEvent.uploadProgress,[e,i.config.value])})},y.prototype._draw=function(){var t=this;this.config.helpMessage&&(this._helper||(this._helper=new g.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var e=this.data.getLength()?l.el("ul.dhx_simplevault__files.dhx_simplevault-files",{class:this.config.$vaultHeight?"":"dhx_simplevault-files__fixed"},this.data.map(function(e){return l.el("li.dhx_simplevault-files__item",[l.el("span.dhx_simplevault-files__item-name",e.file&&e.file.name||e.name),l.el(".dhx_button.dhx_simplevault-files__delete.dhx_button--icon.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"data-dhx-id":e.id,onclick:t._handlers.remove},[l.el("span.dxi.dxi-delete-forever")])])})):null,n=this.config,i=n.id,o=n.helpMessage,r=n.disabled,s=n.required,a=n.label,n=u.getLabelStyle(this.config);return l.el(".dhx_form-group.dhx_form-group--simplevault",{class:v.getFormItemCss(this.config,v.isVerify(this.config))},[n&&l.el("legend.dhx_label",{class:o?"dhx_label--with-help":"",style:n.style,onclick:this._handlers.add,"aria-label":a||"select files"},o?[(n.label||s)&&l.el("span.dhx_label__holder",n.label),l.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper})]:n.label),l.el(".dhx_input__wrapper",{id:this._uid},[l.el("div",{_hooks:{didInsert:function(e){t._uploader.linkDropArea(e.el)}},ondragover:this._handlers.ondragover,class:"dhx_simplevault"+(this._dragover?" dhx_simplevault--on-drag":"")},[l.el("div.dhx_simplevault-loader",[l.el("span.dhx_simplevault__icon.dxi.dxi-vault")]),l.el(".dhx_simplevault__drop-area",[l.el("input.dhx_simplevault__input",{type:"file",id:i,disabled:r}),l.el("span.dhx_simplevault__icon.dxi.dxi-vault"),l.el("span.dhx_simplevault__title",[l.el("span",_.default.simpleVaultText),l.el("br"),l.el("label.dhx_simplevault__label",{onclick:this._handlers.add,for:i}," "+_.default.simpleVaultLabel)])]),e]),v.getValidationMessage(this.config)&&l.el("span.dhx_input__caption",{},v.getValidationMessage(this.config))])])},y);function y(e,t){var o=a.call(this,e,t)||this;o._isValid=!0,o._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],o._propsSimpleVault=["target","singleRequest","fieldName","params"],o._props=s(v.baseProps,o._propsItem,o._propsSimpleVault),o.events=new c.EventSystem(o),o.data=new f.DataCollection,o._uploader=new p.Uploader(r(r({},t),{autosend:!1,fieldName:t.fieldName||t.name||t.id}),o.data,o.data.events),o._initView(t),o._initHandlers(),o._handlers={add:function(e){o.config.disabled||(e.preventDefault(),o._uploader.selectFile())},remove:function(e){o.config.disabled||(e=u.locate(e))&&o.data.remove(e)},ondragover:function(e){for(var t=0,n=e.dataTransfer.types;t<n.length;t++){var i=n[t];if("Files"!==i&&"application/x-moz-file"!==i)return}o._dragoverTimeout?clearTimeout(o._dragoverTimeout):o.paint(),o._dragover=!0,o._dragoverTimeout=setTimeout(function(){o._dragover=!1,o._dragoverTimeout=null,o.paint()},150)},showHelper:function(e){e.stopPropagation(),e.preventDefault(),o._helper.show(e.target,{mode:"left"===o.config.labelPosition?"bottom":"right"})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),o._helper.hide()}};return o.mount(e,l.create({render:function(){return o._draw()}})),o}t.SimpleVault=o},function(e,n,a){"use strict";(function(r){Object.defineProperty(n,"__esModule",{value:!0});var i=a(1),o=a(2),s=a(10),c=a(43),e=(t.prototype.selectFile=function(){this._fileInput.click()},t.prototype.linkDropArea=function(e){function t(e){return e.preventDefault()}var n=this,i=o.toNode(e),e=function(e){e.preventDefault(),n.parseFiles(e.dataTransfer)};i.addEventListener("dragover",t),i.addEventListener("drop",e),this._dropAreas.set(i,{dragover:t,drop:e})},t.prototype.unlinkDropArea=function(e){var n=this;e?(e=o.toNode(e),this._unlinkDropArea(e),this._dropAreas.delete(e)):(this._dropAreas.forEach(function(e,t){n._unlinkDropArea(t)}),this._dropAreas.clear())},t.prototype.parseFiles=function(e){if(e.items&&e.items[0]&&e.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(e.items);else{for(var t=e.files,n=0;n<t.length;n++)this._addFile(t[n]);this.config.autosend&&this.send()}},t.prototype.send=function(e){var t=this;if(!this._uploadInfo||!this.isActive){var n=this.data.findAll(function(e){return e.status===c.FileStatus.queue||e.status===c.FileStatus.failed}).filter(function(e){return t.events.fire(c.UploaderEvents.beforeUploadFile,[e])});if(n.length)if(this.isActive=!0,this._uploadInfo={files:n,count:n.length,size:n.reduce(function(e,t){return e+t.file.size},0)},this.events.fire(c.UploaderEvents.uploadBegin,[n]),this.events.fire(c.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(n,e);else for(var i=0,o=n;i<o.length;i++){var r=o[i];this._xhrSend([r],e)}}},t.prototype.abort=function(e){if(e){e=this.data.getItem(e);e&&e.request&&4!==e.request.readyState&&e.request.abort()}else if(this._uploadInfo&&this._uploadInfo.files)for(var t=0,n=this._uploadInfo.files;t<n.length;t++){var i=n[t];this.abort(i.id)}},t.prototype._unlinkDropArea=function(e){var t,n=this._dropAreas.get(e);n&&(t=n.dragover,n=n.drop,e.removeEventListener("dragover",t),e.removeEventListener("drop",n))},t.prototype._initEvents=function(){var n=this;this._fileInput.addEventListener("change",function(){for(var e=n._fileInput.files,t=0;t<e.length;t++)n._addFile(e[t]);n.config.autosend&&n.send(),n._fileInput.value=null})},t.prototype._xhrSend=function(a,e){for(var l=this,e=this._createFormData(a,e),r=new XMLHttpRequest,t=0,n=a;t<n.length;t++){var i=n[t];this.data.update(i.id,{request:r,status:c.FileStatus.inprogress,progress:0})}r.open("POST",this.config.target),r.upload.onprogress=function(e){for(var t=0,n=a;t<n.length;t++){var i=n[t];l.data.update(i.id,{progress:e.loaded/e.total,status:c.FileStatus.inprogress})}var o=l._uploadInfo.files.reduce(function(e,t){return e+t.size*t.progress},0)||0,r=l._uploadInfo.size,s=o/l._uploadInfo.size*100||0;l.events.fire(c.UploaderEvents.uploadProgress,[s,o,r])},r.onloadend=function(){l._uploadInfo.count=l.config.singleRequest?0:l._uploadInfo.count-1;for(var e=200===r.status?c.FileStatus.uploaded:c.FileStatus.failed,t=200===r.status&&r.response?JSON.parse(r.response):null,n=0,i=a;n<i.length;n++){var o=i[n];l.data.update(o.id,{status:e}),e===c.FileStatus.uploaded?(l.config.updateFromResponse&&t&&(l.config.singleRequest&&t[o.id]?l.data.update(o.id,t[o.id]):l.config.singleRequest||l.data.update(o.id,t)),l.events.fire(c.UploaderEvents.uploadFile,[o,t])):l.events.fire(c.UploaderEvents.uploadFail,[o])}0===l._uploadInfo.count&&(l.isActive=!1,l.events.fire(c.UploaderEvents.uploadComplete,[l._uploadInfo.files]))},r.send(e)},t.prototype._parseAsWebkitEntry=function(e){for(var t=this,n=[],i=0;i<e.length;i++){var o=e[i].webkitGetAsEntry();n.push(this._traverseFileTree(o))}r.all(n).then(function(){t.config.autosend&&t.send()})},t.prototype._createFormData=function(e,t){var n=this.config.fieldName,i=new FormData,o=this.config.params;if(t)for(var r in t)i.append(r,t[r]);if(o)for(var r in o)i.append(r,o[r]);for(var s=1<e.length?"[]":"",a=0,l=e;a<l.length;a++){var c=l[a];i.append(n+s,c.file,c.file.name),i.append(n+"_fullname"+s,c.path+c.file.name);c="object"==typeof c.id?c.id:c.id.toString();i.append(n+"_id"+s,c)}return i},t.prototype._addFile=function(e,t){void 0===t&&(t="");t={id:i.uid(),file:e,progress:0,status:c.FileStatus.queue,src:null,path:t};this.data.add(t)},t.prototype._traverseFileTree=function(e){var i=this;return new r(function(r){var s=0,a=function(e,t){var n,o;e.isFile?(s++,e.file(function(e){s--,i._addFile(e,t),0===s&&r()})):e.isDirectory&&(n=e.createReader(),n=n,o=t+e.name+"/",s++,n.readEntries(function(e){s--;for(var t=0,n=e;t<n.length;t++){var i=n[t];a(i,o)}0===s&&r()}))};a(e,"")})},t);function t(e,t,n){void 0===e&&(e={}),this.config=i.extend({autosend:!0,updateFromResponse:!0,fieldName:"file"},e),this.data=t||new s.DataCollection,this.events=n||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}n.Uploader=e}).call(this,a(14))},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(49),u=n(0),l=n(1),c=n(18),d=n(7),h=n(3),f=n(5),p=n(9),g=n(19),o=(s=c.Label,o(v,s),v.prototype.destructor=function(){this.events&&this.events.clear(),this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.events=this._uid=this._propsItem=this._propsTimepicker=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},v.prototype.setProperties=function(t){var n=this;u.awaitRedraw().then(function(){if(t&&!l.isEmptyObj(t)&&n.events.fire(f.ItemEvent.beforeChangeProperties,[n.getProperties()])){for(var e in t)n._props.includes(e)&&(n.config[e]=t[e]);n._initView(n.config),n._initHandlers(),n.events.fire(f.ItemEvent.afterChangeProperties,[n.getProperties()]),n.paint()}})},v.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},v.prototype.show=function(){this.config.hidden&&this.events.fire(f.ItemEvent.beforeShow,[this.getValue("timeObject"===this.config.valueFormat)])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[this.getValue("timeObject"===this.config.valueFormat)]))},v.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[this.getValue("timeObject"===this.config.valueFormat),e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[this.getValue("timeObject"===this.config.valueFormat),e]))},v.prototype.isVisible=function(){return!this.config.hidden},v.prototype.disable=function(){this.config.disabled=!0,this.paint()},v.prototype.enable=function(){this.config.disabled=!1,this.paint()},v.prototype.isDisabled=function(){return this.config.disabled},v.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue("timeObject"===this.config.valueFormat):t;if(e||this.events.fire(f.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?this.config.validation(t):p.isTimeFormat(this.getValue(),this.config.timeFormat),e||this.events.fire(f.ItemEvent.afterValidate,[t,this._isValid]),this._isValid},v.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this.paint()},v.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&(this.timepicker.setValue(e),this.config.controls&&(this.config.value=this.timepicker.getValue(),this.events.fire(f.ItemEvent.change,[this.getValue("timeObject"===this.config.valueFormat)]),p.isVerify(this.config)&&this.validate(),this.paint()))},v.prototype.getValue=function(e){return e?this.timepicker.getValue(e):this.config.value||""},v.prototype.focus=function(){var e=this;u.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},v.prototype.blur=function(){var e=this;u.awaitRedraw().then(function(){e._popup.hide(),e.getRootView().refs.input.el.blur()})},v.prototype.clear=function(){""!==this.config.value&&this._clear()},v.prototype.getWidget=function(){return this.timepicker},v.prototype._initView=function(e){var t,n=this;if(l.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,timeFormat:24,controls:!1,valueFormat:"string",required:!1,validation:void 0,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new d.Popup,this.timepicker=new a.Timepicker(null,p.widgetConfig(e)),this._popup.attach(this.timepicker),this.config.hasOwnProperty("value")&&(this.config.value=this.timepicker.getValue()),this.config.hidden&&u.awaitRedraw().then(function(){n.hide(!0)})},v.prototype._initHandlers=function(){var i=this;this.events.on(f.ItemEvent.afterValidate,function(){i.config.$validationStatus=i._isValid?f.ValidationStatus.success:f.ValidationStatus.error,i.paint()}),this.config.controls?(this.timepicker.events.on(a.TimepickerEvents.afterClose,function(){i._popup.hide()}),this.timepicker.events.on(a.TimepickerEvents.afterApply,function(){i._afterApply()}),this._popup.events.on(d.PopupEvents.afterHide,function(){i.config.value&&i.config.value!==i.timepicker.getValue()?i.timepicker.setValue(i.config.value):""!==i.config.value&&void 0!==i.config.value||i._clear(!0)})):this.timepicker.events.on(a.TimepickerEvents.change,function(){i.config.value=i.timepicker.getValue(),i.events.fire(f.ItemEvent.change,[i.getValue("timeObject"===i.config.valueFormat)]),i.paint()}),this._popup.events.on(d.PopupEvents.afterHide,function(){document.activeElement!==i.getRootView().refs.input.el&&i.events.fire(f.ItemEvent.blur,[i.getValue()]),i.paint()}),this.events.on(f.ItemEvent.input,function(e){var t=12===i.config.timeFormat?7:5;e.length>=t&&p.isTimeFormat(e,i.config.timeFormat)?i.timepicker.setValue(e):""!==e||i.config.controls||i.clear()}),this.events.on(f.ItemEvent.afterChangeProperties,function(){i.config.value=i.timepicker.getValue(),i.paint()}),this.events.on(f.ItemEvent.blur,function(){i._popupIsFocus=!1,i.paint()}),document.addEventListener("keydown",function(e){var t,n=document.activeElement;(null===(t=null===(t=null===(t=i.getRootView())||void 0===t?void 0:t.refs)||void 0===t?void 0:t.input)||void 0===t?void 0:t.el)!==n&&!i._popup.isVisible()||i.events.fire(f.ItemEvent.keydown,[e])}),document.addEventListener("mousedown",function(){i._popup.getContainer()!==document.activeElement&&(i._popupIsFocus=!1)})},v.prototype._getHandlers=function(){var t=this;return{onfocus:function(){var e;t._popup.isVisible()||(e=t.getRootView().refs.input.el,t._popup.show(e),t.events.fire(f.ItemEvent.focus,[t.getValue()]),t.paint())},onblur:function(){t._popup.isVisible()||t.events.fire(f.ItemEvent.blur,[t.getValue()]),t.paint()},oninput:function(e){e=e.target.value;t.events.fire(f.ItemEvent.input,[e])}}},v.prototype._initHotkeys=function(){var e,n=this,t={"shift+tab":function(){n._applyTab()},tab:function(){n._applyTab()},escape:function(){n._popup.isVisible()&&n.getRootView().refs.input.el.focus(),n._popup.hide()},enter:function(){var e=n.getRootView().refs.input.el;n._popup.isVisible()?n._popupIsFocus&&n.config.controls||(n.config.value&&""===e.value?n.clear():e.value!==n.config.value&&(n.config.value=n.timepicker.getValue(),n.events.fire(f.ItemEvent.change,[n.getValue("timeObject"===n.config.valueFormat)])),p.isVerify(n.config)&&n.validate(),n._popup.hide()):n._popup.show(e)},arrowRight:function(e){var t=n._popup.getContainer();n._popup.isVisible()&&!n._popupIsFocus&&(e.preventDefault(),t.focus(),n._popupIsFocus=!0)}};for(e in t)this._keyManager.addHotKey(e,t[e])},v.prototype._draw=function(){var e=this.config,t=e.value,n=e.required,i=e.disabled,o=e.placeholder,r=e.name,s=e.id,a=e.editable,l=e.label,e=e.helpMessage,c=this._popup.isVisible()||(null===(c=null===(c=null===(c=this.getRootView())||void 0===c?void 0:c.refs)||void 0===c?void 0:c.input)||void 0===c?void 0:c.el)===document.activeElement;return u.el("div.dhx_form-group",{class:p.getFormItemCss(this.config,p.isVerify(this.config),c)},[this._drawLabel(),u.el(".dhx_input__wrapper",[u.el("div.dhx_input__container",{},[u.el(".dhx_input__icon.dxi.dxi-clock-outline"),u.el("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":r||s,_key:this._uid,_ref:"input",value:t,type:"text",required:n,disabled:i,class:c&&"dhx_input--focus",placeholder:o||"",name:r||"",id:s||this._uid,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,oninput:this._handlers.oninput,autocomplete:"off",readOnly:!a,"aria-label":l||(a?"type or":"")+" select date","aria-describedby":e?"dhx_label__help_"+(s||this._uid):null})]),p.getValidationMessage(this.config)&&u.el("span.dhx_input__caption",{},p.getValidationMessage(this.config))])])},v.prototype._clear=function(e){this.timepicker.clear(),this.config.value="",e||this.events.fire(f.ItemEvent.change,[this.config.value])},v.prototype._afterApply=function(){var e=this.getRootView().refs.input.el.value;this.config.value&&""===e?this.clear():(this.config.value=this.timepicker.getValue(),this.events.fire(f.ItemEvent.change,[this.getValue("timeObject"===this.config.valueFormat)])),p.isVerify(this.config)&&this.validate(),this._popup.hide(),this.paint()},v.prototype._applyTab=function(){var e;document.activeElement===(null===(e=null===(e=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.content)||void 0===e?void 0:e.el)||this._popupIsFocus||this._popup.hide()},v);function v(e,t){var n=s.call(this,null,t)||this;n.events=new h.EventSystem,n._isValid=!0,n._popupIsFocus=!1,n._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsTimepicker=["timeFormat","controls","valueFormat"],n._props=r(p.baseProps,n._propsItem,n._propsTimepicker),n._keyManager=new g.KeyManager(function(){var e,t=document.activeElement;return(null===(e=null===(e=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===t||n._popup.isVisible()}),n._initView(t),n._initHandlers(),n._initHotkeys();return n.mount(e,u.create({render:function(){return n._draw()}})),n}t.TimePicker=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(60),l=n(3),d=n(0),c=n(1),u=n(18),h=n(7),f=n(5),p=n(9),g=n(19),o=(s=u.Label,o(v,s),v.prototype.destructor=function(){this.events&&this.events.clear(),this._popup&&this._popup.destructor(),this.colorpicker&&this.colorpicker.destructor(),this.events=this._uid=this._propsColorpicker=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},v.prototype.setProperties=function(e){if(e&&!c.isEmptyObj(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsColorpicker.includes(t)&&(this.colorpicker.config[t]=e[t]));this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.colorpicker.paint(),this.paint()}},v.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},v.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},v.prototype.hide=function(e){var t=this.config,n=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[n,e]))},v.prototype.isVisible=function(){return!this.config.hidden},v.prototype.disable=function(){this.config.disabled=!0,this.paint()},v.prototype.enable=function(){this.config.disabled=!1,this.paint()},v.prototype.isDisabled=function(){return this.config.disabled},v.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue():t;if(e||this.events.fire(f.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?this.config.validation(t):a.isHex(t),e||this.events.fire(f.ItemEvent.afterValidate,[t,this._isValid]),this._isValid},v.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this.paint()},v.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&(this.colorpicker.setValue(e),p.isVerify(this.config)&&this.validate())},v.prototype.getValue=function(){return this.config.value||""},v.prototype.clear=function(){""!==this.config.value&&(this.config.value="",this.colorpicker.clear())},v.prototype.getWidget=function(){return this.colorpicker},v.prototype.focus=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},v.prototype.blur=function(){var e=this;d.awaitRedraw().then(function(){e._popup.hide(),e.getRootView().refs.input.el.blur()})},v.prototype._initView=function(e){var t,n=this;if(c.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.colorpicker&&this.colorpicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:a.palette,mode:"palette",required:!1,validation:void 0,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new h.Popup,this.colorpicker=new a.Colorpicker(null,p.widgetConfig(e)),this._popup.attach(this.colorpicker),this.config.hidden&&d.awaitRedraw().then(function(){n.hide(!0)})},v.prototype._initHandlers=function(){var i=this;this.colorpicker.events.on(a.ColorpickerEvents.change,function(){var e=i.config.value=i.colorpicker.getValue();i.events.fire(f.ItemEvent.change,[e]),i._popup.hide(),i.paint()}),this.events.on(f.ItemEvent.afterValidate,function(){i.config.$validationStatus=i._isValid?f.ValidationStatus.success:f.ValidationStatus.error,i.paint()}),this._popup.events.on(h.PopupEvents.afterHide,function(){document.activeElement!==i.getRootView().refs.input.el&&i.events.fire(f.ItemEvent.blur,[i.getValue()]),i.paint()}),this.events.on(f.ItemEvent.blur,function(){i._popupIsFocus=!1,i.paint()}),document.addEventListener("keydown",function(e){var t,n=document.activeElement;(null===(t=null===(t=null===(t=i.getRootView())||void 0===t?void 0:t.refs)||void 0===t?void 0:t.input)||void 0===t?void 0:t.el)!==n&&!i._popup.isVisible()||i.events.fire(f.ItemEvent.keydown,[e])}),document.addEventListener("mousedown",function(){i._popup.getContainer()!==document.activeElement&&(i._popupIsFocus=!1)})},v.prototype._getHandlers=function(){var t=this;return{onblur:function(){t._popup.isVisible()||t.events.fire(f.ItemEvent.blur,[t.getValue()]),t.paint()},onfocus:function(){var e;t._popup.isVisible()||(e=t.getRootView().refs.input.el,t._popup.show(e),t.events.fire(f.ItemEvent.focus,[t.getValue()]),t.paint())},oninput:function(e){e=e.target.value;t.events.fire(f.ItemEvent.input,[e])},onchange:function(e){e=e.target.value;t.config.editable&&a.isHex(e)?t.setValue(e):(""===e&&t.clear(),p.isVerify(t.config)&&t.validate(),t.paint())}}},v.prototype._initHotkeys=function(){var e,n=this,t={"shift+tab":function(){n._applyTab()},tab:function(){n._applyTab()},escape:function(){n._popup.isVisible()&&n.getRootView().refs.input.el.focus(),n._popup.hide()},enter:function(){var e;n._popup.isVisible()||(e=n.getRootView().refs.input.el,n._popup.show(e))},arrowRight:function(e){var t=n._popup.getContainer();n._popup.isVisible()&&!n._popupIsFocus&&(e.preventDefault(),t.focus(),n._popupIsFocus=!0)}};for(e in t)this._keyManager.addHotKey(e,t[e])},v.prototype._draw=function(){var e=this.config,t=e.required,n=e.value,i=e.icon,o=e.disabled,r=e.placeholder,s=e.name,a=e.id,l=e.editable,c=e.label,e=e.helpMessage,u=this._popup.isVisible()||(null===(u=null===(u=null===(u=this.getRootView())||void 0===u?void 0:u.refs)||void 0===u?void 0:u.input)||void 0===u?void 0:u.el)===document.activeElement;return d.el("div.dhx_form-group",{class:p.getFormItemCss(this.config,p.isVerify(this.config),u)},[this._drawLabel(),d.el(".dhx_input__wrapper",[d.el("div.dhx_input__container",{},[d.el(".dhx_input__icon",{class:i||"dxi dxi-eyedropper-variant"+(n?" dhx_input__icon--color-selected":""),style:{"background-color":n||"transparent"}}),d.el("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":s||a,_key:this._uid,_ref:"input",value:n,type:"text",required:t,disabled:o,class:u&&"dhx_input--focus",placeholder:r||"",name:s||"",id:a||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,autocomplete:"off",readOnly:!l,"aria-label":c||(l?"type or":"")+" select color","aria-describedby":e?"dhx_label__help_"+(a||this._uid):null})]),p.getValidationMessage(this.config)&&d.el("span.dhx_input__caption",{},p.getValidationMessage(this.config))])])},v.prototype._applyTab=function(){var e;document.activeElement===(null===(e=null===(e=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.content)||void 0===e?void 0:e.el)||this._popupIsFocus||this._popup.hide()},v);function v(e,t){var n=s.call(this,null,t)||this;n.events=new l.EventSystem,n._isValid=!0,n._popupIsFocus=!1,n._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsColorpicker=["mode","grayShades","customColors","palette"],n._props=r(p.baseProps,n._propsItem,n._propsColorpicker),n._keyManager=new g.KeyManager(function(){var e,t=document.activeElement;return(null===(e=null===(e=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===t||n._popup.isVisible()}),n._initView(t),n._initHandlers(),n._initHotkeys();return n.mount(e,d.create({render:function(){return n._draw()}})),n}t.ColorPicker=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(6),c=n(5),u=n(3),d=n(1),h=n(9),o=(s=l.View,o(f,s),f.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=null,this.unmount()},f.prototype.setProperties=function(e){if(e&&!d.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)h.baseProps.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},f.prototype.getProperties=function(){var e,t={};for(e in this.config)h.baseProps.includes(e)&&(t[e]=this.config[e]);return t},f.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[void 0])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[void 0]))},f.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[void 0,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[void 0,e]))},f.prototype.isVisible=function(){return!this.config.hidden},f.prototype._draw=function(){return a.el("div")},f);function f(e,t){var n=s.call(this,e,r({disabled:!1,hidden:!1,width:"content",height:"content",padding:0},t))||this;n.events=new u.EventSystem,n.config.hidden&&a.awaitRedraw().then(function(){n.hide(!0)});return n.mount(e,a.create({render:function(){return n._draw()}})),n}t.Spacer=o},function(e,t,n){n(104),n(105),n(106),n(107),n(108),n(109),n(116),n(117),e.exports=n(118)},function(e,t){Object.values=Object.values||function(t){var e=Object.prototype.toString.call(t);if(null==t)throw new TypeError("Cannot convert undefined or null to object");if(~["[object String]","[object Object]","[object Array]","[object Function]"].indexOf(e)){if(Object.keys)return Object.keys(t).map(function(e){return t[e]});var n,i=[];for(n in t)t.hasOwnProperty(n)&&i.push(t[n]);return i}return[]},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),o=0;o<t.length;o++){var r=t[o];if(null!=r)for(var s=Object.keys(Object(r)),a=0,l=s.length;a<l;a++){var c=s[a],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(i[c]=r[c])}}return i}})},function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0==i)return!1;var o,r,t=0|t,s=Math.max(0<=t?t:i-Math.abs(t),0);for(;s<i;){if((o=n[s])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;o<n;){var r=t[o];if(e.call(i,r,o,t))return r;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(t=n[r],e.call(o,t,r,n))return r;return-1})},function(e,t){String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var n=this.toString();(void 0===t||t>n.length)&&(t=n.length),t-=e.length;e=n.indexOf(e,t);return-1!==e&&e===t}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))})},function(e,t){var n,i,o,r;Element&&!Element.prototype.matches&&((n=Element.prototype).matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector),"classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var n=this;return{contains:function(e){return-1!==n.className.baseVal.split(" ").indexOf(e)},add:function(e){return n.setAttribute("class",n.getAttribute("class")+" "+e)},remove:function(e){var t=n.getAttribute("class").replace(new RegExp("(\\s|^)".concat(e,"(\\s|$)"),"g"),"$2");n.classList.contains(e)&&n.setAttribute("class",t)},toggle:function(e){this.contains(e)?this.remove(e):this.add(e)}}},configurable:!0}),Object.entries||(i=Function.bind.call(Function.call,Array.prototype.reduce),o=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),r=Function.bind.call(Function.call,Array.prototype.concat),Object.entries=function(n){return i(Object.keys(n),function(e,t){return r(e,"string"==typeof t&&o(n,t)?[[t,n[t]]]:[])},[])}),Event.prototype.composedPath||(Event.prototype.composedPath=function(){if(this.path)return this.path;var e=this.target;for(this.path=[];null!==e.parentNode;)this.path.push(e),e=e.parentNode;return this.path.push(document,window),this.path})},function(e,t){Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:0<e?1:-1}},function(e,t,n){"use strict";n.r(t);var i,o=n(13),t=n(59),r=["dhx_638523926_message","undefined",""," target='_blank'></a>","","1","166685313899999000","join","<a style='color: white;' href='https://dhtmlx.com/docs/products/licenses.shtml?expand=1&utm_source=trial&utm_medium=popup&utm_campaign=second_month#suite'"];i=r,function(e){for(;--e;)i.push(i.shift())}(150);function s(e,t){return r[e-=374]}setTimeout(function(){var e,t,n=s,i=[n(382),n(380),n(377)+n(381)][n(376)]("<br>");typeof n(375)!==n(379)&&setInterval(function(){var e,t=n;e=n,2592e6<Date[e(374)]()-e(375)&&Object(o.message)({text:i,icon:"dxi-close",css:t(378)})},(e=6e4,t=12e4,Math.floor(Math.random()*(t-e+1))+e))},1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(2),a=n(44),l=new WeakMap,c=new Map;function u(e,t){var n=document.createElement("div");return n.setAttribute("data-position",t),n.className="dhx_message-container dhx_message-container--"+t+(e===document.body?" dhx_message-container--in-body":""),n}function d(e,t){t&&clearTimeout(l.get(e));var n=e.parentNode,i=n.getAttribute("data-position"),o=n.parentNode,t=c.get(o);t&&(!(t=t[i])||-1!==(t=(i=t.stack).indexOf(e))&&(n.removeChild(e),i.splice(t,1),0===i.length&&o.removeChild(n)))}t.message=function(e){"string"==typeof e&&(e={text:e}),e.position=e.position||a.MessageContainerPosition.topRight;var t=document.createElement("div");t.className="dhx_widget dhx_message "+(e.css||""),t.setAttribute("role","alert"),(o=e.text&&r.uid())&&t.setAttribute("aria-describedby",o),e.html?t.innerHTML=e.html:(t.innerHTML='<span class="dhx_message__text" id='+o+"></span>\n\t\t"+(e.icon?'<span class="dhx_message__icon dxi '+e.icon+'"></span>':""),t.querySelector("#"+o).textContent=e.text);var n=e.node?s.toNode(e.node):document.body;"static"===getComputedStyle(n).position&&(n.style.position="relative"),(o=c.get(n))?o[e.position]||(o[e.position]={stack:[],container:u(n,e.position)}):c.set(n,((i={})[e.position]={stack:[],container:u(n,e.position)},i));var i=(o=c.get(n)[e.position]).stack,o=o.container;0===i.length&&n.appendChild(o),i.push(t),o.appendChild(t),e.expire&&(e=setTimeout(function(){return d(t)},e.expire),l.set(t,e)),t.onclick=function(){return d(t,!0)}}},function(e,i,o){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t=o(56),n=o(57),c=o(1);i.alert=function(s){var a=s.buttons&&s.buttons[0]?s.buttons[0]:t.default.apply,l=n.blockScreen(s.blockerCss);return new e(function(t){var e="dhx_alert__"+c.uid()+"_content",n="dhx_alert__"+c.uid()+"_header",i=document.createElement("div");i.setAttribute("role","alert"),i.setAttribute("aria-modal","true"),s.text&&i.setAttribute("aria-describedby",e),s.header&&i.setAttribute("aria-labelledby",n),i.className="dhx_widget dhx_alert "+(s.css||"");var o=function(e){"Escape"!==e.key&&"Esc"!==e.key||(r(e),t(!1))};function r(e){e.preventDefault(),l(),document.body.removeChild(i),document.removeEventListener("keydown",o)}i.innerHTML="\n\t\t\t"+(s.header?"<div id="+n+' class="dhx_alert__header"> '+(!1!==s.htmlEnable?s.header:"")+" </div>":"")+"\n\t\t\t"+(s.text?"<div id="+e+' class="dhx_alert__content">'+(!1!==s.htmlEnable?s.text:"")+"</div>":"")+'\n\t\t\t<div class="dhx_alert__footer '+(s.buttonsAlignment?"dhx_alert__footer--"+s.buttonsAlignment:"")+'">\n\t\t\t\t<button type="button" aria-label="confirm" class="dhx_alert__apply-button dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">'+a+"</button>\n\t\t\t</div>",!1===s.htmlEnable&&(s.header&&(i.querySelector("#"+n).textContent=s.header),s.text&&(i.querySelector("#"+e).textContent=s.text)),document.body.appendChild(i),i.querySelector(".dhx_alert__apply-button").focus(),i.querySelector("button").addEventListener("click",function(e){r(e),t(!0)}),document.addEventListener("keydown",o)})}}).call(this,o(14))},function(e,o,r){(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}o.setTimeout=function(){return new i(n.call(setTimeout,t,arguments),clearTimeout)},o.setInterval=function(){return new i(n.call(setInterval,t,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(t,this._id)},o.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},o.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},o._unrefActive=o.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(113),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(45))},function(e,t,n){(function(e,p){!function(n,i){"use strict";var o,r,s,a,l,c,t,u,e;function d(e){delete r[e]}function h(e){if(s)setTimeout(h,0,e);else{var t=r[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{d(e),s=!1}}}}function f(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(u)&&h(+e.data.slice(u.length))}n.setImmediate||(o=1,s=!(r={}),a=n.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&e.setTimeout?e:n,l="[object process]"==={}.toString.call(n.process)?function(e){p.nextTick(function(){h(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(u="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",f,!1):n.attachEvent("onmessage",f),function(e){n.postMessage(u+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){t.port2.postMessage(e)}):a&&"onreadystatechange"in a.createElement("script")?(c=a.documentElement,function(e){var t=a.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t)}):function(e){setTimeout(h,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return e={callback:e,args:t},r[o]=e,l(o),o++},e.clearImmediate=d)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(45),n(114))},function(e,t){var n,i,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var a,l=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,i,o){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0});var t=o(56),n=o(57),h=o(1);i.confirm=function(l){l.buttonsAlignment=l.buttonsAlignment||"right";var c=l.buttons&&l.buttons[1]?l.buttons[1]:t.default.apply,u=l.buttons&&l.buttons[0]?l.buttons[0]:t.default.reject,d=n.blockScreen(l.blockerCss);return new e(function(t){var n=document.createElement("div");n.setAttribute("role","alertdialog"),n.setAttribute("aria-modal","true");var i,e=l.header&&h.uid(),o=l.header&&h.uid();o&&n.setAttribute("aria-describedby",o),e&&n.setAttribute("aria-labelledby",e);function r(e){d(),n.removeEventListener("click",s),document.removeEventListener("keydown",a),document.body.removeChild(n),t(e)}var s=function(e){"BUTTON"===e.target.tagName&&r(e.target.classList.contains("dhx_alert__confirm-aply"))},a=function(e){"Escape"===e.key||"Esc"===e.key?(n.querySelector(".dhx_alert__confirm-aply").focus(),r(e.target.classList.contains("dhx_alert__confirm-reject"))):"Tab"===e.key&&("aply"===i?(i="reject",n.querySelector(".dhx_alert__confirm-reject").focus()):(i="aply",n.querySelector(".dhx_alert__confirm-aply").focus()),e.preventDefault())};n.className="dhx_widget dhx_alert dhx_alert--confirm"+(l.css?" "+l.css:""),n.innerHTML="\n\t\t"+(l.header?'<div class="dhx_alert__header" id='+e+"> "+(!1!==l.htmlEnable?l.header:"")+" </div>":"")+"\n\t\t"+(l.text?'<div class="dhx_alert__content" id='+o+">"+(!1!==l.htmlEnable?l.text:"")+"</div>":"")+'\n\t\t\t<div class="dhx_alert__footer '+(l.buttonsAlignment?"dhx_alert__footer--"+l.buttonsAlignment:"")+'">\n\t\t\t\t<button type="button" aria-label="reject" class="dhx_alert__confirm-reject dhx_button dhx_button--view_link dhx_button--color_primary dhx_button--size_medium">'+u+'</button>\n\t\t\t\t<button type="button"  aria-label="aply"class="dhx_alert__confirm-aply dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">'+c+"</button>\n\t\t\t</div>",!1===l.htmlEnable&&(l.header&&(n.querySelector("#"+e).textContent=l.header),l.text&&(n.querySelector("#"+o).textContent=l.text)),document.body.appendChild(n),i="aply",n.querySelector(".dhx_alert__confirm-aply").focus(),n.addEventListener("click",s),document.addEventListener("keydown",a)})}}).call(this,o(14))},function(e,t,n){"use strict";n.r(t);var i,s=n(13),t=n(59),o=["contact@dhtmlx.com</a> or visit <a style='color: #0288d1;text-decoration: unset;' href='https://dhtmlx.com/docs/products/licenses.shtml?expand=1&utm_source=trial&utm_medium=","1666853138000","https://dhtmlx.com/docs/products/licenses.shtml?expand=1&utm_source=trial&utm_medium=popup&utm_campaign=second_month#suite","random","popup&utm_campaign=second_month#suite' target='_blank'>dhtmlx.com</a> in order to obtain a proper license.","<svg class='dhx_alert__header--icon' xmlns='http://www.w3.org/2000/sv' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='0'><path d='M11,15H13V17H","1","right","floor","close","_blank","---<a style='color: #0288d1;text-decoration: unset;' href='' target='_blank'>","#","16.42 16.42,20 12,20Z'></path></svg>"];i=o,function(e){for(;--e;)i.push(i.shift())}(148);function a(e,t){return o[e-=257]}setTimeout(function(){var e,t,n,i=a,o=i(269)+"11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,"+i(263),r=i(261)+i(264)+i(268);void 0!==i(265)&&setInterval(function(){var e,t=i;e=i,5184e6<Date[e(270)]()-e(265)&&Object(s.alert)({header:o,text:r,buttonsAlignment:t(257),buttons:["check licensing"],css:t(262)}).then(function(){var e=t;window[e(259)](e(266),e(260))})},(e=6e4,t=12e4,n=i,Math[n(258)](Math[n(267)]()*(t-e+1))+e))},1)},function(e,t){var n,i=["1666853138000","random","undefined","floor","now"];n=i,function(e){for(;--e;)n.push(n.shift())}(179);function o(e,t){return i[e-=168]}setTimeout(function(){var e,t,n,i=o;typeof i(170)!==i(172)&&setInterval(function(){var e;e=i,7776e6<Date[e(169)]()-e(170)&&console.log("Your evaluation period for DHTMLX has expired.\nPlease contact us at contact@dhtmlx.com or visit dhtmlx.com in order to obtain a proper license.")},(e=6e4,t=12e4,n=i,Math[n(168)](Math[n(171)]()*(t-e+1))+e))},1)},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(119);o.css=n.cssManager;var i=t(21);t(120);var r=t(13);o.message=r.message;r=window.dhx=window.dhx||{};o.i18n=r.i18n||{},o.i18n.setLocale=function(e,t){var n,i=o.i18n[e];for(n in t)i[n]=t[n]},o.i18n.spreadsheet=o.i18n.spreadsheet||i.default,r.css=r.css||n.cssManager;t=t(121);o.Spreadsheet=t.Spreadsheet},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),n=(o.prototype.update=function(){this._styleCont.innerHTML!==this._generateCss()&&(document.head.appendChild(this._styleCont),this._styleCont.innerHTML=this._generateCss())},o.prototype.remove=function(e){delete this._classes[e],this.update()},o.prototype.add=function(e,t,n){void 0===n&&(n=!1);var i=this._toCssString(e),e=this._findSameClassId(i);return e&&t&&t!==e?(this._classes[t]=this._classes[e],t):e||this._addNewClass(i,t,n)},o.prototype.get=function(e){if(this._classes[e]){for(var t={},n=0,i=this._classes[e].split(";");n<i.length;n++){var o=i[n];o&&(t[(o=o.split(":"))[0]]=o[1])}return t}return null},o.prototype.destructor=function(){this._classes=this._styleCont=null},o.prototype._findSameClassId=function(e){for(var t in this._classes)if(e===this._classes[t])return t;return null},o.prototype._addNewClass=function(e,t,n){t=t||"dhx_generated_class_"+i.uid();return this._classes[t]=e,n||this.update(),t},o.prototype._toCssString=function(e){var t,n="";for(t in e){var i=e[t];n+=t.replace(/[A-Z]{1}/g,function(e){return"-"+e.toLowerCase()})+":"+i+";"}return n},o.prototype._generateCss=function(){var e,t="";for(e in this._classes)t+="."+e+"{"+this._classes[e]+"}\n";return t},o);function o(){this._classes={};var e=document.createElement("style");e.id="dhx_generated_styles",this._styleCont=document.head.appendChild(e)}t.CssManager=n,t.cssManager=new n},function(e,t,n){},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=this&&this.__assign||function(){return(v=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(60),_=n(0),a=n(3),m=n(2),l=n(6),g=n(10),c=n(31),u=n(12),d=n(38),h=n(177),f=n(40),y=n(201),b=n(202),w=n(203),x=n(204),E=n(52),C=n(206),S=n(207),I=n(17),k=n(4),M=n(85),P=n(41),O=n(208),D=n(21),V=n(209),A=n(210),F=n(8),R=n(7),T=n(25),H=n(1),L=n(211),j=n(212),N=n(213),$=n(214),z=n(30),B=n(53),W=n(86),G=n(218),U=n(16),q=n(26),Y=n(15),X=n(219),K=n(220),J=n(13),Z=n(233),o=(r=l.View,o(Q,r),Q.prototype.destructor=function(){this.unmount(),this._layout.unmount(),this.contextMenu.destructor(),this.menu.destructor(),this.toolbar.destructor(),this._editLine.destructor(),this._tabbar.destructor()},Q.prototype.paint=function(){this.config.rowsCount===this._sizes.rowsCount&&this.config.colsCount===this._sizes.colsCount||this._generateGridStruct(),this._layout.paint(),this._grid.paint()},Q.prototype.load=function(e,t){var n=this;if("xlsx"===t||"json"===t&&!e){if(!k.isWasmSupported())throw new Error("WebAssembly is not supported by your browser");return this._xlsxProxy=this._xlsxProxy||new N.FileProxy(this),this._xlsxProxy.load(t,e).then(function(e){n.parse(e,t)})}return g.toProxy(e).load().then(function(e){n.parse(e,t)})},Q.prototype.parse=function(e,t){var n=this;"csv"===t&&(t=new S.CustomCsvDriver),"xlsx"===t&&(t=new j.XlsxDriver),this._sheets.forEach(function(e){"add-sheet"!==e.id&&(n._dataStore.removePage(e.value),n._sheets.remove(e.id))}),e=g.toDataDriver(t||"json").toJsonArray(e),this._grid.config.columns.map(function(e){e.$cellCss={}});var i={sheets:[]};if("sheets"in e)for(var o=0;o<(this.config.multiSheets?e.sheets.length:1);o++)(u=e.sheets[o]).name=u.name||this._generateNewSheetName(),i.sheets.push(u);else"data"in e&&i.sheets.push({data:e.data,name:this._activeSheetName.name});if("styles"in e){var r,s=e.styles;for(r in s){var a=s[r];dhx.css.add(v(v({},k.convertStyles(a)),{"white-space":"nowrap"}),r)}dhx.css.update()}Array.isArray(e)&&i.sheets.push({data:e,name:this._generateNewSheetName()});for(var l=0,c=i.sheets;l<c.length;l++){var u=c[l];this._dataStore.addPage(u.name),this._sheets.add({value:u.name,id:u.id})}for(var d=this,h=0,f=i.sheets;h<f.length;h++)!function(e){for(var a=d._dataStore.getPage(e.name),t=0,n=e.data;t<n.length;t++)!function(t){var e=k.getCellIds(t.cell.toUpperCase()),n=e.row,i=e.col,o=I.getCleanValue(t.value),r=I.isNumeric(o),s=void 0,e=void 0,e=("General"===t.format?d.config.formats.find(function(e){return"common"===e.id}):d.config.formats.find(function(e){return e.id===t.format||e.mask===t.format}))||d.config.formats.find(function(e){return e.mask===I.detectCellFormat(t.value)});t.format=e.mask,s=r&&"@"!==(null==e?void 0:e.mask)?d.config.autoFormat&&e.mask.includes("%")?t.value==o?parseFloat(o).toFixed(4):+(parseFloat(o)/100).toFixed(4):+o:t.value;o=e.id;"date"!==o&&"time"!==o||!s||(s=I.isNumeric(s)?+s:s instanceof Date?q.getExcelDateFromJs(s):q.getExcelDateFromString(s,e)),a.setValue(n,i,s,"@"===e.mask?1:0),a.setCell(n,i,{format:e,css:t.css,editor:t.editor})}(n[t]);for(var i=d._grid.config.rowHeight,o=e.cols||d._grid.config.columns.slice(1).map(function(e){return{width:e.width}}),r=e.rows||d._grid.data.map(function(){return{height:i}});r.length<d._grid.data.getLength();)r.push({height:i});for(;o.length<d._grid.config.columns.length;)o.push({width:120});a.setMeta({cols:o,rows:r})}(u=f[h]);this._grid.data.events.fire(g.DataEvents.change),this._changeSheet(this._sheets.getId(this.config.multiSheets&&!this.config.readonly?1:0)),this._grid.paint(),this.config&&!this.config.readonly&&this.selection.setSelectedCell("A1")},Q.prototype.serialize=function(){var v=this,_={},m=[];return this._sheets.forEach(function(e){if("add-sheet"!==e.id){for(var t=e.value,n=v._dataStore.getPage(t),i=n.getMeta(),o=i.cols,r=void 0===o?[]:o,e=i.rows,o=void 0===e?[]:e,i=v._activePage.getSize(),e=i[0],i=i[1],n=n.serialize(!0),s={name:t,data:[],cols:r.slice(0,i),rows:o.slice(0,e).map(function(e){return{height:e.height}})},a=0,l=n;a<l.length;a++){var c,u,d,h,f=l[a],p=k.getCellNameById(v._grid,(f[0]+1).toString(),(f[1]+1).toString()),g=f[2];g&&(c=g.value,u=g.css,d=g.format,h=g.editor,f={cell:p},u&&(f.css=u,_[f.css]=dhx.css.get(f.css)),h&&(f.editor=h),void 0!==d&&(g=I.getFormat(I.getDefaultFormatsMap()[d.mask]),f.format=(null==g?void 0:g.id)||d.id),!c&&"number"!=typeof c||(f.value=c),p&&(f.value||"number"==typeof f.value||u||h)&&s.data.push(f))}m.push(s)}}),{sheets:m,styles:_,formats:this.config.formats}},Q.prototype.setValue=function(e,t){if(e&&(this._checkForMissedCells(e),this.events.fire(F.SpreadsheetEvents.beforeValueChange,[e,t])&&e)){var n=this._activePage;if(e.includes("!")){var i=e.split("!");if(e=i[1],!(n=this._dataStore.getPage(i[0])))return}i=k.getCellIds(e);this._callAction({row:i.row,col:i.col,cell:e,val:t,action:F.Actions.setCellValue,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n}),this._grid.paint()}},Q.prototype.getValue=function(e){if(e){var n=this._activePage;if(e.includes("!")){var t=e.split("!");if(e=t[1],!(n=this._dataStore.getPage(t[0])))return}if(e=e.toUpperCase(),k.isRangeId(e)){var i=[];return this.eachCell(function(e,t){e=k.getCellIds(e);i.push(n.getValue(e.row,e.col))},e),i}e=k.getCellIds(e);return n.getValue(e.row,e.col)}},Q.prototype.getCellIndex=function(e){return k.getCellIds(e)},Q.prototype.getFormula=function(e){var t=this,n=this._activePage;if(e.includes("!")){var i=e.split("!");if(e=i[1],!(n=this._dataStore.getPage(i[0])))return}if(e=e.toUpperCase(),k.isRangeId(e)){var o=[];return this.eachCell(function(e){o.push(t._getMath(e,n)||"")},e),o}e=this._getMath(e,n);return e?e.source:""},Q.prototype.getSheets=function(){var t=[];return this._sheets.forEach(function(e){"add-sheet"!==e.id&&t.push({name:e.value,id:e.id})}),t},Q.prototype._getMath=function(e,t){if(void 0===t&&(t=this._activePage),e){var n=k.getCellIds(e),e=n.row,n=n.col,t=z.toId(e,n,t.getID());return this._math.getMath(t)||null}},Q.prototype.eachCell=function(e,t){t=t||this.selection.getSelectedCell();for(var n=0,i=k.getCellsArray(t);n<i.length;n++){var o=i[n],r=k.getCellIds(o),s=r.row,r=r.col;e(o,this._activePage.getValue(s,r))}},Q.prototype.getStyle=function(e){if(e){var s=this._activePage;if(e.includes("!")){var t=e.split("!");if(e=t[1],!(s=this._dataStore.getPage(t[0])))return}if(k.isRangeId(e)){var a=[];return this.eachCell(function(e){var t=k.getCellInfo(e,s),e=[];t.css&&(e="string"==typeof t.css?t.css.split(" "):[t.css]);for(var n={},i=0,o=e;i<o.length;i++)var r=o[i],n=v(v({},n),dhx.css.get(r));a.push(n)},e),a}t=k.getCellInfo(e,this._activePage),e=[];t.css&&(e="string"==typeof t.css?t.css.split(" "):[t.css]);for(var n={},i=0,o=e;i<o.length;i++)var r=o[i],n=v(v({},n),dhx.css.get(r));return n}},Q.prototype.setStyle=function(e,t){if(e&&t&&this.events.fire(F.SpreadsheetEvents.beforeStyleChange,[e,t])){var n=this._activePage;if(e.includes("!")){var i=e.split("!");if(e=i[1],!(n=this._dataStore.getPage(i[0])))return}var o=k.getCellIds(e),i=o.row,o=o.col;Object.keys(t).length?this._callAction({val:t,row:i,col:o,cell:e,action:F.Actions.setCellStyle,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n}):this._callAction({row:i,col:o,cell:e,action:F.Actions.removeCellStyles,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n})}},Q.prototype.getFormat=function(e){if(e){var t=this._activePage;if(e.includes("!")){var n=e.split("!");if(e=n[1],!(t=this._dataStore.getPage(n[0])))return}if(k.isRangeId(e)){var i=[];return this.eachCell(function(e){i.push((null===(e=k.getCellInfo(e,t).format)||void 0===e?void 0:e.id)||"common")},e),i}e=null===(e=k.getCellInfo(e,t).format)||void 0===e?void 0:e.mask;return I.getDefaultFormatsMap()[e]||e}},Q.prototype.setFormat=function(e,t){if(e){var n=this._activePage;if(e.includes("!")){var i=e.split("!");if(e=i[1],!(n=this._dataStore.getPage(i[0])))return}this._callAction({val:t,cell:e,action:F.Actions.setCellFormat,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n})}},Q.prototype.clearSheet=function(e){e=this._getSheet(e)||this.getActiveSheet();this.events.fire(F.SpreadsheetEvents.beforeSheetClear,[e])&&(this._callAction({val:e.name,action:F.Actions.clearSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterSheetClear,[e]))},Q.prototype.clear=function(){this.events.fire(F.SpreadsheetEvents.beforeClear,[])&&(this._callAction({action:F.Actions.clear,groupAction:F.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterClear,[]))},Q.prototype.isLocked=function(e){if(e){var t=this._activePage;if(e.includes("!")){var n=e.split("!");if(e=n[1],!(t=this._dataStore.getPage(n[0])))return}if("start"in k.getCellIds(e)){var i=!1;return this.eachCell(function(e){i||(e=k.getCellInfo(e,t).locked,i=e)},e),i}return!!k.getCellInfo(e,t).locked}},Q.prototype.lock=function(e){if(e){var t=this._activePage;if(e.includes("!")){var n=e.split("!");if(e=n[1],!(t=this._dataStore.getPage(n[0])))return}n=k.getCellIds(e);this._callAction({row:n.row,col:n.col,val:!0,cell:e,action:F.Actions.lockCell,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:t}),this._grid.paint()}},Q.prototype.unlock=function(e){if(e){var t=this._activePage;if(e.includes("!")){var n=e.split("!");if(e=n[1],!(t=this._dataStore.getPage(n[0])))return}n=k.getCellIds(e);this._callAction({row:n.row,col:n.col,val:!1,cell:e,action:F.Actions.lockCell,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:t}),this._grid.paint()}},Q.prototype.addRow=function(e){this.events.fire(F.SpreadsheetEvents.beforeRowAdd,[e])&&(k.isRangeId(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:F.Actions.addRow,groupAction:F.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterRowAdd,[e]))},Q.prototype.deleteRow=function(e){var t;this.events.fire(F.SpreadsheetEvents.beforeRowDelete,[e])&&(t=k.getCellIds(e),this._callAction({row:t.row,col:t.col,cell:e,action:F.Actions.deleteRow,groupAction:F.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterRowDelete,[e]))},Q.prototype.addColumn=function(e){this.events.fire(F.SpreadsheetEvents.beforeColumnAdd,[e])&&(k.isRangeId(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:F.Actions.addColumn,groupAction:F.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterColumnAdd,[e]))},Q.prototype.deleteColumn=function(e){this.events.fire(F.SpreadsheetEvents.beforeColumnDelete,[e])&&(this._callAction({cell:e,action:F.Actions.deleteColumn,groupAction:F.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(F.SpreadsheetEvents.afterColumnDelete,[e]))},Q.prototype.undo=function(){this._actionsManager.undo()},Q.prototype.redo=function(){this._actionsManager.redo()},Q.prototype.startEdit=function(e,t){if(!this.config.readonly&&!this._range.mode){if(this._editMode)return this._editLine.setValueAtRedactor(t);var n,i,o=this.selection.getFocusedCell();e=(e=e||o).toUpperCase(),this._checkForMissedCells(e),this.events.fire(F.SpreadsheetEvents.beforeEditStart,[e,t])&&(this.isLocked(e)||(o!==e&&(this.endEdit(!0),this.selection.setSelectedCell(e)),n=k.getCellInfo(e,this._activePage),this.selection.getSelectedCell()||this.selection.setSelectedCell(e),n.edited||(o=(i=k.getCellIds(e)).row,n=i.col,i=z.toId(o,n,this._activePage.getID()),(i=this._math.getMath(i))&&(t="="+i.source),this._activePage.setCell(o,n,{edited:!0,nextValue:t,editorValue:t}),t&&this._editLine.setValue(t),this.events.fire(F.SpreadsheetEvents.afterEditStart,[e,t]))))}},Q.prototype.endEdit=function(e){var t,n,i=this.selection.getFocusedCell(),o=k.getCellInfo(i,this._activePage),r=o.edited,s=o.nextValue,a=o.format,o=o.value;r&&this.events.fire(F.SpreadsheetEvents.beforeEditEnd,[i,s])&&(s&&this._activePage.setMeta({inserted:!0}),e||void 0===s||("time"===(null==a?void 0:a.id)&&I.isNumeric(o)&&(t=q.timeStringToJS(s))instanceof Date&&((n=q.excelDateToJSDate(o)).setHours(t.getHours(),t.getMinutes(),t.getSeconds()),s=q.getExcelDateFromJs(n)),"date"===(null==a?void 0:a.id)&&I.isNumeric(o)&&Y.stringToDate(s,this.config.dateFormat,!0)&&(t=Y.stringToDate(s,this.config.dateFormat),n=q.excelDateToJSDate(o),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),s=q.getExcelDateFromJs(t)),this.setValue(i,s)),t=(n=k.getCellIds(i)).row,n=n.col,this._activePage.setCell(t,n,{nextValue:void 0,edited:!1}),this._editLine.blur(),this.events.fire(F.SpreadsheetEvents.afterEditEnd,[i,s]))},Q.prototype.addSheet=function(e){if(this.config.multiSheets){var t=(t=e)||this._generateNewSheetName();if(this.events.fire(F.SpreadsheetEvents.beforeSheetAdd,[t]))return this._callAction({val:t,action:F.Actions.addSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:this._tabbar.getSelected()[0]}),this._sheets.find(function(e){return e.value===t}).id}},Q.prototype.removeSheet=function(e){e=this._getSheet(e);!e||!this.config.multiSheets||this.config.multiSheets&&2===this._sheets.getLength()||this.events.fire(F.SpreadsheetEvents.beforeSheetRemove,[e])&&(this._callAction({action:F.Actions.deleteSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:e.id,val:e.name}),this.events.fire(F.SpreadsheetEvents.afterSheetRemove,[e]))},Q.prototype.getActiveSheet=function(){return this._activeSheetName},Q.prototype.setActiveSheet=function(e){this.endEdit(),this._changeSheet(e)},Q.prototype.setValidation=function(e,t){var n=this._activePage;if(e.includes("!")){var i=e.split("!");if(e=i[1],!(n=this._dataStore.getPage(i[0])))return}this._callAction({val:k.isRangeId(e)?[t]:t,cell:e,action:F.Actions.setValidation,groupAction:F.Actions.groupAction,dataStore:this._dataStore,page:n})},Q.prototype._checkValidation=function(e){var t=k.getCellInfo(e,this._activePage),n=t.editor,i=t.value;if(!n)return!0;var o,r=n.options;return"string"==typeof r&&(e=(o=k.getCellIds(r)).start,t=o.end,n=o.row,o=o.col,r=n?[this._activePage.getValue(n,o)]:this._activePage.getRange(e.row,e.col,t.row,t.col)),"number"!=typeof i&&!i||r.includes(i)},Q.prototype.sortCells=function(e,t){void 0===t&&(t=1),this._callAction({action:F.Actions.sortCells,groupAction:F.Actions.sortCells,dataStore:this._dataStore,cell:e,dir:t,page:this._activePage})},Q.prototype._renameSheet=function(e,t){var n=this._sheets.getItem(e);n&&t&&n.prevValue!==t&&this.events.fire(F.SpreadsheetEvents.beforeSheetRename,[{name:n.value,id:n.id},t])&&(this._callAction({val:t,action:F.Actions.renameSheet,groupAction:F.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:e}),this.events.fire(F.SpreadsheetEvents.afterSheetRename,[{name:n.value,id:n.id}]))},Q.prototype._getSheet=function(t){return this.getSheets().find(function(e){return e.id===t})},Q.prototype._changeSheet=function(e){var t,n,i,o,r,s,a=this,l=this._sheets.getItem(e);l&&this.events.fire(F.SpreadsheetEvents.beforeSheetChange,[this._activeSheetName])&&(t=this._activePage,r=this._grid.getScrollState(),t&&t.setMeta({scroll:r}),n=this._activeSheetName?this._activeSheetName.name:null,i=this._editLine.isCellExpected("A1",!1,this._range.inline&&this._range.editor||null),o=this.selection&&this.selection.getFocusedCell(),(r=k.getCellInfo(o,this._activePage))&&r.edited&&!i&&this.endEdit(),this._activePage=this._dataStore.getPage(l.value),this._activeSheetName={name:l.value,id:e},this._tabbar.select(e),l=this._activePage&&this._activePage.getMeta(),this._activePage&&!l.toolbarId&&this._activePage.setMeta({toolbarId:e}),i&&!this._editMode||i&&this._editMode.page!==this._activePage?(this._activePage.setMeta({selectedCells:null,focusedCell:null}),this._editMode=this._editMode||{page:t,cell:o,pageName:n}):i&&this._editMode&&this._editMode.page===this._activePage?(s=this._editLine.getValue(),this._editMode=null,this._editLine.setValue(s),_.awaitRedraw().then(function(){a._editLine.focus(),a.events.fire(F.SpreadsheetEvents.editLineInput,[s]),a._editLine.setCursor(i)})):(this._editLine.setCellMath(),this._editMode=null),this.events.fire(F.SpreadsheetEvents.afterSheetChange,[this._activeSheetName]),this._grid.paint(),_.awaitRedraw().then(function(){U.focusManager.setFocusId(a._uid),a._updateGridState()}))},Q.prototype._callAction=function(e){e&&!this.config.readonly&&(Array.isArray(e)?this._actionsManager.execute(e):k.isRangeId(e.cell)?this._actionsManager.execute(e.groupAction,e):this._actionsManager.execute(e.action,e))},Q.prototype._initLayout=function(){this._grid=new c.Grid(null,{rowHeight:32,headerRowHeight:32,headerSort:!1,leftSplit:1+(this.config.leftSplit||0),topSplit:this.config.topSplit||0}),this.menu=new h.Menu(null,{navigationType:"click"}),this.menu.data.parse(b.getMenuStruct(this.config)),this.toolbar=new d.Toolbar;var e=w.getToolbarStruct(this.config.toolbarBlocks,this.config);this.toolbar.data.parse(e),this.contextMenu=new h.ContextMenu,this.contextMenu.data.parse(y.getContextMenuStruct()),this.sheetContextMenu=new h.ContextMenu,this.sheetContextMenu.data.parse(y.getSheetsContextMenuStruct(this.config.multiSheets)),this._tabbar=new d.Toolbar(null,{css:"dhx-sheets-toolbar"}),this._sheets=this._tabbar.data,this._sheets.parse([{value:"sheet1"}]),this._dataStore=$.initMathStore(this._sheets),this._math=this._dataStore.getStore(),this._editLine=new x.EditLine(null,{events:this.events,grid:this._grid,store:this._activePage,spreadsheet:this,math:this._math}),this.config.multiSheets&&!this.config.readonly&&this._sheets.add({icon:"dxi dxi-plus",id:"add-sheet"},0);var t=this._layout=new u.Layout(null,{height:"100%",rows:[{id:"menu",css:"menu_wrapper",height:"content"},{id:"toolbar",css:"toolbar_wrapper",height:"content"},{id:"editLine",css:"editLine_wrapper",height:"content"},{id:"grid",css:"dhx-spreadsheet-grid dhx_layout-cell--gravity"},{id:"tabbar",css:"sheetbar_wrapper",height:"content"}]});t.getCell("menu").attach(this.menu,this),t.getCell("toolbar").attach(this.toolbar,this),t.getCell("grid").attach(this._grid,this),t.getCell("editLine").attach(this._editLine,this),t.getCell("tabbar").attach(this._tabbar,this);var n=this.config.multiSheets&&!this.config.readonly?1:0;this._dataStore.getPage(this._sheets.getItem(this._sheets.getId(n)).value).setMeta({leftSplit:this.config.leftSplit}),this._changeSheet(this._sheets.getId(n)),this.config.editLine&&!this.config.readonly||t.getCell("editLine").hide(),this.config.menu&&!this.config.readonly||t.getCell("menu").hide(),!this.config.readonly&&e&&e.length||t.getCell("toolbar").hide(),this.config.multiSheets||t.getCell("tabbar").hide()},Q.prototype._generateGridStruct=function(){for(var u=this,e=this.serialize(),t=this.config,n=t.rowsCount,i=t.colsCount,o=[],r=1;r<=n;r++){for(var s={id:""+r,$index:r},a=1;a<=i;a++)s[a]="";o.push(s)}function d(e){var n=e.el;u._range.editor=n,u._range.inline=1,n.focus(),n.setSelectionRange(n.value.length,n.value.length),u._range.cursor=n.value.length,n.addEventListener("blur",function(e){var t;u._range.cursor=n.selectionStart,t=e,requestAnimationFrame(function(){p&&setTimeout(function(){u._restoreFocus(t)})})}),n.addEventListener("focus",function(){u._range.inline=1}),p=!0}function h(e,t){p&&u.events.fire(F.SpreadsheetEvents.cellInput,[e,t.target.value])}var f,l=[{id:"$index",width:40,header:[{text:""}],htmlEnable:!0,editable:!1,align:"right",template:function(e,t,n){return E.getIndexRowCell(u._grid.data.getIndex(t.id)+1)}}],p=!1;this.events.on(F.SpreadsheetEvents.gridRedraw,function(){f=null});for(var c=function(e,t,n){f=f||u.selection.getFocusedCell();var i=n.$letter+t.$index,o=k.getCellIds(i),r=u._activePage.getCell(o.row,o.col)||{},s=r.locked,a=r.edited,l=r.nextValue,c=r.editor,n=r.css,t=r.format,o=u._activePage.getValue(o.row,o.col,"@"===(null==t?void 0:t.mask)),o=null!=l?l:o;if(f&&a){var a=null==t?void 0:t.id;"date"!==a||u._editors.date||(u._editors.date=new A.DateEditor(u.endEdit.bind(u),u.config.dateFormat,u.events)),"time"!==a||u._editors.time||(u._editors.time=new Z.TimeEditor(u.endEdit.bind(u),u.config.timeFormat,u.events)),"select"===(null==c?void 0:c.type)&&(u._editors.select||(u._editors.select=new X.SelectEditor(u.endEdit.bind(u),u.events)),c=c.options,u._editors.select.setValue("string"==typeof c?u.getValue(c.replace(/=|\$/g,"")):c));l={oninput:[h,i],_hooks:{didInsert:d.bind(u),didRemove:function(){u._range.editor=null,p=!1}.bind(u)},class:n,_key:"selection_input","data-dhx-id":"cell_input",value:null==l?t?I.getFormattedValue(o,t):o:l};return u._editors[a]?u._editors[a].toHTML(v(v({},l),{format:t})):"select"===(null===(a=r.editor)||void 0===a?void 0:a.type)?u._editors.select.toHTML(l):_.el("input.dhx_cell_input",l)}t=t?I.getFormattedValue(o,t):o,o=u._checkValidation(i);return _.el(".dhx_spreadsheet_cell",{class:n},[s&&_.el(".dhx_lock_icon.dxi.dxi-key"),t,"select"===(null===(r=r.editor)||void 0===r?void 0:r.type)?[_.el(".dxi.dxi-menu-down.dhx_spreadsheet_cell_drop-down",{onclick:function(){return u.startEdit(i)}}),_.el(".dhx_spreadsheet_cell-placeholder")]:null,!o&&_.el(".dhx_spreadsheet_cell-not_valid")])},r=1;r<=i;r++){var g=k.getLetterFromNumber(r);l.push({id:""+r,width:120,$letter:g,type:"string",header:[{text:E.getHeaderCell(g,r),align:"center"}],htmlEnable:!0,template:c})}this._grid.setColumns(l),this._grid.data.parse(o),this.parse(e),this._sizes.rowsCount=this.config.rowsCount,this._sizes.colsCount=this.config.colsCount},Q.prototype._checkForMissedCells=function(e){e.includes("!")&&(e=e.split("!")[1]);e=k.isRangeId(e)?k.getRangeIndexes(e).end:k.getCellIndex(e);(e.row>this.config.rowsCount||e.col>this.config.colsCount)&&(this.config.rowsCount=Math.max(this.config.rowsCount,e.row+1),this.config.colsCount=Math.max(this.config.colsCount,e.col),this._generateGridStruct())},Q.prototype._generateNewSheetName=function(){var e=this._sheets.findAll(function(e){return e.value&&e.value.startsWith("sheet")});return e.length?(e=e.map(function(e){return+e.value.split("sheet")[1]}).filter(function(e){return!!e}),"sheet"+(Math.max.apply(Math,e)+1)):"sheet1"},Q.prototype._updateGridSizes=function(){for(var n=this,e=this._activePage.getSize(),t=e[0],i=e[1],o=this._grid.config.columns,r=this._grid.data.getLength(),e=this._activePage.getMeta(),s=e.cols,a=e.rows,l=this._grid.config.rowHeight;a.length<t||a.length<this.config.rowsCount;)a.push({height:l});if(a.length>r)for(var c=r;c<a.length;c++){for(var u={id:""+(c+1),$index:c+1},d=1;d<=i;d++)u[d]="";this._grid.data.add(u)}for(;s.length<i||s.length<this.config.colsCount;)s.push({width:120});if(s.length>o.length-1){for(var h=o[o.length-1],c=o.length-1;c<s.length;c++){var f=k.getLetterFromNumber(o.length);o.push({id:""+o.length,width:120,$letter:f,type:"string",header:[{text:E.getHeaderCell(f,o.length),align:"center"}],htmlEnable:!0,template:h.template})}this._grid.setColumns(o)}if(s.length<o.length-1)for(;s.length!==o.length-1;)o.pop();if(a.length<r)for(;a.length!==this._grid.data.getLength();)this._grid.data.remove(this._grid.data.getLength());e=o[0],r=o.slice(1);r.forEach(function(e,t){e.width=(s[t]||e).width}),this._grid.setColumns(p([e],r)),this._grid.data.forEach(function(e,t){t=a[t].height;e.height!==t&&n._grid.data.update(e.id,{height:t})})},Q.prototype._updateGridState=function(){var n=this,e=this._activePage.getMeta(),t=e.scroll,i=void 0===t?{x:0,y:0}:t,o=e.cols,r=e.rows,s=this._grid.config.columns,t=s[0],e=s.slice(1),s=i.x,i=i.y;this._grid.scroll(s,i),e.forEach(function(e,t){e.width=(o[t]||e).width}),this._grid.setColumns(p([t],e)),this._grid.data.forEach(function(e,t){t=r[t].height;e.height!==t&&n._grid.data.update(e.id,{height:t})})},Q.prototype._updateToolbar=function(e){e===this.selection.getFocusedCell()&&(e=k.getCellInfo(e,this._activePage),P.updateToolbar(this.toolbar,this.menu,e))},Q.prototype._setEventsHandlers=function(){var i=this;this.events.on(F.SpreadsheetEvents.editLineInput,function(e){U.focusManager.setFocusId(i._uid);var t=i.selection.getFocusedCell();i.events.fire(F.SpreadsheetEvents.cellInput,[t,e])}),this.events.on(F.SpreadsheetEvents.editLineFocus,function(){var e=i.selection.getFocusedCell();i.startEdit(e),i._range.inline=0,requestAnimationFrame(function(){i._editLine.focus()})}),this.events.on(F.SpreadsheetEvents.cellInput,function(e,t){var n;i.isLocked(e)||(e=(n=k.getCellIds(e)).row,n=n.col,i._activePage.setCell(e,n,{nextValue:t}),i._grid.paint())}),this._grid.events.on(c.GridEvents.cellMouseDown,function(){i.contextMenu._close(),i.sheetContextMenu._close()}),this.events.on(F.SpreadsheetEvents.afterAction,function(e){var t;e===F.Actions.resizeRow&&(t=i._grid.data.map(function(e){return{height:e.$height||i._grid.config.rowHeight,changedByUser:e.changedByUser}}),i._activePage.setMeta({rows:t})),e===F.Actions.resizeCol&&(e=i._grid.config.columns.slice(1).map(function(e){return{width:e.width}}),i._activePage.setMeta({cols:e}))}),this.events.on(F.SpreadsheetEvents.beforeSelectionSet,function(e){var t=i._range;if(t.mode)return!0;e=i._editLine.isCellExpected(e,!1,t.inline&&t.editor||null);return 0<e?(t.cursor=e,t.cell=i.selection.getFocusedCell(),t.mode=1,!0):!i.config.readonly&&void(i._editMode||i.endEdit())}),this.events.on(F.SpreadsheetEvents.afterSelectionSet,function(e){var t,n=i._range;!n.mode&&i._editMode&&i._editLine.setCellMath(),1===n.mode&&(n.mode=2,i._editMode||i.selection.setSelectedCell(n.cell),n.mode=0,n.cursor=i._editLine.isCellExpected(e,!0,n.inline?n.editor:null,n.cell),n.cell=""),i._grid.paint(),i._checkValidation(e)||k.isRangeId(e)||(n=(t=k.getCellIds(e)).row,e=t.col,e=null===(t=i.getRootNode())||void 0===t?void 0:t.querySelector('[aria-rowindex = "'+(n+1)+'"].dhx_grid-row [aria-colindex = "'+(e+2)+'"]'),new J.tooltip("Invalid value",{node:e,position:J.Position.right,force:!0,margin:2,css:"dhx_spreadsheet-invalid-tooltip"}))}),this.events.on(F.SpreadsheetEvents.afterFocusSet,function(e){var t,n;i._range.mode||i._editMode||(t=(n=k.getCellIds(e)).row,n=n.col,n=i._activePage.getValue(t,n,!0),I.isNumeric(n)||n||(n=""),e=k.getCellInfo(e,i._activePage),P.updateToolbar(i.toolbar,i.menu,e),i._editLine.setValue(I.getFormattedValue(n,e.format)),e&&e.locked&&i._editLine.lock(),i._grid.paint())}),this.events.on(F.SpreadsheetEvents.afterStyleChange,function(e){i._updateToolbar(e)}),this.events.on(F.SpreadsheetEvents.afterFormatChange,function(e,t){i._updateToolbar(e)}),this.events.on(F.SpreadsheetEvents.afterEditStart,function(){i._grid.paint()}),this.events.on(F.SpreadsheetEvents.afterEditEnd,function(e){i._grid.paint();var e=k.getCellInfo(e,i._activePage).format;null!==(e=i._editors[null==e?void 0:e.id])&&void 0!==e&&e.hidePopup()}),this._tabbar.events.on(T.NavigationBarEvents.click,function(e){"add-sheet"===e?i.addSheet():i._changeSheet(e)}),this.sheetContextMenu.events.on(T.NavigationBarEvents.click,function(e){var n;"delete"===e?i.removeSheet(i._focusedSheet):(n=i._tabbar.data.getItem(i._focusedSheet),i._tabbar.data.update(n.id,{type:"input"}),_.awaitRedraw().then(function(){var t=i._tabbar.getRootNode().querySelector("input");t.focus(),t.onkeyup=function(e){"Enter"===e.key&&t.blur(),"Escape"===e.key&&i._sheets.update(n.id,{type:"navItem",value:n.prevValue})}}))}),this.sheetContextMenu.events.on(T.NavigationBarEvents.afterHide,function(){i._focusedSheet=null}),this._tabbar.events.on(T.NavigationBarEvents.inputFocus,function(e){var t=i._sheets.getItem(e);i._sheets.update(e,{prevValue:t.value})}),this._tabbar.events.on(T.NavigationBarEvents.inputBlur,function(e){var t=i._sheets.getItem(e),n=t.value;if(i._sheets.find(function(e){return e.value===n&&e.id!==t.id}))return i._getErrorWindow(),i._errorAlert.attachHTML("<p>A sheet with the name <b>"+n+"</b> already exists. Please enter another name. </p>"),i._errorAlert.show(),i._errorAlert.footer.events.on(T.NavigationBarEvents.click,function(){return i._errorAlert.hide()}),i._errorAlert.events.on(B.WindowEvents.afterHide,function(){i._sheets.update(t.id,{value:t.prevValue}),i._tabbar.getRootNode().querySelector("input").focus()}),!1;i._sheets.update(e,{type:"navItem",value:t.prevValue}),i._renameSheet(e,n)}),this.toolbar.events.on(T.NavigationBarEvents.click,function(e,t){"format"!==e&&"valign"!==e&&"halign"!==e&&"multiline"!==e&&(i.endEdit(),i._handleAction(e,t))}),this.contextMenu.events.on(T.NavigationBarEvents.click,function(e,t){i.endEdit(),i._handleAction(e,t)}),this.menu.events.on(T.NavigationBarEvents.click,function(e,t){"format"!==e&&"valign"!==e&&"halign"!==e&&(i.endEdit(),i._handleAction(e,t))}),this._colorpicker.events.on(s.ColorpickerEvents.change,function(e){i._colorpickerPopup.hide();var t=i.selection.getSelectedCell();i._silencedColorChange||i.setStyle(t,((t={})[i._colorpickerTarget]=e,t)),i._silencedColorChange=!1,requestAnimationFrame(function(){U.focusManager.setFocusId(i._uid),i._activeInput&&(i._activeInput.focus(),i._activeInput=null)})}),this.events.on(F.SpreadsheetEvents.editLineBlur,function(e,t){i._restoreFocus(t)}),this.events.on(F.SpreadsheetEvents.groupFill,function(e,t){i._fillCells(e,t)})},Q.prototype._getErrorWindow=function(){return this._errorAlert||(this._errorAlert=new W.Window({footer:!0,modal:!0,closable:!0,width:350,height:240,title:"There was a problem"}),this._errorAlert.footer.data.parse([{type:"button",view:"flat",size:"medium",color:"primary",value:"Ok",id:"ok"}])),this._errorAlert},Q.prototype._handleAction=function(t,e){var n,i=this.selection.getSelectedCell(),o=this.selection.getFocusedCell(),r="";-1!==H.findIndex(this.config.formats,function(e){return e.id===t})&&(r=t,t="format");var s,a="",l="",c="";switch((""+t).includes("align")&&(s=(""+t).split("-"),t=s[0],a=s[1]),(""+t).endsWith("sort")&&(s=(""+t).split("-"),t=s[1],l=s[0]),(""+t).includes("multiline")&&(s=(""+t).split("-"),t=s[0],c=s[1]),t){case"undo":this._actionsManager.undo();break;case"redo":this._actionsManager.redo();break;case"color":case"background":this._colorpickerTarget=t;var u=k.getCellInfo(i,this._activePage),u=(dhx.css.get(u.css)||{})[t]||{background:"#FFFFFF",color:"#4C4C4C"}[t];this._silencedColorChange=!0,this._colorpicker.setValue("white"===u?"#FFFFFF":u);u=m.locateNode(e,"data-dhx-id");this._colorpickerPopup.show(u);break;case"halign":this.setStyle(i,{"text-align":a});break;case"valign":this.setStyle(i,{"vertical-align":a});break;case"multiline":this.setStyle(i,{multiline:c});break;case"font-weight-bold":case"font-style-italic":case"text-decoration-underline":if(!i)return;for(var u=t.split("-"),d=u.pop(),h=u.join("-"),f=0,p=i.split(",");f<p.length;f++){var g=p[f],d=P.getToggledValue(this._activePage,g,h,d);this.setStyle(g,((n={})[h]=d,n))}break;case"clear-value":this.setValue(i,"");break;case"clear-styles":this.setStyle(i,{});break;case"clear-all":if(!i)return;this._callAction([{cell:i,action:F.Actions.setCellStyle,groupAction:k.isRangeId(i)?F.Actions.groupAction:null,val:"",dataStore:this._dataStore,page:this._activePage},{cell:i,action:F.Actions.setCellValue,groupAction:k.isRangeId(i)?F.Actions.groupAction:null,val:"",page:this._activePage,dataStore:this._dataStore},{cell:i,action:F.Actions.setValidation,groupAction:k.isRangeId(i)?F.Actions.groupAction:null,val:null,page:this._activePage,dataStore:this._dataStore}]);break;case"lock":if(!i)return;for(var v=0,_=i.split(",");v<_.length;v++){g=_[v];this.isLocked(g)?this.unlock(g):this.lock(g)}break;case"remove-row":this.deleteRow(o);break;case"add-row":this.addRow(o);break;case"remove-col":this.deleteColumn(o);break;case"add-col":this.addColumn(o);break;case"help":window.open("https://docs.dhtmlx.com/spreadsheet/user_guide.html");break;case"format":this.setFormat(i,r),this.paint();break;case"export-xlsx":this.export.xlsx();break;case"import-xlsx":this.load("","xlsx");break;case"validation":this._validationForm||(this._validationForm=new K.ValidationForm(this.events,this.setValidation.bind(this))),this._validationForm.show(i,k.getCellInfo(i,this._activePage));case"sort":this.sortCells(i,"asc"===l?1:-1)}},Q.prototype._fillCells=function(e,t){var n,u=this,i=[e],d=[t];k.isRangeId(e)&&(n=M.getCellsDiff(e.split(":")[1],t.split(":")[1]).isLargerByX?"row":"col",i=k.getRangeMatrix(e,n).map(function(e){return 1<e.length?e[0]+":"+e[e.length-1]:e[0]}),d=k.getRangeMatrix(t,n).map(function(e){return 1<e.length?e[0]+":"+e[e.length-1]:e[0]}));i=i.reduce(function(n,e,t){var i,o,r;k.isRangeId(e)?(r=[],u.eachCell(function(e){var t=k.getCellIds(e),n=t.row,e=t.col,t=v({},u._activePage.getCell(n,e)),e=u._activePage.getValue(n,e,!0);t.value=e||"",r.push(t)},e)):(o=k.getCellIds(e),i=v({},u._activePage.getCell(o.row,o.col)),s=u._activePage.getValue(o.row,o.col,!0),i.value="string"==typeof s?q.getExcelDateFromString(s,i.format):s||"",o=null===(o=i.format)||void 0===o?void 0:o.id,r="date"===o||"time"===o?[i]:s);var s=d[t];if(Array.isArray(r)){if(e===s)return n;var a=M.getAutoFilledCells(r,e,s,u._math),s=a.cells;r=a.value}var l,t=u.getStyle(e),a=u.getFormat(e),c=[];return u.eachCell(function(e){var e=k.getCellInfo(e,u._activePage);c.push(null===(e=null==e?void 0:e.editor)||void 0===e?void 0:e.options)},e),n.push({cell:s,action:F.Actions.setCellFormat,groupAction:k.isRangeId(s)?F.Actions.groupAction:null,val:a,page:u._activePage},{cell:s,action:F.Actions.setCellStyle,groupAction:k.isRangeId(s)?F.Actions.groupAction:null,val:t,page:u._activePage,replace:!0},{cell:s,action:F.Actions.setValidation,groupAction:F.Actions.groupAction,val:c,page:u._activePage}),"string"==typeof r&&r.startsWith("=")?(l=k.getCellIds(e),u.eachCell(function(e){var t=k.getCellIds(e),t=u._math.transposeMath(r,t.row-l.row,t.col-l.col);n.push({cell:e,action:F.Actions.setCellValue,groupAction:null,val:t,page:u._activePage})},s)):n.push({cell:s,action:F.Actions.setCellValue,groupAction:k.isRangeId(s)?F.Actions.groupAction:null,val:r,page:u._activePage}),n},[]);this._callAction(i)},Q.prototype._restoreFocus=function(e){var t,n=this,i=this._editLine.getRootView().node,o=i&&i.el,r=this._range.cell||this.selection.getFocusedCell(),i=k.getCellIds(r).col<=this.config.leftSplit;if(!r||k.getCellInfo(r,this._activePage).edited&&!i){i=U.focusManager.getFocusId();if(i!==this._uid&&i!==this._grid._uid&&null!==(t=this._editLine._suggest)&&void 0!==t&&t.isVisible()&&i!==(null===(t=this._editLine._suggest._list)||void 0===t?void 0:t._uid)&&i!==this._tabbar._uid)return this._colorpickerTarget?void(this._activeInput=e.target):void this.endEdit();var s,i=e.target,e=e.relatedTarget;o&&o.contains(e)||o&&o.contains(i)&&e&&"cell_input"===e.getAttribute("data-dhx-id")||((s=i).focus(),setTimeout(function(){var e=n._range.cursor||s.value.length;s.selectionStart>e&&s.setSelectionRange(e,e)},100))}},Q.prototype._initHotkeys=function(){var n=this;if(!this.config.readonly){this.keyManager=new O.KeyManager(function(e,t){return t===n._uid||t===n._grid._uid||t===n.toolbar._uid});var e,t=G.getKeysHandlers(this,this._grid,this._buffer,this._editLine);for(e in t)this.keyManager.addHotKey(e,t[e]);for(e in this.config.hotkeys)this.keyManager.addHotKey(e,this.config.hotkeys[e])}},Q.prototype._render=function(){return _.el(".dhx_widget.dhx-spreadsheet",{dhx_widget_id:this._uid,_key:this._uid},[_.inject(this._layout.getRootView())])},Q);function Q(e,t){var o=r.call(this,e,t)||this;o.container=null===e?e:m.toNode(e),o._sizes={rowsCount:1e3,colsCount:200},o._editors={},o.config=k.extendConfig({rowsCount:{validate:function(e){return 0<=e},default:1e3},colsCount:{validate:function(e){return 0<=e},default:25},menu:{validate:function(e){return"boolean"==typeof e},default:!1},editLine:{validate:function(e){return"boolean"==typeof e},default:!0},readonly:{validate:function(e){return"boolean"==typeof e},default:!1},autoFormat:{validate:function(e){return"boolean"==typeof e},default:!0},importModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/excel2json/1.1/worker.js"},exportModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/json2excel/1.0/worker.js"},multiSheets:{validate:function(e){return"boolean"==typeof e},default:!0},dateFormat:{validate:function(e){return"string"==typeof e},default:"%d/%m/%Y"},timeFormat:{validate:function(e){return"number"==typeof e},default:12},formats:{validate:function(e){return e instanceof Array},default:[]}},o.config),o._range={cell:"",mode:0,cursor:0,editor:null,inline:0},o.events=new a.EventSystem,I.initFormat(o,o.config.dateFormat,o.config.timeFormat),o._initLayout(),o._colorpicker=new s.Colorpicker(null),o._colorpickerPopup=new R.Popup,o._colorpickerPopup.attach(o._colorpicker),o._setEventsHandlers(),o._actionsManager=new f.ActionsManager({spreadsheet:o,editLine:o._editLine,grid:o._grid,dataStore:o._dataStore,events:o.events}),o._buffer=new C.BufferManager(o,o._grid,o._callAction,o._activePage,o._dataStore),o.selection=new V.Selection(o,o._grid,o._buffer,o._activePage);var n=o._grid.getRootView();n.hooks=n.hooks||{},n.hooks.didMount=function(e){o._updateGridSizes();var t=o.selection.getFocusedCell(),t=o.getValue(t);o._editLine.setValue(t),o.config.readonly||e.node.el.addEventListener("contextmenu",function(e){o.contextMenu.data.update("lock",{value:o.isLocked(o.selection.getSelectedCell())?D.default.unlockCell:D.default.lockCell}),o.contextMenu.showAt(e),e.preventDefault()}),o.container=o._layout.getRootView().node.el,n.hooks.didRedraw=function(e){o.events.fire(F.SpreadsheetEvents.gridRedraw,[e])}},o._initHotkeys();t=o._tabbar.getRootView();t.hooks=t.hooks||{};function i(e){e.node.el.addEventListener("contextmenu",function(e){o.endEdit();var t,n,i=m.locate(e);i&&"add-sheet"!==i&&!o.config.readonly&&(t=o._sheets.getLength(),n=o.sheetContextMenu.data,o.config.multiSheets&&2===t?n.update("delete",{disabled:!0}):o.config.multiSheets&&2<t&&n.getItem("delete").disabled&&n.update("delete",{disabled:!1}),o.sheetContextMenu.showAt(e.target,"right"),o._focusedSheet=i,e.preventDefault())})}t.hooks.didMount=function(e){e.node&&e.node.el&&e.node.el.addEventListener("dblclick",function(e){var t=m.locate(e);t&&"add-sheet"!==t&&!o.config.readonly&&(e.preventDefault(),o._focusedSheet=t,o.sheetContextMenu.events.fire(T.NavigationBarEvents.click,["rename",e]),_.awaitRedraw().then(function(){U.focusManager.setFocusId(null)}))}),i(e)},t.hooks.didRedraw=i,o._generateGridStruct(),o.export=new L.Exporter(o,o._grid);t=_.create({render:function(){return o._render()}});return o.mount(e,t),U.focusManager.setFocusId(o._uid),o}t.Spreadsheet=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(3),c=n(2),u=n(6),d=n(1),h=n(46),f=n(61),p=n(47),g=n(62),v=n(58),_=n(13),m=n(124),y=n(125),b=n(19),w=n(16),x=n(1),o=(s=u.View,o(E,s),E.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._selected=this._handlers=this._pickerState=this._inputTimeout=null,this.unmount()},E.prototype.clear=function(){this._selected="",this.events.fire(g.ColorpickerEvents.change,[this._selected]),this.paint()},E.prototype.setValue=function(e){!this._focusColor(e)&&w.focusManager.getFocusId()!==this._uid||(this.paint(),this.events.fire(g.ColorpickerEvents.change,[this._selected]),this.events.fire(g.ColorpickerEvents.colorChange,[this._selected]))},E.prototype.setFocus=function(e){this._focusColor(e)&&this.paint()},E.prototype.getValue=function(){return this._selected||""},E.prototype.getCustomColors=function(){return this.config.customColors},E.prototype.setCustomColors=function(e){this.config.customColors=e.map(function(e){return e.toUpperCase()}),this.paint()},E.prototype.setCurrentMode=function(e){"palette"!==e&&"picker"!==e||(this.config.mode=e,this.events.fire(g.ColorpickerEvents.modeChange,[e]),this.events.fire(g.ColorpickerEvents.viewChange,[e]),this.paint())},E.prototype.getCurrentMode=function(){return this.config.mode},E.prototype.getView=function(){return this.getCurrentMode()},E.prototype.setView=function(e){this.setCurrentMode(e)},E.prototype.focusValue=function(e){this.setFocus(e)},E.prototype._setHandlers=function(){var n=this;this._handlers={click:{".dhx_palette__cell":this._onColorClick},mousedown:function(e){n._pickerMove(e)},touchstart:function(e){n._pickerMove(e)},buttonsClick:function(e){n.setCurrentMode("palette"),"cancel"!==e?"apply"!==e||n.config.customColors.includes(n._pickerState.background)||(n.setValue(n._pickerState.background),n.events.fire(g.ColorpickerEvents.apply,[]),n.events.fire(g.ColorpickerEvents.selectClick,[])):n.events.fire(g.ColorpickerEvents.cancelClick,[])},customColorClick:function(){n.setView("picker")},oninput:function(t){n._inputTimeout&&clearTimeout(n._inputTimeout),n._inputTimeout=setTimeout(function(){var e=t.target.value;-1===e.indexOf("#")&&(e="#"+e),n._pickerState.customHex=e,h.isHex(e)&&(n._pickerState.hsv=h.HexToHSV(e),n.paint())},100)},contextmenu:{".dhx_palette__cell":function(e,t){e.preventDefault();t=n.config.customColors.indexOf(t.data.color);-1!==t&&n._removeCustomColor(t),n.paint()}},mouseover:{".dhx_palette__cell":function(e){e.target&&v.tooltip(p.default.rightClickToDelete,{node:e.target,position:_.Position.bottom})},".dhx_colorpicker-custom-colors__picker":function(e){e.target&&v.tooltip(p.default.addNewColor,{node:e.target,position:_.Position.bottom})}}},this.events.on(g.ColorpickerEvents.change,function(){n.paint()}),this.events.on(g.ColorpickerEvents.colorChange,function(){n.paint()})},E.prototype._pickerMove=function(e){var t=c.locate(e);this._pickerState.customHex="","picker_palette"===t?this._setPaletteGrip(e):this._setRangeGrip(e);var n="picker_palette"===t?this._setPaletteGrip:this._setRangeGrip,i=e.targetTouches?"touchmove":"mousemove",e=e.targetTouches?"touchend":"mouseup";document.addEventListener(i,n),document.addEventListener(e,function(){document.removeEventListener(i,n)}),this.paint()},E.prototype._focusColor=function(e){if(void 0===e||e.length<4)return!1;var n=e.toUpperCase();if(!h.isHex(n))return!1;var t=this.config.palette.reduce(function(t,e){return t||(e.forEach(function(e){e.toUpperCase()===n&&(t=!0)}),t)},!1),e=f.grayShades.includes(n);return t||e||((e=this.getCustomColors()).includes(n.toUpperCase())||e.push(n.toUpperCase())),this._selected=n||null,this._pickerState.hsv=h.HexToHSV(n),!0},E.prototype._removeCustomColor=function(e){this.config.customColors.splice(e,1)},E.prototype._getCells=function(e,i){var o=this;return void 0===i&&(i=""),e.reduce(function(e,t){var n=(o._selected||"").toUpperCase()===t.toUpperCase()?"dhx_palette__cell--selected":"";return e.push(a.el(".dhx_palette__cell",{class:n+" "+i,_data:{color:t},style:"background:"+t,tabindex:0})),e},[])},E.prototype._getGrayShades=function(){return a.el(".dhx_palette__row",this._getCells(f.grayShades))},E.prototype._getPalette=function(){var n=this;return this.config.palette.reduce(function(e,t){return e.push(a.el(".dhx_palette__col",n._getCells(t))),e},[])},E.prototype._getContent=function(){var e=!this.config.pickerOnly&&"palette"===this.config.mode?r([this.config.grayShades&&this._getGrayShades()],this._getPalette(),[!this.config.paletteOnly&&a.el(".dhx_colorpicker-custom-colors",{onmouseover:this._handlers.mouseover},[a.el(".dhx_colorpicker-custom-colors__header",[p.default.customColors]),a.el(".dhx_palette--custom.dhx_palette__row",r(this._getCells(this.config.customColors,"dhx_custom-color__cell"),[a.el(".dhx_colorpicker-custom-colors__picker",{class:"dxi dxi-plus",onclick:this._handlers.customColorClick,onmouseover:this._handlers.mouseover,tabindex:0})]))])]):[m.getPicker(this,this._pickerState,this._handlers)];return a.el(".dhx_widget.dhx_colorpicker",{class:this.config.css,style:{width:this.config.width},"data-dhx-widget-id":this._uid},[a.el(".dhx_palette",{onclick:this._handlers.click,oncontextmenu:this._handlers.contextmenu},e)])},E.prototype._initHotKey=function(){var e,t=this,n={enter:function(e){c.locateNodeByClassName(e,"dhx_palette__cell")&&(t._selected=x.rgbToHex(e.target.style.background),t.events.fire(g.ColorpickerEvents.change,[t._selected]),t.events.fire(g.ColorpickerEvents.colorChange,[t._selected])),c.locateNodeByClassName(e,"dhx_colorpicker-custom-colors__picker")&&t.setCurrentMode("picker")}};for(e in n)this._keyManager.addHotKey(e,n[e])},E);function E(e,t){var i=s.call(this,e,t)||this;i._setPaletteGrip=function(e){var t=i.getRootView().refs.picker_palette.el.getBoundingClientRect(),n=(e.targetTouches?e.targetTouches[0]:e).clientX,e=(e.targetTouches?e.targetTouches[0]:e).clientY-t.top,n=n-t.left,e=y.calculatePaletteGrip(t,e,n),n=e.s,e=e.v;i._pickerState.hsv.s=n,i._pickerState.hsv.v=e,i.paint()},i._setRangeGrip=function(e){var t=i.getRootView().refs.hue_range.el.getBoundingClientRect(),e=(e.targetTouches?e.targetTouches[0]:e).clientX-t.left,t=y.calculateRangeGrip(t,e),e=t.h,t=t.rangeLeft;i._pickerState.hsv.h=e,i._pickerState.rangeLeft=t,i.paint()},i._onColorClick=function(e,t){i._selected=t.data.color.toUpperCase(),i.events.fire(g.ColorpickerEvents.change,[i._selected]),i.events.fire(g.ColorpickerEvents.colorChange,[i._selected])},i._container=e,i.config=d.extend({css:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:f.palette,width:"238px",mode:"palette"},i.config),i.config.palette||(i.config.palette=f.palette),i.config.customColors&&(i.config.customColors=i.config.customColors.map(function(e){return e.toUpperCase()})),i._pickerState={hsv:{h:0,s:1,v:1},customHex:""},i.events=new l.EventSystem(i),i._setHandlers(),i._keyManager=new b.KeyManager(function(e,t){return t===i._uid}),i._initHotKey();e=a.create({render:function(){return i._getContent()}});return i.mount(i._container,e),i}t.Colorpicker=o},function(e,t,n){
/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/
e.exports=function(){"use strict";var k=1,l=2,M=3,P=4,O=5,e=typeof window!=="undefined",t,r=(e?window:{}).requestAnimationFrame,c={};function n(){}var p=Array.isArray;function u(e){return e!=null}function s(e){return e!=null&&e.constructor===Object}function o(e,t,n,i){e.splice.apply(e,[n,i].concat(t))}function a(e){var t=typeof e;return t==="string"||t==="number"}function d(e){return typeof e==="function"}function h(e){return typeof e==="object"&&d(e.then)}function f(e){var t=arguments;for(var n=1;n<t.length;n++)for(var i in t[n])e[i]=t[n][i];return e}function g(e,t,n){var i;while(i=t.shift())if(t.length===0)e[i]=n;else e[i]=e=e[i]||{}}function v(e,t){var n=[];for(var i=t;i<e.length;i++)n.push(e[i]);return n}function _(e,t){for(var n in e)if(e[n]!==t[n])return false;return true}function m(e,t){var n=e.length;if(t.length!==n)return false;for(var i=0;i<n;i++)if(e[i]!==t[i])return false;return true}function y(e){if(!r)return e;var t,n,i;function o(){t=0;e.apply(n,i)}return function(){n=this;i=arguments;if(!t)t=r(o)}}function b(e,t,n){return function(){return e.apply(n,t)}}function w(e){var t=e.slice();var n=[];n.push(0);var i;var o;for(var r=0,s=e.length;r<s;++r){var a=n[n.length-1];if(e[a]<e[r]){t[r]=a;n.push(r);continue}i=0;o=n.length-1;while(i<o){var l=(i+o)/2|0;if(e[n[l]]<e[r])i=l+1;else o=l}if(e[r]<e[n[i]]){if(i>0)t[r]=n[i-1];n[i]=r}}i=n.length;o=n[i-1];while(i-- >0){n[i]=o;o=t[o]}return n}function x(e,t){var n=0;var i=t.length-1;var o;var r=i<=2147483647?true:false;if(r)while(n<=i){o=n+i>>1;if(t[o]===e)return o;else if(t[o]<e)n=o+1;else i=o-1}else while(n<=i){o=Math.floor((n+i)/2);if(t[o]===e)return o;else if(t[o]<e)n=o+1;else i=o-1}return n==t.length?null:n}function E(e){return e[0]==="o"&&e[1]==="n"}function C(e){return e[0]==="_"}function S(e){return e==="style"}function I(e){e&&e.el&&e.el.offsetHeight}function D(e){return e.node!=null&&e.node.el!=null}function V(e,t){switch(t){case"value":case"checked":case"selected":return true}return false}function A(e){e=e||c;while(e.vm==null&&e.parent)e=e.parent;return e.vm}function F(){}var i=F.prototype={constructor:F,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:false,_lis:false,idx:null,parent:null};function R(e){var t=new F;t.type=l;t.body=e;return t}var T={},H=/\[(\w+)(?:=(\w+))?\]/g;function L(e){{var t=T[e];if(t==null){var n,i,o,r;T[e]=t={tag:(n=e.match(/^[-\w]+/))?n[0]:"div",id:(i=e.match(/#([-\w]+)/))?i[1]:null,class:(o=e.match(/\.([-\w.]+)/))?o[1].replace(/\./g," "):null,attrs:null};while(r=H.exec(e)){if(t.attrs==null)t.attrs={};t.attrs[r[1]]=r[2]||""}}return t}}var j=1,N=2,$=4,z=8;function B(e,t,n,i){var o=new F;o.type=k;if(u(i))o.flags=i;o.attrs=t;var r=L(e);o.tag=r.tag;if(r.id||r.class||r.attrs){var s=o.attrs||{};if(r.id&&!u(s.id))s.id=r.id;if(r.class){o._class=r.class;s.class=r.class+(u(s.class)?" "+s.class:"")}if(r.attrs)for(var a in r.attrs)if(!u(s[a]))s[a]=r.attrs[a];o.attrs=s}var l=o.attrs;if(u(l)){if(u(l._key))o.key=l._key;if(u(l._ref))o.ref=l._ref;if(u(l._hooks))o.hooks=l._hooks;if(u(l._data))o.data=l._data;if(u(l._flags))o.flags=l._flags;if(!u(o.key))if(u(o.ref))o.key=o.ref;else if(u(l.id))o.key=l.id;else if(u(l.name))o.key=l.name+(l.type==="radio"||l.type==="checkbox"?l.value:"")}if(n!=null)o.body=n;return o}function W(e,t,n){var i=["refs"].concat(t.split("."));g(e,i,n)}function G(e){while(e=e.parent)e.flags|=j}function U(e,t,n,i){if(e.type===O||e.type===P)return;e.parent=t;e.idx=n;e.vm=i;if(e.ref!=null)W(A(e),e.ref,e);var o=e.hooks,r=i&&i.hooks;if(o&&(o.willRemove||o.didRemove)||r&&(r.willUnmount||r.didUnmount))G(e);if(p(e.body))q(e);else;}function q(e){var t=e.body;for(var n=0;n<t.length;n++){var i=t[n];if(i===false||i==null)t.splice(n--,1);else if(p(i))o(t,i,n--,1);else{if(i.type==null)t[n]=i=R(""+i);if(i.type===l)if(i.body==null||i.body==="")t.splice(n--,1);else if(n>0&&t[n-1].type===l){t[n-1].body+=i.body;t.splice(n--,1)}else U(i,e,n,null);else U(i,e,n,null)}}}var Y={animationIterationCount:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridColumn:true,order:true,lineClamp:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function X(e,t){return!isNaN(t)&&!Y[e]?t+"px":t}function K(e,t){var n=(e.attrs||c).style;var i=t?(t.attrs||c).style:null;if(n==null||a(n))e.el.style.cssText=n;else{for(var o in n){var r=n[o];if(i==null||r!=null&&r!==i[o])e.el.style[o]=X(o,r)}if(i)for(var s in i)if(n[s]==null)e.el.style[s]=""}}var J=[];function Z(e,t,n,i,o){if(e!=null){var r=n.hooks[t];if(r)if(t[0]==="d"&&t[1]==="i"&&t[2]==="d")o?I(n.parent)&&r(n,i):J.push([r,n,i]);else return r(n,i)}}function Q(e){if(J.length){I(e.node);var t;while(t=J.shift())t[0](t[1],t[2])}}var ee=e?document:null;function te(e){while(e._node==null)e=e.parentNode;return e._node}function ne(e,t){if(t!=null)return ee.createElementNS(t,e);return ee.createElement(e)}function ie(e){return ee.createTextNode(e)}function oe(e){return ee.createComment(e)}function re(e){return e.nextSibling}function se(e){return e.previousSibling}function ae(e){var t=e.vm;var n=t!=null&&Z(t.hooks,"willUnmount",t,t.data);var i=Z(e.hooks,"willRemove",e);if((e.flags&j)===j&&p(e.body))for(var o=0;o<e.body.length;o++)ae(e.body[o]);return n||i}function le(e,t,n){var i=t._node,o=i.vm;if(p(i.body))if((i.flags&j)===j)for(var r=0;r<i.body.length;r++)le(t,i.body[r].el);else ue(i);delete t._node;e.removeChild(t);Z(i.hooks,"didRemove",i,null,n);if(o!=null){Z(o.hooks,"didUnmount",o,o.data,n);o.node=null}}function ce(e,t){var n=t._node;if(n._dead)return;var i=ae(n);if(i!=null&&h(i)){n._dead=true;i.then(b(le,[e,t,true]))}else le(e,t)}function ue(e){var t=e.body;for(var n=0;n<t.length;n++){var i=t[n];delete i.el._node;if(i.vm!=null)i.vm.node=null;if(p(i.body))ue(i)}}function de(e){var t=e.el;if((e.flags&j)===0){p(e.body)&&ue(e);t.textContent=null}else{var n=t.firstChild;do{var i=re(n);ce(t,n)}while(n=i)}}function he(e,t,n){var i=t._node,o=t.parentNode!=null;var r=t===n||!o?i.vm:null;if(r!=null)Z(r.hooks,"willMount",r,r.data);Z(i.hooks,o?"willReinsert":"willInsert",i);e.insertBefore(t,n);Z(i.hooks,o?"didReinsert":"didInsert",i);if(r!=null)Z(r.hooks,"didMount",r,r.data)}function fe(e,t,n){he(e,t,n?re(n):null)}var pe={};function ge(e){f(pe,e)}function ve(e){var t=this,n=t,i=v(arguments,1).concat(n,n.data);do{var o=t.onemit,o=o?o[e]:null;if(o){o.apply(t,i);break}}while(t=t.parent());if(pe[e])pe[e].apply(t,i)}var _e=n;function me(e){_e=e.onevent||_e;if(e.onemit)ge(e.onemit)}function ye(e,t,n){e[t]=n}function be(e,t,n,i,o){var r=e.apply(o,t.concat([n,i,o,o.data]));o.onevent(n,i,o,o.data,t);_e.call(null,n,i,o,o.data,t);if(r===false){n.preventDefault();n.stopPropagation()}}function we(e){var t=te(e.target);var n=A(t);var i=e.currentTarget._node.attrs["on"+e.type],o,r;if(p(i)){o=i[0];r=i.slice(1);be(o,r,e,t,n)}else for(var s in i)if(e.target.matches(s)){var a=i[s];if(p(a)){o=a[0];r=a.slice(1)}else{o=a;r=[]}be(o,r,e,t,n)}}function xe(e,t,n,i){if(n===i)return;var o=e.el;if(n==null||d(n))ye(o,t,n);else if(i==null)ye(o,t,we)}function Ee(e,t,n){if(t[0]==="."){t=t.substr(1);n=true}if(n)e.el[t]="";else e.el.removeAttribute(t)}function Ce(e,t,n,i,o){var r=e.el;if(n==null)!o&&Ee(e,t,false);else if(e.ns!=null)r.setAttribute(t,n);else if(t==="class")r.className=n;else if(t==="id"||typeof n==="boolean"||i)r[t]=n;else if(t[0]===".")r[t.substr(1)]=n;else r.setAttribute(t,n)}function Se(e,t,n){var i=e.attrs||c;var o=t.attrs||c;if(i===o);else{for(var r in i){var s=i[r];var a=V(e.tag,r);var l=a?e.el[r]:o[r];if(s===l);else if(S(r))K(e,t);else if(C(r));else if(E(r))xe(e,r,s,l);else Ce(e,r,s,a,n)}for(var r in o)!(r in i)&&!C(r)&&Ee(e,r,V(e.tag,r)||E(r))}}function Ie(e,t,n,i){if(e.type===P){t=e.data;n=e.key;i=e.opts;e=e.view}return new Ue(e,t,n,i)}function ke(e){for(var t=0;t<e.body.length;t++){var n=e.body[t];var i=n.type;if(i<=M)he(e.el,Me(n));else if(i===P){var o=Ie(n.view,n.data,n.key,n.opts)._redraw(e,t,false);i=o.node.type;he(e.el,Me(o.node))}else if(i===O){var o=n.vm;o._redraw(e,t);i=o.node.type;he(e.el,o.node.el)}}}function Me(e,t){if(e.el==null)if(e.type===k){e.el=t||ne(e.tag,e.ns);if(e.attrs!=null)Se(e,c,true);if((e.flags&z)===z)e.body.body(e);if(p(e.body))ke(e);else if(e.body!=null&&e.body!=="")e.el.textContent=e.body}else if(e.type===l)e.el=t||ie(e.body);else if(e.type===M)e.el=t||oe(e.body);e.el._node=e;return e.el}function Pe(e,t){return t[e.idx+1]}function Oe(e,t){return t[e.idx-1]}function De(e){return e.parent}window.lisMove=Re;var Ve=1,Ae=2;function Fe(l,c,u,d,h,f,p,g){return function(e,t,n,i,o,r){var s,a;if(i[d]!=null){if((s=i[d]._node)==null){i[d]=l(i[d]);return}if(De(s)!==e){a=l(i[d]);s.vm!=null?s.vm.unmount(true):ce(t,i[d]);i[d]=a;return}}if(i[h]==o)return Ae;else if(i[h].el==null){u(t,Me(i[h]),i[d]);i[h]=c(i[h],n)}else if(i[h].el===i[d]){i[h]=c(i[h],n);i[d]=l(i[d])}else if(!r&&s===i[p]){a=i[d];i[d]=l(a);g(t,a,i[f]);i[f]=a}else{if(r&&i[d]!=null)return Re(l,c,u,d,h,t,n,s,i);return Ve}}}function Re(e,t,n,i,o,r,s,a,l){if(a._lis){n(r,l[o].el,l[i]);l[o]=t(l[o],s)}else{var c=x(a.idx,l.tombs);a._lis=true;var u=e(l[i]);n(r,l[i],c!=null?s[l.tombs[c]].el:c);if(c==null)l.tombs.push(a.idx);else l.tombs.splice(c,0,a.idx);l[i]=u}}var Te=Fe(re,Pe,he,"lftSib","lftNode","rgtSib","rgtNode",fe),He=Fe(se,Oe,fe,"rgtSib","rgtNode","lftSib","lftNode",he);function Le(e,t){var n=t.body,i=e.el,o=e.body,r={lftNode:o[0],rgtNode:o[o.length-1],lftSib:(n[0]||c).el,rgtSib:(n[n.length-1]||c).el};e:while(1){while(1){var s=Te(e,i,o,r,null,false);if(s===Ve)break;if(s===Ae)break e}while(1){var a=He(e,i,o,r,r.lftNode,false);if(a===Ve)break;if(a===Ae)break e}je(e,i,o,r);break}}function je(e,t,n,i){var o=Array.prototype.slice.call(t.childNodes);var r=[];for(var s=0;s<o.length;s++){var a=o[s]._node;if(a.parent===e)r.push(a.idx)}var l=w(r).map(function(e){return r[e]});for(var c=0;c<l.length;c++)n[l[c]]._lis=true;i.tombs=l;while(1){var u=Te(e,t,n,i,null,true);if(u===Ae)break}}function Ne(e){return e.el._node.parent!==e.parent}function $e(e,t,n){return t[n]}function ze(e,t,n){for(;n<t.length;n++){var i=t[n];if(i.vm!=null){if(e.type===P&&i.vm.view===e.view&&i.vm.key===e.key||e.type===O&&i.vm===e.vm)return i}else if(!Ne(i)&&e.tag===i.tag&&e.type===i.type&&e.key===i.key&&(e.flags&~j)===(i.flags&~j))return i}return null}function Be(e,t,n){return t[t._keys[e.key]]}function We(e,t){Z(t.hooks,"willRecycle",t,e);var n=e.el=t.el;var i=t.body;var o=e.body;n._node=e;if(e.type===l&&o!==i){n.nodeValue=o;return}if(e.attrs!=null||t.attrs!=null)Se(e,t,false);var r=p(i);var s=p(o);var a=(e.flags&z)===z;if(r){if(s||a)Ge(e,t);else if(o!==i)if(o!=null)n.textContent=o;else de(t)}else if(s){de(t);ke(e)}else if(o!==i)if(n.firstChild)n.firstChild.nodeValue=o;else n.textContent=o;Z(t.hooks,"didRecycle",t,e)}function Ge(e,t){var n=e.body,i=n.length,o=t.body,r=o.length,s=(e.flags&z)===z,a=(e.flags&N)===N,l=(e.flags&$)===$,c=!a&&e.type===k,u=true,d=l?Be:a||s?$e:ze;if(l){var h={};for(var f=0;f<o.length;f++)h[o[f].key]=f;o._keys=h}if(c&&i===0){de(t);if(s)e.body=[];return}var p,g,v,_=0,m=false,y=0;if(s){var b={key:null};var w=Array(i)}for(var f=0;f<i;f++){if(s){var x=false;var E=null;if(u){if(l)b.key=n.key(f);p=d(b,o,y)}if(p!=null){v=p.idx;E=n.diff(f,p);if(E===true){g=p;g.parent=e;g.idx=f;g._lis=false}else x=true}else x=true;if(x){g=n.tpl(f);U(g,e,f);g._diff=E!=null?E:n.diff(f);if(p!=null)We(g,p)}else;w[f]=g}else{var g=n[f];var C=g.type;if(C<=M){if(p=u&&d(g,o,y)){We(g,p);v=p.idx}}else if(C===P){if(p=u&&d(g,o,y)){v=p.idx;var S=p.vm._update(g.data,e,f)}else var S=Ie(g.view,g.data,g.key,g.opts)._redraw(e,f,false);C=S.node.type}else if(C===O){var I=D(g.vm);var S=g.vm._update(g.data,e,f,I);C=S.node.type}}if(!l&&p!=null){if(v===y){y++;if(y===r&&i>r){p=null;u=false}}else m=true;if(r>100&&m&&++_%10===0)while(y<r&&Ne(o[y]))y++}}if(s)e.body=w;c&&Le(e,t)}function Ue(e,t,n,i){var o=this;o.view=e;o.data=t;o.key=n;if(i){o.opts=i;o.config(i)}var r=s(e)?e:e.call(o,o,t,n,i);if(d(r))o.render=r;else{o.render=r.render;o.config(r)}o._redrawAsync=y(function(e){return o.redraw(true)});o._updateAsync=y(function(e){return o.update(e,true)});o.init&&o.init.call(o,o,o.data,o.key,i)}var qe=Ue.prototype={constructor:Ue,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:n,refs:null,render:null,mount:Ye,unmount:Xe,config:function(e){var t=this;if(e.init)t.init=e.init;if(e.diff)t.diff=e.diff;if(e.onevent)t.onevent=e.onevent;if(e.hooks)t.hooks=f(t.hooks||{},e.hooks);if(e.onemit)t.onemit=f(t.onemit||{},e.onemit)},parent:function(){return A(this.node.parent)},root:function(){var e=this.node;while(e.parent)e=e.parent;return e.vm},redraw:function(e){var t=this;e?t._redraw(null,null,D(t)):t._redrawAsync();return t},update:function(e,t){var n=this;t?n._update(e,null,null,D(n)):n._updateAsync(e);return n},_update:Ze,_redraw:Je,_redrawAsync:null,_updateAsync:null};function Ye(e,t){var n=this;if(t){de({el:e,flags:0});n._redraw(null,null,false);if(e.nodeName.toLowerCase()!==n.node.tag){Me(n.node);he(e.parentNode,n.node.el,e);e.parentNode.removeChild(e)}else he(e.parentNode,Me(n.node,e),e)}else{n._redraw(null,null);if(e)he(e,n.node.el)}if(e)Q(n);return n}function Xe(e){var t=this;var n=t.node;var i=n.el.parentNode;ce(i,n.el);if(!e)Q(t)}function Ke(e,t,n,i){if(n!=null){n.body[i]=t;t.idx=i;t.parent=n;t._lis=false}return e}function Je(e,t,n){var i=e==null;var o=this;var r=o.node&&o.node.el&&o.node.el.parentNode;var s=o.node,a,l;if(o.diff!=null){a=o._diff;o._diff=l=o.diff(o,o.data);if(s!=null){var c=p(a)?m:_;var u=a===l||c(a,l);if(u)return Ke(o,s,e,t)}}r&&Z(o.hooks,"willRedraw",o,o.data);var d=o.render.call(o,o,o.data,a,l);if(d===s)return Ke(o,s,e,t);o.refs=null;if(o.key!=null&&d.key!==o.key)d.key=o.key;o.node=d;if(e){U(d,e,t,o);e.body[t]=d}else if(s&&s.parent){U(d,s.parent,s.idx,o);s.parent.body[s.idx]=d}else U(d,null,null,o);if(n!==false)if(s)if(s.tag!==d.tag||s.key!==d.key){s.vm=d.vm=null;var h=s.el.parentNode;var f=re(s.el);ce(h,s.el);he(h,Me(d),f);s.el=d.el;d.vm=o}else We(d,s);else Me(d);r&&Z(o.hooks,"didRedraw",o,o.data);if(i&&r)Q(o);return o}function Ze(e,t,n,i){var o=this;if(e!=null)if(o.data!==e){Z(o.hooks,"willUpdate",o,e);o.data=e}return o._redraw(t,n,i)}function Qe(e,t,n,i){var o,r;if(n==null)if(s(t))o=t;else r=t;else{o=t;r=n}return B(e,o,r,i)}var et="http://www.w3.org/2000/svg";function tt(e,t,n,i){var o=Qe(e,t,n,i);o.ns=et;return o}function nt(e){var t=new F;t.type=M;t.body=e;return t}function it(e,t,n,i){this.view=e;this.data=t;this.key=n;this.opts=i}function ot(e,t,n,i){return new it(e,t,n,i)}function rt(e){this.vm=e}function st(e){return new rt(e)}function at(e){var t=new F;t.type=k;t.el=t.key=e;return t}function lt(r,s){var o=r.length;var a={items:r,length:o,key:function(e){return s.key(r[e],e)},diff:function(e,t){var n=s.diff(r[e],e);if(t==null)return n;var i=t._diff;var o=n===i||p(i)?m(n,i):_(n,i);return o||n},tpl:function(e){return s.tpl(r[e],e)},map:function(e){s.tpl=e;return a},body:function(e){var t=Array(o);for(var n=0;n<o;n++){var i=a.tpl(n);i._diff=a.diff(n);t[n]=i;U(i,e,n)}e.body=t}};return a}it.prototype={constructor:it,type:P,view:null,data:null,key:null,opts:null},rt.prototype={constructor:rt,type:O,vm:null};var ct={config:me,ViewModel:Ue,VNode:F,createView:Ie,defineElement:Qe,defineSvgElement:tt,defineText:R,defineComment:nt,defineView:ot,injectView:st,injectElement:at,lazyList:lt,FIXED_BODY:N,DEEP_REMOVE:j,KEYED_LIST:$,LAZY_LIST:z};function ut(e,t){!function(e,t,n){{var i,o;null!=t.type?null==e.vm&&(U(t,e.parent,e.idx,null),We(e.parent.body[e.idx]=t,e),n&&I(t),Q(A(t))):((i=Object.create(e)).attrs=f({},e.attrs),o=f(e.attrs,t),null!=e._class&&(t=o.class,o.class=null!=t&&""!==t?e._class+" "+t:e._class),Se(e,i),n&&I(e))}}(this,e,t)}function dt(e,t,n){if(null!=t.type)null==e.vm&&(U(t,e.parent,e.idx,null),We(e.parent.body[e.idx]=t,e),n&&I(t),Q(A(t)));else{var i=Object.create(e);(i=Object.create(e)).attrs=f({},e.attrs);var o=f(e.attrs,t),s;null!=e._class&&(t=o.class,o.class=null!=t&&""!==t?e._class+" "+t:e._class),Se(e,i),n&&I(e)}}function ht(e,t){var n=e.body;if(p(n))for(var i=0;i<n.length;i++){var o=n[i];if(o.vm!=null)t.push(o.vm);else ht(o,t)}return t}function ft(e){var t=arguments;var n=t.length;var i,o;if(n>1){var r=1;if(s(t[1])){o=t[1];r=2}if(n===r+1&&(a(t[r])||p(t[r])||o&&(o._flags&z)===z))i=t[r];else i=v(t,r)}return B(e,o,i)}function pt(){var e=ft.apply(null,arguments);return e.ns=et,e}return i.patch=function(e,t){!function(e,t,n){{var i,o;null!=t.type?null==e.vm&&(U(t,e.parent,e.idx,null),We(e.parent.body[e.idx]=t,e),n&&I(t),Q(A(t))):((i=Object.create(e)).attrs=f({},e.attrs),o=f(e.attrs,t),null!=e._class&&(t=o.class,o.class=null!=t&&""!==t?e._class+" "+t:e._class),Se(e,i),n&&I(e))}}(this,e,t)},qe.emit=function(e){var t=this,n=t,i=v(arguments,1).concat(n,n.data);do{var o=t.onemit,o=o?o[e]:null;if(o){o.apply(t,i);break}}while(t=t.parent());pe[e]&&pe[e].apply(t,i)},qe.onemit=null,qe.body=function(){return function e(t,n){var i=t.body;if(p(i))for(var o=0;o<i.length;o++){var r=i[o];null!=r.vm?n.push(r.vm):e(r,n)}return n}(this.node,[])},ct.defineElementSpread=ft,ct.defineSvgElementSpread=function(){var e=ft.apply(null,arguments);return e.ns=et,e},ct}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(46),c=n(0),u=n(47);t.getPicker=function(e,t,n){var i=l.HSVtoRGB(t.hsv);t.background=l.RGBToHex(i);var o=l.RGBToHex(l.HSVtoRGB({h:t.hsv.h,s:1,v:1})),r=e.getRootView(),s=(a=r.refs?r.refs.picker_palette.el.getBoundingClientRect():{height:200,width:218,x:0,y:0}).height-2,i=a.width-2,r=s-t.hsv.v*s-4,s=t.hsv.s*i-4,a=(i=a.width-6)-(360-t.hsv.h)/360*i,i=(l.isHex(t.customHex)?t.customHex:t.background).replace("#","");return c.el(".dhx_colorpicker-picker",{},[c.el(".dhx_colorpicker-picker__palette",{style:{height:132,background:o},onmousedown:n.mousedown,ontouchstart:n.touchstart,"data-dhx-id":"picker_palette",_ref:"picker_palette"},[c.el(".dhx_palette_grip",{style:{top:r,left:s},tabindex:0})]),c.el(".dhx_colorpicker-hue-range",{style:{height:16},onmousedown:n.mousedown,ontouchstart:n.touchstart,"data-dhx-id":"hue_range",_key:"hue_range",_ref:"hue_range"},[c.el(".dhx_colorpicker-hue-range__grip",{style:{left:a},tabindex:0})]),c.el(".dhx_colorpicker-value",[c.el(".dhx_colorpicker-value__color",{style:{background:t.background}}),c.el(".dhx_colorpicker-value__input__wrapper",[c.el("input",{class:"dhx_colorpicker-value__input",value:i,oninput:n.oninput,maxlength:"7",_key:"hex_input","aria-label":"type color in HEX format"})])]),c.el(".dhx_colorpicker-picker__buttons",[!e.config.pickerOnly&&c.el("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_link dhx_button--color_primary",onclick:[n.buttonsClick,"cancel"]},u.default.cancel),c.el("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_flat dhx_button--color_primary",onclick:[n.buttonsClick,"apply"]},u.default.select)])])},t.calculatePaletteGrip=function(e,t,n){var e=(i=e.refs.picker_palette.el.getBoundingClientRect()).height,i=i.width;t=t<0?0:e<t?e:t,n=n<0?0:i<n?i:n,i=Math.round(n/(i/100)),e=100-Math.round(t/(e/100)),this._pickerState.hsv.s=i/100,this._pickerState.hsv.v=e/100}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePaletteGrip=function(e,t,n){var i=e.height,e=e.width;return t=t<0?0:i<t?i:t,n=n<0?0:e<n?e:n,{s:Math.round(n/(e/100))/100,v:(100-Math.round(t/(i/100)))/100}},t.calculateRangeGrip=function(e,t){return e=e.width,t=t<0?0:e<t?e:t,{h:Math.round(t/e*360),rangeLeft:t}}},function(e,n,i){"use strict";(function(s){var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var c=i(23),u=i(22),e=(t.prototype.load=function(e,t){var n=this;if(!e.config||this._parent.events.fire(u.DataEvents.beforeLazyLoad,[]))return this._parent.loadData=e.load().then(function(e){return e?n.parse(e,t):[]}).catch(function(e){n._parent.events.fire(u.DataEvents.loadError,[e])})},t.prototype.parse=function(e,t){var i=this;if(void 0===t&&(t=u.DataDriver.json),"json"!==t||c.hasJsonOrArrayStructure(e)||this._parent.events.fire(u.DataEvents.loadError,["Uncaught SyntaxError: Unexpected end of input"]),!((e=(t=c.toDataDriver(t)).toJsonArray(e))instanceof Array)){var n=e.total_count-1,o=e.from;if(e=e.data,0!==this._parent.getLength())return e.forEach(function(e,t){var n=o+t,t=i._parent.getId(n);t?(n=i._parent.getItem(t))&&n.$empty&&(i._parent.changeId(t,e.id,!0),i._parent.update(e.id,l(l({},e),{$empty:void 0}),!0)):c.dhxWarning("item not found")}),this._parent.events.fire(u.DataEvents.afterLazyLoad,[o,e.length]),this._parent.events.fire(u.DataEvents.change),e;for(var r=[],s=0,a=0;s<=n;s++)o<=s&&s<=o+e.length-1?(r.push(e[a]),a++):r.push({$empty:!0});e=r}return this._parent.getInitialData()&&this._parent.removeAll(),this._parent.$parse(e),e},t.prototype.save=function(o){for(var r=this,e=this._getUniqueOrder(),t=this,n=0,i=e;n<i.length;n++)!function(n){var i,e;n.saving||n.pending?c.dhxWarning("item is saving"):(i=t._findPrevState(n.id))&&i.saving?(e=new s(function(e,t){i.promise.then(function(){n.pending=!1,e(r._setPromise(n,o))}).catch(function(e){r._removeFromOrder(i),r._setPromise(n,o),c.dhxWarning(e),t(e)})}),t._addToChain(e),n.pending=!0):t._setPromise(n,o)}(i[n]);this._changes.order.length&&this._parent.saveData.then(function(){r._saving=!1})},t.prototype.updateChanges=function(e){this._changes=e},t.prototype._setPromise=function(t,e){var n,i=this;switch(t.status){case"remove":n="delete";break;case"add":n="insert";break;default:n=t.status}return t.promise=e.save(t.obj,n),t.promise.then(function(){i._removeFromOrder(t)}).catch(function(e){t.saving=!1,t.error=!0,c.dhxError(e)}),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},t.prototype._addToChain=function(e){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return e}):this._parent.saveData=e},t.prototype._findPrevState=function(e){for(var t=0,n=this._changes.order;t<n.length;t++){var i=n[t];if(i.id===e)return i}return null},t.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter(function(e){return!c.isEqualObj(e,t)})},t.prototype._getUniqueOrder=function(){return this._changes.order.reduce(function(e,t){var n=e.findIndex(function(e){return e.id===t.id}),i=-1<n?e[n]:null;return i&&!1===i.saving&&"add"===i.status?"delete"===t.status?e.splice(n,1):i.obj=t.obj:e.push(t),e},[])},t);function t(e,t){this._parent=e,this._changes=t}n.Loader=e}).call(this,i(14))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(128);o.prototype.toJsonArray=function(e){return this.getRows(e)},o.prototype.toJsonObject=function(e){var t;return"string"==typeof e&&(t=this._fromString(e)),function e(t,n){n=n||{};var i=t.attributes;if(i&&i.length)for(var o=0;o<i.length;o++)n[i[o].name]=i[o].value;for(var r,s=t.childNodes,o=0;o<s.length;o++)1===s[o].nodeType&&(n[r=s[o].tagName]?("function"!=typeof n[r].push&&(n[r]=[n[r]]),n[r].push(e(s[o],{}))):n[r]=e(s[o],{}));return n}(t)},o.prototype.serialize=function(e){return i.jsonToXML(e)},o.prototype.getFields=function(e){return e},o.prototype.getRows=function(e){if("string"==typeof e&&(e=this._fromString(e)),e){e=e.childNodes&&e.childNodes[0]&&e.childNodes[0].childNodes;return e&&e.length?this._getRows(e):null}return[]},o.prototype._getRows=function(e){for(var t=[],n=0;n<e.length;n++)"item"===e[n].tagName&&t.push(this._nodeToJS(e[n]));return t},o.prototype._fromString=function(e){try{return(new DOMParser).parseFromString(e,"text/xml")}catch(e){return null}},o.prototype._nodeToJS=function(e){var t={};if(this._haveAttrs(e))for(var n=e.attributes,i=0;i<n.length;i++){var o=n[i],r=o.name,o=o.value;t[r]=this._toType(o)}if(3===e.nodeType)return t.value=t.value||this._toType(e.textContent),t;var s=e.childNodes;if(s)for(i=0;i<s.length;i++){var a=s[i],l=a.tagName;l&&("items"===l&&a.childNodes?t[l]=this._getRows(a.childNodes):this._haveAttrs(a)?t[l]=this._nodeToJS(a):t[l]=this._toType(a.textContent))}return t},o.prototype._toType=function(e){return"false"===e||"true"===e?"true"===e:e},o.prototype._haveAttrs=function(e){return e.attributes&&e.attributes.length},n=o;function o(){}t.XMLDriver=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=4;function s(e){return" ".repeat(e)}t.jsonToXML=function(e,t){void 0===t&&(t="root");for(var n='<?xml version="1.0" encoding="iso-8859-1"?>\n<'+t+">",i=0;i<e.length;i++)n+="\n"+function t(e,n){void 0===n&&(n=r);var i,o=s(n)+"<item>\n";for(i in e)Array.isArray(e[i])?(o+=s(n+r)+"<"+i+">\n",o+=e[i].map(function(e){return t(e,n+2*r)}).join("\n")+"\n",o+=s(n+r)+"</"+i+">\n"):o+=s(n+r)+("<"+i+">"+e[i])+"</"+i+">\n";return o+=s(n)+"</item>"}(e[i]);return n+"\n</"+t+">"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),n=(i.prototype.sort=function(e,t,n){this._createSorter(t),n===t&&(t=null),(n||t)&&this._sort(e,n,t)},i.prototype._createSorter=function(n){var i=this;n&&!n.rule&&(n.rule=function(e,t){e=i._checkVal(n.as,e[n.by]),t=i._checkVal(n.as,t[n.by]);return o.naturalCompare(e.toString(),t.toString())})},i.prototype._checkVal=function(e,t){return e?e.call(this,t):t},i.prototype._sort=function(e,i,o){var r=this,s={asc:1,desc:-1};return e.sort(function(e,t){var n=0;return i&&(n=i.rule.call(r,e,t)*(s[i.dir]||s.asc)),0===n&&o&&(n=o.rule.call(r,e,t)*(s[o.dir]||s.asc)),n})},i);function i(){}t.Sort=n},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),s=n(63),a=n(27),d=n(23),h=n(22);function l(e,t,n,i){void 0!==i&&-1!==i&&e[n]&&e[n][i]?e[n].splice(i,0,t):(e[n]||(e[n]=[]),e[n].push(t))}var c,o=(c=s.DataCollection,o(f,c),f.prototype.add=function(e,n,i){var o=this;if(void 0===n&&(n=-1),void 0===i&&(i=this._root),this.events.fire(h.DataEvents.beforeAdd,[e]))return"object"!=typeof e&&(e={value:e}),Array.isArray(e)?e.map(function(e,t){return o._add(e,n,i,t)}):this._add(e,n,i)},f.prototype.getRoot=function(){return this._root},f.prototype.getParent=function(e,t){if(void 0===t&&(t=!1),!this._pull[e])return null;e=this._pull[e].parent;return t?this._pull[e]:e},f.prototype.getItems=function(e){return this._childs&&this._childs[e]?this._childs[e]:[]},f.prototype.getLength=function(e){return void 0===e&&(e=this._root),this._childs[e]?this._childs[e].length:null},f.prototype.removeAll=function(e){if(e){if(this._childs[e])for(var t=0,n=r(this._childs[e]);t<n.length;t++){var i=n[t];this.remove(i.id)}}else{c.prototype.removeAll.call(this);var o=this._root;this._initChilds=null,this._childs=((e={})[o]=[],e)}},f.prototype.getIndex=function(t){var e=this.getParent(t);return e&&this._childs[e]?u.findIndex(this._childs[e],function(e){return e.id===t}):-1},f.prototype.sort=function(e){var t=this;if(e){for(var n in this._childs)this._sort.sort(this._childs[n],e);if(this._initChilds&&Object.keys(this._initChilds).length)for(var n in this._initChilds)this._sort.sort(this._initChilds[n],e)}else this._childs={},this._parse_data(Object.keys(this._pull).map(function(e){return t._pull[e]})),this._filters&&this.filter(this._filters.filters,this._filters.config);this.events.fire(h.DataEvents.change)},f.prototype.filter=function(e,t){var i=this;if(void 0===t&&(t={}),e){if(this._initOrder||(this._initOrder=this._order),this._initChilds||(this._initChilds=this._childs),t.type=t.type||h.TreeFilterType.all,this._filters={filters:{},config:t},"function"!=typeof e)if(e.by)this._filters.filters[e.by]=e;else for(var n in e)this._filters.filters[n]=e[n];else this._filters.filters=e;var o={};this._recursiveFilter(this._filters.filters,t,this._root,0,o),Object.keys(o).forEach(function(e){for(var t=i.getParent(e),n=i.getItem(e);t;)o[t]||(o[t]=[]),n&&!o[t].find(function(e){return e.id===n.id})&&o[t].push(n),n=i.getItem(t),t=i.getParent(t)}),this._childs=o,this.events.fire(h.DataEvents.change)}else this.restoreOrder()},f.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null),this.events.fire(h.DataEvents.change)},f.prototype.copy=function(e,n,i,o){var r=this;return void 0===i&&(i=this),void 0===o&&(o=this._root),e instanceof Array?e.map(function(e,t){return r._copy(e,n,i,o,t)}):this._copy(e,n,i,o)},f.prototype.move=function(e,n,i,o){var r=this;return void 0===i&&(i=this),void 0===o&&(o=this._root),e instanceof Array?e.map(function(e,t){return r._move(e,n,i,o,t)}):this._move(e,n,i,o)},f.prototype.forEach=function(e,t,n){if(void 0===t&&(t=this._root),void 0===n&&(n=1/0),this.haveItems(t)&&!(n<1))for(var i=this._childs[t],o=0;o<i.length;o++)e.call(this,i[o],o,i),this.haveItems(i[o].id)&&this.forEach(e,i[o].id,--n)},f.prototype.eachChild=function(e,t,n,i){if(void 0===n&&(n=!0),void 0===i&&(i=function(){return!0}),this.haveItems(e))for(var o=0;o<this._childs[e].length;o++)t.call(this,this._childs[e][o],o),n&&i(this._childs[e][o])&&this.eachChild(this._childs[e][o].id,t,n,i)},f.prototype.getNearId=function(e){return e},f.prototype.loadItems=function(t,n){var i=this;void 0===n&&(n=h.DataDriver.json);var e=this.config.autoload+"?id="+t;new a.DataProxy(e).load().then(function(e){e=(n=d.toDataDriver(n)).toJsonArray(e),i._parse_data(e,t),i.events.fire(h.DataEvents.change)})},f.prototype.refreshItems=function(e,t){void 0===t&&(t=h.DataDriver.json),this.removeAll(e),this.loadItems(e,t)},f.prototype.eachParent=function(e,t,n){void 0===n&&(n=!1);e=this.getItem(e);e&&(n&&t.call(this,e),e.parent!==this._root&&(n=this.getItem(e.parent),t.call(this,n),this.eachParent(e.parent,t)))},f.prototype.haveItems=function(e){return e in this._childs},f.prototype.canCopy=function(t,e){if(t===e)return!1;var n=!0;return this.eachParent(e,function(e){return e.id===t?n=!1:null}),n},f.prototype.serialize=function(e,t){void 0===e&&(e=h.DataDriver.json);t=this._serialize(this._root,t),e=d.toDataDriver(e);if(e)return e.serialize(t)},f.prototype.getId=function(e,t){if(void 0===t&&(t=this._root),this._childs[t]&&this._childs[t][e])return this._childs[t][e].id},f.prototype.map=function(e,t,n){void 0===t&&(t=this._root),void 0===n&&(n=!0);var i=[];if(!this.haveItems(t))return i;for(var o,r=0;r<this._childs[t].length;r++)i.push(e.call(this,this._childs[t][r],r,this._childs)),n&&(o=this.map(e,this._childs[t][r].id,n),i=i.concat(o));return i},f.prototype.getRawData=function(e,t,n,i,o){return o=o||this._root,this._childs[o]?(o=o===this._root?c.prototype.getRawData.call(this,e,t,this._childs[o]):this._childs[o],2===i?this.flatten(o):o):[]},f.prototype.flatten=function(e){var n=this,i=[];return e.forEach(function(e){i.push(e);var t=n._childs[e.id];t&&e.$opened&&(i=i.concat(n.flatten(t)))}),i},f.prototype._add=function(e,t,n,i){void 0===t&&(t=-1),void 0===n&&(n=this._root),e.parent=e.parent?e.parent.toString():n,0<i&&-1!==t&&(t+=1);t=c.prototype._add.call(this,e,t);if(Array.isArray(e.items))for(var o=0,r=e.items;o<r.length;o++){var s=r[o];this.add(s,-1,e.id)}return t},f.prototype._copy=function(e,t,n,i,o){if(void 0===n&&(n=this),void 0===i&&(i=this._root),!this.exists(e))return null;var r=this._childs[e];if(o&&(t=-1===t?-1:t+o),n===this&&!this.canCopy(e,i))return null;o=d.copyWithoutInner(this.getItem(e),{items:!0});if(n.exists(e)&&(o.id=u.uid()),d.isTreeCollection(n)){if(this.exists(e)&&(o.parent=i,n!==this&&i===this._root&&(o.parent=n.getRoot()),n.add(o,t),e=o.id),r)for(var s=0,a=r;s<a.length;s++){var l=a[s].id,c=this.getIndex(l);"string"==typeof e&&this.copy(l,c,n,e)}return e}n.add(o,t)},f.prototype._move=function(e,t,n,i,o){if(void 0===n&&(n=this),void 0===i&&(i=this._root),!this.exists(e))return null;if(o&&(t=-1===t?-1:t+o),n!==this){if(!d.isTreeCollection(n))return n.add(d.copyWithoutInner(this.getItem(e)),t),void this.remove(e);var r=this.copy(e,t,n,i);return this.remove(e),r}if(!this.canCopy(e,i))return null;n=this.getParent(e),r=this.getIndex(e),r=this._childs[n].splice(r,1)[0];return r.parent=i,this._childs[n].length||delete this._childs[n],this.haveItems(i)||(this._childs[i]=[]),-1===t?t=this._childs[i].push(r):this._childs[i].splice(t,0,r),this.events.fire(h.DataEvents.change,[e,"update",this.getItem(e)]),e},f.prototype._reset=function(e){if(e)for(var t=0,n=r(this._childs[e]);t<n.length;t++){var i=n[t];this.remove(i.id)}else{c.prototype._reset.call(this);var o=this._root;this._initChilds=null,this._childs=((e={})[o]=[],e)}},f.prototype._removeCore=function(t){var e;this._pull[t]&&(e=this.getParent(t),this._childs[e]=this._childs[e].filter(function(e){return e.id!==t}),e===this._root||this._childs[e].length||delete this._childs[e],this._initChilds&&this._initChilds[e]&&(this._initChilds[e]=this._initChilds[e].filter(function(e){return e.id!==t}),e===this._root||this._initChilds[e].length||delete this._initChilds[e]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==t})),this._fastDeleteChilds(this._childs,t),this._initChilds&&this._fastDeleteChilds(this._initChilds,t))},f.prototype._addToOrder=function(e,t,n){var i=this._childs,o=this._initChilds,r=t.parent;(this._pull[t.id]=t).parent&&this._pull[t.parent]&&this._pull[t.parent].items&&!this._pull[t.parent].items.find(function(e){return e.id===t.id})&&this._pull[t.parent].items.push(t),c.prototype._addToOrder.call(this,e,t,n),l(i,t,r,n),o&&l(o,t,r,n)},f.prototype._parse_data=function(e,t){var n;void 0===t&&(t=this._root);for(var i=this._order.length,o=0,r=e;o<r.length;o++){var s=r[o];this.config.init&&(s=this.config.init(s)),s&&"object"!=typeof s&&(s={value:s}),s.id=null!==(n=s.id)&&void 0!==n?n:u.uid(),s.parent=void 0===s.parent||null===s.parent||s.parent&&s.$items?t:s.parent,this._pull[s.id]&&d.dhxError("Item "+s.id+" already exist"),this._pull[s.id]=s,this._order[i++]=s,this._childs[s.parent]||(this._childs[s.parent]=[]),this._childs[s.parent].push(s),s.items&&s.items instanceof Object&&this._parse_data(s.items,s.id)}},f.prototype._fastDeleteChilds=function(e,t){if(this._pull[t]&&delete this._pull[t],e[t]){for(var n=0;n<e[t].length;n++)this._fastDeleteChilds(e,e[t][n].id);delete e[t]}},f.prototype._recursiveFilter=function(o,t,e,n,i){var r=this,s=this._childs[e];if(s){var a,l=function(e){switch(t.type){case h.TreeFilterType.all:return!0;case h.TreeFilterType.level:return n===t.level;case h.TreeFilterType.leafs:return!r.haveItems(e.id)}};a="function"==typeof o?function(e){return l(e)&&o(e)}:function(e){var t,n,i=!0;for(n in o)if(o[n].by&&""!==o[n].match&&(i=o[n].compare?o[n].compare(null===(t=e[o[n].by])||void 0===t?void 0:t.toString(),o[n].match,e):-1!==(null===(t=e[o[n].by])||void 0===t?void 0:t.toString().toLocaleLowerCase().indexOf(o[n].match.toString().toLowerCase()))),!i)break;return l(e)&&i},(a=s.filter(a)).length&&(i[e]=a);for(var c=0,u=s;c<u.length;c++){var d=u[c];this._recursiveFilter(o,t,d.id,n+1,i)}}},f.prototype._serialize=function(e,i){var o=this;return void 0===e&&(e=this._root),this.map(function(e){var t,n={};for(t in e)"parent"===t||"items"===t||t.startsWith("$")||(n[t]=e[t]);return i&&(n=i(n)),o.haveItems(e.id)&&(n.items=o._serialize(e.id,i)),n},e,!1)},f);function f(e,t){var n=c.call(this,e,t)||this;n._childs={};t=n._root=e&&e.rootId||"_ROOT_"+u.uid();return n._childs=((e={})[t]=[],e),n._initChilds=null,n}t.TreeCollection=o},function(e,t,n){"use strict";var _=this&&this.__assign||function(){return(_=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var h=n(2),m=n(31),f=n(161),p=n(22),y=n(23),b=n(1);var i=(o.prototype.setItem=function(e,t){f.collectionStore.setItem(e,t)},o.prototype.onMouseDown=function(e,t,n){var i,o,r,s;1!==e.which&&!e.targetTouches||(e.targetTouches?(document.addEventListener("touchmove",this._onMouseMove,!1),document.addEventListener("touchend",this._onMouseUp,!1)):(document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp)),o=(i=h.locateNode(e,"data-dhx-id"))&&i.getAttribute("data-dhx-id"),r=h.locate(e,"data-dhx-widget-id"),Array.isArray(t)&&t.includes(o)?(this._transferData.source=a(t),this._itemsForGhost=n):(this._transferData.source=[o],this._itemsForGhost=null),o&&r&&(t=(s=h.getBox(i)).left,n=s.top,s=(e.targetTouches?e.targetTouches[0]:e).pageX,e=(e.targetTouches?e.targetTouches[0]:e).pageY,this._transferData.initXOffset=s-t,this._transferData.initYOffset=e-n,this._transferData.x=s,this._transferData.y=e,this._transferData.componentId=r,this._transferData.start=o,this._transferData.item=i))},o.prototype.isDrag=function(){return this._isDrag},o.prototype.cancelCanDrop=function(e){this._canMove=!1,this._isDrag=!1;var t=this._transferData,n=t.start,i=t.source,o=t.target,t=t.dropComponentId,i={start:n,source:i,target:o},t=f.collectionStore.getItem(t);t&&o&&t.events.fire(p.DragEvents.cancelDrop,[i,e]),this._transferData.dropComponentId=null,this._transferData.target=null},o.prototype._moveGhost=function(e,t){this._transferData.ghost&&(this._transferData.ghost.style.left=e-this._transferData.initXOffset+"px",this._transferData.ghost.style.top=t-this._transferData.initYOffset+"px")},o.prototype._removeGhost=function(){document.body.removeChild(this._transferData.ghost)},o.prototype._onDrop=function(e){var t,n,i,o,r;this._canMove&&(r=(o=this._transferData).start,n=o.source,t=o.target,i=o.dropComponentId,n={start:r,source:n,target:t,dropPosition:o.dropPosition},i=(o=f.collectionStore.getItem(i))&&o.config,o&&"source"!==i.dragMode&&o.events.fire(p.DragEvents.beforeDrop,[n,e])&&(o={id:t,component:o},r={id:r,component:this._transferData.component,newId:null},this._move(r,o),r.newId&&r.component!==o.component&&(n.start=r.newId),o.component.events.fire(p.DragEvents.afterDrop,[n,e]))),this._endDrop(e)},o.prototype._onDragStart=function(e,t,n){var i=f.collectionStore.getItem(t),o=i.config,r=this._transferData,t={start:r.start,source:r.source,target:r.target};if("target"===o.dragMode||i._pregroupData)return null;r=function(e,t,n){void 0===n&&(n=!1);var i=e.getBoundingClientRect(),o=document.createElement("div"),r=e.cloneNode(!0);return r.style.width=i.width+"px",r.style.height=i.height+"px",r.style.maxHeight=i.height+"px",r.style.fontSize=window.getComputedStyle(e.parentElement).fontSize,r.style.opacity="0.8",r.style.fontSize=window.getComputedStyle(e.parentElement).fontSize,n&&t&&t.length||o.appendChild(r),t&&t.length&&t.forEach(function(e,t){e=e.cloneNode(!0);e.style.width=i.width+"px",e.style.height=i.height+"px",e.style.maxHeight=i.height+"px",e.style.top=12*(t+1)-i.height-i.height*t+"px",e.style.left=12*(t+1)+"px",e.style.opacity="0.6",e.style.zIndex=""+(-t-1),o.appendChild(e)}),o.className="dhx_drag-ghost",o}(this._transferData.item,this._itemsForGhost,"column"===o.dragItem||"both"===o.dragItem);return i.events.fire(p.DragEvents.beforeDrag,[t,n,r])&&e?(i.events.fire(p.DragEvents.dragStart,[t,n]),this._isDrag=!0,this._toggleTextSelection(!0),this._transferData.component=i,this._transferData.dragConfig=o,r):null},o.prototype._onDrag=function(e){var t=(e.targetTouches?e.targetTouches[0]:e).clientX,n=(e.targetTouches?e.targetTouches[0]:e).clientY,i=document.elementFromPoint(t,n),o=h.locate(i,"data-dhx-widget-id");if(o){var r=f.collectionStore.getItem(o),s=!!h.locateNodeByClassName(i,"dhx_grid-header")||!!h.locateNodeByClassName(i,"dhx_grid-footer"),a=r&&r.config.columns?r.config:void 0,l=a&&("both"===a.dragItem||"column"===a.dragItem);if(!s||l){var c=h.locate(i,"data-dhx-id"),u=h.locate(i,"data-dhx-root-id");if(!c&&!u)return this.cancelCanDrop(e),this._transferData.dropComponentId=o,this._transferData.target=null,void this._canDrop(e);var d=this._transferData,t=d.dropComponentId,n=d.start,a=d.source,s=d.target,l=d.componentId,i=d.dropPosition;if("complex"===r.config.dropBehaviour){d=function(e){var t=e.clientY;if(!(e=h.locateNode(e)))return null;if(e=e.childNodes[0]){e=e.getBoundingClientRect();return(t-e.top)/e.height}}(e);this._transferData.dropPosition=d<=.25?"top":.75<=d?"bottom":"in"}else if((s===c||s===u)&&t===o)return;t={id:n,component:this._transferData.component};"source"!==r.config.dragMode&&(t.component.events.fire(p.DragEvents.dragOut,[{start:n,source:a,target:s},e]),o!==l||!y.isTreeCollection(t.component.data)||y.isTreeCollection(t.component.data)&&t.component.data.canCopy(t.id,c)?(this.cancelCanDrop(e),this._transferData.target=c||u,this._transferData.dropComponentId=o,t.component.events.fire(p.DragEvents.dragIn,[{start:n,source:a,target:s,dropPosition:i},e])&&this._canDrop(e)):this.cancelCanDrop(e))}else this._canMove&&this.cancelCanDrop(e)}else this._canMove&&this.cancelCanDrop(e)},o.prototype._move=function(n,t){var i=n.component.data,o=t.component.data,r=0,s=t.id,e=y.isTreeCollection(o)?t.component.config.dropBehaviour:void 0,a=n.component.config.columns?n.component.config:void 0,a=a&&("both"===a.dragItem||"column"===a.dragItem)&&a.columns.map(function(e){return e.id}).filter(function(e){return e===n.id||e===t.id}).length;if(a&&n.component===t.component){if(n.id===t.id)return;var l=(c=(u=n.component).config.columns.map(function(e){return _({},e)})).findIndex(function(e){return e.id===n.id});return-1===(h=c.findIndex(function(e){return e.id===t.id}))?void 0:(c.splice(h,0,c.splice(l,1)[0]),u.setColumns(c),void u.paint())}if(a&&n.component instanceof m.ProGrid&&t.component instanceof m.ProGrid){var c,u=n.component,d=t.component,l=(c=u.config.columns.map(function(e){return _({},e)})).findIndex(function(e){return e.id===n.id}),a=d.config.columns.map(function(e){return _({},e)}),h=a.findIndex(function(e){return e.id===t.id}),f=0<=a.findIndex(function(e){return e.id===n.id})?n.id+"_copy":n.id,p=[];u.data.forEach(function(e){var t;p.push(((t={})[f]=e[n.id],t))}),d.data.forEach(function(e,t){d.data.update(e.id,_(_({},e),p[t]))});l=c.splice(l,1)[0];return l.id=f,a.splice(h,0,l),d.setColumns(a),d.paint(),u.setColumns(c),void u.paint()}var g=t.id===t.component.config.rootParent;switch(e){case"child":break;case"sibling":s=o.getParent(s),r=o.getIndex(t.id)+1;break;case"complex":var v=this._transferData.dropPosition;g?(s=t.id,r=o.getLength()):"top"===v?(s=o.getParent(s),r=o.getIndex(t.id)):"bottom"===v&&(s=o.getParent(s),r=o.getIndex(t.id)+1);break;default:r=t.id?n.component===t.component&&o.getIndex(n.id)<o.getIndex(t.id)?o.getIndex(t.id)-1:(-1<o.getIndex(n.id)&&(n.newId=b.uid()),o.getIndex(t.id)):-1}this._transferData.dragConfig.dragCopy?this._transferData.source instanceof Array&&1<this._transferData.source.length?this._transferData.source.map(function(e){i.copy(e,r,o,s),-1<r&&r++}):i.copy(n.id,r,o,s):this._transferData.source instanceof Array&&1<this._transferData.source.length?this._transferData.source.map(function(e){i.move(e,r,o,s),-1<r&&r++}):i.move(n.id,r,o,s,n.newId)},o.prototype._endDrop=function(e){var t;this._toggleTextSelection(!1),this._transferData.component&&(t={start:(t=this._transferData).start,source:t.source,target:t.target},this._transferData.component.events.fire(p.DragEvents.afterDrag,[t,e])),this.cancelCanDrop(e),this._canMove=!0,this._transferData={},this._transferData.target=null,this._transferData.dropComponentId=null},o.prototype._canDrop=function(e){this._canMove=!0;var t=this._transferData,n={start:t.start,source:t.source,target:t.target,dropPosition:t.dropPosition},t=f.collectionStore.getItem(this._transferData.dropComponentId);t&&this._transferData.target&&t.events.fire(p.DragEvents.canDrop,[n,e])},o.prototype._toggleTextSelection=function(e){e?document.body.classList.add("dhx_no-select"):document.body.classList.remove("dhx_no-select")},o);function o(){var a=this;this._transferData={},this._canMove=!0,this._isDrag=!1,this._onMouseMove=function(e){if(a._transferData.start){var t=(e.targetTouches?e.targetTouches[0]:e).pageX,n=(e.targetTouches?e.targetTouches[0]:e).pageY,i=a._transferData,o=i.x,r=i.y,s=i.start,i=i.componentId;if(!a._transferData.ghost){if(Math.abs(o-t)<3&&Math.abs(r-n)<3)return;i=a._onDragStart(s,i,e);if(!i)return void a._endDrop(e);a._transferData.ghost=i,document.body.appendChild(a._transferData.ghost)}a._moveGhost(t,n),a._onDrag(e)}},this._onMouseUp=function(e){a._transferData.x&&(a._transferData.ghost?(a._removeGhost(),a._onDrop(e)):a._endDrop(e),e.targetTouches?(document.removeEventListener("touchmove",a._onMouseMove),document.removeEventListener("touchend",a._onMouseUp)):(document.removeEventListener("mousemove",a._onMouseMove),document.removeEventListener("mouseup",a._onMouseUp)))}}n=window.dhxHelpers=window.dhxHelpers||{};n.dragManager=n.dragManager||new i,t.dragManager=n.dragManager},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var _=n(20),l=n(10),o=n(1),m=n(15);r.prototype.xlsx=function(e){return this._export(e)},r.prototype.csv=function(e){var t;void 0===e&&(e={}),e=i({asFile:!0,rowDelimiter:"\n",columnDelimiter:",",skipHeader:0},e),t="getRoot"in this._view.data&&e.flat?this.getFlatCSV(e):this._getCSV(e);var n=e.name||"grid_export";return e.asFile&&o.downloadFile(t,n+".csv","text/csv"),t},r.prototype._export=function(e){void 0===e&&(e={});for(var c=this._view.config.columns.filter(function(e){return!e.hidden}),u={},t=_.transpose(c.map(function(e){return e.header.map(function(e){return e.text||" "})})),d=[],h={default:{color:"#000000",background:"#FFFFFF",fontSize:14}},f=[],o={},n=this._view.data.serialize().map(function(i,e){return u[i.id]=e,c.map(function(e,t){var n;return o[e.id]=t,i[e.id]instanceof Date&&(n=e.format||"%M %d %Y","string"==typeof i[e.id]?i[e.id]=m.getFormattedDate(n,m.stringToDate(i[e.id],n)):"object"==typeof i[e.id]&&(i[e.id]=m.getFormattedDate(n,i[e.id]))),i[e.id]||t||!i.$groupName?_.removeHTMLTags(i[e.id]):"^ "+i.$groupName})}),p=[],g=this._view.content,v=this,i=0,r=c;i<r.length;i++)!function(e){var i,t,o,n,r;for(r in e.footer&&(i=e.id,n=t=v._view.data.serialize().reduce(function(e,t){return void 0===t[i]||""===t[i]||isNaN(t[i])||e.push(parseFloat(t[i])),e},[]),"tree"===v._view.config.type&&(n=(o=v._view.data).serialize().reduce(function(e,t){var n;return 0===t.$level&&(void 0===t[i]||""===t[i]||isNaN(t[i])?(n=0,o.eachChild(t.id,function(e){o.haveItems(e.id)||(n+=parseFloat(e[i]))}),e.push(n)):e.push(parseFloat(t[i])||0)),e},[])),e.footer[0].content?(n=g[e.footer[0].content].calculate(t,n),p.push(n)):p.push(e.footer[0].css||e.footer[0].text||" ")),d.push({width:e.width}),e.$cellCss){var s,a=e.$cellCss[r],l=a.split("").reduce(function(e,t){t=(e<<5)-e+t.charCodeAt(0);return Math.abs(t&t)},0).toString();h[l]||(s=document.body,(s=_.getStyleByClass(a,s,"dhx_grid-row",h.default))&&(h[l]=s)),h[l]&&f.push([u[r],c.indexOf(e),l])}}(r[i]);p.length&&n.push(p);var s,n={name:e.name||"data",columns:d,header:t,data:n,styles:{cells:f,css:h}};return e.url&&((s=document.createElement("form")).setAttribute("target","_blank"),s.setAttribute("action",e.url),s.setAttribute("method","POST"),s.style.visibility="hidden",(e=document.createElement("textarea")).setAttribute("name","data"),e.value=JSON.stringify(n),s.appendChild(e),document.body.appendChild(s),s.submit(),setTimeout(function(){s.parentNode.removeChild(s)},100)),n},r.prototype.getFlatCSV=function(o){var t=this._view.data,e=t.getRoot(),r=this._view.config.columns[0],s=t.getMaxLevel(),n="";t.eachChild(e,function(i){var e=function(e,t){for(var n,i=[],o=0;o<=s;o++)e&&e[r.id]?(i[e.$level]=e[r.id],e=(n=t.getParent(e.id,!0))&&n.id?n:null):i[o]="";return i}(i,t).join(o.columnDelimiter);n+=e+Object.keys(i).reduce(function(e,t,n){return"id"===t||"parent"===t||t.startsWith("$")||0===n?e:e+o.columnDelimiter+(null===i[t]?"":i[t])},""),n+=o.rowDelimiter});var e=this._export(o),i=function(e,t){for(var n=0;n<e.length;n++)e[n]=t;return e}(new Array(s+1),""),e=e.header.map(function(e){return e.splice.apply(e,a([0,1],i)),e});return new l.CsvDriver(o).serialize(e,!0)+o.rowDelimiter+n},r.prototype._getCSV=function(e){var t=this._export(e),n=t.header,e=new l.CsvDriver(e);return e.serialize(n,!0)+"\n"+e.serialize(t.data,!0)},n=r;function r(e){this._view=e}t.Exporter=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=n(0),y=n(1),o=n(10),r=n(3),h=n(11),f=n(16),n=(i.prototype.setCell=function(t,n,e,i){var o,r,s,a,l,c,u,d=this;void 0===e&&(e=!1),void 0===i&&(i=!1),this._gridId&&f.focusManager.getFocusId()!==this._gridId&&f.focusManager.setFocusId(this._gridId),this.config.disabled||this._grid.config.$editable||!this._multiselection&&this._oldSelectedCell&&this._oldSelectedCell.row.id===(t&&t.id||t)&&this._oldSelectedCell.column.id===(n&&n.id||n)||this._multiselection&&1===this._selectedCells.length&&this._selectedCells[0].row.id===(t&&t.id||t)&&this._selectedCells[0].column.id===(n&&n.id||n)||((!this._multiselection||e||i)&&this._multiselection||this._selectedCells.length&&this._removeCells(),this._multiselection&&"cell"===this._type&&this._selectedCells.find(function(e){return e.row.id===(t&&t.id||t)&&e.column.id===(n&&n.id||n)})?this.removeCell(t&&t.id||t,n&&n.id||n):(l=this._oldSelectedCell||void 0,t=this._grid.data.getItem(t&&t.id||t),o=this._grid.config.columns.filter(function(e){return!e.hidden}),n=n||o[0],(n=this._grid.getColumn(n.id||n))&&t&&(n=n.id?n:this._grid.getColumn(n),this.events.fire(h.GridSelectionEvents.beforeSelect,[t,n])&&(this._selectedCell={row:t,column:n},this.events.fire(h.GridSelectionEvents.afterSelect,[t,n]),this._multiselection&&i&&l?this._oldSelectedCell=l:this._oldSelectedCell=this._selectedCell,this._multiselection?i&&!e&&0<this._selectedCells.length?(r=this._grid.data.getIndex(this._oldSelectedCell.row.id),(s=this._grid.data.getIndex(t.id))<r&&(a=r,r=s,s=a),this._selectedCells=[this._oldSelectedCell],"cell"===this._type?(l=(c=o.map(function(e){return e.id})).indexOf(l.column.id),c=c.indexOf(n.id),-1!==l&&-1!==c&&(c<l&&(a=l,l=c,c=a),u=o.slice(l,c+1),this._grid.data.mapRange(r,s,function(t){u.forEach(function(e){e={row:t,column:e};-1===d._findIndex(e)&&d._selectedCells.push(e)})}))):this._grid.data.mapRange(r,s,function(e){e={row:e,column:n};-1===d._findIndex(e)&&d._selectedCells.push(e)})):e&&!i?-1===(i=this._findIndex())?this._selectedCells.push({row:this._selectedCell.row,column:this._selectedCell.column}):1<this._selectedCells.length&&this._selectedCells.splice(i,1):this._selectedCells=[this._selectedCell]:this._selectedCells=[this._selectedCell],m.awaitRedraw().then(function(){d._grid.paint(),d._setBrowserFocus()})))))},i.prototype.getCell=function(){return this._selectedCell},i.prototype.getCells=function(){return this._selectedCells},i.prototype.toHTML=function(){var i=this;if(!this._isUnselected()){if(this._multiselection){var o=[];return this._selectedCells.forEach(function(e,t,n){o.push(i._toHTML(e.row,e.column,t===n.length-1||"cell"===i._type))}),o}return this._toHTML(this._selectedCell.row,this._selectedCell.column,!0)}},i.prototype.disable=function(){this.removeCell(),this.config.disabled=!0,this._grid.paint()},i.prototype.enable=function(){this.config.disabled=!1,this._grid.paint()},i.prototype.removeCell=function(n,i){var e,o=this;n&&i&&"cell"===this._type?(e=this._selectedCells.find(function(e){var t=e.row,e=e.column;return t.id==n&&e.id==i}))&&this._removeCell(e.row,e.column):n?this._selectedCells.filter(function(e){return e.row.id==n}).forEach(function(e){var t=e.row,e=e.column;o._removeCell(t,e)}):this._removeCells(),m.awaitRedraw().then(function(){o._grid.paint()})},i.prototype._removeCell=function(t,n){var e;t&&n&&t.id&&n.id&&this.events.fire(h.GridSelectionEvents.beforeUnSelect,[t,n])&&(e=this._selectedCells.findIndex(function(e){return e.row.id===t.id&&e.column.id===n.id}),this._selectedCells.splice(e,1),this._selectedCell&&n.id===this._selectedCell.column.id&&t.id===this._selectedCell.row.id&&(this._selectedCell=this._selectedCells[this._selectedCells.length-1]||void 0),this.events.fire(h.GridSelectionEvents.afterUnSelect,[t,n]))},i.prototype._removeCells=function(){var t=this;this._selectedCells.forEach(function(e){t._removeCell(e&&e.row,e&&e.column)}),this._selectedCells.length&&this._removeCells()},i.prototype._init=function(){var i=this;this._grid.events.on(h.GridEvents.cellClick,function(e,t,n){i.setCell(e,t,n.ctrlKey||n.metaKey,n.shiftKey)}),this._grid.data.events.on(o.DataEvents.beforeRemove,function(e){var t;e&&i._selectedCell&&i._selectedCell.row&&(t=i._grid.data.getIndex(String(i._selectedCell.row.id)),(e=i._grid.data.getId(t+1))?i.setCell(e):(t=i._grid.data.getId(t-1))&&i.setCell(t),i._grid.paint())})},i.prototype._toHTML=function(t,e,n){void 0===n&&(n=!1);var i=this._grid.data.getRawData(0,-1,null,2);if(-1===y.findIndex(i,function(e){return e.id==t.id}))return null;var o=this._grid.config.leftSplit,r=this._grid.config.columns.filter(function(e){return!e.hidden}),s=o?r.slice(0,o):[],a=this._grid.config.topSplit?this._grid.data.getRawData(0,this._grid.config.topSplit):[],l=s.map(function(e){return e.id}),c=a.map(function(e){return e.id}),u=s.reduce(function(e,t){return e+t.$width},0),d=a.reduce(function(e,t){return e+t.$height},0),h=this._grid.getCellRect(t.id,e.id),f=this._grid.getScrollState(),p=h.y,g=c.includes(t.id),v=l.includes(e.id),_=s.length&&u>h.x-f.x,i=a.length&&d>h.y-f.y,r=h.width,c=h.height-1,a=_?u+f.x:h.x;_&&(r-=u-(h.x-f.x)),i&&!g&&(c-=d-(h.y-f.y)-1,p+=h.height-c),g&&(p=h.y+f.y),v&&(r=o===l.indexOf(e.id)+1?h.width-1:h.width,a=h.x+f.x);e=this._grid.config.$totalWidth,h=null;"row"!==this._type&&"complex"!==this._type||(h=m.el(".dhx_grid-selected-row",{style:{width:s.length?e-f.x:e,height:c,display:c<0?"none":"flex",top:p,left:s.length?f.x:0,position:"absolute"}}));f=null;return"cell"!==this._type&&"complex"!==this._type||!n||(f=m.el(".dhx_grid-selected-cell",{style:{width:r,height:c,top:p,left:a,position:"absolute",display:r<0||c<0?"none":"flex",borderLeft:_&&!v?"none":null,borderTop:i&&!g?"none":null}})),m.el(".dhx_grid-selection",{style:{zIndex:v||g||"row"===this._grid.config.selection||"complex"===this._grid.config.selection?20:10}},[h,f])},i.prototype._isUnselected=function(){return!this._selectedCell||!this._selectedCell.row||!this._selectedCell.column||0===this._selectedCells.length},i.prototype._findIndex=function(n){var i=this;void 0===n&&(n=this._selectedCell);var o=-1;return this._selectedCells.some(function(e,t){if("cell"===i._type){if(y.compare(e.row,n.row)&&y.compare(e.column,n.column))return o=t,!0}else if("row"===i._type&&y.compare(e.row,n.row))return o=t,!0}),o},i.prototype._setBrowserFocus=function(){var e,t,n=this._grid.getRootView().data.getRootNode();!n||(e=n.querySelector(".dhx_grid_data"))&&this._selectedCell&&this._selectedCell.row&&this._selectedCell.column&&(t=e.querySelector('[data-dhx-id="'+this._selectedCell.row.id+'"]'),e=this._grid.getSpan(this._selectedCell.row.id,this._selectedCell.column.id),!t||(t=(n=e?n.querySelector(".dhx_span-spans"):null)?n.querySelector('[data-dhx-col-id="'+e.column+'"][data-dhx-id="'+e.row+'"]'):t.querySelector('[data-dhx-col-id="'+this._selectedCell.column.id+'"]'))&&(t.tabIndex=0,t.focus({preventScroll:!0})))},i);function i(e,t,n,i){this._grid=e,this.config=t,this._gridId=i,this._selectedCell=void 0,this._oldSelectedCell=void 0,this._selectedCells=[],this._type=["cell","row","complex"].includes(this._grid.config.selection)?this._grid.config.selection:"complex",this._multiselection=e.config.multiselection&&"complex"!==this._type,this.events=n||new r.EventSystem(this),this._init()}t.Selection=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),s=n(135),a=n(136),l=n(137),c=n(148),u=n(149),d=n(156),h={cell:{row:null,col:null},editor:null,gridId:null};t.getEditor=function(e,t,n){var i="boolean"===t.type?"checkbox":n.$editable.editorType;if(void 0===i&&(i=n.autoHeight?"textarea":"input"),h.cell.row===e.id&&h.cell.col===t.id&&h.gridId===n.gridId&&n.$editable.editor)return h.editor;switch("checkbox"!==i&&(h={cell:{row:e.id,col:t.id},editor:h.editor,gridId:n.gridId}),o||(o=function(){h={cell:{row:null,col:null},editor:null,gridId:null}},n.events.on(r.GridEvents.afterEditEnd,o)),i){case"input":return h.editor=new s.InputEditor(e,t,n);case"textarea":return h.editor=new d.TextAreaEditor(e,t,n);case"select":return h.editor=new a.SelectEditor(e,t,n);case"datePicker":return h.editor=new l.DateEditor(e,t,n);case"checkbox":return new c.CheckboxEditor(e,t,n);case"multiselect":case"combobox":return h.editor=new u.ComboboxEditor(e,t,n);default:return h.editor=new s.InputEditor(e,t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(11),r=n(1),n=(s.prototype.endEdit=function(e){var t;e||(t=this._input.value),this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),"string"!==this._cell.col.type&&r.isNumeric(t)&&(t=parseFloat(t)),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()},s.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];return this._input&&(e=this._input.value),this._config.$editable.editor=this,i.el("input.dhx_cell-editor.dhx_cell-editor__input",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:e})},s.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onChange:function(){t.endEdit()},didInsert:function(e){e=e.el;(t._input=e).focus(),e.setSelectionRange(0,e.value.length),e.addEventListener("change",t._handlers.onChange),e.addEventListener("blur",t._handlers.onBlur)}}},s);function s(e,t,n){this._config=n,this._cell={row:e,col:t},this._initHandlers()}t.InputEditor=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(11),n=(r.prototype.endEdit=function(e){var t;e||(t=this._input.value),this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("keydown",this._handlers.onkeydown),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()},r.prototype.toHTML=function(){var e=this._cell.col.options.map(function(e){return"string"==typeof e?{id:""+e,value:e}:e})||[],t=this._cell.row[this._cell.col.id];this._input&&(t=this._input.options[this._input.selectedIndex].value);e=e.map(function(e){return i.el("option",{selected:e.id.toString()===t.toString(),value:e.id},e.value)});return this._config.$editable.editor=this,i.el("select.dhx_cell-editor.dhx_cell-editor__select",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor"},e)},r.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onkeydown:function(e){"Escape"===e.key&&t.endEdit()},didInsert:function(e){e=e.el;(t._input=e).focus(),e.addEventListener("blur",t._handlers.onBlur),e.addEventListener("keydown",t._handlers.onkeydown)}}},r);function r(e,t,n){this._config=n,this._cell={row:e,col:t},this._initHandlers()}t.SelectEditor=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(11),o=n(34),a=n(15),l=n(7),n=(i.prototype.endEdit=function(e,t){var n=this;if(this._handlers){var i=this._calendar.config.dateFormat,o=this._cell.row[this._cell.col.id];if(!e){if(o instanceof Date||t)return this._value=this._calendar.getValue(),this._input.value=this._value,void this._popup.hide();a.stringToDate(this._input.value,i,!0)&&(o&&this._input.value.length===o.length||!o)&&(this._value=this._input.value)}this._config.events.fire(s.GridEvents.beforeEditEnd,[this._value,this._cell.row,this._cell.col])?(this._input.removeEventListener("focus",this._handlers.onFocus),this._input.removeEventListener("change",this._handlers.onChange),document.removeEventListener("mousedown",this._handlers.onOuterClick),r.awaitRedraw().then(function(){n._popup.destructor(),n._calendar.destructor()}),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(s.GridEvents.afterEditEnd,[this._value,this._cell.row,this._cell.col])):this._input.focus()}},i.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];return this._config.$editable.editor=this,document.addEventListener("mousedown",this._handlers.onOuterClick),r.el("input.dhx_cell-editor.dhx_cell-editor__input.dhx_cell-editor__datepicker",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:e})},i.prototype._initHandlers=function(){var n=this;this._handlers={onFocus:function(){r.awaitRedraw().then(function(){n._popup.show(n._input,{centering:!0,mode:"bottom"})})},onChange:function(){n.endEdit()},onOuterClick:function(e){var t;e.target instanceof Node&&(t=n._input&&n._input.contains(e.target),e=n._popup&&n._popup.getRootNode()&&n._popup.getRootNode().contains(e.target),t||e||n._popup.hide())},didInsert:function(e){e=e.el;n._input=e,n._input.addEventListener("focus",n._handlers.onFocus),n._input.addEventListener("change",n._handlers.onChange),e.focus(),e.setSelectionRange(e.value.length,e.value.length)}}},i);function i(e,t,n){var i=this;this._config=n,this._cell={row:e,col:t},this._calendar=new o.Calendar(null,{dateFormat:t.format});e=this._cell.row[this._cell.col.id],t=this._calendar.config.dateFormat;(a.stringToDate(e,t,!0)||e instanceof Date)&&(this._calendar.setValue(e),this._value=this._calendar.getValue(),this._cell.row[this._cell.col.id]=this._value),this._popup=new l.Popup,this._popup.attach(this._calendar),this._calendar.events.on(o.CalendarEvents.change,function(){i.endEdit(!1,!0)}),this._popup.events.on(l.PopupEvents.afterHide,function(){i.endEdit()}),this._initHandlers()}t.DateEditor=n},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=this&&this.__assign||function(){return(m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(1),b=n(0),a=n(3),l=n(6),c=n(49),u=n(147),w=n(15),d=n(75),h=n(2),o=(r=l.View,o(f,r),f.prototype.setValue=function(e){if(!e||e instanceof Array&&0===e.length)return!1;this._selected=[];var t=e instanceof Array?e[0]:e,n=w.DateHelper.toDateObject(t,this.config.dateFormat),t=w.DateHelper.copy(this._getSelected());return!!this.events.fire(d.CalendarEvents.beforeChange,[n,t,!1])&&(this._setSelected(e),this._timepicker&&(this._timepicker.setValue(n),this._time=this._timepicker.getValue()),this.showDate(this._getSelected()),this.events.fire(d.CalendarEvents.change,[n,t,!1]),this.paint(),!0)},f.prototype.getValue=function(e){var t=this;return void 0===e&&(e=!1),this._selected[0]?this.config.range?e?this._selected.map(function(e){return w.DateHelper.copy(e)}):this._selected.map(function(e){return w.getFormattedDate(t.config.dateFormat,e)}):e?w.DateHelper.copy(this._selected[0]):w.getFormattedDate(this.config.dateFormat,this._selected[0]):""},f.prototype.getCurrentMode=function(){return this._currentViewMode},f.prototype.showDate=function(e,t){e&&(this._currentDate=w.DateHelper.copy(e)),t&&(this._currentViewMode=t),this.paint()},f.prototype.destructor=function(){this._linkedCalendar&&this._unlink(),this._timepicker&&this._timepicker.destructor(),this.events&&this.events.clear(),this.config=this.events=null,this._uid=this._selected=this._currentDate=this._currentViewMode=this._handlers=this._timepicker=this._time=null,this.unmount()},f.prototype.clear=function(){var e=this.getValue(!0);this.config.timePicker&&(this._timepicker.clear(),this._time=this._timepicker.getValue()),this._selected=[],this.showDate(null,this.config.mode),this.events.fire(d.CalendarEvents.change,[this.getValue(!0),e,!1])},f.prototype.link=function(e){var t=this;this._linkedCalendar&&this._unlink(),this._linkedCalendar=e;var n=this.getValue(!0),i=e.getValue(!0),o=n&&w.DateHelper.dayStart(n),r=i&&w.DateHelper.dayStart(i);this.config.$rangeMark&&this._linkedCalendar.config.$rangeMark||(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=function(e){if(o&&r)return o<=e&&e<=r&&function(e){if(w.DateHelper.isSameDay(r,o))return null;var t="dhx_calendar-day--in-range";return w.DateHelper.isSameDay(e,o)&&(t+=" dhx_calendar-day--first-date"),w.DateHelper.isSameDay(e,r)&&(t+=" dhx_calendar-day--last-date"),t}(e)}),this.config.disabledDates&&this._linkedCalendar.config.disabledDates||(this.config.disabledDates=function(e){if(r)return r<e},this._linkedCalendar.config.disabledDates=function(e){if(o)return e<o}),this.config.thisMonthOnly=!0,e.config.thisMonthOnly=!0,this.events.on(d.CalendarEvents.change,function(e){o=w.DateHelper.dayStart(e),t._linkedCalendar.paint()},"link"),this._linkedCalendar.events.on(d.CalendarEvents.change,function(e){r=w.DateHelper.dayStart(e),t.paint()},"link"),this._linkedCalendar.paint(),this.paint()},f.prototype._unlink=function(){this._linkedCalendar&&(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=null,this.config.disabledDates=this._linkedCalendar.config.disabledDates=null,this.events.detach(d.CalendarEvents.change,"link"),this._linkedCalendar.events.detach(d.CalendarEvents.change,"link"),this._linkedCalendar.paint(),this._linkedCalendar=null)},f.prototype._setSelected=function(e){var n,i=this,t=e instanceof Array?e[0]:e,t=w.DateHelper.toDateObject(t,this.config.dateFormat);e instanceof Array&&this.config.range?(n=[],e.forEach(function(e,t){t<2&&n.push(w.DateHelper.toDateObject(e,i.config.dateFormat))}),2===n.length&&n[0]<n[1]?n.forEach(function(e){return i._selected.push(e)}):this._selected[0]=n[0]):this._selected[0]=t},f.prototype._getSelected=function(){return this._selected[this._selected.length-1]},f.prototype._draw=function(){switch(this._currentViewMode){case"calendar":return this.events.fire(d.CalendarEvents.modeChange,["calendar"]),this._drawCalendar();case"month":return this.events.fire(d.CalendarEvents.modeChange,["month"]),this._drawMonthSelector();case"year":return this.events.fire(d.CalendarEvents.modeChange,["year"]),this._drawYearSelector();case"timepicker":return this.events.fire(d.CalendarEvents.modeChange,["timepicker"]),this._drawTimepicker()}},f.prototype._initHandlers=function(){function i(e){void 0===e&&(e=!1);var t=0;switch(o._currentViewMode){case"calendar":t=e?-7:7;break;case"month":t=e?-4:4;break;case"year":t=e?-4:4}return t}var o=this,r={Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Left:"ArrowLeft",Esc:"Escape",Spacebar:"Space"};this._handlers={onkeydown:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(e,t){switch(48<=(n=e).which&&n.which<=57||65<=n.which&&n.which<=90?String.fromCharCode(n.which):(n=32===n.which?n.code:n.key,h.isIE()&&r[n]||n)){case"Enter":o._selectDate(e,t);break;case"ArrowLeft":o._moveBrowseFocus(e,t,-1);break;case"ArrowRight":o._moveBrowseFocus(e,t,1);break;case"ArrowUp":o._moveBrowseFocus(e,t,i(!0));break;case"ArrowDown":o._moveBrowseFocus(e,t,i())}var n}},onclick:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(e,t){o._selectDate(e,t)},".dhx_calendar-action__cancel":function(){o.showDate(o._getSelected(),"calendar"),o.events.fire(d.CalendarEvents.cancelClick,[])},".dhx_calendar-action__show-month":function(){return o.showDate(null,"month")},".dhx_calendar-action__show-year":function(){return o.showDate(null,"year")},".dhx_calendar-action__next":function(){var e;switch(o._currentViewMode){case"calendar":e=w.DateHelper.addMonth(o._currentDate,1);break;case"month":e=w.DateHelper.addYear(o._currentDate,1);break;case"year":e=w.DateHelper.addYear(o._currentDate,12)}o.showDate(e)},".dhx_calendar-action__prev":function(){var e;switch(o._currentViewMode){case"calendar":e=w.DateHelper.addMonth(o._currentDate,-1);break;case"month":e=w.DateHelper.addYear(o._currentDate,-1);break;case"year":e=w.DateHelper.addYear(o._currentDate,-12)}o.showDate(e)},".dhx_calendar-action__show-timepicker":function(){o._currentViewMode="timepicker",o.paint()}},onmouseover:{".dhx_calendar-day":function(e,t){o.events.fire(d.CalendarEvents.dateMouseOver,[new Date(t.attrs._date),e]),o.events.fire(d.CalendarEvents.dateHover,[new Date(t.attrs._date),e])}}}},f.prototype._getData=function(r){var s=this;this._isSelectedInCurrentRange=!1;for(var e="monday"===this.config.weekStart?1:0,t=[],n=6,a=w.DateHelper.weekStart(w.DateHelper.monthStart(r),e);n--;){for(var i=w.DateHelper.getWeekNumber(a),l=0,o=7,c=[],u=function(){var e,t=w.DateHelper.isWeekEnd(a),n=r.getMonth()===a.getMonth(),i=d.config.disabledDates&&d.config.disabledDates(a),o=[];d.config.range&&d._selected[0]&&d._selected[1]&&(e=function(){if(s._selected[0]&&s._selected[1]){var e=w.DateHelper.dayStart(s._selected[0]),t=w.DateHelper.dayStart(s._selected[1]);return e<=a&&a<=t&&(w.DateHelper.isSameDay(s._selected[0],s._selected[1])?null:"dhx_calendar-day--in-range")}},d.config.$rangeMark=e),t&&n&&o.push("dhx_calendar-day--weekend"),n||(d.config.thisMonthOnly?(l++,o.push("dhx_calendar-day--hidden")):o.push("dhx_calendar-day--muffled")),!d.config.mark||(n=d.config.mark(a))&&o.push(n),d.config.$rangeMark&&(e=d.config.$rangeMark(a))&&o.push(e),i&&(t?o.push("dhx_calendar-day--weekend-disabled"):o.push("dhx_calendar-day--disabled")),d._selected.forEach(function(e,t){e&&w.DateHelper.isSameDay(e,a)&&(s._isSelectedInCurrentRange=!0,e="dhx_calendar-day--selected",s.config.range&&(e+=" dhx_calendar-day--selected-"+(0===t?"first ":"last")),o.push(e))}),c.push({date:a,day:a.getDate(),css:o.join(" ")}),a=w.DateHelper.addDay(a)},d=this;o--;)u();t.push({weekNumber:i,days:c,disabledWeekNumber:7===l})}return t},f.prototype._drawCalendar=function(){for(var e,n=this,t=this._currentDate,i=this.config,o=i.weekStart,r=i.thisMonthOnly,s=i.css,a=i.timePicker,l=i.width,i=("monday"===o?y(w.locale.daysShort.slice(1),[w.locale.daysShort[0]]):w.locale.daysShort).map(function(e){return b.el(".dhx_calendar-weekday",e)}),o=this._getData(t),c=!0,u=this._getSelected(),d=function(e){var t={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(n._isSelectedInCurrentRange?(e=e.date)&&u&&e.getTime()===u.getTime()&&(t.tabindex=0,t["aria-pressed"]="true"):c&&(t.tabindex=0),c=!1),t},h=[],f=[],p=0,g=o;p<g.length;p++){var v=g[p],_=v.days.map(function(e){return b.el("div.dhx_calendar-day",m({class:e.css,_date:e.date},d(e)),e.day)});!this.config.weekNumbers||v.disabledWeekNumber&&r||f.push(b.el("div",{class:"dhx_calendar-week-number"},v.weekNumber)),h=h.concat(_)}this.config.weekNumbers&&(e=b.el(".dhx_calendar__week-numbers",f));s="dhx_calendar dhx_widget"+(s?" "+s:"")+(a?" dhx_calendar--with_timepicker":"")+(this.config.weekNumbers?" dhx_calendar--with_week-numbers":"");return b.el("div",m({class:s,style:{width:this.config.weekNumbers?"calc("+l+" + 48px )":l}},this._handlers),[b.el(".dhx_calendar__wrapper",[this._drawHeader(b.el("button.dhx_calendar-action__show-month.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},w.locale.months[t.getMonth()]+" "+t.getFullYear())),this.config.weekNumbers&&b.el(".dhx_calendar__dates-wrapper",[b.el(".dhx_calendar__weekdays",i),b.el(".dhx_calendar__days",h),e]),!this.config.weekNumbers&&b.el(".dhx_calendar__weekdays",i),!this.config.weekNumbers&&b.el(".dhx_calendar__days",h),a?b.el(".dhx_timepicker__actions",[b.el("button.dhx_calendar__timepicker-button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__show-timepicker",{type:"button"},[b.el("span.dhx_button__icon.dxi.dxi-clock-outline"),b.el("span.dhx_button__text",this._time)])]):null])])},f.prototype._drawMonthSelector=function(){function o(e){return u&&t===e}var e=this._currentDate,t=e.getMonth(),n=this._getSelected()?this._getSelected().getFullYear():null,i=this.config,r=i.css,s=i.timePicker,a=i.weekNumbers,l=i.width,i=i.mode,s="dhx_calendar dhx_widget"+(r?" "+r:"")+(s?" dhx_calendar--with_timepicker":"")+(a?" dhx_calendar--with_week-numbers":""),c=!0,u=n===e.getFullYear();return b.el("div",m({class:s,style:{width:a?"calc("+l+" + 48px)":l}},this._handlers),[b.el(".dhx_calendar__wrapper",[this._drawHeader(b.el("button.dhx_calendar-action__show-year.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},e.getFullYear())),b.el(".dhx_calendar__months",w.locale.monthsShort.map(function(e,t){return b.el("div",m(m({class:"dhx_calendar-month"+(o(t)?" dhx_calendar-month--selected":"")},(n=t,i={role:"button",tabindex:-1,"aria-pressed":"false"},e&&(u?o(n)&&(i.tabindex=0,i["aria-pressed"]="true"):c&&(i.tabindex=0),c=!1),i)),{_date:t}),e);var n,i})),"month"!==i?b.el(".dhx_calendar__actions",[b.el("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},w.locale.cancel)]):null])])},f.prototype._drawYearSelector=function(){function i(e){return t._getSelected()&&e===t._getSelected().getFullYear()}var t=this,e=this._currentDate,n=w.DateHelper.getTwelweYears(e),o=this.config,r=o.css,s=o.timePicker,a=o.weekNumbers,e=o.width,o=o.mode,s="dhx_calendar dhx_widget"+(r?" "+r:"")+(s?" dhx_calendar--with_timepicker":"")+(a?" dhx_calendar--with_week-numbers":""),l=!0,c=this._getSelected()&&n.includes(this._getSelected().getFullYear());return b.el("div",m({class:s,style:{width:a?"calc("+e+" + 48px)":e}},this._handlers),[b.el(".dhx_calendar__wrapper",[this._drawHeader(b.el("button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},n[0]+"-"+n[n.length-1])),b.el(".dhx_calendar__years",n.map(function(e){return b.el("div",m({class:"dhx_calendar-year"+(i(e)?" dhx_calendar-year--selected":""),_date:e},(n={role:"button",tabindex:-1,"aria-pressed":"false"},(t=e)&&(c?i(t)&&(n.tabindex=0,n["aria-pressed"]="true"):l&&(n.tabindex=0),l=!1),n)),e);var t,n})),"year"!==o&&"month"!==o?b.el(".dhx_calendar__actions",[b.el("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},w.locale.cancel)]):null])])},f.prototype._drawHeader=function(e){return b.el(".dhx_calendar__navigation",[b.el("button.dhx_calendar-navigation__button.dhx_calendar-action__prev"+u.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"prev",type:"button"},[b.el(".dhx_button__icon.dxi.dxi-chevron-left")]),e,b.el("button.dhx_calendar-navigation__button.dhx_calendar-action__next"+u.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"next",type:"button"},[b.el(".dhx_button__icon.dxi.dxi-chevron-right")])])},f.prototype._drawTimepicker=function(){var e=this.config,t=e.css,n=e.weekNumbers,e=e.width;return b.el(".dhx_widget.dhx-calendar",{class:t?" "+t:"",style:{width:n?"calc("+e+" + 48px)":e}},[b.inject(this._timepicker.getRootView())])},f.prototype._selectDate=function(e,t){var n=t.attrs._date,i=w.DateHelper.copy(this._getSelected());switch(this._currentViewMode){case"calendar":var o=this.config.timePicker?w.DateHelper.mergeHoursAndMinutes(n,this._getSelected()||this._currentDate):n;if(!this.events.fire(d.CalendarEvents.beforeChange,[o,i,!0]))return;this.config.range&&1===this._selected.length&&this._selected[0]<o?this._selected.push(o):(this._selected=[],this._selected[0]=o),t.el.blur(),this.showDate(this._getSelected()),this.events.fire(d.CalendarEvents.change,[n,i,!0]);break;case"month":if("month"!==this.config.mode)w.DateHelper.setMonth(this._currentDate,n),this.showDate(null,"calendar"),this.events.fire(d.CalendarEvents.monthSelected,[n]);else{var r=w.DateHelper.fromYearAndMonth(this._currentDate.getFullYear()||this._getSelected().getFullYear(),n);if(!this.events.fire(d.CalendarEvents.beforeChange,[r,i,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(d.CalendarEvents.change,[this._getSelected(),i,!0]),this.events.fire(d.CalendarEvents.monthSelected,[n]),this.paint()}break;case"year":if("year"!==this.config.mode)w.DateHelper.setYear(this._currentDate,n),this.showDate(null,"month"),this.events.fire(d.CalendarEvents.yearSelected,[n]);else{r=w.DateHelper.fromYear(n);if(!this.events.fire(d.CalendarEvents.beforeChange,[r,i,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(d.CalendarEvents.change,[this._getSelected(),i,!0]),this.events.fire(d.CalendarEvents.yearSelected,[n]),this.paint()}}},f.prototype._moveBrowseFocus=function(e,t,n){t&&(!(n=t.parent.body[t.idx+n])||(n=n.el)&&(e.target.tabIndex=-1,n.tabIndex=0,n.focus({preventScroll:!0})))},f);function f(e,t){void 0===t&&(t={});var o=r.call(this,e,s.extend({weekStart:"sunday",thisMonthOnly:!1,dateFormat:window&&window.dhx&&window.dhx.dateFormat,width:"250px"},t))||this;switch(o._selected=[],o.events=new a.EventSystem,o.config.disabledDates=o.config.disabledDates||o.config.block,o.config.mode=o.config.mode||o.config.view,o.config.dateFormat||(o.config.timePicker?12===o.config.timeFormat?o.config.dateFormat="%d/%m/%y %h:%i %A":o.config.dateFormat="%d/%m/%y %H:%i":o.config.dateFormat="%d/%m/%y"),o.config.value&&o._setSelected(o.config.value),o.config.date?o._currentDate=w.DateHelper.toDateObject(o.config.date,o.config.dateFormat):o._getSelected()?o._currentDate=w.DateHelper.copy(o._getSelected()):o._currentDate=new Date,o.config.mode){case"month":o._currentViewMode="month";break;case"year":o._currentViewMode="year";break;default:o._currentViewMode="calendar"}o._initHandlers(),o.config.timePicker&&(o._timepicker=new c.Timepicker(null,{timeFormat:o.config.timeFormat,controls:!0}),t=o._getSelected()||new Date,o._timepicker.setValue(t),o._time=o._timepicker.getValue(),o._timepicker.events.on(c.TimepickerEvents.afterClose,function(){o._timepicker.setValue(o._time),o.showDate(null,"calendar")}),o._timepicker.events.on(c.TimepickerEvents.afterApply,function(){var e=o._timepicker.getValue(!0),t=e.hour,n=e.minute,i=e.AM,e=o._getSelected(),i=w.DateHelper.withHoursAndMinutes(o._getSelected()||new Date,t,n,i);o.events.fire(d.CalendarEvents.beforeChange,[i,e,!0])&&(o._selected[o._selected.length-1]=i,o.events.fire(d.CalendarEvents.change,[i,e,!0])),o._time=o._timepicker.getValue(),o.showDate(null,"calendar")}));return o.mount(e,b.create({render:function(){return o._draw()}})),o}t.Calendar=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(0),l=n(3),c=n(6),u=n(12),d=n(71),h=n(145),f=n(146),p=n(74),g=n(2);function v(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}var _,o=(_=c.View,o(m,_),m.prototype.getValue=function(e){12===this.config.timeFormat&&(this._time.hour=this._time.hour%12||12);var t=this._time,n=t.hour,i=t.minute,t=t.AM;if(e){e={hour:n,minute:i};return 12===this.config.timeFormat&&(e.AM=t),e}return(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)+(12===this.config.timeFormat?t?"AM":"PM":"")},m.prototype.setValue=function(e){this._setValue(e),this._hoursSlider.setValue(this._time.hour),this._minutesSlider.setValue(this._time.minute),this._inputsView.paint()},m.prototype.clear=function(){24===this.config.timeFormat?this.setValue("00:00"):this.setValue("12:00AM")},m.prototype.destructor=function(){this._minutesSlider&&this._minutesSlider.destructor(),this._hoursSlider&&this._hoursSlider.destructor(),this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this.events=null,this._handlers=this._time=this._inputsView=this._minutesSlider=this._hoursSlider=null,this.unmount()},m.prototype.getRootView=function(){return this.layout.getRootView()},m.prototype._setValue=function(e){var t,n,i=0,o=0;return"number"==typeof e&&(e=new Date(e)),e instanceof Date?(i=e.getMinutes(),o=e.getHours()):Array.isArray(e)?(o=v(e[0],23),i=v(e[1],59),e[2]&&"pm"===e[2].toLowerCase()&&(t=!0)):"string"==typeof e?(o=v(+(n=e.match(/\d+/g))[0],23),i=v(+n[1],59),e.toLowerCase().includes("pm")&&(t=!0)):"object"==typeof e&&e.hasOwnProperty("hour")&&e.hasOwnProperty("minute")&&(o=e.hour,i=e.minute,t=!e.AM),t&&o<12&&(o+=12),12===this.config.timeFormat&&!f.isTimeCheck(e)&&12<=o&&(t=!0),this._time={hour:o,minute:i,AM:!t}},m.prototype._initUI=function(e){var t=this,n={gravity:!1,css:"dhx_widget dhx_timepicker "+(this.config.css||"")+(this.config.controls?" dhx_timepicker--with-controls":""),rows:[{id:"timepicker",css:"dhx_timepicker__inputs"},{id:"hour-slider",css:"dhx_timepicker__hour"},{id:"minute-slider",css:"dhx_timepicker__minute"}]};this.config.controls&&(n.rows.unshift({id:"close-action",css:"dhx_timepicker__close"}),n.rows.push({id:"save-action",css:"dhx_timepicker__save"}));var i=this.layout=new u.Layout(e,n),o=a.create({render:function(){return t._draw()}}),e=this._inputsView=c.toViewLike(o),n=this._minutesSlider=new d.Slider(null,{min:0,max:59,step:1,tooltip:!1,labelPosition:"top",label:h.default.minutes,value:this.config.value?this._time.minute:0}),o=this._hoursSlider=new d.Slider(null,{min:0,max:23,step:1,tooltip:!1,labelPosition:"top",label:h.default.hours,value:!this.config.value||12===this._time.hour&&this._time.AM?0:this._time.hour});i.getCell("timepicker").attach(e),i.getCell("hour-slider").attach(o),i.getCell("minute-slider").attach(n),this.config.controls&&(i.getCell("save-action").attach(function(){return a.el("button.dhx_timepicker__button-save.dhx_button.dhx_button--view_flat.dhx_button--color_primary.dhx_button--size_small.dhx_button--circle.dhx_button--width_full",{onclick:t._outerHandlers.save,type:"button"},h.default.save)}),i.getCell("close-action").attach(function(){return a.el("button.dhx_timepicker__button-close.dhx_button.dhx_button--view_link.dhx_button--size_medium.dhx_button--view_link.dhx_button--color_secondary.dhx_button--icon.dhx_button--circle",{_ref:"close",onclick:t._outerHandlers.close,type:"button","aria-label":"close timepicker"},[a.el("span.dhx_button__icon.dxi.dxi-close")])}))},m.prototype._initHandlers=function(){function t(e){var t=v(parseInt(e.value,10),59);e.value=t.toString(),i._minutesSlider.setValue(t)}function n(e){var t=v(parseInt(e.value,10),23);e.value=t.toString(),i._hoursSlider.setValue(t)}var i=this;this._handlers={onchange:{".dhx_timepicker-input--hour":function(e){return n(e.target)},".dhx_timepicker-input--minutes":function(e){return t(e.target)}},oninput:{".dhx_timepicker-input--hour":function(e){(g.isSafari()||g.isFirefox())&&n(e.target)},".dhx_timepicker-input--minutes":function(e){(g.isSafari()||g.isFirefox())&&t(e.target)}}},this._outerHandlers={close:function(){i.events.fire(p.TimepickerEvents.beforeClose,[i.getValue("timeObject"===i.config.valueFormat)])&&(i.events.fire(p.TimepickerEvents.afterClose,[i.getValue("timeObject"===i.config.valueFormat)]),i.events.fire(p.TimepickerEvents.close,[]))},save:function(){i.events.fire(p.TimepickerEvents.beforeApply,[i.getValue("timeObject"===i.config.valueFormat)])&&(i.events.fire(p.TimepickerEvents.afterApply,[i.getValue("timeObject"===i.config.valueFormat)]),i.events.fire(p.TimepickerEvents.apply,[i.getValue()]),i.events.fire(p.TimepickerEvents.save,[i._time]))}}},m.prototype._initEvents=function(){var t=this;this._hoursSlider.events.on(d.SliderEvents.change,function(e){e<t._hoursSlider.config.min||e>t._hoursSlider.config.max||(12===t.config.timeFormat?(t._time.AM=e<12,t._time.hour=e%12||12):t._time.hour=e,t.events.fire(p.TimepickerEvents.change,[t.getValue("timeObject"===t.config.valueFormat)]),t._inputsView.paint())}),this._minutesSlider.events.on(d.SliderEvents.change,function(e){e<t._minutesSlider.config.min||e>t._minutesSlider.config.max||(t._time.minute=e,t.events.fire(p.TimepickerEvents.change,[t.getValue("timeObject"===t.config.valueFormat)]),t._inputsView.paint())})},m.prototype._draw=function(){return a.el(".dhx_timepicker-inputs",r({},this._handlers),[a.el("input.dhx_timepicker-input.dhx_timepicker-input--hour",{_key:"hour",_ref:"hour",value:1<this.getValue(!0).hour.toString().length?this.getValue(!0).hour:"0"+this.getValue(!0).hour,"aria-label":"hours"}),a.el("span.dhx_timepicker-delimer",":"),a.el("input.dhx_timepicker-input.dhx_timepicker-input--minutes",{_key:"minute",value:1<this.getValue(!0).minute.toString().length?this.getValue(!0).minute:"0"+this.getValue(!0).minute,"aria-label":"minutes"}),12===this.config.timeFormat?a.el(".dhx_timepicker-ampm",this._time.AM?"AM":"PM"):null])},m);function m(e,t){void 0===t&&(t={});t=_.call(this,e,s.extend({timeFormat:24,controls:!1,valueFormat:"string",actions:!1},t))||this;return t.events=new l.EventSystem(t),t._time={hour:0,minute:0,AM:!0},12===t.config.timeFormat&&(t._time.hour=12),t.config.controls=t.config.controls||t.config.actions,t.config.value&&t._setValue(t.config.value),t._initUI(e),t._initHandlers(),t._initEvents(),t}t.Timepicker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockRange=function(e,t,n){return void 0===n&&(n=!0),n?{min:e.left+window.pageXOffset,max:t.right+window.pageXOffset}:{min:e.top+window.pageYOffset,max:t.bottom+window.pageYOffset}},t.getMarginSize=function(e,t){return e&&("space"===e.type||"wide"===e.type&&t)?10:0}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(69),a=n(142),o=(r=s.Layout,o(l,r),l.prototype._createCell=function(e){var t=e.rows||e.cols||e.views?(e.parent=this._root,new l(this,e)):new a.ProCell(this,e);return this._root._all[t.id]=t,e.init&&e.init(t,e),t},l);function l(e,t){return r.call(this,e,t)||this}t.ProLayout=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(1),d=n(0),s=n(28),n=n(70),o=(r=n.Cell,o(a,r),a.prototype._getFirstRootView=function(e){return void 0===e&&(e=this),e.getParent()&&e.getParent().getRootView()?e.getParent().getRootView():this._getFirstRootView(e.getParent())},a.prototype.toVDOM=function(e){if(null===this.config&&(this.config={}),!this.config.hidden){var t,n=this._calculateStyle(),i=u.isDefined(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:this.config.padding+"px"}:"",o=this.config.full||this.config.html?n:c(c({},n),i);this.config.html||(t=this._ui?((l=this._ui.getRootView()).render&&(l=d.inject(l)),l?[this.scrollView.render(l)]:l||null):e?this.scrollView.render([e]):e||null);var n=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?d.el(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),c(c({},this._resizerHandlers),{_ref:"resizer_"+this._uid}),[d.el("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,r={};if(this.config.on)for(var s in this.config.on)r["on"+s]=this.config.on[s];var a="",l=this.config.cols||this.config.rows;if(this.config.type&&l)switch(this.config.type){case"line":a=" dhx_layout-line";break;case"wide":a=" dhx_layout-wide";break;case"space":a=" dhx_layout-space"}e=d.el(".dhx_layout-cell-content",{".innerHTML":this.config.html,_key:this._uid+"_html",style:i}),e=d.el("div",c(c(((l={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,l),r),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?a:""),style:o}),this.config.full?[d.el("div",{tabindex:this.config.collapsable?"0":"-1",class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&d.el("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&d.el(".dhx_layout-cell-header__image-wrapper",[d.el("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&d.el("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?d.el("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):d.el("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:d.el("div",{style:c(c({},i),{height:"calc(100% - "+(this.config.headerHeight||37)+"px)"}),".innerHTML":this.config.html,class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?a:"")},t)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?t:[this.config.collapsed?null:this.scrollView&&this.scrollView.config.enable?this.scrollView.render([e],this._uid):e]);return n?[e,n]:e}},a);function a(e,t){var n=r.call(this,e,t)||this;return n.scrollView=new s.ScrollView(function(){return n._getFirstRootView()}),n}t.ProCell=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),c=n(0),s=n(3),a=n(19),u=n(6),d=n(7),h=n(73),f=n(2);function p(e,t,n){return e<t?t:n<e?n:e}var g,o=(g=u.View,o(v,g),v.prototype.disable=function(){this._disabled=!0,this.paint()},v.prototype.enable=function(){this._disabled=!1,this.paint()},v.prototype.isDisabled=function(){return this._disabled},v.prototype.focus=function(e){this.getRootView().refs[e?"extraRunner":"runner"].el.focus()},v.prototype.blur=function(){this.getRootView().refs[this._isExtraActive?"extraRunner":"runner"].el.blur()},v.prototype.getValue=function(){var e,t;return this.config.range?(e=this._getValue(this._currentPosition))<(t=this._getValue(this._extraCurrentPosition))?[e,t]:[t,e]:[this._getValue(this._currentPosition)]},v.prototype.setValue=function(e){var t=this._getValue(this._currentPosition);if(Array.isArray(e)&&1<e.length){var n=this._getValue(this._extraCurrentPosition);this._setValue(e[0],!1),this.events.fire(h.SliderEvents.change,[e[0],t,!1]),this._setValue(e[1],!0),this.events.fire(h.SliderEvents.change,[e[1],n,!0])}else{if(e=parseFloat(e),isNaN(e))throw new Error("Wrong value type, for more info check documentation https://docs.dhtmlx.com/suite/slider__api__slider_setvalue_method.html");this._setValue(e),this.events.fire(h.SliderEvents.change,[e,t,!1])}this.paint()},v.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),this._tooltip=null,this.unmount()},v.prototype._calcSliderPosition=function(){var e=this.getRootView();e&&(e=e.refs.track.el.getBoundingClientRect(),this._offsets={left:e.left+window.pageXOffset,top:e.top+window.pageYOffset},this._length="horizontal"===this.config.mode?e.width:e.height)},v.prototype._initHotkeys=function(){var e,t=this,n={arrowLeft:function(e){e.preventDefault(),t._move(-t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))},arrowRight:function(e){e.preventDefault(),t._move(t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))},arrowUp:function(e){e.preventDefault(),t._move(t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))},arrowDown:function(e){e.preventDefault(),t._move(-t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))}};for(e in n)this._keyManager.addHotKey(e,n[e])},v.prototype._move=function(e,t){this.config.inverse&&(e=-e);var n=this.config,i=n.max,o=n.min,r=t?this._getValue(this._extraCurrentPosition):this._getValue(this._currentPosition),n=r+e;this._setValue(r+e,t),(i<n||n<o)&&(n=r),this.events.fire(h.SliderEvents.change,[n,r,t]),this.paint()},v.prototype._initStartPosition=function(){var e,t,n=this.config,i=n.max,o=n.min,r=n.range,n=(e=this.config.value,t=this.config.min,n=this.config.max,(e=void 0===e?[]:Array.isArray(e)?e:"string"==typeof e?e.split(",").map(function(e){return parseInt(e,10)}):[e])[0]=void 0===e[0]?t:p(e[0],t,n),e[1]=void 0===e[1]?n:p(e[1],t,n),e),e=n[0],n=n[1];this._currentPosition=(e-o)/(i-o)*100,r&&(this._extraCurrentPosition=(i-n)/(i-o)*100),this._currentPosition=(e-o)/(i-o)*100,r&&(this._extraCurrentPosition=(n-o)/(i-o)*100),this._isInverse()&&(this._currentPosition=100-this._currentPosition,r&&(this._extraCurrentPosition=100-this._extraCurrentPosition))},v.prototype._getValue=function(e){this._isInverse()&&(e=100-e);var t=this.config,n=t.min,i=t.max,t=t.step;if(100===e)return i;if(0===e)return n;e=e*(i-n)/100,i=e%t,t=t/2<=i?t:0;return+(Number(n)+Number(e)-i+t).toFixed(5)},v.prototype._setValue=function(e,t){void 0===t&&(t=!1);var n=this.config,i=n.max,n=n.min;if(i<e||e<n)return!1;n=(e-n)/(i-n)*100,n=this._isInverse()?100-n:n;t?this._extraCurrentPosition=n:this._currentPosition=n},v.prototype._initHandlers=function(){function t(e){if(e.targetTouches||e.preventDefault(),e=((e.targetTouches?e.targetTouches[0]:e)[i._axis]-i._getBegining())/i._length*100,i._findNewDirection){if(Math.abs(i._currentPosition-e)<1)return;e>i._currentPosition?i._possibleRange=[i._currentPosition,100]:i._possibleRange=[0,i._currentPosition],i._findNewDirection=null}i._inSide(e)&&i._updatePosition(e,i._isExtraActive),i.paint()}function n(e){var t,n;i._disabled||3===e.which||(i.events.fire(h.SliderEvents.mousedown,[e]),i._isMouseMoving=!0,t=e.target.classList.contains("dhx_slider__thumb--extra")?(i._isExtraActive=!0,i._extraCurrentPosition):(i._isExtraActive=!1,i._currentPosition),i._findNewDirection=null,i.config.range?(e=(n=i._currentPosition>i._extraCurrentPosition?[i._currentPosition,i._extraCurrentPosition]:[i._extraCurrentPosition,i._currentPosition])[0],n=n[1],i._currentPosition===i._extraCurrentPosition?(i._findNewDirection=t,i._possibleRange=[0,100]):i._possibleRange=t<e?[0,e]:[n,100]):i._possibleRange=[0,100])}var i=this,o=function(e){i.events.fire(h.SliderEvents.mouseup,[e]),setTimeout(function(){i._isMouseMoving=!1,i.paint()},4),e.targetTouches?(document.removeEventListener("touchend",o),document.removeEventListener("touchmove",t)):(document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",t))};this.config.helpMessage&&(this._helper=new d.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(e){e.preventDefault(),e.stopPropagation(),i._helper.show(e.target)},onmousedown:function(e){n(e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",o)},ontouchstart:function(e){i._setTooltip(e),i._mouseIn=!1,n(e),document.addEventListener("touchmove",t),document.addEventListener("touchend",o),i.paint()},ontouchend:function(e){i._setTooltip(e),i._mouseIn=!1,i.paint()},onlabelClick:function(){i.getRootView().refs.runner.el.focus()},onclick:function(e){var t;i._disabled||i._isMouseMoving||3===e.which||(t=(e[i._axis]-i._getBegining())/i._length*100,e=i.getRootView().refs,!i.config.range||Math.abs(i._currentPosition-t)<Math.abs(i._extraCurrentPosition-t)?(i._updatePosition(t,!1),e.runner.el.focus()):(i._updatePosition(t,!0),e.extraRunner.el.focus()),i.paint())},onmouseover:function(e){i._setTooltip(e),i._mouseIn=!0,i.paint()},onmouseout:function(e){i._setTooltip(e),i._mouseIn=!1,i.paint()},onfocus:function(e){i._setTooltip(e),i._focusIn=!0,i.events.fire(h.SliderEvents.focus,[]),i.paint()},onblur:function(e){i._setTooltip(e),i._focusIn=!1,i.events.fire(h.SliderEvents.blur,[]),i.paint()},onkeydown:function(e){i.events.fire(h.SliderEvents.keydown,[e])}}},v.prototype._getBegining=function(){return"horizontal"===this.config.mode?this._offsets.left-window.pageXOffset:this._offsets.top-window.pageYOffset},v.prototype._inSide=function(e){var t=this._possibleRange;return e<t[0]?(this._updatePosition(t[0],this._isExtraActive),!1):!(e>t[1])||(this._updatePosition(t[1],this._isExtraActive),!1)},v.prototype._updatePosition=function(e,t){void 0===t&&(t=!1),100<e&&(e=100),e<0&&(e=0);var n=this.config,i=n.max,o=n.min,n=t?this._extraCurrentPosition:this._currentPosition,n=this._getValue(n),e=this._getValue(e);n!==e&&(o=(e-o)/(i-o)*100,o=this._isInverse()?100-o:o,t?this._extraCurrentPosition=o:this._currentPosition=o,this.events.fire(h.SliderEvents.change,[e,n,t]))},v.prototype._getRunnerStyle=function(e){void 0===e&&(e=!1);var t="horizontal"===this.config.mode?"left":"top",n=e?this._extraCurrentPosition:this._currentPosition;return(e={})[t]=n+"%",e},v.prototype._isInverse=function(){return this.config.inverse&&"horizontal"===this.config.mode||!this.config.inverse&&"vertical"===this.config.mode},v.prototype._getRunnerCss=function(e){return void 0===e&&(e=!1),"dhx_slider__thumb"+(e?" dhx_slider__thumb--extra":"")+(this._isMouseMoving&&(e&&this._isExtraActive||!e&&!this._isExtraActive)?" dhx_slider__thumb--active":"")+(this._disabled?" dhx_slider__thumb--disabled":"")+(this._isNullable(e?this._extraCurrentPosition:this._currentPosition)&&!this.config.range?" dhx_slider__thumb--nullable":"")},v.prototype._draw=function(){var e=this.config,t=e.labelPosition,n=e.mode,i=e.hiddenLabel,o=e.tick,r=e.majorTick,s=e.css,a=e.helpMessage,e=f.getLabelStyle(l(l({},this.config),{required:!1}));return!this._tooltip||this._mouseIn&&this._focusIn&&this._isMouseMoving||document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),c.el("div",{class:"dhx_slider dhx_slider--mode_"+n+("left"===t?" dhx_slider--label-inline":"")+(i?" dhx_slider--label_sr":"")+(o?" dhx_slider--ticks":"")+(r?" dhx_slider--major-ticks":"")+(s?" "+s:"")+(this._disabled?" dhx_slider--disabled":"")},[e?c.el("label.dhx_label.dhx_slider__label",{style:e.style,class:a?"dhx_label--with-help":"",onclick:this._handlers.onlabelClick},a?[e.label&&c.el("span.dhx_label__holder",e.label),c.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper})]:e.label):null,this._drawSlider()])},v.prototype._drawSlider=function(){return c.el(".dhx_widget.dhx_slider__track-holder",{"data-dhx-widget-id":this._uid},[c.el(".dhx_slider__track",{_ref:"track",onmouseover:this._handlers.onmouseover,onmouseout:this._handlers.onmouseout,onclick:this._handlers.onclick},[this._getDetector(),c.el("div",{_ref:"runner",class:this._getRunnerCss(),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(),tabindex:0}),this.config.tooltip&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip():null,this.config.tooltip&&this.config.range&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip(!0):null,this.config.range?c.el("div",{_ref:"extraRunner",class:this._getRunnerCss(!0),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(!0),tabindex:0}):null]),this.config.tick?this._drawTicks():null])},v.prototype._getDetector=function(){var e;if(this._disabled)return c.el(".dhx_slider__range");var t="horizontal"===this.config.mode?"left":"top",n="horizontal"===this.config.mode?"width":"height";if(this.config.range){var i=this._currentPosition>this._extraCurrentPosition?[this._currentPosition,this._extraCurrentPosition]:[this._extraCurrentPosition,this._currentPosition],o=i[0],r=i[1];return c.el(".dhx_slider__range",{style:((i={})[t]=r+"%",i[n]=o-r+"%",i)})}return this._isInverse()?c.el(".dhx_slider__range",{style:((e={})[t]=this._currentPosition+"%",e[n]=100-this._currentPosition+"%",e)}):c.el(".dhx_slider__range",{style:((e={})[t]=0,e[n]=this._currentPosition+"%",e)})},v.prototype._drawTooltip=function(e){var t,n,i;void 0===e&&(e=!1),"none"!==this._activeTooltip&&this.getRootView()&&(t="extraTooltip"===this._activeTooltip?this._extraCurrentPosition:this._currentPosition,n="horizontal"===this.config.mode?"left":"top",i="",(e&&this._isExtraActive||!e&&!this._isExtraActive)&&(i+=" dhx_slider__thumb-label--active"),this._tooltip||(this._tooltip=document.createElement("div")),e=("tooltip"===this._activeTooltip?this.getRootView().refs.runner:this.getRootView().refs.extraRunner).el.getBoundingClientRect(),this._tooltip.className="dhx_slider__thumb-label"+i,this._tooltip.style.left=e.x+("left"==n?6:-30)+window.pageXOffset+"px",this._tooltip.style.top=e.y+("left"==n?-30:6)+window.pageYOffset+"px",this._tooltip.innerText=this._getValue(t).toString(),document.body.appendChild(this._tooltip))},v.prototype._getTicks=function(){for(var e=this.config,t=e.max,n=e.min,i=e.step,o=e.tick,r=e.majorTick,s=t-n,a=i*o/s,l=[],c=0,u=0;c<1;){var d=+(Number(n)+c*s).toFixed(5),h=u%r==0;l.push({position:(this._isInverse()?100*(1-c):100*c)+"%",isMultiple:h,label:h&&"function"==typeof this.config.tickTemplate?this.config.tickTemplate(d):null}),c+=a,u++}return l.push({position:(this._isInverse()?0:100)+"%",isMultiple:!0,label:"function"==typeof this.config.tickTemplate?this.config.tickTemplate(t):null}),l},v.prototype._drawTicks=function(){var n="horizontal"===this.config.mode?"left":"top";return c.el(".dhx_slider__ticks-holder",this._getTicks().map(function(e){var t;return c.el("div",{class:"dhx_slider__tick"+(e.isMultiple?" dhx_slider__tick--major":""),style:((t={})[n]=e.position,t)},void 0!==e.label?[c.el(".dhx_slider__tick-label",e.label)]:null)}))},v.prototype._isNullable=function(e){return this._isInverse()?100===e:0===e},v.prototype._setTooltip=function(e){e.target.classList.contains("dhx_slider__thumb--extra")?this._activeTooltip="extraTooltip":e.target.classList.contains("dhx_slider__thumb")?this._activeTooltip="tooltip":this._activeTooltip="none"},v);function v(e,t){var n=g.call(this,e,r.extend({mode:"horizontal",min:0,max:100,step:1,tooltip:!0},t))||this;n._disabled=!1,n.config.helpMessage=n.config.helpMessage||n.config.help,void 0!==n.config.thumbLabel&&(n.config.tooltip=n.config.thumbLabel),n.config.labelInline&&(n.config.labelPosition="left"),n.events=new s.EventSystem(n),n._axis="horizontal"===n.config.mode?"clientX":"clientY",n._initStartPosition(),n._keyManager=new a.KeyManager(function(){var e;return document.activeElement===(null===(e=n.getRootView().refs[n._isExtraActive?"extraRunner":"runner"])||void 0===e?void 0:e.el)}),n._initHotkeys();t=c.create({render:function(){return n._draw()},hooks:{didMount:function(){return n._calcSliderPosition()},didRedraw:function(){return n._calcSliderPosition()}}});return n._initHandlers(),n.mount(e,t),n}t.Slider=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),l=n(0),c=n(3),u=n(2),d=n(6),h=n(72),o=(r=d.View,o(f,r),f.prototype.show=function(e,t,n){var i=this;void 0===t&&(t={}),this.events.fire(h.PopupEvents.beforeShow,[e])&&(e=u.toNode(e),this._isActive?this._setPopupSize(e,t):(n&&this.attach(n),this._popup.style.left="0",this._popup.style.top="0",l.awaitRedraw().then(function(){i._setPopupSize(e,t),i._popup.style.position="fixed",document.body.appendChild(i._popup),i._isActive=!0}).then(function(){i._popup.style.position="absolute",i.events.fire(h.PopupEvents.afterShow,[e]),i._outerClickDestructor=i._detectOuterClick(e)})))},f.prototype.hide=function(){this._hide(!1,null)},f.prototype.isVisible=function(){return this._isActive},f.prototype.attach=function(e,t){return this._html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof d.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui},f.prototype.attachHTML=function(e){this._html=e,this.paint()},f.prototype.getWidget=function(){return this._ui},f.prototype.getContainer=function(){return this.getRootView().refs.content.el},f.prototype.toVDOM=function(){var e;return this._html?e=l.el(".dhx_popup__inner-html-content",{".innerHTML":this._html}):(e=this._ui?this._ui.getRootView():null)&&e.render&&(e=l.inject(e)),l.el("div",{class:"dhx_popup-content",tabindex:0,onclick:this._clickEvent,_key:this._uid,_ref:"content"},[e])},f.prototype.destructor=function(){this.hide(),this._outerClickDestructor&&this._outerClickDestructor(),this._popup=null},f.prototype._setPopupSize=function(e,t,n){var i=this;void 0===n&&(n=3);var o=this._popup.getBoundingClientRect(),r=o.width,o=o.height;if(this._timeout&&(clearTimeout(this._timeout),this._timeout=null),!n||0!==r&&0!==o){r=u.fitPosition(e,s(s({centering:!0,mode:"bottom"},t),{width:r,height:o})),o=r.left,r=r.top;if(this._popup.style.left=o,this._popup.style.top=r,t.indent&&0!==t.indent)switch(t.mode){case"top":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"bottom":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px";break;case"left":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"right":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px";break;default:this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px"}}else this._timeout=setTimeout(function(){i._isActive&&(i._setPopupSize(e,t,n-1),i._timeout=null)})},f.prototype._detectOuterClick=function(n){var i=this,o=function(e){for(var t=e.target;t;){if(t===n||t===i._popup)return;t=t.parentNode}i._hide(!0,e)&&document.removeEventListener("mousedown",o)};return document.addEventListener("mousedown",o),function(){return document.removeEventListener("mousedown",o)}},f.prototype._hide=function(e,t){if(this._isActive)return!!this.events.fire(h.PopupEvents.beforeHide,[e,t])&&(document.body.removeChild(this._popup),this._isActive=!1,this._outerClickDestructor&&(this._outerClickDestructor(),this._outerClickDestructor=null),this.events.fire(h.PopupEvents.afterHide,[t]),!0)},f);function f(e){void 0===e&&(e={});var t=r.call(this,null,a.extend({},e))||this,n=t._popup=document.createElement("div");return n.className="dhx_widget dhx_popup"+(t.config.css?" "+t.config.css:""),n.style.position="absolute",n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-live","polite"),t.mount(n,l.create({render:function(){return t.toVDOM()}})),t._clickEvent=function(e){return t.events.fire(h.PopupEvents.click,[e])},t.events=e.events||new c.EventSystem(t),t._isActive=!1,t}t.Popup=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={hours:"Hours",minutes:"Minutes",save:"Save"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeCheck=function(e){return/(^12:[0-5][0-9]?AM$)/i.test(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkButtonClasses=".dhx_button.dhx_button--view_link.dhx_button--icon.dhx_button--size_medium.dhx_button--color_secondary"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(11),n=(s.prototype.endEdit=function(){var e=this._checked;this._config.events.fire(r.GridEvents.beforeEditEnd,[e,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(r.GridEvents.afterEditEnd,[e,this._cell.row,this._cell.col])):this._input.checked=!e},s.prototype.toHTML=function(){void 0===this._checked&&(this._checked=this._cell.row[this._cell.col.id]);var e=i.uid();return o.el("div.dhx_checkbox.dhx_cell-editor__checkbox",[o.el("label",{style:{display:"none"},for:e},this._checked||"false"),o.el("input.dhx_checkbox__input",{type:"checkbox",_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",checked:this._checked,id:e,style:{userSelect:"none"}}),o.el("span.dhx_checkbox__visual-input")])},s.prototype._initHandlers=function(){var t=this;this._handlers={onClick:function(){var e=!t._input.checked;t._config.events.fire(r.GridEvents.beforeEditStart,[t._cell.row,t._cell.col,"checkbox"])?(t._checked=e,t._config.events.fire(r.GridEvents.afterEditStart,[t._cell.row,t._cell.col,"checkbox"]),t.endEdit()):t._input.checked=!e},didInsert:function(e){t._checkbox=e.el.parentNode.lastChild,t._input=e.el.parentNode.querySelector("input"),e.el.parentNode.addEventListener("click",t._handlers.onClick)}}},s);function s(e,t,n){this._config=n,this._cell={row:e,col:t},this._initHandlers()}t.CheckboxEditor=n},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(11),s=n(35),a=n(16),n=(l.prototype.endEdit=function(e){var t,n=this;e||(t=this._input.getValue(),t="multiselect"===this._cell.col.editorType?t.split(",").join(", "):t),this._config.events.fire(r.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.popup.hide(),document.removeEventListener("mousedown",this._handlers.onOuterClick),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),a.focusManager.setFocusId(this._config.gridId),null!=t&&t.toString().split(", ").forEach(function(t){var e=n._cell.col.options.find(function(e){return"string"==typeof e?e===t:e.id.toString()===t});t&&!e&&n._cell.col.options.push(n._input.data.getItem(t))}),this._config.events.fire(r.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()},l.prototype.toHTML=function(){var t=this,e=this._cell.col.options.map(function(e){return"string"==typeof e?{id:""+e,value:e}:e})||[];return this._input||(this._input=new s.Combobox(null,i({itemHeight:37,css:"dhx_cell-editor__combobox",multiselection:"multiselect"===this._cell.col.editorType},this._cell.col.editorConfig)),this._input.data.parse(e),e=this._cell.row[this._cell.col.id],e="multiselect"===this._cell.col.editorType?((null==e?void 0:e.toString())||"").split(", "):e,this._input.setValue(e),this._input.events.on("keydown",this._handlers.onkeydown)),document.addEventListener("mousedown",this._handlers.onOuterClick),this._config.$editable.editor=this,o.awaitRedraw().then(function(){var e=t._input.getRootView().refs.holder.el;t._input.popup.getContainer().style.width=e.offsetWidth+"px",t._input.popup.show(e)}),a.focusManager.setFocusId(this._input._uid),o.inject(this._input.getRootView())},l.prototype._initHandlers=function(){var n=this;this._handlers={onOuterClick:function(e){var t;e.target instanceof Node&&(t=n._input&&n._input.getRootNode()&&n._input.getRootNode().contains(e.target),e=n._input.popup&&n._input.popup.getRootNode()&&n._input.popup.getRootNode().contains(e.target),t||e||n.endEdit())},onkeydown:function(e){"Escape"!==e.key&&"Tab"!==e.key||n.endEdit()}}},l);function l(e,t,n){this._config=n,this._cell={row:e,col:t},this._initHandlers()}t.ComboboxEditor=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CODES={BACKSPACE:8,ENTER:13,ESC:27,DOWN_ARROW:40,UP_ARROW:38,LEFT_ARROW:37,RIGHT_ARROW:39}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(152);t.getEditor=function(e,t){return new i.InputEditor(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(51),n=(r.prototype.endEdit=function(){var e;this._input&&(e=this._input.value,this._list.events.fire(o.ListEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._list.events.fire(o.ListEvents.afterEditEnd,[e,this._item.id])):this._input.focus())},r.prototype.toHTML=function(){this._mode=!0;var e=this._config.itemHeight;return i.el(".dhx_input__wrapper",{role:"presentation"},[i.el("div.dhx_input__container",{role:"presentation"},[i.el("input.dhx_input",{class:this._item.css?" "+this._item.css:"",style:{height:e,width:"100%",padding:"8px 12px"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},r.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onChange:function(){t.endEdit()},onKeyDown:function(e){"Enter"===e.key&&t._item.value===t._input.value&&t.endEdit(),"Escape"===e.key&&(t._input.value=t._item.value,t.endEdit())},didInsert:function(e){e=e.el;(t._input=e).focus(),e.value=t._item.value,e.setSelectionRange(0,e.value.length),e.addEventListener("change",t._handlers.onChange),e.addEventListener("blur",t._handlers.onBlur),e.addEventListener("keydown",t._handlers.onKeyDown)}}},r);function r(e,t){var n=this;this._list=t,this._config=t.config,this._item=e,this._list.events.on(o.ListEvents.focusChange,function(e,t){n._mode&&t!==n._item.id&&n.endEdit()}),this._initHandlers()}t.InputEditor=n},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(0),c=n(28),n=n(77),o=(a=n.List,o(u,a),u.prototype.destructor=function(){a.prototype.destructor.call(this),this.scrollView=null},u.prototype.showItem=function(e){var t,n,i,o=this.getRootView();o&&o.node&&o.node.el&&void 0!==e&&((t=this.getRootNode())&&(n=this.config.virtual,i=this.data.getIndex(e),o=Math.floor(i/t.children.length)||0,e=t.children[i-t.children.length*o],(n||e)&&(o=n?parseInt(this.config.itemHeight):e.clientHeight,(e=n?i*o:e.offsetTop)>=t.scrollTop+t.clientHeight-o?t.scrollTo(0,e-t.clientHeight+o):e<t.scrollTop&&t.scrollTo(0,e))))},u.prototype._renderList=function(){var n=this,e=this._getRange(),t=this.data.getRawData(e[0],e[1]).map(function(e,t){return n._renderItem(e,t)});this.config.virtual&&(t=s([l.el(".div",{style:{height:e[2]+"px"}})],t,[l.el(".div",{style:{height:e[3]+"px"}})]));var i=this.scrollView&&this.scrollView.config.enable,e=(this.config.css||"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(i?" dhx_list--scroll-view":"");return l.el("ul.dhx_widget.dhx_list",r(r({style:{"max-height":this.config.height,position:"relative"},class:e,"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),i?[].concat(this.scrollView.render(t)):t)},u);function u(e,t){var n=a.call(this,e,t)||this;return n.scrollView=new c.ScrollView(function(){return n.getRootView()}),n.paint(),n}t.ProList=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.startNewListen=function(e){this._isActive=!0,this._sequence="",this._currentAction=e},o.prototype.endListen=function(){this._currentAction=null,this.reset(),this._isActive=!1},o.prototype.reset=function(){this._sequence=""},o.prototype._change=function(){this._currentAction(this._sequence),this._addClearTimeout()},o.prototype._addClearTimeout=function(){var e=this;this._clearTimeout&&clearTimeout(this._clearTimeout),this._clearTimeout=setTimeout(function(){e.reset(),e._clearTimeout=null},2e3)},o);function o(){var t=this;this._sequence="",document.addEventListener("keydown",function(e){t._isActive&&("Backspace"===(e=e.key)&&0<t._sequence.length&&(t._sequence=t._sequence.slice(0,t._sequence.length-1),t._change()),e.length<2&&(t._sequence+=e,t._change()))})}t.KeyListener=i},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(76),a=n(36),l=n(12),c=n(80),o=(r=s.Combobox,o(u,r),u.prototype._createLayout=function(){var e=this.list=new a.ProList(null,{template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!1,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),t=this._layout=new l.ProLayout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});t.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&t.getCell("select-unselect-all").attach(c.selectAllView)},u);function u(e,t){return r.call(this,e,t)||this}t.ProCombobox=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(11),o=n(1),a=n(24),n=(l.prototype.endEdit=function(e){var t;e||(t=this._editor.value),this._config.events.fire(s.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._editor.removeEventListener("blur",this._handlers.onBlur),this._editor.removeEventListener("change",this._handlers.onChange),this._editor.removeEventListener("input",this._handlers.onInput),"string"!==this._cell.col.type&&o.isNumeric(t)&&(t=parseFloat(t)),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(s.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._editor.focus()},l.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];this._editor&&(e=this._editor.value);var t=void 0!==(this._config.$editable.editor=this)._cell.row.height||this._cell.col.htmlEnable?"dhx_cell-editor dhx_cell-editor__textarea_constant-height":"dhx_cell-editor dhx_cell-editor__textarea";return i.el("textarea",{_hooks:{didInsert:this._handlers.didInsert},_ref:"textarea",_key:"cell_editor","data-dhx-id":"cell_editor",value:e,class:t,style:{width:this._width}})},l.prototype._initHandlers=function(){var o=this;this._handlers={onBlur:function(){o.endEdit()},onChange:function(){o.endEdit()},onInput:function(e){if(void 0===o._cell.row.height&&!o._cell.col.htmlEnable){var t=o._getCurrentHeight(o._editor.value,{width:o._cell.col.$width-2,maxHeight:o._config.rowHeight});o._cell.row[o._cell.col.id]=o._editor.value;var n=a.getCalculatedRowHeight(a.getMaxRowHeight(o._cell.row,o._config.columns)),i=a.getCalculatedRowHeight(a.getMaxRowHeight(((i={})[o._cell.col.id]=o._cell.row[o._cell.col.id],i),o._config.columns));if(o._minHeight=n===i?o._config.rowHeight:n,t>=o._minHeight&&t!==o._prevHeight){if(!o._config.events.fire(s.GridEvents.beforeRowResize,[o._cell.row,e,t]))return;o._config.events.fire(s.GridEvents.afterRowResize,[o._cell.row,e,t])}o._prevHeight=t}},didInsert:function(e){o._editor=e.el,o._editor.focus(),o._editor.setSelectionRange(0,o._editor.value.length),o._editor.addEventListener("change",o._handlers.onChange),o._editor.addEventListener("blur",o._handlers.onBlur),o._editor.addEventListener("input",o._handlers.onInput)}}},l.prototype._getCurrentHeight=function(e,t){t=r({width:100,maxHeight:40,lineHeight:20},t);var n=document.createElement("textarea");n.className="dhx_cell-editor dhx_cell-editor__textarea",n.value=e,n.style.width=t.width+"px",n.style.lineHeight=t.lineHeight+"px",n.style.maxHeight=t.maxHeight+"px",n.style.boxSizing="border-box",document.body.appendChild(n);var i=this._getElementHeight(n),o=n.value.split("\n").length,e=Math.round(i/t.lineHeight),i=i<t.maxHeight?t.maxHeight:i;return document.body.removeChild(n),1===o&&o===e?t.maxHeight:i},l.prototype._getElementHeight=function(e){return e.scrollHeight},l);function l(e,t,n){this._config=n,this._cell={row:e,col:t},this._width=this._cell.col.$width;t=0;this._config.firstColId===this._cell.col.id&&this._cell.row.hasOwnProperty("$level")&&(t=a.getTreeCellWidthOffset(this._cell.row)),this._width-=t-4,this._initHandlers()}t.TextAreaEditor=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(35),c=n(10),u=n(11),i=n(24),d=n(2),o=n(1);function r(t,n,i,o,r){function e(){var e=(d.isIE()||d.isSafari()?r.target:r.path?r.path[0]:r.explicitOriginalTarget).value;o.value[n]=e,t.fire(u.GridEvents.filterChange,[e,n,i])}"selectFilter"!==i?(s&&clearTimeout(s),s=setTimeout(e,500)):e()}function h(e,i,t,n){if(e&&i&&t){var o=e.id,e=n?n(o,i.data):i.data.reduce(function(e,t){return void 0===t[o]||""===t[o]||isNaN(t[o])||e.push(parseFloat(t[o])),e},[]),n=e;return"tree"===i.type&&(n=i.data.reduce(function(e,t){var n;return 0===t.$level&&(void 0===t[o]||""===t[o]||isNaN(t[o])?(n=0,i.datacollection.eachChild(t.id,function(e){i.datacollection.haveItems(e.id)||(n+=parseFloat(e[o]))}),e.push(n)):e.push(parseFloat(t[o])||0)),e},[])),t(e,n)}}t.getContent=function(){var n=this;return{inputFilter:{element:{},toHtml:function(e,t){var n=o.uid(),i=e.id.toString();return this.element[i]=a.el("div.dhx_grid-filter__label.dxi.dxi-magnify",{"aria-label":"Type to search",_ref:e.id+"_filter"},[a.el("label",{style:{display:"none"},"aria-label":"Type to search",for:n},"Type to search"),a.el("input",{type:"text",class:"dhx_input dhx_grid-filter",oninput:[r,t.events,e.id,"inputFilter",this],_key:e.id,id:n,value:this.value[e.id]||""})]),this.element[i]},match:function(e,t){for(var n="",i=0;i<t.length;i++){var o=t.charCodeAt(i);n+=32<o&&o<48||63===o||90<o&&o<95||124===o?"\\"+t[i]:t[i]}return new RegExp(""+n,"i").test(e)},value:{}},selectFilter:{element:{},toHtml:function(n,e){var t=this,i=n.id.toString(),o=n.$uniqueData;return"combobox"!==n.editorType&&"select"!==n.editorType&&"multiselect"!==n.editorType||!n.options||(o=o.map(function(t){var e=n.options.find(function(e){return"string"==typeof e?t===e:t===e.id});return e&&"string"!=typeof e?e.value:t})),this.element[i]=a.el("label.dhx_grid-filter__label.dxi.dxi-menu-down",{_ref:n.id+"_filter"},[a.el("select.dxi.dxi-menu-down",{type:"text",class:"dhx_input dhx_grid-filter dhx_grid-filter--select",onchange:[r,e.events,n.id,"selectFilter",this],_key:n.id},[a.el("option",{value:""},""),o.map(function(e){return""!==(e=null!=e?e:"")&&a.el("option",{value:e,selected:t.value[n.id]===e.toString()},e)})])]),this.element[i]},match:function(e,t){return!t||(e||"boolean"==typeof e)&&e.toString()==t},value:{}},comboFilter:{element:{},toHtml:function(n,i){var e,o,r=n.id.toString();return!this.element[r]&&i.events?(e=n.header.filter(function(e){return void 0!==e.filterConfig})[0],(o=e&&e.filterConfig?new l.Combobox(null,Object.assign({},e.filterConfig)):new l.Combobox(null,{})).data.parse(n.$uniqueData.map(function(e){return{value:e}})),i.events.on(c.DataEvents.load,function(){o.data.parse(n.$uniqueData.map(function(e){return{value:e}}))}),(this.element[r]=o).events.on("change",function(e){var t;e&&(t=void 0,(Array.isArray(e)?e.find(function(e){return o.data.getItem(e)}):o.data.getItem(e))?(t=o.config.multiselection?o.list.selection.getItem().map(function(e){if(e&&o.data.getItem(e.id))return e.value}):o.list.selection.getItem().value,i.events.fire(u.GridEvents.filterChange,[t,r,"comboFilter"])):i.events.fire(u.GridEvents.filterChange,["",r,"comboFilter"]))}),i.events.on(c.DataEvents.change,function(e,t){"add"!==t&&"update"!==t&&"remove"!==t||(t=n.$uniqueData,"combobox"!==n.editorType&&"select"!==n.editorType&&"multiselect"!==n.editorType||!n.options||(t=t.map(function(t){var e=n.options.find(function(e){return"string"==typeof e?t===e:t===e.id});return e&&"string"!=typeof e?e.value:t})),o.data.parse(t.map(function(e){return{value:e}})),o.events.fire(l.ComboboxEvents.change,[o.list.selection.getItem()]))}),i.events.on(c.DataEvents.removeAll,function(){o.data.parse(n.$uniqueData.map(function(e){return{value:e}})),o.events.fire(l.ComboboxEvents.change,[o.list.selection.getItem()])}),o.popup.events.on("afterHide",function(){o.list.selection.getItem()&&(!o.config.multiselection||o.list.selection.getItem().length)||(o.clear(),i.events.fire(u.GridEvents.filterChange,["",r,"comboFilter"]))})):o=this.element[n.id]||new l.Combobox(null,{}),a.inject(o.getRootView())},match:function(e,n,t,i){if(void 0===n&&(n=""),void 0===i&&(i=!1),Array.isArray(n)){for(var o=void 0,r=0;r<n.length;r++)if("break"===function(t){if(o=i?!!e.split(", ").find(function(e){return e===n[t]}):n[t]===e)return"break"}(r))break;return!n||!n.length||o}return""===n||e===n},destroy:function(){if(n.content&&n.content.comboFilter.element){var e,t=n.content.comboFilter.element;for(e in t)t[e].destructor(),delete t[e]}},value:{}},sum:{calculate:function(e,t){return t.reduce(function(e,t){return e+(parseFloat(t)||0)},0)},toHtml:function(e,t){t=h(e,t,this.calculate);return e.format||"percent"===e.type?i.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},avg:{calculate:function(e,t){return e.length?t.reduce(function(e,t){return e+t},0)/e.length:null},toHtml:function(e,t){t=h(e,t,this.calculate);return e.format||"percent"===e.type?i.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},min:{calculate:function(e){return e.length?Math.min.apply(Math,e):null},toHtml:function(e,t){t=h(e,t,this.calculate);return e.format||"percent"===e.type?i.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},max:{calculate:function(e){return e.length?Math.max.apply(Math,e):null},toHtml:function(e,t){t=h(e,t,this.calculate);return e.format||"percent"===e.type?i.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},count:{calculate:function(e,t){return t.reduce(function(e,t){return e+t},0)},validate:function(n,e){return e.reduce(function(e,t){return void 0!==t[n]&&""!==t[n]&&(isNaN(t)?e.push(1):e.push(t)),e},[])},toHtml:function(e,t){return h(e,t,this.calculate,this.validate)}}}}},function(e,t,n){"use strict";var h=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var f=n(1),p=n(11),g=n(2);t.startResize=function(a,l,e,t){e.targetTouches&&e.preventDefault();var c=(e.targetTouches?e.targetTouches[0]:e).clientX,u=a.config.columns.filter(function(e){return!e.hidden}),d=0;function n(e){var t,n,i=f.findIndex(u,function(e){return e.id===l}),o=(e.targetTouches?e.targetTouches[0]:e).clientX,r=o-a.getRootNode().getBoundingClientRect().left,s=a.config.$totalHeight>a.config.height?g.getScrollbarWidth():0;a.config.leftSplit===i+1&&r>=a.config.width-s-2||(d=d||u[i].$width,t=u[i].minWidth||40,r=u[i].maxWidth,s=o-c,o=h(u),s=d+s,r&&r<=s||s<=t?(s<=t&&(n=t),r<=s&&(n=r)):n=s,o[i].$width=n,o[i].$fixed=!0,a.events.fire(p.GridEvents.resize,[u[i],e]),a.paint())}a.config.$resizing=l;var i=function(){e.targetTouches?(document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i)):(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)),t()};e.targetTouches?(document.addEventListener("touchmove",n),document.addEventListener("touchend",i)):(document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)),a.paint()}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),u=n(2),a=n(20);function l(e,t,n,i,o,r,s){var a,l,c;void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===s&&(s=!1),t.config.$editable||!t.config.selection||u.locateNodeByClassName(e,"dhx_grid-header-cell")||(e&&e.preventDefault(),a=t.selection.getCell(),e=t.config.columns.filter(function(e){return!e.hidden}),a&&("vertical"===n?o?(l=1===i?t.data.getItem(t.data.getId(t.data.getLength()-1)):t.data.getItem(t.data.getId(0)),t.selection.setCell(l.id,a.column.id,r,s),t.scrollTo(l.id.toString(),a.column.id.toString())):0<=(c=t.data.getIndex(a.row.id.toString()))+i&&c+i<t.data.getLength()&&(l=t.data.getItem(t.data.getId(c+i)),t.selection.setCell(l.id,a.column.id,r,s),t.scrollTo(l.id.toString(),a.column.id.toString())):o?(l=1===i?e[e.length-1]:e[0],t.selection.setCell(a.row.id,l.id,r,s),t.scrollTo(a.row.id.toString(),l.id.toString())):0<=(c=e.indexOf(a.column))+i&&c+i<e.length&&(t.selection.setCell(a.row.id,e[c+i].id,r,s),t.scrollTo(a.row.id.toString(),e[c+i].id.toString()))))}t.selectionMove=l,t.getKeysHandlers=function(o){var e,i="cell"===o.config.selection||"complex"===o.config.selection||!0===o.config.selection,t={};if(o.getRootView()){var n=null===(e=null===(e=null===(e=o.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.grid_body)||void 0===e?void 0:e.el;if(!n)return;t={pageUp:function(e){e.preventDefault(),n.scrollTop-=n.clientHeight},pageDown:function(e){e.preventDefault(),n.scrollTop+=n.clientHeight},home:function(e){e.preventDefault(),n.scrollTop=0},end:function(e){e.preventDefault(),n.scrollTop+=n.scrollHeight}}}return r({enter:function(e){var t,n=u.locateNodeByClassName(e,"dhx_grid-header-cell");n&&(t=n.getAttribute("data-dhx-id"),n=e.target.getAttribute("dhx_resized"),!t||(e=o.getColumn(t))&&a.isSortable(o.config,e)&&!n&&o.events.fire(s.GridEvents.afterSort,[t])),i?(t=o.selection.getCell())&&(!1!==t.column.editable&&o.config.editable||t.column.editable)&&(o.config.$editable?o.editEnd():"boolean"!==t.column.type?o.editCell(t.row.id,t.column.id,t.column.editorType):o.events.fire(s.GridEvents.afterEditEnd,[!t.row[t.column.id],t.row,t.column])):o.config.$editable&&o.editEnd()},space:function(e){var t,n=o.selection.getCell();i&&(null!==(t=null==n?void 0:n.column.editable)&&void 0!==t?t:o.config.editable)&&!o.config.$editable&&n&&"boolean"===n.column.type&&(e.preventDefault(),o.events.fire(s.GridEvents.afterEditEnd,[!n.row[n.column.id],n.row,n.column]))},escape:function(){o.config.$editable&&o.editEnd(!0)},tab:function(e){var t,n,i;o.config.selection&&!u.locateNodeByClassName(e,"dhx_grid-header-cell")&&(o.config.$editable&&o.editEnd(),i=o.selection.getCell(),t=o.config.columns.filter(function(e){return!e.hidden}),i&&(0<=(n=t.indexOf(i.column)+1)&&n<t.length?(e&&e.preventDefault(),o.selection.setCell(i.row.id,t[n].id),o.scrollTo(i.row.id.toString(),t[n].id.toString())):0<=n&&((i=o.data.getIndex(i.row.id.toString())+1)<o.data.getLength()&&(e&&e.preventDefault(),o.selection.setCell(o.data.getId(i),t[0].id),o.scrollTo(o.data.getId(i).toString(),t[0].id.toString())))))},"shift+tab":function(e){var t,n,i;o.config.selection&&!u.locateNodeByClassName(e,"dhx_grid-header-cell")&&(o.config.$editable&&o.editEnd(),i=o.selection.getCell(),t=o.config.columns.filter(function(e){return!e.hidden}),i&&(0<=(n=t.indexOf(i.column)-1)&&n<t.length?(e&&e.preventDefault(),o.selection.setCell(i.row.id,t[n].id),o.scrollTo(i.row.id.toString(),t[n].id.toString())):n<o.data.getLength()&&(0<=(i=o.data.getIndex(i.row.id.toString())-1)&&(e&&e.preventDefault(),o.selection.setCell(o.data.getId(i),t[t.length-1].id),o.scrollTo(o.data.getId(i).toString(),t[t.length-1].id.toString())))))},arrowUp:function(e){l(e,o,"vertical",-1)},"ctrl+arrowUp":function(e){l(e,o,"vertical",-1,!0)},"shift+arrowUp":function(e){o.config.multiselection&&l(e,o,"vertical",-1,!1,!1,!0)},"ctrl+shift+arrowUp":function(e){o.config.multiselection&&l(e,o,"vertical",-1,!0,!1,!0)},arrowDown:function(e){l(e,o,"vertical",1)},"ctrl+arrowDown":function(e){l(e,o,"vertical",1,!0)},"shift+arrowDown":function(e){o.config.multiselection&&l(e,o,"vertical",1,!1,!1,!0)},"ctrl+shift+arrowDown":function(e){o.config.multiselection&&l(e,o,"vertical",1,!0,!1,!0)},arrowRight:function(e){l(e,o,"horizontal",1)},"ctrl+arrowRight":function(e){l(e,o,"horizontal",1,!0)},"shift+arrowRight":function(e){o.config.multiselection&&l(e,o,"horizontal",1,!1,!1,!0)},"ctrl+shift+arrowRight":function(e){o.config.multiselection&&l(e,o,"horizontal",1,!0,!1,!0)},arrowLeft:function(e){l(e,o,"horizontal",-1)},"ctrl+arrowLeft":function(e){l(e,o,"horizontal",-1,!0)},"shift+arrowLeft":function(e){o.config.multiselection&&l(e,o,"horizontal",-1,!1,!1,!0)},"ctrl+shift+arrowLeft":function(e){o.config.multiselection&&l(e,o,"horizontal",-1,!0,!1,!0)}},t)}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(67),l=n(11),c=n(10),u=n(2),d=n(24),h=n(68),f=n(0),p=n(28),o=(s=a.Grid,o(g,s),g.prototype._createView=function(){var n=this;return f.create({render:function(e,t){return h.proRender(e,t,n._htmlEvents,n.selection,n._uid)}},this)},g.prototype._setEventHandlers=function(){var r=this;s.prototype._setEventHandlers.call(this),this.events.on(l.GridEvents.headerCellMouseDown,function(e,t){var n=u.locateNodeByClassName(t,"dhx_header-row"),n=n&&n.getAttribute("aria-rowindex");null!==(n=e.header[Number(n)-1])&&void 0!==n&&n.content||(t.targetTouches?r._touch.timer=setTimeout(function(){r._dragStartColumn(t,e)},r._touch.duration):r._dragStartColumn(t,e))}),this._events.on(l.GridSystemEvents.headerCellTouchMove,function(e,t){r._touch.start&&t.preventDefault(),r._clearTouchTimer()}),this._events.on(l.GridSystemEvents.headerCellTouchEnd,function(){r._touch.start=!1,r._clearTouchTimer()}),this.events.on(l.GridEvents.resize,function(){r._parseColumns(),r._checkFilters()}),this.events.on(l.GridEvents.afterResizeEnd,function(){r.config.autoHeight&&(r.config.data=r.data.map(function(e){var t=d.getMaxRowHeight(e,r.config.columns);return e.$height=d.getCalculatedRowHeight(t,{rowHeight:r.config.rowHeight,padding:8}),e}))}),this.events.on(l.GridEvents.afterRowResize,function(e,t,n){var i=r.data.getItem(e.id),o=i.id,e=i.height,i=i.$height;e&&e!==i&&r.data.update(o,{height:n}),r.data.update(o,{$height:n},!0),r.config.data=r.data.map(function(e){return e}),r.paint()}),this.events.on(l.GridEvents.scroll,function(){r._lazyLoad()}),this.events.on(c.DataEvents.dataRequest,function(e,t){var n=r.data.dataProxy;n&&n.config&&r._prepareDataFromTo(r.data,e,t)})},g.prototype._prepareData=function(e){var t,n=this;return this._adjustColumns(),(Array.isArray(e)||c.isTreeCollection(e)?e:0!==(t=e.getInitialData()||[]).length?t:e.getRawData(0,e.getLength())).map(function(e){var t;return n.config.autoHeight&&void 0===e.height?(t=d.getMaxRowHeight(e,n.config.columns),e.$height=d.getCalculatedRowHeight(t,{rowHeight:n.config.rowHeight,padding:8})||n.config.rowHeight):e.$height=e.height||n.config.rowHeight,e})},g.prototype._prepareDataFromTo=function(e,t,n){var i=this;return e.mapRange(t,n,function(e){var t=d.getMaxRowHeight(e,i.config.columns);return e.$height=d.getCalculatedRowHeight(t,{rowHeight:i.config.rowHeight,padding:8})||i.config.rowHeight,e})},g.prototype._lazyLoad=function(){var e,t,n,i,o=this,r=this.data.dataProxy;r&&r.config&&(e=this.data.getRawData(0,-1,null,2),t=h.getRenderConfig(this,e,{width:this.config.width,height:this.config.height}),n=this.data.getIndex(null===(e=t.currentRows[0])||void 0===e?void 0:e.id.toString()),i=this.data.getIndex(null===(t=t.currentRows[t.currentRows.length-1])||void 0===t?void 0:t.id.toString()),!this.data.isDataLoaded(n,i)&&this.data.events.fire(c.DataEvents.beforeLazyLoad,[])&&(r.updateUrl(null,{from:n,limit:r.config.limit}),this.data.load(r).then(function(){o.config.autoHeight&&o._prepareDataFromTo(o.data,n,i)})))},g.prototype._getColumnGhost=function(e){var t=this._container||u.toNode(this._uid),n=t.querySelector(".dhx_header-row"),i=n.querySelector('.dhx_grid-header-cell[data-dhx-id="'+e.id+'"]'),i=Array.from(n.childNodes).indexOf(i)+1,e=t.querySelectorAll('.dhx_grid-header-cell[data-dhx-id="'+e.id+'"]:not(.dhx_span-cell)'),i=t.querySelectorAll(".dhx_grid_data .dhx_grid-cell:nth-child("+i+")"),o=document.createElement("div");return e.forEach(function(e){return o.appendChild(e.cloneNode(!0))}),i.forEach(function(e){return o.appendChild(e.cloneNode(!0))}),o},g.prototype._dragStartColumn=function(e,t){function n(e){return e.classList.contains("dhx_grid-custom-content-cell")}var i=e.target;n(i.parentElement)||n(i.parentElement.parentElement)||!(t.draggable||"column"===this.config.dragItem&&!1!==t.draggable||"both"===this.config.dragItem&&!1!==t.draggable)||u.locateNodeByClassName(e,"dhx_resizer_grip_wrap")||(e.targetTouches&&(this._touch.start=!0),c.dragManager.onMouseDown(e,[t.id],[this._getColumnGhost(t)]))},g);function g(e,t){var n=s.call(this,e,r({autoHeight:!1},t))||this;return n.scrollView=new p.ScrollView(function(){return n.getRootView()},{scrollHandler:function(e){return n.events.fire(l.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])}}),n}t.ProGrid=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.setItem=function(e,t){this._store[e]=t},o.prototype.getItem=function(e){return this._store[e]||null},o);function o(){this._store={}}var r=window.dhxHelpers=window.dhxHelpers||{};r.collectionStore=r.collectionStore||new i,t.collectionStore=r.collectionStore},function(e,l,c){"use strict";(function(e){var i,t=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0});var o,n=c(27),r=c(1),s=c(48),t=(o=n.DataProxy,t(a,o),a.prototype.load=function(){var n=this;return new e(function(e,t){n._timeout?(clearTimeout(n._timeout),n._timeout=setTimeout(function(){s.ajax.get(n.url,{responseType:"text"}).then(e).catch(t),n._cooling=!0},n.config.delay),n._cooling&&(e(null),n._cooling=!1)):(s.ajax.get(n.url,{responseType:"text"}).then(e).catch(t),n._cooling=!0,n._timeout=setTimeout(function(){}))})},a);function a(e,t){var n=o.call(this,e)||this;return n.config=r.extend({from:0,limit:50,delay:50,prepare:0},t),n.updateUrl(e,{from:n.config.from,limit:n.config.limit}),n}l.LazyDataProxy=t}).call(this,c(14))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(37),r=n(22),n=(s.prototype.getId=function(){return this._selected},s.prototype.getItem=function(){return this._selected?this._data.getItem(this._selected):null},s.prototype.remove=function(e){return!(e=e||this._selected)||!!this.events.fire(i.SelectionEvents.beforeUnSelect,[e])&&(this._data.update(e,{$selected:!1},!0),this._selected=null,this.events.fire(i.SelectionEvents.afterUnSelect,[e]),!0)},s.prototype.add=function(e){this._selected!==e&&!this.config.disabled&&this._data.exists(e)&&(this.remove(),this._addSingle(e))},s.prototype.enable=function(){this.config.disabled=!1},s.prototype.disable=function(){this.remove(),this.config.disabled=!0},s.prototype._addSingle=function(e){this.events.fire(i.SelectionEvents.beforeSelect,[e])&&(this._selected=e,this._data.update(e,{$selected:!0},!0),this.events.fire(i.SelectionEvents.afterSelect,[e]))},s);function s(e,t,n){var i=this;this.events=n||new o.EventSystem(this),this._data=t,this.config=e,this._data.events.on(r.DataEvents.removeAll,function(){i._selected=null}),this._data.events.on(r.DataEvents.change,function(){var e;!i._selected||(e=i._data.getNearId(i._selected))!==i._selected&&(i._selected=null,e&&i.add(e))})}t.Selection=n},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),d=n(0),a=n(3),h=n(2),l=n(19),s=n(6),c=n(10),f=n(39);var p,o=(p=s.View,o(g,p),g.prototype.paint=function(){p.prototype.paint.call(this),this._isContextMenu&&!this._vpopups&&this._init(),this._vpopups&&this._vpopups.redraw()},g.prototype.disable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!0):this.data.forEach(function(e){e=e.id;return t._setProp(e,"disabled",!0)})},g.prototype.enable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!1):this.data.forEach(function(e){e=e.id;return t._setProp(e,"disabled",!1)})},g.prototype.isDisabled=function(e){e=this.data.getItem(e);if(e)return e.disabled||!1},g.prototype.show=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!1):this.data.forEach(function(e){e=e.id;return t._setProp(e,"hidden",!1)})},g.prototype.hide=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!0):this.data.forEach(function(e){e=e.id;return t._setProp(e,"hidden",!0)})},g.prototype.destructor=function(){this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._vpopups&&this._vpopups.node&&this._vpopups.unmount(),this.unmount()},g.prototype.select=function(e,t){var n=this;if(void 0===t&&(t=!0),!e)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com");t&&this.unselect(),this.data.update(e,{active:!0}),this.data.eachParent(e,function(e){n.data.update(e.id,{active:!0})})},g.prototype.unselect=function(e){var t=this;e?(this.data.update(e,{active:!1}),this.data.eachChild(e,function(e){t.data.update(e.id,{active:!1})})):this.data.forEach(function(e){t.data.update(e.id,{active:!1})})},g.prototype.isSelected=function(e){if(e&&this.data.getItem(e))return!!this.data.getItem(e).active},g.prototype.getSelected=function(){var t=[];return this.data.forEach(function(e){e.active&&t.push(e.id)}),t},g.prototype._customHandlers=function(){return{}},g.prototype._close=function(e){var t=this;this._popupActive&&this.events.fire(f.NavigationBarEvents.beforeHide,[this._activeMenu,e])&&(this._activeParents&&this._activeParents.forEach(function(e){return t.data.exists(e)&&t.data.update(e,{$activeParent:!1})}),"click"===this.config.navigationType&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._popupActive=!1,this._activeMenu=null,this._vpopups.node&&this._vpopups.unmount(),this._vpopups=null,this.events.fire(f.NavigationBarEvents.afterHide,[e]),this.paint())},g.prototype._init=function(){var t=this;this._vpopups=d.create({render:function(){return d.el("div",{"data-dhx-widget-id":t._uid,class:(t._isContextMenu?" dhx_context-menu":"")+" "+(t.config.css?t.config.css.split(" ").map(function(e){return t._isContextMenu?e:e+"--popup-menu"}).join(" "):""),onmousemove:t._handlers.onmousemove,onmouseleave:t._handlers.onmouseleave,onclick:t._handlers.onclick,onmousedown:t._handlers.onmousedown},t._drawPopups())}}),this._vpopups.mount(document.body)},g.prototype._initHandlers=function(){var a=this;this._isActive="click"!==this.config.navigationType,this._handlers=u({onmousemove:function(e){var t,n;!a._isActive||(n=h.locateNode(e))&&(t=n.getAttribute("data-dhx-id"),a._activeMenu!==t&&(a.data.haveItems(t)&&(a._vpopups||a._init(),n=h.getRealPosition(n),a.data.update(t,{$position:n},!1)),a._activeItemChange(t,e)))},onmouseleave:function(e){var t,n;"click"!==a.config.navigationType&&(a._popupActive?(n=h.locateNode(e,"data-dhx-id","relatedTarget"))?(t=n.getAttribute("data-dhx-id"),a.data.getItem(t)||(a._close(e),a._activeItemChange(null,e)),a.data.haveItems(t)&&(a._vpopups||a._init(),n=h.getRealPosition(n),a.data.update(t,{$position:n},!1),a._activeItemChange(t,e))):(a._close(e),a._activeItemChange(null,e)):a._activeItemChange(null,e))},onclick:function(e){var t=h.locateNode(e);if(t){var n=t.getAttribute("data-dhx-id");if(!a.isDisabled(n)){var i=a.data.getItem(n);if(!i.multiClick)if(a.data.haveItems(n))a._vpopups||a._init(),n!==a._currentRoot&&(a._isActive||(a._isActive=!0),a._setRoot(n),t=h.getRealPosition(t),a.data.update(n,{$position:t},!1),a._activeItemChange(n,e),a.events.fire(f.NavigationBarEvents.click,[n,e]));else switch(i.type){case"input":case"title":break;case"menuItem":case"selectButton":a._onMenuItemClick(n,e);break;case"imageButton":case"button":case"customButton":case"customHTML":case"navItem":i.twoState&&a.data.update(i.id,{active:!i.active}),a.events.fire(f.NavigationBarEvents.click,[n,e]),a._close(e);break;default:a._close(e)}}}},onmousedown:function(e){var t,n,i,o,r,s=h.locateNode(e);s&&(t=s.getAttribute("data-dhx-id"),a.data.getItem(t).multiClick&&(n=365,r=function(){clearTimeout(i),document.removeEventListener("mouseup",r)},(o=function(){a.events.fire(f.NavigationBarEvents.click,[t,e]),50<n&&(n-=55),i=setTimeout(o,n)})(),document.addEventListener("mouseup",r)))}},this._customHandlers())},g.prototype._initEvents=function(){var i=this,e=null;this.data.events.on(f.DataEvents.change,function(){i.paint(),e&&clearTimeout(e),e=setTimeout(function(){var n={};i.data.eachChild(i.data.getRoot(),function(e){var t;e.group&&(e.twoState=!0,(t=n)[(e=e).group]?(e.active&&(t[e.group].active=e.id),t[e.group].elements.push(e.id)):t[e.group]={active:e.active?e.id:null,elements:[e.id]})},!0),i._groups=n,i._resetHotkeys(),e=null,i.paint()},100)}),this.events.on(f.NavigationBarEvents.click,function(e){var t=i.data.getItem(e),e=i.data.getItem(t.parent);e&&"selectButton"===e.type&&i.data.update(t.parent,{value:t.value,icon:t.icon}),t.group&&((e=i._groups[t.group]).active&&i.data.update(e.active,{active:!1}),e.active=t.id,i.data.update(t.id,{active:!0}))}),this.events.on(f.NavigationBarEvents.inputChange,function(e,t){i.data.update(e,{value:t})}),this._customInitEvents()},g.prototype._getMode=function(e,t,n){return void 0===n&&(n=!1),e.parent===t?"bottom":"right"},g.prototype._drawMenuItems=function(e,t){var n=this;return void 0===t&&(t=!0),this.data.map(function(e){return n._factory(e,t)},e,!1)},g.prototype._setRoot=function(e){},g.prototype._getParents=function(e,t){var n=[],i=!1,o=this.data.getItem(e),o=o&&o.disabled;return this.data.eachParent(e,function(e){e.id===t?(n.push(e.id),i=!0):i||n.push(e.id)},!o),this._isContextMenu&&this._activePosition&&n.push(t),n},g.prototype._listenOuterClick=function(){this._documentHaveListener||(document.addEventListener("mousedown",this._documentClick,!0),this._documentHaveListener=!0)},g.prototype._customInitEvents=function(){},g.prototype._drawPopups=function(){var a=this,e=this._activeMenu;if(!this._isContextMenu&&!e)return null;var t=this.getRootNode(),t=t&&t.offsetParent&&t.offsetParent.offsetParent,l=null;t&&t.classList.contains("dhx_popup--window")&&t.classList.contains("dhx_popup--window_active")&&(l=2147483647);var c=this._currentRoot;if(this._isContextMenu&&!this._activePosition)return null;e=this._getParents(e,c);return(this._activeParents=e).forEach(function(e){return a.data.exists(e)&&a.data.update(e,{$activeParent:!0},!1)}),e.map(function(r){if(!a.data.haveItems(r))return null;var s=a.data.getItem(r)||a._rootItem;return a._popupActive=!0,d.el("ul",u({class:"dhx_widget dhx_menu"+(a.config.menuCss?" "+a.config.menuCss:""),_key:r,_hooks:{didInsert:function(e){var t=e.el.getBoundingClientRect(),n=t.width,i=t.height,o=a._isContextMenu&&a._activePosition&&r===c?a._activePosition:s.$position,t=a._getMode(s,c,o===a._activePosition),i=h.calculatePosition(o,{mode:t,auto:!0,width:n,height:i});s.$style=u(u({},i),{zIndex:a._activePosition&&a._activePosition.zIndex||l}),e.patch({style:s.$style})},didRecycle:function(e,t){var n,i;a._isContextMenu&&a._activePosition&&r===c&&(n=(i=t.el.getBoundingClientRect()).width,i=i.height,i=h.calculatePosition(a._activePosition,{mode:a._getMode(s,c,!0),width:n,height:i}),s.$style=u(u({},i),{zIndex:a._activePosition.zIndex||l}),t.patch({style:s.$style}))}},tabindex:0,style:s.$style||{position:"absolute"}},{role:"menu","aria-labeledby":s.id,"aria-live":"polite"}),a._drawMenuItems(r))}).reverse()},g.prototype._onMenuItemClick=function(e,t){var n=this.data.getItem(e);n.disabled||(n.twoState&&this.data.update(n.id,{active:!n.active}),this.events.fire(f.NavigationBarEvents.click,[e,t]),this._close(t))},g.prototype._activeItemChange=function(e,t){var n,i=this;this._activeParents&&(n=this._getParents(e,this._currentRoot),this._activeParents.forEach(function(e){i.data.exists(e)&&!n.includes(e)&&i.data.update(e,{$activeParent:!1},!1)})),e&&!this._documentHaveListener&&this._listenOuterClick(),e&&this.data.haveItems(e)?(this._activeMenu===e&&this._popupActive||this.events.fire(f.NavigationBarEvents.openMenu,[e]),clearTimeout(this._currentTimeout),this.paint()):(clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout(function(){return i.paint()},400)),this._activeMenu=e},g.prototype._resetHotkeys=function(){var t=this;this._keyManager.removeHotKey(null,this),this.data.map(function(e){e.hotkey&&t._keyManager.addHotKey(e.hotkey,function(){return t._onMenuItemClick(e.id,null)})})},g.prototype._setProp=function(e,t,n){var i=this;Array.isArray(e)?e.forEach(function(e){return i.data.update(e,((e={})[t]=n,e))}):this.data.update(e,((e={})[t]=n,e))},g);function g(e,t){var s=p.call(this,e,t)||this;return s._isContextMenu=!1,s._documentHaveListener=!1,s.config=r.extend({rootId:"string"==typeof e&&e||s._uid},t),s._rootItem={},!Array.isArray(s.config.data)&&s.config.data&&s.config.data.events?(s.data=s.config.data,s.events=s.data.events,s.events.context=s):(s.events=new a.EventSystem(s),s.data=new c.TreeCollection({rootId:s.config.rootId},s.events)),s._documentClick=function(e){var t,n,i,o,r;s._documentHaveListener&&(t=h.locateNode(e),n=s.data.getRoot(),i=t&&t.getAttribute("data-dhx-id"),o=s.data.getParent(i),r="ontouchstart"in window||navigator.msMaxTouchPoints,document.removeEventListener("mousedown",s._documentClick),s._documentHaveListener=!1,((!r||t)&&s._isContextMenu||n!==o&&o&&s.data.getItem(i))&&o&&s.data.getItem(i)||s._close(e))},s._currentRoot=s.data.getRoot(),s._factory=s._getFactory(),s._initHandlers(),s._keyManager=new l.KeyManager(function(e,t){return t===s._uid}),s._initEvents(),Array.isArray(s.config.data)&&s.data.parse(s.config.data),s}t.Navbar=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=n(166),h=n(167),f=n(168),p=n(169),g=n(170),v=n(171),_=n(172),m=n(173),y=n(174),b=n(175),w=n(29);t.createFactory=function(e){for(var i=e.defaultType,t=e.allowedTypes,o=e.widgetName,e=e.widget,r=new Set,n=0,s=t;n<s.length;n++){var a=s[n];r.add(a)}var l=e.config,c=e.events,u=e.data;return function(e,t){if(e.hidden)return null;if(!(e.type&&"button"!==e.type&&"navItem"!==e.type&&"menuItem"!==e.type||e.value||e.icon||e.html))return null;e.type=e.type||i,r&&!r.has(e.type)&&(e.type=i),"imageButton"===e.type&&"ribbon"!==o&&(e.active=!1),t&&"spacer"!==e.type&&"separator"!==e.type&&"customHTML"!==e.type&&(e.type="menuItem"),u.haveItems(e.id)&&function(e,t,n){switch(e){case"sidebar":case"context-menu":t.$openIcon="right";break;case"toolbar":t.parent===n.getRoot()?t.$openIcon="right":t.$openIcon="bottom";break;case"menu":t.parent!==this.data.getRoot()&&(t.$openIcon="right");break;case"ribbon":var i=n.getItem(t.parent);i&&"block"!==t.type&&("block"===i.type?t.$openIcon="bottom":t.$openIcon="right")}}(o,e,u),"toolbar"===o&&e.items&&e.items.forEach(function(e){e.type||(e.type="menuItem")});var n="customHTML"!==e.type&&function(e,t,n,i){switch(e.type){case"navItem":case"selectButton":return h.navItem(e,n,i.collapsed);case"button":return d.button(e,n);case"title":return y.title(e,n);case"separator":return _.separator(e,n);case"spacer":return m.spacer(e,n);case"input":return g.input(e,t,n);case"imageButton":return p.imageButton(e,n);case"menuItem":return v.menuItem(e,n,i.asMenuItem);case"customHTMLButton":return f.customHTMLButton(e,n,i.asMenuItem);case"datePicker":return b.datePicker(e,t,n);case"block":default:throw new Error("unknown item type "+e.type)}}(e,c,o,{asMenuItem:t,collapsed:"sidebar"!==o||l.collapsed});return w.navbarComponentMixin(o,e,t,n)}}},function(e,t,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=n(29);t.button=function(e,t){var n,i,o=e.icon&&!e.value,r=o?" dhx_navbar-count--absolute":" dhx_navbar-count--button-inline";return a.el("button.dhx_button",s({class:l.getNavbarButtonCSS(e,t),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},(i=(n=e).active||n.$activeParent,t={"aria-disabled":n.disabled?"true":"false","aria-label":n.value||n.tooltip||n.id||" "+(n.count||"")},n.items&&(t.id=n.id,t["aria-haspopup"]="menu",i&&(t["aria-expanded"]="true")),t)),[e.icon?l.getIcon(e.icon,"button"):null,e.html?a.el("div.dhx_button__text",{".innerHTML":e.html}):e.value&&a.el("span.dhx_button__text",e.value),0<e.count&&l.getCount(e,r,o),e.value&&e.$openIcon?a.el("span.dhx_button__icon.dhx_button__icon--menu.dxi.dxi-menu-right",{"aria-hidden":"true"}):null,e.loading&&a.el("span.dhx_button__loading",{"aria-hidden":"true"},[a.el("span.dhx_button__loading-icon.dxi.dxi-loading")])])}},function(e,t,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=n(29);t.navItem=function(e,t,n){var i,o,r,t=" dhx_"+t+"-button";return a.el("button",s({class:"dhx_button"+t+(e.active||e.$activeParent?t+"--active":"")+(e.disabled?t+"--disabled":"")+(e.$openIcon?t+"--select":"")+(e.circle?t+"--circle":"")+(e.size?" "+t+"--"+e.size:"")+(!e.value&&e.icon?t+"--icon":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},(o={"aria-disabled":(i=e).disabled?"true":"false","aria-label":i.value||" "},r=i.active||i.$activeParent,"selectButton"===i.type||i.items?(o.id=i.id,o["aria-haspopup"]="menu",r&&(o["aria-expanded"]="true")):((i.twoState||r)&&(o["aria-pressed"]=r?"true":"false"),!i.value&&i.icon&&i.tooltip&&(o["aria-label"]=i.tooltip+" "+(i.count||""))),o)),[e.icon&&a.el("span",{class:e.icon+t+"__icon","aria-hidden":"true"}),e.html&&a.el("div",{class:t.trim()+"__html",".innerHTML":e.html}),!e.html&&e.value&&a.el("span",{class:t.trim()+"__text"},e.value),0<e.count&&l.getCount(e,t+"__count",n),e.$openIcon&&a.el("span.dxi.dxi-menu-right",{class:t+"__caret","aria-hidden":"true"})])}},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.customHTMLButton=function(e,t,n){var i,n=n?" dhx_button dhx_menu-button":" dhx_button dhx_nav-menu-button";return r.el("button",o({class:"dhx_custom-button"+n+(e.$activeParent?n+"--active":""),"data-dhx-id":e.id,type:"button",".innerHTML":e.html},(n={"aria-disabled":(i=e).disabled?"true":"false"},(i.twoState||i.active||i.$activeParent)&&(n["aria-pressed"]=i.active||i.$activeParent?"true":"false"),n)),e.html?"":e.value)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(29);t.imageButton=function(e,t){var n,i,o="dhx_"+t+"-button-image",t="ribbon"===t;return s.el("button.dhx_button",r({class:o+(e.size?" "+o+"--"+e.size:"")+(!e.value&&e.src?" "+o+"--icon":"")+(t&&e.$openIcon?" "+o+"--select":"")+(e.active?" "+o+"--active":""),"data-dhx-id":e.id,type:"button"},(i={"aria-disabled":(n=e).disabled?"true":"false"},(n.twoState||n.active)&&(i["aria-pressed"]=n.active?"true":"false"),!n.value&&n.src&&n.tooltip&&(i["aria-label"]=n.tooltip+" "+(n.count||"")),i)),[t&&e.value&&e.$openIcon&&s.el("span.dxi.dxi-menu-right",{class:o+"__caret","aria-hidden":"true"}),e.html?s.el("div",{class:o+"__text",".innerHTML":e.html}):e.value&&s.el("span",{class:o+"__text"},e.value),e.src&&s.el("span",{class:o+"__image",style:{backgroundImage:"url("+e.src+")"},role:"presentation"}),0<e.count&&a.getCount(e,o+"__count",!0)])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(39);function r(e,t){e.fire(o.NavigationBarEvents.inputBlur,[t])}function s(e,t){e.fire(o.NavigationBarEvents.inputFocus,[t])}function a(e,t,n){e.fire(o.NavigationBarEvents.inputChange,[t,n.target.value])}t.input=function(t,n,e){return i.el(".dhx_form-group.dhx_form-group--no-message-holder.dhx_form-group--label_sr.dhx_"+e+"__input",{style:{width:t.width||"200px"},role:"presentation"},[t.label&&i.el("label.dhx_label",{for:t.id},t.label),i.el(".dhx_input__wrapper",{role:"presentation"},[i.el("input.dhx_input",{placeholder:t.placeholder,class:t.icon?"dhx_input--icon-padding":"",value:t.value,disabled:t.disabled,onblur:[r,n,t.id],onfocus:[s,n,t.id],oninput:[a,n,t.id],"data-dhx-id":t.id,_hooks:{didInsert:function(e){n&&n.fire(o.NavigationBarEvents.inputCreated,[t.id,e.el])}},_key:t.id,"aria-label":t.label||t.helpMessage||"type "+(t.placeholder?"text like "+t.placeholder:"text")}),t.icon?i.el(".dhx_input__icon",{class:t.icon,"aria-hidden":"true"}):null])])}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(29);t.menuItem=function(e,t,n){var i,o=n?" dhx_menu-button":" dhx_nav-menu-button";return s.el("button",r({class:"dhx_button"+o+(e.disabled?o+"--disabled":"")+(e.active||e.$activeParent?o+"--active":""),disabled:e.disabled,"data-dhx-id":e.id,type:"button"},(o={role:"menuitem","aria-disabled":(i=e).disabled?"true":"false"},i.items&&(o["aria-haspopup"]="true"),o)),n?[e.icon||e.value||e.html?s.el("span.dhx_menu-button__block.dhx_menu-button__block--left",[e.icon&&s.el("span.dhx_menu-button__icon",{class:e.icon}),e.html?s.el("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&s.el("span.dhx_menu-button__text",e.value)]):null,0<e.count||e.hotkey||e.items?s.el("span.dhx_menu-button__block.dhx_menu-button__block--right",[0<e.count&&a.getCount(e," dhx_menu-button__count",!1),e.hotkey&&s.el("span.dhx_menu-button__hotkey",e.hotkey),e.items&&s.el("span.dhx_menu-button__caret.dxi.dxi-menu-right")]):null]:[e.icon&&s.el("span.dhx_menu-button__icon",{class:e.icon}),e.html?s.el("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&s.el("span.dhx_nav-menu-button__text",e.value)])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.separator=function(e,t){return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spacer=function(e,t){return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.title=function(e,t){return i.el("span",{class:"dhx_navbar-title dhx_navbar-title--"+t,"data-dhx-id":e.id,".innerHTML":e.html,"aria-label":e.value||""},e.html?null:e.value)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(34),a=n(7),l=n(39);function c(e,t){e.fire(l.NavigationBarEvents.inputBlur,[t])}function u(e,t,n,i){r.awaitRedraw().then(function(){return n.show(i.target)}),e.fire(l.NavigationBarEvents.inputFocus,[t])}t.datePicker=function(t,n,e){var i=new a.Popup,o=new s.Calendar(null,{dateFormat:t.dateFormat||"%d/%m/%y",value:t.value,css:"dhx_widget--bordered"});return i.attach(o),o.events.on("change",function(){i.hide(),n.fire(l.NavigationBarEvents.inputChange,[t.id,o.getValue()])}),r.el(".dhx_form-group.dhx_form-group--no-message-holder.dhx_form-group--label_sr.dhx_"+e+"__input",{style:{width:t.width||"200px"},role:"presentation"},[t.label&&r.el("label.dhx_label",{for:t.id},t.label),r.el(".dhx_input__wrapper",{role:"presentation"},[r.el("input.dhx_input",{placeholder:t.placeholder,class:t.icon?"dhx_input--icon-padding":"",value:o.getValue(),disabled:t.disabled,onblur:[c,n,t.id],onfocus:[u,n,t.id,i],"data-dhx-id":t.id,readOnly:!0,_hooks:{didInsert:function(e){n&&n.fire(l.NavigationBarEvents.inputCreated,[t.id,e.el])}},_key:t.id,"aria-label":t.label||t.helpMessage||"type "+(t.placeholder?"text like "+t.placeholder:"text")}),t.icon?r.el(".dhx_input__icon",{class:t.icon,"aria-hidden":"true"}):null])])}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(84),l=n(28),c=n(0),u=n(2),d=n(13),o=(s=a.Toolbar,o(h,s),h.prototype._draw=function(e){var n=this,t=this.data.getLength()?this.data.reduce(function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}},0)+24:null,e=[c.el("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},{role:"toolbar","aria-label":e||""}),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",function(e){var t;9!==e.which||(t=u.locateNode(document.activeElement))&&(e=t.getAttribute("data-dhx-id"),(e=n.data.getItem(e)).tooltip&&d.tooltip(e.tooltip,{node:t,position:d.Position.bottom,force:!0}))},!0)}}}),this.data.map(function(e){return n._factory(e)},this.data.getRoot(),!1))];return c.el("nav.dhx_widget.dhx_toolbar",{style:{height:t},class:this.config.css||""},this.scrollView&&this.scrollView.config.enable?[].concat(this.scrollView.render(e)):e)},h);function h(e,t){var n=s.call(this,e,t)||this;return n.scrollView=new l.ScrollView(function(){return n.getRootView()}),n}t.ProToolbar=o},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(178)),i(t(179))},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(2),a=n(13),l=n(25),o=(r=l.Navbar,o(c,r),c.prototype.showAt=function(e,t){void 0===t&&(t="bottom"),e instanceof MouseEvent?(this._close(e),this._changeActivePosition({left:window.pageXOffset+e.x+1,right:window.pageXOffset+e.x+1,top:window.pageYOffset+e.y,bottom:window.pageYOffset+e.y,zIndex:a.getZIndex(e.currentTarget)},t)):e instanceof TouchEvent?(this._close(e),this._changeActivePosition({left:window.pageXOffset+e.touches[0].clientX,right:window.pageXOffset+e.touches[0].clientX,top:window.pageYOffset+e.touches[0].clientY,bottom:window.pageYOffset+e.touches[0].clientY,zIndex:a.getZIndex(e.currentTarget)},t)):(e=s.toNode(e),this._changeActivePosition(s.getRealPosition(e),t))},c.prototype._getFactory=function(){return l.createFactory({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"context-menu"})},c.prototype._close=function(e){var t=this;this.events.on(l.NavigationBarEvents.afterHide,function(){t._activeMenu=null,t._changeActivePosition(null,null)}),r.prototype._close.call(this,e)},c.prototype._getMode=function(e,t,n){return n?this._mode:"right"},c.prototype._changeActivePosition=function(e,t){this._activePosition=e,this._mode=t,this._listenOuterClick(),this.paint()},c);function c(){var e=null!==r&&r.apply(this,arguments)||this;return e._isContextMenu=!0,e}t.ContextMenu=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(0),a=n(25),o=(r=a.Navbar,o(l,r),l.prototype._getFactory=function(){return a.createFactory({widget:this,defaultType:"menuItem",allowedTypes:["navItem","menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"menu-nav"})},l.prototype._draw=function(){return s.el("ul.dhx_widget",{"data-dhx-widget-id":this._uid,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,class:"dhx_menu-nav "+(this.config.css||"")},this._drawMenuItems(this.data.getRoot(),!1))},l);function l(e,t){var n=r.call(this,e,t)||this;return n.mount(e,s.create({render:function(){return n._draw()}})),n}t.Menu=o},function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),n=(r.prototype.do=function(){var e=this.config,t=e.cell,n=e.dataStore;this._index||(this._index=o.getCellIndex(t).col-1);e=n.getPage(this._sheetName);e.addColumn(this._index,1);t=e.getMeta().cols;this._prevCols=i(t);n=t.slice(0,this._index),t=t.slice(this._index);e.setMeta({cols:i(n,[{width:120}],t)}),this.config.spreadsheet._updateGridSizes()},r.prototype.undo=function(){var e=this.config.dataStore.getPage(this._sheetName);e.removeColumn(this._index,1),e.setMeta({cols:this._prevCols}),this.config.spreadsheet._updateGridSizes()},r);function r(e){this.config=e,this._sheetName=e.spreadsheet.getActiveSheet().name}t.AddColumn=n},function(e,t,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),n=(i.prototype.do=function(){var e=this.config,t=e.cell,n=e.grid,i=e.dataStore;this._index||(this._index=r.getCellIndex(t).row);e=i.getPage(this._sheetName);e.addRow(this._index,1);t=e.getMeta().rows;this._prevRows=o(t);i=t.slice(0,this._index),t=t.slice(this._index);e.setMeta({rows:o(i,[{height:n.config.rowHeight}],t)}),this.config.spreadsheet._updateGridSizes()},i.prototype.undo=function(){var e=this.config.dataStore.getPage(this._sheetName);e.removeRow(this._index,1),e.setMeta({rows:this._prevRows}),this.config.spreadsheet._updateGridSizes()},i);function i(e){this.config=e,this._sheetName=e.spreadsheet.getActiveSheet().name}t.AddRow=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),n=(i.prototype.do=function(){var e=this.config,t=e.sheets,n=e.val;if(!t.find(function(e){return e.value===n})){this._store.addPage(n);for(var i=[],o=[],r=0;r<this.config.spreadsheet.config.colsCount;r++)i.push({width:120});for(r=0;r<this.config.spreadsheet.config.rowsCount;r++)o.push({height:this.config.spreadsheet._grid.config.rowHeight});this._store.getPage(n).setMeta({focusedCell:{cell:"A1"},selectedCells:["A1"],cols:i,rows:o});e=this.config.spreadsheet.getActiveSheet().id,e=t.getIndex(e);this._id=t.add({value:n,id:this._id||null},e+1),this.config.spreadsheet.events.fire(s.SpreadsheetEvents.afterSheetAdd,[{name:n,id:this._id}]),this.config.spreadsheet._changeSheet(this._id),this.config.grid.paint()}},i.prototype.undo=function(){this._store.removePage(this.config.val),this.config.sheets.remove(this._id),this.config.spreadsheet._changeSheet(this.config.prev)},i);function i(e){this.config=e,this._store=e.dataStore}t.AddSheet=n},function(e,t,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),n=(i.prototype.do=function(){var e=this.config,t=e.cell,n=(e.grid,e.spreadsheet),i=e.dataStore,e=r.getCellIds(t).col;this._index||(this._index=e);t=i.getPage(this._sheetName),i=t.getSize()[0];this._cells=t.getCellRange(0,e,i-1,e),t.removeColumn(this._index,1);i=t.getMeta().cols;this._prevCols=o(i);e=i.slice(0,this._index),i=i.slice(this._index+1),i=o(e,i);t.setMeta({cols:i}),n._updateGridSizes()},i.prototype.undo=function(){var e=this.config.dataStore.getPage(this._sheetName);e.addColumn(this._index,1);for(var t=0;t<this._cells.length;t++)this._cells[t]&&e.setCell(t,this._index,this._cells[t]);e.setMeta({cols:this._prevCols}),this.config.spreadsheet._updateGridSizes()},i);function i(e){this.config=e,this._sheetName=e.spreadsheet.getActiveSheet().name}t.DeleteColumn=n},function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),n=(r.prototype.do=function(){var e=this.config,t=e.cell,n=e.dataStore,e=o.getCellIds(t).row;this._row||(this._row=e);t=n.getPage(this._sheetName),n=t.getSize()[1];this._cells=t.getCellRange(e,0,e,n-1),t.removeRow(this._row,1);e=t.getMeta().rows;this._prevRows=i(e);n=e.slice(0,this._row),e=e.slice(this._row+1),e=i(n,e);t.setMeta({rows:e}),this.config.spreadsheet._updateGridSizes()},r.prototype.undo=function(){var e=this.config.dataStore.getPage(this._sheetName);e.addRow(this._row,1);for(var t=0;t<this._cells.length;t++)this._cells[t]&&e.setCell(this._row,t,this._cells[t]);e.setMeta({rows:this._prevRows}),this.config.spreadsheet._updateGridSizes()},r);function r(e){this.config=e,this._sheetName=e.spreadsheet.getActiveSheet().name}t.DeleteRow=n},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=(r.prototype.do=function(){var e=this.config,t=e.sheets,n=e.spreadsheet,i=e.val,e=this._store.getPage(i);this._data=e?e.serialize(!0):[],this._sheetMeta=e?e.getMeta():{},this._store.removePage(i);e=this._index=t.getIndex(this._deletedSheet.id);i===n.getActiveSheet().name&&n._changeSheet(t.getId(1===e?e+1:e-1)),t.remove(this._deletedSheet.id),this.config.grid.paint()},r.prototype.undo=function(){var e=this.config,t=e.sheets,n=e.spreadsheet,e=e.val;this._store.addPage(e),t.add(this._deletedSheet,this._index);e=this._store.getPage(e);e.setMeta(this._sheetMeta),e.parse(this._data),this._store.getStore().recalculate(!0,e.getContext()),n._changeSheet(this._deletedSheet.id),this.config.grid.paint()},r);function r(e){this.config=e,this._store=e.dataStore,this._deletedSheet=i({},e.sheets.getItem(e.prev))}t.DeleteSheet=o},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),c=n(40),n=(i.prototype.do=function(){var o,r,s=this;this.config.spreadsheet;this._actions.length||(o=this.config.val,r=0,Array.isArray(o)&&(o=o[r]),this.config.spreadsheet.eachCell(function(e){var t=l.getCellIds(e),n=t.row,i=t.col,t=l.getCellIds(e),e=new c.actions[s.config.action](a(a({},s.config),{row:n||t.row,col:i||t.col,cell:e,val:o}));s._actions.push(e),Array.isArray(s.config.val)&&(r+1>=s.config.val.length?r=0:r+=1,o=s.config.val[r])},this.config.cell));for(var e=0,t=this._actions;e<t.length;e++)t[e].do()},i.prototype.undo=function(){for(var e=0,t=this._actions;e<t.length;e++)t[e].undo();var n=this.config.cell.split(":")[0];this.config.spreadsheet.selection.setSelectedCell(n)},i);function i(e){this.config=e,this._actions=[]}t.GroupAction=n},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=n(40),n=(i.prototype.do=function(){var n,i,o=this;this._actions.length||(n=s.getCellIds(this.config.cell).start.row,i=this.config.cell.split(":")[0],this.config.spreadsheet.eachCell(function(e){var t=s.getCellIds(e),e=t.row,t=t.col;e===n&&(t=new a.actions[o.config.action](r(r({},o.config),{row:e,col:t,cell:i})),o._actions.push(t))},this.config.cell));for(var e=this._actions.length-1;0<=e;e--)this._actions[e].do()},i.prototype.undo=function(){for(var e=0;e<this._actions.length;e++)this._actions[e].undo()},i);function i(e){this.config=e,this._actions=[]}t.GroupColAction=n},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=n(40),n=(i.prototype.do=function(){var n,i,o=this;this._actions.length||(n=s.getCellIds(this.config.cell).start.col,i=this.config.cell.split(":")[0],this.config.spreadsheet.eachCell(function(e){var t=s.getCellIds(e),e=t.row,t=t.col;t===n&&(t=new a.actions[o.config.action](r(r({},o.config),{row:e,col:t,cell:i})),o._actions.push(t))},this.config.cell));for(var e=this._actions.length-1;0<=e;e--)this._actions[e].do()},i.prototype.undo=function(){for(var e=this._actions.length-1;0<=e;e--)this._actions[e].undo()},i);function i(e){this.config=e,this._actions=[]}t.GroupRowAction=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(8),n=(i.prototype.do=function(){var e=this.config,t=e.val,n=e.cell,i=o.getCellIds(n),e=i.row,i=i.col;this._page.setCell(e,i,{locked:t}),t?this.config.editLine.lock():this.config.editLine.unlock(),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterFocusSet,[n])},i.prototype.undo=function(){var e=this.config,t=e.val,n=e.cell,i=o.getCellIds(n),e=i.row,i=i.col;this._page.setCell(e,i,{locked:!t}),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterFocusSet,[n]),t?this.config.editLine.unlock():this.config.editLine.lock()},i);function i(e){this.config=e,this._store=e.dataStore,this._page=e.page}t.LockCell=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(8),n=(i.prototype.do=function(){var e=this.config.cell,t=o.getCellIds(e),n=t.row,i=t.col,t=o.getCellInfo(e,this._page);t.locked||(this.config.prev=t.css,this._page.setCell(n,i,{css:""}),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterStyleChange,[e,{}]),this.config.grid.paint())},i.prototype.undo=function(){var e=this.config.cell,t=o.getCellIds(e),n=t.row,t=t.col;o.getCellInfo(e,this._page).locked||(this._page.setCell(n,t,{css:this.config.prev}),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterStyleChange,[e,{}]))},i);function i(e){this.config=e,this._page=e.page}t.RemoveCellStyles=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.do=function(){var e=this.config,t=e.sheets,n=e.dataStore,i=e.val,o=e.prev,r=t.getItem(o),e=this.config.spreadsheet.getActiveSheet().name;r.prevValue||t.update(r.id,{prevValue:r.value}),e===r.prevValue&&(this.config.spreadsheet._activeSheetName={name:i,id:r.id}),n.renamePage(r.prevValue,i),t.update(o,{value:i,prevValue:r.prevValue}),this.config.grid.paint(),this.config.spreadsheet.selection.setFocusedCell(this.config.spreadsheet.selection.getFocusedCell())},o.prototype.undo=function(){var e=this.config,t=e.sheets,n=e.dataStore,i=e.val,o=e.prev,e=t.getItem(o);n.renamePage(i,e.prevValue),this.config.spreadsheet.getActiveSheet().name===i&&(this.config.spreadsheet._activeSheetName={name:i,id:e.id}),t.update(o,{value:e.prevValue,prevValue:e.prevValue}),this.config.grid.paint(),this.config.spreadsheet.selection.setFocusedCell(this.config.spreadsheet.selection.getFocusedCell())},o);function o(e){this.config=e,this.page=e.activePage}t.RenameSheet=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(17),c=n(4),u=n(8),n=(i.prototype.do=function(){var e,t=this.config.cell,n=this.config.val,i=c.getCellIds(t),o=i.row,r=i.col,s=l.getFormat(n),n=s&&s.mask||n,a=c.getCellInfo(t,this._page);a.locked||this.config.spreadsheet.events.fire(u.SpreadsheetEvents.beforeFormatChange,[t,n])&&(e=a.format,this.config.prev=null===(i=a.format)||void 0===i?void 0:i.id,i=this.config.spreadsheet.getFormula(t),"@"!==(null==e?void 0:e.mask)&&"@"===n&&this._page.setValue(o,r,""+(i?"="+i:a.value||""),1),"@"===(null==e?void 0:e.mask)&&"@"!==n&&this._page.setValue(o,r,i?"="+i:a.value,0),this._page.setCell(o,r,{format:s||l.getFormat("common")}),this.config.spreadsheet.events.fire(u.SpreadsheetEvents.afterFormatChange,[t,n]),this.config.grid.paint())},i.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t,this.config.prev=e,this.do(),this.config.val=e,this.config.prev=t},i);function i(e){this.config=e,this._page=e.page}t.SetCellFormat=n},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var c=n(52),u=n(4),d=n(8),n=(i.prototype.do=function(){var e,t=this.config,n=t.cell,i=t.val,o=void 0===i?"":i,r=u.getCellIds(n),s=r.row,t=r.col,i=u.getCellInfo(n,this._page),r=i.locked,i=i.css;r||("string"!=typeof o&&(e=o.multiline,r=dhx.css.get(i)||{},Array.isArray(o)&&(o=o[0]),o=this.config.replace?dhx.css.add(a({},o)):dhx.css.add(a(a({},r),u.convertStyles(o)))),this.config.spreadsheet.events.fire(d.SpreadsheetEvents.beforeStyleChange,[n,dhx.css.get(o)])&&(e&&(this._page_rows=l(this._page.getMeta().rows),c.setAutoHeightToRow(n,this.config.grid,this._page,e)&&this.config.spreadsheet._updateGridState()),this.config.prev=i,this._page.setCell(s,t,{css:o}),this.config.spreadsheet.events.fire(d.SpreadsheetEvents.afterStyleChange,[this.config.cell,dhx.css.get(o)]),this.config.grid.paint()))},i.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t||"",this.config.prev=e||"",this.do(),this._page_rows&&(this._page.setMeta({rows:this._page_rows}),this.config.spreadsheet._updateGridState()),this.config.val=e,this.config.prev=t},i);function i(e){this.config=e,this._page=e.page}t.SetCellStyle=n},function(e,t,n){"use strict";var u=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var d=n(15),h=n(52),f=n(26),p=n(17),g=n(4),v=n(8),n=(i.prototype.do=function(){var e=this.config.cell,t=g.getCellIds(e),n=t.row,i=t.col,o=this.config.val,r=this.config.spreadsheet;if(!r.isLocked(e)&&r.events.fire(v.SpreadsheetEvents.beforeValueChange,[e,o])){t=r.getFormula(e);this.config.prev=t?"="+t:r.getValue(e);var s,a,t=g.getCellInfo(e,this._page).format;if("string"==typeof o&&o.startsWith("=")&&"@"!==(null==t?void 0:t.mask)){for(var l=o.split("").reduce(function(e,t){return"("===t?e+1:e},0),c=o.split("").reduce(function(e,t){return")"===t?e+1:e},0);c<l;)o+=")",c++;try{this._page.setValue(+n,+i,o)}catch(e){}}else"date"===(null==t?void 0:t.id)&&o?(a=void 0,a=p.isNumeric(o)?+o:d.stringToDate(o,t.dateFormat,!0)?f.getExcelDateFromJs(d.stringToDate(o,t.dateFormat)):o,this.config.val=a,this._page.setValue(+n,+i,this.config.val)):"time"===(null==t?void 0:t.id)&&o?(a=void 0,a=p.isNumeric(o)?+o:"string"==typeof(s=f.timeStringToJS(o))?s:f.getExcelDateFromJs(s),this.config.val=a,this._page.setValue(+n,+i,this.config.val)):"percent"===(null==t?void 0:t.id)&&o.toString().endsWith("%")?(s=p.getCleanValue(o),a=+(parseFloat(s)/100).toFixed(4),this._page.setValue(+n,+i,a)):"text"!==(null==t?void 0:t.id)?(a=parseFloat(o),this._page.setValue(+n,+i,a==o?a:o)):this._page.setValue(+n,+i,o,1);this._page.setCell(n,i,{nextValue:void 0,edited:!1,format:t||p.getDefaultFormats().filter(function(e){return"common"===e.id})[0]});t=g.getCellInfo(e,this._page).css;!t||(t=(dhx.css.get(t)||{}).multiline)&&(this._page_rows=u(this._page.getMeta().rows),h.setAutoHeightToRow(e,this.config.grid,this._page,t)&&this.config.spreadsheet._updateGridState()),this._page.setMeta({inserted:!0}),this.config.grid.paint(),r.events.fire(v.SpreadsheetEvents.afterValueChange,[this.config.cell,o])}},i.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this._page_rows&&(this._page.setMeta({rows:this._page_rows}),this.config.spreadsheet._updateGridState()),this.config.val=t,this.config.prev=e,this.do(),this.config.val=e,this.config.prev=t},i);function i(e){this.config=e,this._page=e.page}t.SetCellValue=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.do=function(){var e=this.config.spreadsheet;this._data=e.serialize(),e.parse([])},o.prototype.undo=function(){this.config.spreadsheet.parse(this._data)},o);function o(e){this.config=e}t.Clear=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.do=function(){var e=this.config,t=e.val,e=e.spreadsheet;this._page=this._store.getPage(t),this._data=this._page?this._page.serialize(!0):[],this._page.parse([]),e._math.recalculate(),e.selection.setFocusedCell(e.selection.getSelectedCell()),e._grid.paint()},o.prototype.undo=function(){var e=this.config.spreadsheet;this._page.parse(this._data),this._store.getStore().recalculate(!0,this._page.getContext()),e.selection.setFocusedCell(e.selection.getSelectedCell()),e._math.recalculate(),e._grid.paint()},o);function o(e){this.config=e,this._store=e.dataStore}t.ClearSheet=i},function(e,t,n){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var v=n(4),_=n(8),n=(i.prototype.do=function(){var t=this,e=this.config,i=e.grid,n=e.cell,o=e.mouseEvent;if(this._colsAfterResize)i.setColumns(this._colsAfterResize);else{var r=o.clientX,e=n.split(":"),o=e[0],n=e[1],e=v.getCellIds(o),s=v.getCellIds(n||o);this._prevCols=i.config.columns.map(function(e){return p({},e)});var a=g(i.config.columns),l=i.getRootNode();l.style.cursor="col-resize";for(var c=[],u=e.col+1;u<=s.col+1;u++){var d=a[u];d.$initWidth=i.config.columns[u].width,c.push(d)}var h=function(e){var n=e.clientX-r;c.forEach(function(e){var t=e.$initWidth+n/c.length;e.width=t<=20?20:t}),i.setColumns(a),i.paint()},f=function(e){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f),l.style.cursor="unset",t._colsAfterResize=a,t.config.spreadsheet.events.fire(_.SpreadsheetEvents.afterAction,[_.Actions.resizeCol,v.cleanActionConfig(t.config)])};document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),i.paint()}},i.prototype.undo=function(){this.config.grid.setColumns(this._prevCols)},i);function i(e){this.config=e}t.ResizeCol=n},function(e,t,n){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var v=n(4),_=n(8),n=(i.prototype.do=function(){var i=this,e=this.config,o=e.grid,t=e.cell,n=e.mouseEvent;if(this._rowsAfterResize)this._rowsAfterResize.forEach(function(e){var t=e.id,e=e.height;o.data.update(t,{height:e,changedByUser:!0})});else{var r=n.clientY,e=t.split(":"),n=e[0],t=e[1],e=v.getCellIds(n),s=v.getCellIds(t||n),a=g(o.data.serialize()),l=o.getRootNode();l.style.cursor="row-resize";for(var c=[],u=e.row;u<=s.row;u++){var d=a[u];d.height||(d.height=o.config.rowHeight),c.push(d)}this._prevRows=c.map(function(e){return p({},e)}),this._rowsAfterResize=c.map(function(e){return p({},e)});var h=function(e){var n=e.clientY-r;c.forEach(function(t){var e=t.height+n/c.length,e=e<=10?10:e;o.data.update(t.id,{height:e,changedByUser:!0}),i._rowsAfterResize.find(function(e){return e.id===t.id}).height=e}),o.paint()},f=function(e){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f),l.style.cursor="unset",i.config.spreadsheet.events.fire(_.SpreadsheetEvents.afterAction,[_.Actions.resizeRow,v.cleanActionConfig(i.config)])};document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),o.paint()}},i.prototype.undo=function(){var n=this;this._prevRows.forEach(function(e){var t=e.id,e=e.height;n.config.grid.data.update(t,{height:e,changedByUser:!0})})},i);function i(e){this.config=e}t.ResizeRow=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),n=(i.prototype.do=function(){var e=this.config,t=e.val,n=e.cell,i=r.getCellIds(n),o=i.row,e=i.col,i=this._page.getCell(o,e);this._prevState[n]=(null==i?void 0:i.editor)||null,this._page.setCell(o,e,{editor:t?{type:"select",options:t}:null}),this.config.grid.paint()},i.prototype.undo=function(){var e=this.config.cell,t=r.getCellIds(e),n=t.row,t=t.col;this._page.setCell(n,t,{editor:this._prevState[e]}),this.config.grid.paint()},i);function i(e){this.config=e,this._page=e.page,this._prevState={}}t.SetValidation=n},function(e,t,n){"use strict";var E=this&&this.__assign||function(){return(E=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var S=n(4),n=(i.prototype.do=function(){var m=this,e=this.config,y=e.dir,t=e.cell,b=e.spreadsheet,w=e.page,x=e.dataStore;t.split(",").forEach(function(e){var t=w;if((i=e).includes("!")){var n=i.split("!"),i=n[1];if(!(t=x.getPage(n[0])))return}m._data[e]=t.serialize(!0);var n=t.getSize(),e=n[0],o=n[1],n=S.getCellIds(i);if(n.end){for(var i=n.start,n=n.end,r=b.config.topSplit||i.row,s=e-1<n.row?e-1:n.row,i=t.getCellRange(r,i.col,s,i.col),a=C(i),l=i.sort(function(e,t){e=null==e?void 0:e.value,t=null==t?void 0:t.value;return"string"==typeof e&&(e=e.toLowerCase()),"string"==typeof t&&(t=t.toLowerCase()),!e&&"number"!=typeof e&&t?1:!t&&"number"!=typeof t&&e?-1:"string"==typeof e&&"number"==typeof t?-y:"number"==typeof e&&"string"==typeof t?y:e<t?-y:t<e?y:0}),c=r,u=0,d=[];c<s+1;){for(var h=l[u],f=a.indexOf(h)+r,p=[],g=0;g<o;g++){var v=t.getCell(f,g)||{},_=t.getValue(f,g,!0);"string"==typeof _&&_.startsWith("=")&&(_=b._math.transposeMath(_,c-f,0,t.getContext())),p.push([c,g,E(E({},v),{value:_})])}d.push.apply(d,p),c++,u++}i=t.serialize(!0).filter(function(t){return!d.find(function(e){return e[0]===t[0]&&e[1]===t[1]})});t.parse(C(i,d))}}),this.config.grid.paint()},i.prototype.undo=function(){var i=this,e=this.config,t=e.grid,o=e.page,r=e.dataStore;Object.keys(this._data).forEach(function(e){var t=o;if(e.includes("!")){var n=e.split("!");if(!(t=r.getPage(n[0])))return}t.parse(i._data[e])}),t.paint()},i);function i(e){this.config=e,this._data={}}t.SortCells=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21);t.getContextMenuStruct=function(){return[{id:"lock",value:i.default.lockCell,icon:"dxi dxi-key"},{id:"clear",value:i.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:i.default.clearValue},{id:"clear-styles",value:i.default.clearStyles},{id:"clear-all",value:i.default.clearAll}]},{id:"columns",value:i.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:i.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:i.default.removeColumn,icon:"dxi dxi-table-column-remove"}]},{id:"rows",value:i.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:i.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:i.default.removeRow,icon:"dxi dxi-table-row-remove"}]},{id:"sort",value:i.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:i.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:i.default.descSort,icon:"dxi dxi-sort-variant"}]}]},t.getSheetsContextMenuStruct=function(e){return[{id:"delete",value:i.default.deleteSheet,icon:"dxi dxi-delete-forever",disabled:!e},{id:"rename",value:i.default.renameSheet,icon:"dxi dxi-pencil"}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(41),o=n(21);t.getMenuStruct=function(e){return[{id:"file",open:!0,value:o.default.file,items:[{id:"import",value:o.default.importAs,icon:"dxi dxi-file-import",items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"download",value:o.default.downloadAs,icon:"dxi dxi-file-export",items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}]},{id:"edit",value:o.default.edit,items:[{id:"undo",value:o.default.undo,icon:"dxi dxi-undo"},{id:"redo",value:o.default.redo,icon:"dxi dxi-redo"},{type:"separator"},{id:"lock",value:o.default.lockCell,icon:"dxi dxi-key"},{type:"separator"},{id:"clear",value:o.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:o.default.clearValue},{id:"clear-styles",value:o.default.clearStyles},{id:"clear-all",value:o.default.clearAll}]}]},{id:"insert",value:o.default.insert,items:[{id:"columns",value:o.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:o.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:o.default.removeColumn,icon:"dxi dxi-table-column-remove"}]},{id:"rows",value:o.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:o.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:o.default.removeRow,icon:"dxi dxi-table-row-remove"}]}]},{id:"configuration",value:o.default.format,items:[{id:"font-weight-bold",value:o.default.bold,icon:"dxi dxi-format-bold"},{id:"font-style-italic",value:o.default.italic,icon:"dxi dxi-format-italic"},{id:"text-decoration-underline",value:o.default.underline,icon:"dxi dxi-format-underline"},{type:"separator"},{id:"halign",value:o.default.halign,items:[{id:"halign-left",value:o.default.left,twoState:!0,group:"halign",icon:"dxi dxi-format-align-left"},{id:"halign-center",value:o.default.center,twoState:!0,group:"halign",icon:"dxi dxi-format-align-center"},{id:"halign-right",value:o.default.right,twoState:!0,group:"halign",icon:"dxi dxi-format-align-right"}]},{id:"valign",value:o.default.valign,items:[{id:"valign-top",value:o.default.top,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",value:o.default.center,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",value:o.default.bottom,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",value:o.default.multiline,items:[{id:"multiline-clip",group:"multiline",twoState:!0,value:o.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",group:"multiline",twoState:!0,value:o.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]},{id:"format",type:"navItem",value:o.default.format,items:i.getFormatsDropdown(e)}]},{id:"data",value:o.default.data,items:[{id:"validation",value:o.default.validation,icon:"dxi dxi-table-check"},{id:"sort",value:o.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:o.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:o.default.descSort,icon:"dxi dxi-sort-variant"}]}]},{id:"help",value:o.default.help}]}},function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),s=n(21),o={undo:"z",redo:"y",bold:"b",italic:"i",underline:"u"};function a(e){return!navigator.platform.match(/(Mac)/i)?"ctrl+"+o[e]:"+"+o[e]}t.getHotKey=a,t.getToolbarStruct=function(e,t){var o={undo:[{id:"undo",type:"navItem",icon:"dxi dxi-undo",tooltip:s.default.undo+" ("+a("undo")+")"},{id:"redo",type:"navItem",icon:"dxi dxi-redo",tooltip:s.default.redo+" ("+a("redo")+")"}],colors:[{id:"color",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:r.getColorpickerTemplate("#4C4C4C","format-color-text"),tooltip:s.default.textColor},{id:"background",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:r.getColorpickerTemplate("#FFF","format-color-fill"),tooltip:s.default.backgroundColor}],lock:[{id:"lock",type:"navItem",icon:"dxi dxi-key",tooltip:s.default.lockCell}],file:[{id:"export",type:"navItem",icon:"dxi dxi-file-export",tooltip:s.default.export,items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"import",type:"navItem",icon:"dxi dxi-file-import",tooltip:s.default.import,items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}],columns:[{id:"add-col",type:"navItem",icon:"dxi dxi-table-column-plus-before",tooltip:s.default.addColumn},{id:"remove-col",type:"navItem",icon:"dxi dxi-table-column-remove",tooltip:s.default.removeColumn}],rows:[{id:"add-row",type:"navItem",icon:"dxi dxi-table-row-plus-before",tooltip:s.default.addRow},{id:"remove-row",type:"navItem",icon:"dxi dxi-table-row-remove",tooltip:s.default.removeRow}],clear:[{type:"navItem",icon:"dxi dxi-eraser",id:"clear-group",tooltip:s.default.clear,items:[{id:"clear-value",value:s.default.clearValue},{id:"clear-styles",value:s.default.clearStyles},{id:"clear-all",value:s.default.clearAll}]}],align:[{id:"halign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.halign,items:[{id:"halign-left",type:"navItem",value:s.default.left,icon:"dxi dxi-format-align-left",group:"halign"},{id:"halign-center",type:"navItem",value:s.default.center,icon:"dxi dxi-format-align-center",group:"halign"},{id:"halign-right",type:"navItem",value:s.default.right,icon:"dxi dxi-format-align-right",group:"halign"}]},{id:"valign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.valign,items:[{id:"valign-top",type:"navItem",group:"valign",value:s.default.top,icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",type:"navItem",group:"valign",value:s.default.center,icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",type:"navItem",group:"valign",value:s.default.bottom,icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.multiline,items:[{id:"multiline-clip",type:"navItem",group:"multiline",value:s.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",type:"navItem",group:"multiline",value:s.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]}],decoration:[{id:"font-weight-bold",type:"navItem",icon:"dxi dxi-format-bold",tooltip:s.default.bold+" ("+a("bold")+")"},{id:"font-style-italic",type:"navItem",icon:"dxi dxi-format-italic",tooltip:s.default.italic+" ("+a("italic")+")"},{id:"text-decoration-underline",type:"navItem",icon:"dxi dxi-format-underline",tooltip:s.default.underline+" ("+a("underline")+")"}],help:[{id:"help",type:"navItem",icon:"dxi dxi-help-circle-outline",tooltip:s.default.help}],format:[{id:"format",type:"navItem",tooltip:s.default.format,css:"dhx_format-dropdown",items:r.getFormatsDropdown(t)}]},n=["undo","colors","decoration","align","format","help"];return-1!==(t=(e=e||n).indexOf("default"))&&e.splice.apply(e,i([t,1],n)),(e=e.filter(function(e,t,n){return n.indexOf(e)===t})).reduce(function(e,t,n,i){return o[t]&&(e.push.apply(e,o[t]),n!==i.length-1&&e.push({type:"separator"})),e},[])}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(0),a=n(6),f=n(8),l=n(4),p=n(30),c=n(205),u=n(1),o=(r=a.View,o(d,r),d.prototype._parse=function(e,t){return void 0===t&&(t=this._activePage.getContext()),this._store.parse(e,t)},d.prototype.navigate=function(e){return"enter"===e&&this._isMath&&(this._presedEnter=!0),this._editMode&&this._presedEnter?(this.setCellMath(),!1):this._suggest.navigate(e)},d.prototype.setAtCursor=function(e,t,n,i){this._input&&(n=this._value.substr(0,t)+e+this._value.substr(n),this._editMode?this.setValue(n):this.config.events.fire(f.SpreadsheetEvents.editLineInput,[n]),this._prevCursorPosition=t+i,this._input.setSelectionRange(t+i,t+i))},d.prototype.focus=function(){this._input&&this._input.focus()},d.prototype.blur=function(){this._input&&this._input.blur()},d.prototype.lock=function(){this._locked=!0,this.paint()},d.prototype.unlock=function(){this._locked=!1,this.paint()},d.prototype.setValueAtRedactor=function(e){var t=this._input&&this._input.selectionStart;this.setAtCursor(e,t,t,e.length)},d.prototype.setValue=function(e){this.unlock(),this._setValue(e)},d.prototype._setValue=function(e){this._value=e,this._isMath=this._value&&this._value.toString().startsWith("=")?this._parse(this._value):null,this._colored=this._parseColors(e),this._input&&(this._input.value=e),this._presedEnter=!1,this._htmlEvents.onselectionchange(),this.paint()},d.prototype.setCellMath=function(){var e,t,n;this._editMode&&(this._removeStyles(),e=(n=l.getCellIds(this._editMode.cell)).row,t=n.col,n=this._editMode.page,this._editMode=null,n.setCell(e,t,{nextValue:this._value}),this.config.spreadsheet._changeSheet(n.getMeta().toolbarId),this.blur(),this._presedEnter=!1)},d.prototype.getValue=function(){return this._value},d.prototype.clean=function(){var e=this;setTimeout(function(){e._setValue("")},1)},d.prototype.destructor=function(){this._suggest.destructor()},d.prototype.getInput=function(){return this._input},d.prototype.setCursor=function(e){this._input&&this._input.setSelectionRange(e,e)},d.prototype.isCellExpected=function(e,t,n,i){if(!this._presedEnter){if(this._isMath&&this._isEdit){var o=this._value,r=e.lastIndexOf(","),s=e.lastIndexOf(":"),s=s<r?r:s,a=e.includes(",")||e.includes(":"),l=n?n.selectionStart:this._input?this._input.selectionStart:this._value.length,c=this._isMath.code;-1<s&&e.includes(i)&&(e=(12===(i=this._parse(this._isMath.source.substring(0,l)).code.reverse())[2]?i[5]:i[2])!==p.T_OPERATOR?e.substring(s):e.substring(s+1));for(var u=0;u<c.length;u+=3){var d=c[u+1]+c[u+2]==l,h=c[u]===p.T_SPACE?c[u-3]:c[u];if(d&&(h==p.T_OPERATOR&&")"!==o[c[u+1]]||a)){if(t){d=this.config.spreadsheet.getActiveSheet().name;this._editMode&&this._editMode.pageName!==d&&(e=a?(e.includes(",")?",":":")+"'"+d+"'!"+e.substring(1):"'"+d+"'!"+e);h=o.substring(0,l),d=h+e+o.substring(l);return this._editMode?(this.setValue(d),this.setCursor(h.length+e.length)):this.config.events.fire(f.SpreadsheetEvents.editLineInput,[d]),h.length+e.length}return l}}}return 0}this._presedEnter=!1},d.prototype._render=function(){var t=this;return s.el(".dhx_edit_line",{},[s.el(".input__wrapper",[s.el(".input_value",{".innerHTML":this._colored,_ref:"input_wrapper"}),s.el("input.dhx_edit_line_input",{_hooks:{didInsert:function(e){t._input=e.el},didUnmount:function(){document.removeEventListener("selectionchange",t._htmlEvents.onselectionchange)}},oninput:this._htmlEvents.oninput,onfocus:this._htmlEvents.onfocus,onblur:this._htmlEvents.onblur,onclick:this._htmlEvents.onclick,value:this._value||"",_ref:"input",disabled:this._locked}),s.el(".input-animation")])])},d.prototype._parseColors=function(o){this._removeStyles();var r=1,s=o;if(o&&"="===o[0]){for(var a=this._parse(o).code,s="",l=0,c=this,e=0;e<a.length;e+=3)!function(e){switch(a[e]){case p.T_SPACE:for(var t=0;t<a[e+2];t++)s+="&nbsp;",l++;break;case p.T_ARG:case p.T_RANGE:var n=o.substr(a[e+1],a[e+2]),i=c._prevStyles.find(function(e){return e&&e.cell===n});r=9===r?1:r,a[e+1]>l&&(s+=o.substr(l,a[e+1]-l)),l=a[e+1]+a[e+2],s+="<span class=text_range_"+(i?i.styleNum:r)+">"+n+"</span>",i||a[e-3]===p.T_ERROR||(c._setStyles(n,r),c._prevStyles.push({cell:n,styleNum:r}),++r);break;case p.T_DATA:case p.T_ERROR:break;case p.T_PAGE:a[e+3]!==p.T_ARG&&a[e+3]!==p.T_RANGE&&a[e+3]!==p.T_ERROR&&(a[e+1]!==l&&(s+=o.substr(l,a[e+1]-l)),l=a[e+1]+a[e+2],s+=o.substr(a[e+1],a[e+2]));break;default:a[e+1]>l&&(s+=o.substr(l,a[e+1]-l)),l=a[e+1]+a[e+2],s+=o.substr(a[e+1],a[e+2])}}(e);l!==o.length&&(s+=o.substr(l,o.length-l))}return s},d.prototype._setStyles=function(e,n){e.includes("$")&&(e=e.split("$").join("")),e.includes("!")||(e="'"+(this._editMode?this._editMode.pageName:this.config.spreadsheet.getActiveSheet().name)+"'!"+e);var i=this.config.grid,t=this._parse(e).code;p.fromId(t[7])[2]===this._activePage.getID()&&(e.includes("!")&&(e=e.substr(e.indexOf("!")+1)),-1!==e.indexOf(":")?this.config.spreadsheet.eachCell(function(e){var t=l.getCellIds(e),e=t.row,t=t.col;i.addCellCss(""+(e+1),""+(t+1),"range_"+n)},e):(e=(t=l.getCellIds(e)).row,t=t.col,i.addCellCss(""+(e+1),""+(t+1),"range_"+n)))},d.prototype._removeStyles=function(){for(var o=this,e=0,t=this._prevStyles;e<t.length;e++){var n=function(n){if(!n)return{value:void 0};var e,i=o.config.grid,t=n.cell;t.includes("$")&&(t=t.split("$").join("")),t.includes("!")&&(t=t.substr(t.indexOf("!")+1)),t.includes(":")?o.config.spreadsheet.eachCell(function(e){var t=l.getCellIds(e),e=t.row,t=t.col;i.removeCellCss(""+(e+1),""+(t+1),"range_"+n.styleNum)},t):(t=(e=l.getCellIds(t)).row,e=e.col,i.removeCellCss(""+(t+1),""+(e+1),"range_"+n.styleNum))}(t[e]);if("object"==typeof n)return n.value}this._prevStyles=[]},d);function d(e,t){void 0===t&&(t={});var o=r.call(this,e,t)||this;o._store=t.math,o._activePage=t.activePage,o._suggest=new c.default(function(e,t,n,i){return o.setAtCursor(e,t,n,i)}),o._prevStyles=[],o._htmlEvents={oninput:function(e){o._isEdit||(e.target.value=o._value),o._value=e.target.value,o._isMath=o._value&&o._value.toString().startsWith("=")?o._parse(o._value):null,o._isMath&&o._suggest.show(o._value,e.target,o._isMath,o.config.spreadsheet._grid.config.height),o._editMode?o.setValue(o._value):o.config.events.fire(f.SpreadsheetEvents.editLineInput,[e.target.value])},onfocus:function(e){o._editMode||o.config.events.fire(f.SpreadsheetEvents.editLineFocus,[e.target.value,e])},onblur:function(e){o._editMode?o.focus():o.config.events.fire(f.SpreadsheetEvents.editLineBlur,[e.target.value,e])},onclick:function(e){var t=o._input.selectionStart;t!==o._prevCursorPosition&&o._isMath&&(o._suggest.show(o._value,e.target,o._isMath),o._prevCursorPosition=t)},onselectionchange:function(){var e,t=o.getRootView(),n=t&&t.refs&&t.refs.input_wrapper,i="0px";o._isEdit&&o._value&&o._input&&(e=o._input.selectionStart,t=u.getStringWidth((""+o._value).substr(0,e))+12,e=o.getRootNode().offsetWidth,n&&e<t&&(i=e-t+"px")),n&&(n.el.style.left=i,o.paint())}},document.addEventListener("selectionchange",o._htmlEvents.onselectionchange),o.config.events.on(f.SpreadsheetEvents.cellInput,function(e,t){o._setValue(t)}),o.config.events.on(f.SpreadsheetEvents.afterSheetChange,function(){o._activePage=o.config.spreadsheet._activePage;var e=o.config.spreadsheet._editMode,t=o._input&&o._input.selectionStart;e?(o._editMode=e,o._removeStyles(),o._setValue(o._value),o.focus(),o.setCursor(t),e.pageName===o.config.spreadsheet.getActiveSheet().name&&(o._editMode=null)):o._editMode=null}),o.config.events.on(f.SpreadsheetEvents.afterEditStart,function(){o._isEdit=!0}),o.config.events.on(f.SpreadsheetEvents.afterEditEnd,function(){o._isEdit=!1});return o.mount(e,s.create({render:function(){return o._render()}})),o}t.EditLine=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(36),d=n(30),n=(r.prototype.isVisible=function(){return this._popup&&this._popup.isVisible()},r.prototype.hide=function(){this.isVisible()&&this._popup.hide()},r.prototype.destructor=function(){this._popup&&this._popup.destructor()},r.prototype.navigate=function(e){if(!this.isVisible())return!1;var t=this._list,n=t.data.getLength();if(!n)return!1;if("arrowUp"===e||"arrowDown"===e){var i="arrowDown"===e?1:-1,e=t.data.getIndex(t.getFocus());return void 0===e&&(e=-1==i?n:-1),this._list.setFocus(t.data.getId((e+i+n)%n)),!0}n=t.getFocusItem();return n||(t=this._list.data.getId(0),n=this._list.data.getItem(t)),this._insertSuggest(n.value),!0},r.prototype.show=function(n,i,e,t,o){for(var r=o||i.selectionStart,s=e.code,a=this._getPopup(t),l=this,c=0;c<s.length;c+=3){var u=function(e){if(s[e]==d.T_NAME&&r==s[e+1]+s[e+2]){var t=n.substr(s[e+1],s[e+2]).toUpperCase();return l._list.data.filter(function(e){return e.value.startsWith(t)}),l._list.data.getLength()?(l._cursorStart=r,l._startTrim=s[e+1],a.show(i,{centering:!1})):a.hide(),{value:void 0}}}(c);if("object"==typeof u)return u.value}a.hide()},r.prototype._insertSuggest=function(e){this._suggestCallback(e+"(",this._startTrim,this._cursorStart,e.length+1),this._popup.hide()},r.prototype._getPopup=function(e){var n=this;this._popup||(t=Object.keys(d.methods).map(function(e){return{value:e}}),this._popup=new i.Popup({css:"dhx_suggest_list"}),this._list=new o.List(null),this._list.data.parse(t),this._list.events.on("Click",function(e){var t=n._list.selection.getItem();n._insertSuggest(t.value),n._list.selection.remove(t.id)}),this._popup.attach(this._list));var t=this._popup.getRootNode();return!t.style.maxHeight&&e&&(t.style.maxHeight=e+"px"),this._popup},r);function r(e){this._suggestCallback=e}t.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=n(8),C=n(4),n=(i.prototype.store=function(e,t,n){var i=this;void 0===t&&(t=null),void 0===n&&(n=null);var o=this._spreadsheet.selection.getFocusedCell(),t=C.getCellInfo(o,this._activePage),r=this._spreadsheet.selection.getSelectedCell();if(this._prevCopyPage&&this._prevCopyPage.setMeta({inserted:!0}),!t.edited){var n=C.isRangeId(r),s=[r];if(n&&r.includes(",")){var a=(s=r.split(","))[s.length-1];if(r.includes(":"))if(a.includes(":")){for(var l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,f=0;f<s.length;f++){var p,g,v,_=s[f];_.includes(":")&&!l&&(l=_,d={start:C.getCellIds(l.split(":")[0]),end:C.getCellIds(l.split(":")[1])}),f?(_.includes(":")||c.includes(":")||(d.start.row===d.end.row||d.start.col===d.end.col?(p=d.start.row===d.end.row?"row":"col",g=C.getCellIds(_)[p],d.start[p]===g[p]&&u.push(_)):(r=a,f=s.length,u=[r])),_.includes(":")&&_!==l&&(v=C.getCellIds(_.split(":")[0]),g=C.getCellIds(_.split(":")[1]),p=v.row===d.start.row||v.row===d.end.row||v.col===d.start.col||v.col===d.end.col,g=g.row===d.start.row||g.row===d.end.row||g.col===d.start.col||g.col===d.end.col,g=p&&g,v=v.row===d.start.row?"col":"row",h=h||v,g&&h===v?u.push(_):(r=a,f=s.length,u=[r]))):u=[_],c=_}1<(s=u).length&&(r=s.join())}else s=[r=a];else s=[r=a]}if(!C.isRangeId(r)||r.includes(":")){var m,y=[];C.isRangeId(s[0])&&(t=C.getCellIds(s[0].split(":")[0]).row,w=C.getCellIds(s[0].split(":")[1]).row,n=s[1]&&C.getCellIds(s[1].split(":")[0]).row,m=n&&(n===t||n===w));for(var b,w,x=0,E=this,f=0;f<s.length;f++)!function(e){var o,r=0;x=m?0:x;e=s[e];E._spreadsheet.eachCell(function(e,t){var n,i;t=t||" ",r?(n=C.getCellIds(o),i=C.getCellIds(e),n.row===i.row?y[x]?y[x]+="\t"+t:y.push(""+t):y[++x]?y[x]+="\t"+t:y.push(""+t)):y[x]?y[x]+="\t"+t:y.push(""+t),o=e,r++},e),x++}(f);this._buffer.value=y.join("\n"),this._buffer.styles=this._spreadsheet.getStyle(r),C.isRangeId(r)?(b=[],this._spreadsheet.eachCell(function(e){b.push(i._spreadsheet._getMath(e))},r),this._buffer.math=b):(w=this._spreadsheet._getMath(r),this._buffer.math=[w]),this._buffer.cells=r,this._buffer.meta=[],this._spreadsheet.eachCell(function(e){var t=C.getCellIds(e),e=t.row,t=t.col;i._buffer.meta.push(i._activePage.getCell(e,t)||{})},r),this._buffer.formats=this._spreadsheet.getFormat(r),this._buffer.cell=o,this._buffer.operation=e,this._activePage.setMeta({inserted:!1}),this._prevCopyPage=this._activePage,this._grid.paint()}else this._buffer.cell=null}},i.prototype.paste=function(){var e,t,n,i,r,s,a,o,l,c,u,d,h,f,p=this;this._buffer.cell&&(this._activePage.setMeta({inserted:!0}),h=this._buffer.cell,e=this._buffer.formats,t=h,o=!1,C.isRangeId(this._buffer.cells)&&(o=!0,d=C.getRangeIndexes(this._buffer.cells),f=C.getCellIndex(h),n=d.end.row-d.start.row,d=d.end.col-d.start.col,f=C.getCellNameByIndex(f.row+n,f.col+d),C.isRangeId(h)?(i=C.getCellsArray(this._buffer.cells).length,C.getCellsArray(h).length<i&&(t=h.split(":")[0]+":"+f)):t+=":"+f),d=C.isRangeId(t),i=Array.isArray(this._buffer.styles)?this._buffer.styles.map(function(e){return dhx.css.add(e)}):dhx.css.add(this._buffer.styles),h=[],"cut"===this._buffer.operation&&(h.push({cell:this._buffer.cells,action:g.Actions.setCellFormat,groupAction:d?g.Actions.groupAction:null,val:"",page:this._activePage,dataStore:this._dataStore},{cell:this._buffer.cells,action:g.Actions.setCellValue,val:"",page:this._activePage,groupAction:o?g.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:g.Actions.setCellStyle,val:"",page:this._activePage,groupAction:o?g.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:g.Actions.setValidation,val:null,page:this._activePage,groupAction:o?g.Actions.groupAction:null,dataStore:this._dataStore}),this._buffer.operation="copy"),r=o?[].concat(this._buffer.value):this._buffer.value,s=this._buffer.math,f=this._buffer.meta.map(function(e){return(null===(e=e.editor)||void 0===e?void 0:e.options)||null}),a=r.length,c=o?(o=C.getRangeIndexes(this._buffer.cells),l=o.start,o.end.col-o.start.col+1):(l=C.getCellIndex(this._buffer.cells),1),u=0,this._spreadsheet.eachCell(function(e){var t,n=u%a,i=r[n],o=s[n];o&&(n=(n-(t=n%c))/c,e=C.getCellIndex(e),i="="+p._math.transposeMath(o.source,e.row-l.row-n,e.col-l.col-t)),r[u]=i,u++},t),h.push({cell:t,action:g.Actions.setCellFormat,groupAction:d?g.Actions.groupAction:null,val:e,page:this._activePage,dataStore:this._dataStore},{cell:t,action:g.Actions.setCellValue,val:r,page:this._activePage,groupAction:g.Actions.groupAction,dataStore:this._dataStore},{cell:t,action:g.Actions.setCellStyle,val:i,page:this._activePage,groupAction:d?g.Actions.groupAction:null,dataStore:this._dataStore},{cell:t,action:g.Actions.setValidation,val:f,page:this._activePage,groupAction:g.Actions.groupAction,dataStore:this._dataStore}),this._callAction(h),d=C.getCellIds(t).end,h=(f=this._spreadsheet._grid).data.getLength(),f=f.config.columns.length,(h<d.row+1||f<=d.col+1)&&this._spreadsheet._updateGridSizes(),this._spreadsheet.selection.setSelectedCell(t))},i.prototype.getStruct=function(){return this._buffer},i.prototype._setHandlers=function(){var e=this;this._spreadsheet.events.on(g.SpreadsheetEvents.afterSheetChange,function(){e._activePage=e._spreadsheet._activePage})},i);function i(e,t,n,i,o){this._spreadsheet=e,this._grid=t,this._activePage=i,this._math=o.getStore(),this._dataStore=o,this._callAction=n.bind(e),this._buffer={value:"",math:[],meta:[],styles:{},cell:"",cells:"",operation:"",inserted:!1,formats:[],html:""},this._setHandlers()}t.BufferManager=n},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(10),a=n(4),o=(r=s.CsvDriver,o(l,r),l.prototype.toJsonArray=function(e){return r.prototype.toJsonArray.call(this,e).reduce(function(e,t,n){for(var i in t)e.push({value:t[i],cell:a.getCellNameByIndex(n,parseFloat(i))});return e},[])},l);function l(){return null!==r&&r.apply(this,arguments)||this}t.CustomCsvDriver=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),s=n(2);function a(e){for(var t=e.toLowerCase().match(/\w+/g),n=0,i="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?n+=4:"shift"===r?n+=2:"alt"===r?n+=1:i=r}return n+i}var l={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},n=(i.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},i.prototype.addHotKey=function(e,t){e=a(e);this._keysStorage[e]||(this._keysStorage[e]=[]),this._keysStorage[e].push({handler:t})},i.prototype.removeHotKey=function(e,n){var i,o,r=this;e?e&&n?(i=a(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")},this._keysStorage[i].forEach(function(e,t){o(e.handler)===o(n)&&(delete r._keysStorage[i][t],r._keysStorage[i]=r._keysStorage[i].filter(function(e){return e}))})):(e=a(e),delete this._keysStorage[e]):this._keysStorage={}},i);function i(e){var o=this;this._keysStorage={},this._initHandler=function(e){var t;t=48<=e.which&&e.which<=57||65<=e.which&&e.which<=90?String.fromCharCode(e.which):(t=32===e.which?e.code:e.key,s.isIE()&&l[t]||t);var n=o._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(t&&t.toLowerCase())];if(n)for(var i=0;i<n.length;i++){if(o._beforeCall&&!1===o._beforeCall(e,r.focusManager.getFocusId()))return;n[i].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}t.KeyManager=n},function(e,t,n){"use strict";var C=this&&this.__assign||function(){return(C=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},S=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var I=n(1),k=n(0),i=n(31),o=n(17),M=n(4),a=n(85),p=n(8),n=(r.prototype.setSelectedCell=function(e){e&&this._events.fire(p.SpreadsheetEvents.beforeSelectionSet,[e])&&(this._removeHeadersCss(),e=e.split(","),this._activePage.setMeta({selectedCells:e}),e=e[e.length-1],M.isRangeId(e)&&(e=e.split(":")[0]),this.setFocusedCell(e),this._setHeadersCss(),this._mousePressed?this._grid.paint():this._events.fire(p.SpreadsheetEvents.afterSelectionSet,[this.getSelectedCell()]))},r.prototype.getSelectedCell=function(){var e=this._activePage.getMeta().selectedCells;if(e&&e.length)return e.join(",")},r.prototype.getFocusedCell=function(){var e=this._activePage.getMeta().focusedCell;if(e&&e.cell)return e.cell},r.prototype.setFocusedCell=function(e){var t,n;e&&(e=e.toUpperCase(),this._events.fire(p.SpreadsheetEvents.beforeFocusSet,[e])&&(t=(n=M.getCellIds(e)).row,n=n.col,this._activePage.setMeta({focusedCell:{row:t,col:n,cell:e,edit:!1}}),this._events.fire(p.SpreadsheetEvents.afterFocusSet,[e])))},r.prototype.removeSelectedCell=function(e){var t=this.getSelectedCell();if(t){if(e){var t=t.split(","),e=e.split(","),o=[];e.forEach(function(e){M.isRangeId(e)?M.getCellsArray(e).forEach(function(e){o.push(e)}):o.push(e)});var r=[];if(t.forEach(function(e){var n,i;M.isRangeId(e)?(n=M.getCellsArray(e),o.forEach(function(e){e=n.indexOf(e);-1<e&&(n[e]=null)}),i=null,n.forEach(function(e,t){i?(e||(r.push(i+":"+n[t-1]),i=null),e&&t===n.length-1&&r.push(i+":"+n[t])):i=e})):o.includes(e)||r.push(e)}),r.length)return void this.setSelectedCell(r.join(","));this._activePage.setMeta({selectedCells:null})}else this._activePage.setMeta({selectedCells:null});this._grid.paint()}},r.prototype._isInRange=function(e,t){if(!t||!e||!t.includes(":"))return!1;var n=M.getCellIndex(e),i=n.row,o=n.col,e=M.getRangeIndexes(t),n=e.start,t=e.end,e=function(e,t,n){return(e-t)*(e-n)<=0};return!(!n||!t)&&(e(i,n.row,t.row)&&e(o,n.col,t.col))},r.prototype._removeHeadersCss=function(){var e,n=this;this.getSelectedCell()&&(this._spreadsheet.eachCell(function(e){var t=M.getCellIndex(e),e=n._grid.data.getId(t.row);void 0!==e&&n._grid.removeRowCss(e,"dhx_selected_row");t=n._grid.config.columns[t.col];void 0!==t&&(t.header[0].css=t.header[0].css.replace(" dhx_selected_header",""))}),e=this._activePage.getMeta().focusedCell,this._grid.data.exists(e.row)&&this._grid.removeRowCss(e.row,"dhx_selected_row"))},r.prototype._setHeadersCss=function(){var n=this;this.getSelectedCell()&&this._spreadsheet.eachCell(function(e){var t=M.getCellIndex(e),e=n._grid.data.getId(t.row);void 0!==e&&n._grid.addRowCss(e,"dhx_selected_row");t=n._grid.config.columns[t.col];void 0===t||t.header[0].css.includes("dhx_selected_header")||(t.header[0].css+=" dhx_selected_header")})},r.prototype._selectRow=function(e){var t=this._grid.config.columns[1],n=this._grid.config.columns[this._grid.config.columns.length-1];this.setSelectedCell(M.getCellNameById(this._grid,e.id,t.id)+":"+M.getCellNameById(this._grid,e.id,n.id))},r.prototype._selectColumn=function(e){var t=this._grid.data.getId(0),n=this._grid.data.getId(this._grid.data.getLength()-1),t=this._grid.data.getItem(t),n=this._grid.data.getItem(n);this.setSelectedCell(M.getCellNameById(this._grid,t.id,e.id)+":"+M.getCellNameById(this._grid,n.id,e.id))},r.prototype._setGroupSelectionHandlers=function(){var s=this;this._grid.events.on(i.GridEvents.cellMouseOver,function(e,t){var n,i,o,r;M.getCellInfo(s.getFocusedCell(),s._activePage).edited||(n=(o=s._activePage.getMeta()).focusedCell,s._mousePressed&&("index"!==s._pressedArea&&"$index"===t.id||("header"!==s._pressedArea||"$index"===t.id?(i=s._grid.config.columns[s._grid.config.columns.length-1],r=M.getCellNameById(s._grid,e.id,("index"===s._pressedArea?i:t).id),e=n.cell,i=S(o.selectedCells),"fillHandle"===s._pressedArea&&(r=a.getLastCopyingCell(s._cellsToCopy,r),o=s._isInRange(r,s._cellsToCopy),r!==e&&!o||(r=s._cellsToCopy.split(":")[1])),r=e+":"+r,i[i.length-1]=r,r=s.getFocusedCell(),s.setSelectedCell(i.join(",")),s.setFocusedCell(r)):(r=s._grid.data.getId(s._grid.data.getLength()-1),r=s._grid.data.getItem(r),s.setSelectedCell(n.cell+":"+M.getCellNameById(s._grid,r.id,t.id))))))}),this._grid.events.on(i.GridEvents.headerCellMouseOver,function(e){var t,n;"cell"!==s._pressedArea&&s._mousePressed&&"header"===s._pressedArea&&"$index"!==e.id&&(n=s._grid.data.getId(s._grid.data.getLength()-1),t=s._grid.data.getItem(n),n=s._activePage.getMeta().focusedCell,s.setSelectedCell(n.cell+":"+M.getCellNameById(s._grid,t.id,e.id.toString())))})},r.prototype._setHandlers=function(){var f,n,x=this;k.awaitRedraw().then(function(){f=x._grid.getRootView().node.el.getBoundingClientRect()});var E=function(e){n&&clearTimeout(n);var t=x._grid.getScrollState();e.clientX>f.width+f.left-50&&x._grid.scroll(t.x+50,t.y),e.clientX<f.left+50&&x._grid.scroll(t.x-50,t.y),e.clientY>f.height+f.top-50&&x._grid.scroll(t.x,t.y+50),e.clientY<f.top+50&&x._grid.scroll(t.x,t.y-50),n=setTimeout(function(){E(e)},100)};document.addEventListener("mouseup",function(){var e;x._mousePressed&&(x._mousePressed=!1,e=x.getSelectedCell(),"fillHandle"===x._pressedArea&&(e!==x._cellsToCopy&&x._events.fire(p.SpreadsheetEvents.groupFill,[x._cellsToCopy,e]),x._cellsToCopy=""),x._pressedArea=null,document.removeEventListener("mousemove",E),n&&clearTimeout(n),e&&x._events.fire(p.SpreadsheetEvents.afterSelectionSet,[x.getSelectedCell()]),x._grid.paint())}),this._grid.events.on(i.GridEvents.cellMouseDown,function(e,t,n){x._mousePressed=!0,f=x._grid.getRootView().node.el.getBoundingClientRect(),setTimeout(function(){x._mousePressed&&document.addEventListener("mousemove",E)},100);var i=x._activePage.getMeta().selectedCells;if("$index"!==t.id){x._pressedArea="cell";var o=M.getCellNameById(x._grid,e.id,t.id),r=M.getCellInfo(o,x._activePage);if(!(3===n.which&&x._isInRange(o,i[i.length-1])||r.edited)){r=x.getFocusedCell();if(!n.shiftKey||n.ctrlKey||n.metaKey){if(n.shiftKey&&(n.ctrlKey||n.metaKey)){i.length&&i[i.length-1]===r&&i.pop();var s=x.getSelectedCell();x.setSelectedCell((s?s+",":"")+r+":"+o)}else if(!n.ctrlKey&&!n.metaKey||n.shiftKey)x.setSelectedCell(o);else if(s=x.getSelectedCell()){if(s&&!M.getCellsArray(s).includes(o))return x.setSelectedCell(s+","+o);for(var a=s.split(","),l=0;l<a.length;l++){var c=a[l];M.isRangeId(c)||c!==o||x.setSelectedCell(a.filter(function(e){return e!==o}).join(","))}}}else x.setSelectedCell(r+":"+M.getCellNameById(x._grid,e.id,t.id))}}else{var u,d,h,t=n.target.getAttribute("data-dhx-id");n.shiftKey?(d=x.getSelectedCell(),h=[],M.isRangeId(d)&&(h=d.split(":")),u=M.getCellIds(h[0]||d),h=x._grid.config.columns,d=M.getCellNameById(x._grid,e.id,h[h.length-1].id),h=M.getCellNameById(x._grid,u.row+1,1),x.setSelectedCell(h+":"+d)):t?(document.removeEventListener("mousemove",E),x._mousePressed=!1,d=(h=null===(u=x.getSelectedCell())||void 0===u?void 0:u.split(":"))&&M.getCellIds(h[0]),u=h&&M.getCellIds(h[1]),!h||0!==d.col||u.col+2!==x._grid.config.columns.length||+t!==d.row&&+t!==u.row?(t=M.getCellNameByIndex(+t,1),x._resizedRows=[t,t]):x._resizedRows=h,x._spreadsheet._callAction({cell:x._resizedRows.join(":"),action:p.Actions.resizeRow,groupAction:p.Actions.resizeRow,mouseEvent:n})):(x._pressedArea="index",x._selectRow(e),x._mousePressed=!0)}}),this._grid.events.on(i.GridEvents.headerCellMouseDown,function(e,t){var n=t.target.getAttribute("data-dhx-id");if(t.shiftKey){var i=x.getSelectedCell(),o=[];M.isRangeId(i)&&(o=i.split(":"));var r=M.getCellIds(o[0]||i),s=M.getCellNameById(x._grid,x._grid.data.getId(0),r.col+1),o=M.getCellNameById(x._grid,x._grid.data.getLength(),e.id);x.setSelectedCell(s+":"+o)}else{o=t.target.className.includes("dhx_header_icon");if(o)return x._selectColumn(e),void x._spreadsheet.contextMenu.showAt(t);!n||o?(x._pressedArea="header",x._selectColumn(e),x._mousePressed=!0):"$index"!==n?(e=(i=null===(o=x.getSelectedCell())||void 0===o?void 0:o.split(":"))&&M.getCellIds(i[0]),o=i&&M.getCellIds(i[1]),!i||0!==e.row||o.row+1!==x._grid.data.getLength()||+n!==e.col+1&&+n!==o.col+1?(r=M.getCellNameByIndex(0,+n),x._resizedColumns=[r,r]):x._resizedColumns=i,x._spreadsheet._callAction({cell:x._resizedColumns.join(":"),action:p.Actions.resizeCol,groupAction:p.Actions.resizeCol,mouseEvent:t})):(i=M.getCellNameByIndex(0,1),t=M.getCellNameByIndex(x._grid.data.getLength()-1,x._grid.config.columns.length-1),x.setSelectedCell(i+":"+t))}}),this._setGroupSelectionHandlers(),this._grid.events.on(i.GridEvents.cellDblClick,function(e,t,n){n.ctrlKey||n.metaKey?x._grid.events.fire(i.GridEvents.cellClick,[e,t,n]):"$index"!==t.id&&x._spreadsheet.startEdit(M.getCellNameById(x._grid,e.id,t.id))}),this._grid.events.on(i.GridEvents.headerCellDblClick,function(e,t){var n,i,t=t.target.getAttribute("data-dhx-id");"$index"!==t&&t&&(t=x._activePage.getSize(),n=x._grid.config.columns.indexOf(e),n--,t=x._activePage.getRange(0,n,t[0],n),i=40,t.forEach(function(e,t){e&&(t=x._activePage.getCell(t,n),t=I.getStringWidth(o.getFormattedValue(""+e,t.format)),i<t&&(i=t))}),t=x._activePage.getMeta().cols,i+=20,e.$width=e.width=i,t[n].width=i,x._grid.setColumns(S(x._grid.config.columns)))}),this._spreadsheet.events.on(p.SpreadsheetEvents.afterSheetChange,function(){x._removeHeadersCss(),x._activePage=x._spreadsheet._activePage;var e=x._activePage.getMeta();x.setSelectedCell(e.selectedCells?e.selectedCells.join(","):null),x.setFocusedCell(e.focusedCell?e.focusedCell.cell:null)}),this._events.on(p.SpreadsheetEvents.afterAction,function(e){e===p.Actions.resizeRow&&(x._resizedRows=null),e===p.Actions.resizeCol&&(x._resizedColumns=null)}),this._events.on(p.SpreadsheetEvents.gridRedraw,function(e){var u,c,d,h,f,p,r,s,t,n,i,o,a,l,g,v,_,m,y=x._activePage.getMeta(),b=y.selectedCells,w=y.focusedCell&&y.focusedCell.cell;b&&w&&(u=function(e){var t=x._grid.data.getItem(e.row+1);return t?{x:x._grid.config.columns.slice(0,e.col).reduce(function(e,t){return e+t.$width},0),y:e.row?x._grid.data.mapRange(0,e.row-1,function(e){return e}).reduce(function(e,t){return e+(t.height||t.$height)},0):0,width:x._grid.config.columns[e.col]?x._grid.config.columns[e.col].$width:0,height:t.height||t.$height-1}:{x:0,y:0,width:0,height:0}},c=function(e){var t=u(e.start),e=u(e.end);return{x:t.x,y:t.y,width:e.x-t.x+e.width,height:e.y-t.y+e.height}},n=(o=x._spreadsheet.config).leftSplit,d=void 0===n?0:n,i=o.topSplit,h=void 0===i?0:i,f=x._grid.getScrollState(),p=u({row:h,col:d}),r=function(e){var t=M.getCellIds(e),n=t.col,i=t.row,o=u(M.getCellIndex(e)),r=o.x,s=o.y,a=o.width,l=o.height,c=p.x+f.x+p.width,t=p.y+f.y,e=n<d,o=h&&i<h,n=Math.abs(r-c<0&&!e?r-c:0),i=Math.abs(s-t<0&&!o?s-t:0),c=e?r+f.x:r,t=a-n,r=l-i;return{width:t,height:r,top:(o?s+f.y:s)+i,left:c+n,borderLeft:!e&&t<a?"none":null,borderRight:!e&&t<=0?"none":null,borderTop:!o&&r<l?"none":null,borderBottom:!o&&r<=0?"none":null,position:"absolute",pointerEvents:"none",zIndex:12}},s=function(e){var t=M.getRangeIndexes(e),n=c(t),i=t.start,o=t.end,r=i.col<=d,s=i.row<h;if(r||s){var a=c({start:{row:i.row,col:i.col},end:{row:o.row>h?h-1:o.row,col:o.col>d?d:o.col}}),l=n.width-f.x+1,e=r?a.width:null,t=n.height-f.y,i=s?a.height:null,o=(r?a:n).x+f.x;return{top:(s?a:n).y+f.y,left:o,width:l,minWidth:e,height:t,borderLeft:!r&&n.width>l?"none":null,borderRight:!r&&l<=0?"none":null,borderTop:!s&&n.height>t?"none":null,borderBottom:!s&&t<=0?"none":null,minHeight:i,zIndex:12}}return{top:n.y,left:n.x,width:n.width,height:n.height,zIndex:10}},t=b.map(function(e){return M.isRangeId(e)?k.el(".dhx_group_selection",{style:s(e)}):1!==b.length?k.el(".dhx_group_selection",{style:r(e)}):void 0}),w=b[b.length-1],n=k.el(".dhx_selected_cell",{style:r(w)}),o=[],(i=x._bufferManager.getStruct()).cell&&void 0!==y.inserted&&!y.inserted&&(o=(i.cells.includes(",")?i.cells.split(","):[i.cells]).map(function(e){var t=(M.isRangeId(e)?s:r)(e),n=t.width,i=t.left,o=t.height,e=t.top;return k.el(".dhx_copy_selection",{style:C(C({},t),{width:n+2,left:i-1,height:o+2,top:e-1})})})),x._resizedColumns&&(a=M.getCellIds(x._resizedColumns[1]),l=I.findIndex(x._grid.config.columns,function(e){return e.id==a.col+1}),v=u({row:0,col:l}),g=x._grid.config.$totalHeight,l=k.el(".resize_line",{style:{top:v.y,left:v.x+v.width-1.5,height:g}})),x._resizedRows&&(g=M.getCellIds(x._resizedRows[1]),v=u({row:g.row,col:0}),l=k.el(".resize_line",{style:{top:v.y+v.height-2,left:0,width:x._grid.config.$totalWidth,height:"2px"}})),M.isRangeId(w)&&(w=(_=M.getRangeArray(w))[_.length-1]),M.getCellInfo(x.getFocusedCell(),x._activePage).edited||(v=(m=r(w)).top,_=m.left,w=m.width,v+=(m=m.height)-6,_+=w-6,m=k.el(".dhx_selection_grip",{"data-dhx-id":"selection_grip",style:{position:"absolute",left:_,top:v,zIndex:w<0||m<0?10:12},onmousedown:function(){x._mousePressed=!0,document.addEventListener("mousemove",E),x._pressedArea="fillHandle";var e=x.getSelectedCell().split(",");x.setSelectedCell(e[e.length-1]),x._cellsToCopy=x.getSelectedCell()}})),e.refs.selection.patch(k.el(".dhx_grid_selection",S(o,[n],t,[l,m]))))})},r);function r(e,t,n,i){this._spreadsheet=e,this._grid=t,this._bufferManager=n,this._events=e.events,this._activePage=i,this._setHandlers()}t.Selection=n},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(34),s=n(7),a=n(26),l=n(17),c=n(8),u=n(15),n=(d.prototype.endEdit=function(){var e=this;this.edit&&(o.awaitRedraw().then(function(){e._events.fire(c.SpreadsheetEvents.cellInput,[e._config.oninput[1],e._calendar.getValue()]),e._endEdit(),e._popup.hide()}),this.edit=!1)},d.prototype.setValue=function(e){var t;if(l.isNumeric(e))t=a.excelDateToJSDate(e);else{if(!u.stringToDate(e,this._dateFormat,!0))return;t=u.stringToDate(e,this._dateFormat)}this._calendar.setValue(t)},d.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},d.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),o.el("input.dhx_cell_input",i(i({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:i(i({},e._hooks),{didInsert:this._handlers.didInsert})}))},d.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},d.prototype._initHandlers=function(){var n=this;this._handlers={onFocus:function(){o.awaitRedraw().then(function(){n._showPopup()})},onOuterClick:function(e){var t;e.target instanceof Node&&(t=n._input&&n._input.contains(e.target),e=n._popup&&n._popup.getRootNode()&&n._popup.getRootNode().contains(e.target),t||e||n._popup.hide())},oninput:function(e){e.target.value||n._showPopup(),e.target.value.startsWith("=")&&n._popup.isVisible()&&n._popup.hide();var t=n._config.oninput;(0,t[0])(t[1],e)},didInsert:function(e){var t=e.el;n._input=t,n._input.addEventListener("focus",n._handlers.onFocus),n._config._hooks.didInsert(e)}}},d);function d(e,t,n){var i=this;this._dateFormat=t,this._calendar=new r.Calendar(null,{dateFormat:t}),this._popup=new s.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._calendar),this._events=n,this._endEdit=e,this._popup.events.on(s.PopupEvents.afterShow,function(){i._calendar.getRootNode().querySelector(".dhx_calendar__days").addEventListener("click",i.endEdit.bind(i),{once:!0})}),this._initHandlers()}t.DateEditor=n},function(e,t,n){"use strict";var h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var f=n(1),i=n(17),p=n(4),n=(o.prototype.xlsx=function(){var o=this;if(!p.isWasmSupported())throw new Error("WebAssembly is not supported by your browser");var u=[{id:""}],e=this._spreadsheet.serialize(),d=i.getDefaultFormats(),r=[];this._grid.config.columns.map(function(e){return{width:e.width}}).splice(1);e.sheets.forEach(function(e){for(var t=o._spreadsheet._dataStore.getPage(e.name).getSize(),n=[],c=[],i=0;i<t[1];i++)n.push(null);for(i=0;i<t[0];i++)c.push(s(n));e.data.forEach(function(t){var n,i,e=null,o=p.getCellIds(t.cell),r=o.row,s=o.col,a=d.find(function(e){return e.id===t.format}),o=a?a.mask:"",a=t.css||"",l=o+a;-1===(e=f.findIndex(u,function(e){return e.id===l}))&&(n={"text-align":"align","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle","text-decoration":"textDecoration","vertical-align":"verticalAlign"},i=dhx.css.get(a)||{},a=Object.keys(i).reduce(function(e,t){return e[n[t]||t]=i[t],e},{}),u.push(h(h({format:o},a),{id:l})),e=u.length-1);e={v:t.value?""+t.value:"",s:e};c[r][s]=e}),r.push({name:e.name,cells:c,cols:e.cols,rows:e.rows})});var t={data:r,styles:u},e=this._spreadsheet.config.exportModulePath;this._getXlsxWorker(e).postMessage({type:"convert",data:t})},o.prototype.json=function(){return f.downloadFile(JSON.stringify(this._spreadsheet.serialize()),"data.json","text/json")},o.prototype._getXlsxWorker=function(e){return this._xlsxWorker||(e=window.URL.createObjectURL(new Blob(["importScripts('"+e+"');"],{type:"text/javascript"})),this._xlsxWorker=new Worker(e),this._xlsxWorker.addEventListener("message",function(e){var t;"ready"===e.data.type&&((t=document.createElement("a")).href=URL.createObjectURL(e.data.blob),t.download="data.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t))})),this._xlsxWorker},o);function o(e,t){this._spreadsheet=e,this._grid=t}t.Exporter=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),n=(i.prototype.toJsonArray=function(e){var t=[],o=[],i={};return e.styles.forEach(function(n,e){var t=["background","color","textAlign","verticalAlign","textDecoration","fontWeight","fontStyle"].reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},{});o.push(n.format),i["imported_class"+e]=t}),e.data.forEach(function(e){var i=[];e.cells.forEach(function(e,n){e.forEach(function(e,t){e&&(e={cell:r.getCellNameByIndex(n,t+1),value:e.v,css:["imported_class"+e.s],format:o[e.s]},i.push(e))})}),t.push({name:e.name,data:i,cols:e.cols,rows:e.rows})}),{sheets:t,styles:i}},i);function i(){}t.XlsxDriver=n},function(e,i,r){"use strict";(function(n){Object.defineProperty(i,"__esModule",{value:!0});var o=r(4),e=(t.prototype.load=function(i,e){var o=this;return void 0===i&&(i="xlsx"),new n(function(n){o._getFile(i,e).then(function(e){if("json"===i)return n(e);e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t=o._spreadsheet.config.importModulePath,t=o._getXlsxWorker(t);t.postMessage({type:"convert",data:e,formulas:!0}),t.onmessage=function(e){"ready"===e.data.type&&n(e.data)}})})},t.prototype._getXlsxWorker=function(e){return this._xlsxWorker||(e=window.URL.createObjectURL(new Blob(["importScripts('"+e+"');"],{type:"text/javascript"})),this._xlsxWorker=new Worker(e)),this._xlsxWorker},t.prototype._getFile=function(i,t){return void 0===i&&(i="xlsx"),new n(function(n){if(t)return o.fetchFile(t,"GET","arraybuffer").then(function(e){n(e)});var e=document.createElement("input");e.type="file",e.accept="."+i,e.click(),e.addEventListener("change",function(e){var t=new FileReader;t.onload=function(){var e=t.result;n("json"===i?e:new Uint8Array(e))},"json"===i?t.readAsText(e.target.files[0]):t.readAsArrayBuffer(e.target.files[0])})})},t);function t(e){this._spreadsheet=e}i.FileProxy=e}).call(this,r(14))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30);t.Store=i.Store,t.initMathStore=function(e){var t=new i.DataStore;return e.forEach(function(e){return t.addPage(e.value)}),t}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.detectDrag=function(r){return new e(function(t){var n=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",n),t(!1)},i=setTimeout(function(){n()},1e3),o=function(e){(4<Math.abs(e.pageX-r.pageX)||4<Math.abs(e.pageY-r.pageY))&&(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",n),clearTimeout(i),t({x:r.pageX,y:r.pageY}))};document.addEventListener("mousemove",o),document.addEventListener("mouseup",n)})}}).call(this,n(14))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={popups:{},lastActive:null,freeCount:0,add:function(e,t){this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"),this.popups[e]=t},setActive:function(e){var t;e===this.lastActive||(t=this.popups[e])&&(this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"))},openFreeWindow:function(e){0===this.freeCount&&e.classList.add("dhx_window--no-scroll"),this.freeCount++},closeFreeWindow:function(e){this.freeCount--,0===this.freeCount&&e.classList.remove("dhx_window--no-scroll")}}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(87),a=n(38),l=n(12),c=n(25),f=n(53),o=(r=s.Window,o(u,r),u.prototype._startResize=function(r){var e,t,s=this,a=100|this.config.minWidth,l=100|this.config.minHeight,c=this._popup.offsetLeft,u=this._popup.offsetTop,d=this._popup.offsetWidth,h=this._popup.offsetHeight,n=this.getRootView().refs;switch(!0){case r.bottom&&r.left:t="dhx_window-body-pointer--bottom_left",e=n.bottomLeft;break;case r.bottom&&r.right:t="dhx_window-body-pointer--bottom_right",e=n.bottomLeft;break;case r.top&&r.left:t="dhx_window-body-pointer--top_left",e=n.bottomLeft;break;case r.top&&r.right:t="dhx_window-body-pointer--top-right",e=n.right;break;case r.top:t="dhx_window-body-pointer--top",e=n.bottomLeft;break;case r.bottom:t="dhx_window-body-pointer--bottom",e=n.bottomLeft;break;case r.left:t="dhx_window-body-pointer--left",e=n.bottomLeft;break;case r.right:t="dhx_window-body-pointer--right",e=n.right}e.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(t);function i(e){var t=(o=s._getContainerParams()).containerInnerWidth,n=o.containerInnerHeight,i=o.containerXOffset,o=o.containerYOffset,e={width:s._notInNode()?e.pageX-c:e.pageX-s.config.node.offsetLeft-c,height:s._notInNode()?e.pageY-u:e.pageY-s.config.node.offsetTop-u,left:s._notInNode()?e.pageX:e.pageX-s.config.node.offsetLeft,top:s._notInNode()?e.pageY:e.pageY-s.config.node.offsetTop};r.right&&(e.width<a?e.width=a:e.width>i+t-c&&(e.width=i+t-c),s._popup.style.width=e.width+"px"),r.bottom&&(e.height<l?e.height=l:e.height>o+n-u&&(e.height=o+n-u),s._popup.style.height=e.height+"px"),r.left&&(c+d-e.left<a&&(e.left=c+d-a),e.width=c+d-e.left,s.config.left=e.left,s._popup.style.left=e.left+"px",s._popup.style.width=e.width+"px"),r.top&&(e.top<o?e.top=o:u+h-e.top<l&&(e.top=u+h-l),e.height=u+h-e.top,s.config.top=e.top,s._popup.style.top=e.top+"px",s._popup.style.height=e.height+"px"),s.config.width=s._popup.offsetWidth,s.config.height=s._popup.offsetHeight,s.events.fire(f.WindowEvents.resize,[e,{left:c,top:u,height:h,width:d},r]),s.scrollView&&s.scrollView.update()}var o=function(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",i),s.config.node.classList.remove("dhx_window--stop_selection"),s.config.node.classList.remove(t),e.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",o),document.addEventListener("mousemove",i)},u.prototype._initUI=function(){var n=this,e=[],t=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;t&&e.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),e.push({id:"content",css:t?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&e.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&e.push({id:"resizers",height:"content",css:"resizers"});var i,o=this._layout=new l.ProLayout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:e,on:{click:this._handlers.setActive},id:this._uid}),e=this._layout.getCell("content");e&&e.scrollView&&(this.scrollView=e.scrollView),t&&(i=this.header=new a.Toolbar,this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),i.events.on(c.NavigationBarEvents.click,function(e,t){"close"===e&&n._hide(t)})),o.getCell("header").attach(i)),this.config.footer&&(i=this.footer=new a.Toolbar,o.getCell("footer").attach(i)),this.config.resizable&&o.getCell("resizers").attach(function(){return n._drawResizers()})},u);function u(e){return r.call(this,e)||this}t.ProWindow=o},function(e,t,n){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),d=n(4),h=n(41),f=n(16);function p(e){if(!(e.ctrlKey||e.altKey||e.metaKey)){e=e.which||e.keyCode;return 65<=e&&e<=90||48<=e&&e<=57||96<=e&&e<=105||!!{32:" ",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[e]||!1}}function g(o){var e=o.selection.getSelectedCell(),e=d.isRangeId(e)?d.getRangeMatrix(e):[[e]];return'\n\t\x3c!--StartFragment--\x3e\n\t\t<table id="customers">\n\t\t\t<tbody style="box-sizing: inherit;">\n\t\t\t\t'+e.reduce(function(e,t){return e+'<tr style="box-sizing: inherit;">'+t.reduce(function(e,t){var n=o.getValue(t)||" ",i=o.getStyle(t)||{};return e+' <th style="'+Object.keys(i).reduce(function(e,t){return""+e+t+":"+i[t]+";"},"")+'">\n\t\t\t'+n+"</th>"},"")+"</tr>"},"")+"\n\t\t\t</tbody>\n\t\t</table>\n\t\x3c!--EndFragment--\x3e"}function l(e,t){return"row"===t?{min:0,max:e.data.getLength()-1}:{min:1,max:e.config.columns.length-1}}function v(e,t,n,i,o,r){var s;d.getCellInfo(e.selection.getFocusedCell(),i).edited||(s=d.getCellIndex(e.selection.getFocusedCell()),i=l(t,r),(n=o?s[r]+o:n)>=i.min&&n<=i.max&&(s[r]=n),s=d.getCellNameByIndex(s.row,s.col),e.selection.setSelectedCell(s),s=d.getCellIds(s),t.scrollTo(""+(s.row+1),""+(s.col+1)))}function _(e,t,n,i,o){var r,s,a=e.selection.getFocusedCell();d.getCellInfo(a,o).edited||(r=d.getCellIndex(a),r=(o=e.selection.getSelectedCell().split(",")[0]).includes(":")?(o=d.getRangeIndexes(o)).end[i]>r[i]?(s=c({},o.end),o.start):(s=c({},o.start),o.end):(s=c({},r),r),t=l(t,i),s[i]+n>=t.min&&s[i]+n<=t.max&&(s[i]+=n,(s=d.getCellNameByIndex(s.row,s.col))!==(r=d.getCellNameByIndex(r.row,r.col))?(e.selection.setSelectedCell(s+":"+r),e.selection.setFocusedCell(a)):e.selection.setSelectedCell(s)))}t.isPrintableKey=p,t.getHtmlData=g,t.getKeysHandlers=function(r,o,s,a){var l,i;function n(e,t){var n=s.getStruct(),i=r.selection.getSelectedCell(),o=d.getCellIndex(i),o=d.getCellNameByIndex(o.row+e.rowsCount-1,o.col+e.colsCount-1),o=d.isRangeId(i)?i:i+":"+o;e.styles?n.styles=e.styles:n.styles=r.getStyle(o),t&&!t.includes(n.html)&&(n.cells=""),t=n.value,n.value=e.values,n.cell=o,s.paste(),n.value=t}r.events.on(u.SpreadsheetEvents.afterEditStart,function(e){l=e}),r.events.on(u.SpreadsheetEvents.afterEditEnd,function(){l=null}),r.events.on(u.SpreadsheetEvents.afterSheetChange,function(){return i=r._activePage}),document.addEventListener("keydown",function(e){var t;!p(e)||f.focusManager.getFocusId()!==r._uid&&f.focusManager.getFocusId()!==o._uid||(t=r.selection.getFocusedCell())&&t!==l&&(e.preventDefault(),r.startEdit(t,e.key))});var e={};return window.clipboardData?e={"ctrl+c":function(){l||(s.store("copy"),window.clipboardData&&(window.clipboardData.setData("text/html",g(r)),window.clipboardData.setData("text/plain",s.getStruct().value),window.preventDefault(),s.getStruct().html=window.clipboardData.getData("text/html")))},"ctrl+x":function(){l||(s.store("cut"),window.clipboardData&&(window.clipboardData.setData("text/html",g(r)),window.clipboardData.setData("text/plain",s.getStruct().value),window.preventDefault(),s.getStruct().html=window.clipboardData.getData("text/html")))},"ctrl+v":function(){var e,t;l||window.clipboardData&&(e=d.parseFromText(window.clipboardData.getData("text")),(t=window.clipboardData.getData("text/html"))&&t.includes("<table")&&(e=d.parseHtmlTable(t)),n(e,t||""))}}:(document.addEventListener("cut",function(e){l||f.focusManager.getFocusId()!==r._uid&&f.focusManager.getFocusId()!==o._uid||(s.store("cut"),e.clipboardData.setData("text/html",g(r)),e.clipboardData.setData("text/plain",s.getStruct().value),e.preventDefault(),s.getStruct().html=e.clipboardData.getData("text/html"))}),document.addEventListener("copy",function(e){l||f.focusManager.getFocusId()!==r._uid&&f.focusManager.getFocusId()!==o._uid||(s.store("copy"),e.clipboardData.setData("text/html",g(r)),e.clipboardData.setData("text/plain",s.getStruct().value),e.preventDefault(),s.getStruct().html=e.clipboardData.getData("text/html"))}),document.addEventListener("paste",function(e){var t;l||f.focusManager.getFocusId()!==r._uid&&f.focusManager.getFocusId()!==o._uid||(e.preventDefault(),t=e.clipboardData.getData("text/html"),e=d.parseFromText(e.clipboardData.getData("text")),t&&t.includes("<table")&&(e=d.parseHtmlTable(t)),n(e,t||""))})),c(c({},e),{escape:function(){var e=r.selection.getSelectedCell(),e=d.getCellInfo(e,i);s.getStruct().inserted=!0,e.edited&&(r.endEdit(!0),o.paint())},delete:function(){var e;l||((e=r.selection.getSelectedCell())&&r.setValue(e,""),o.paint())},enter:function(){var e=r.selection.getSelectedCell(),t=r.selection.getFocusedCell(),n=r._editMode;if(!a.navigate("enter"))if(l||n&&n.cell){var i=d.getCellIndex(l||n.cell);i.row=i.row+1===o.data.getLength()?i.row:i.row+1,r.selection.setSelectedCell(d.getCellNameByIndex(i.row,i.col)),l="",d.isRangeId(e)&&!n&&(r.selection.setSelectedCell(e),r.selection.setFocusedCell(d.getNextRangeCell(e,t,"col")))}else{if(d.isRangeId(e))return r.endEdit(),r.selection.setSelectedCell(e),void r.selection.setFocusedCell(d.getNextRangeCell(e,t,"col"));r.startEdit(e)}},f2:function(){r.startEdit(r.selection.getSelectedCell())},pageUp:function(e){e.preventDefault();e=o.getRootView().refs.grid_body;e.el.scrollTop-=e.el.clientHeight},pageDown:function(e){e.preventDefault();e=o.getRootView().refs.grid_body;e.el.scrollTop+=e.el.clientHeight-o.config.rowHeight},"ctrl+a":function(e){var t;l||(e.preventDefault(),t=d.getCellNameByIndex(0,1),e=d.getCellNameByIndex(o.data.getLength()-1,o.config.columns.length-1),r.selection.setSelectedCell(t+":"+e))},"shift+arrowLeft":function(){_(r,o,-1,"col",i)},"shift+arrowRight":function(){_(r,o,1,"col",i)},"shift+arrowDown":function(){_(r,o,1,"row",i)},"shift+arrowUp":function(){_(r,o,-1,"row",i)},"ctrl+enter":function(){r.endEdit()},"shift+enter":function(){var e=r.selection.getSelectedCell();if(d.isRangeId(e)){var t=r.selection.getFocusedCell();return r.endEdit(),r.selection.setSelectedCell(e),void r.selection.setFocusedCell(d.getPrevRangeCell(e,t,"col"))}v(r,o,null,i,-1,"row")},tab:function(e){e.preventDefault();var t=r.selection.getSelectedCell();if(d.isRangeId(t)){e=r.selection.getFocusedCell();return r.endEdit(),r.selection.setSelectedCell(t),void r.selection.setFocusedCell(d.getNextRangeCell(t,e))}v(r,o,null,i,1,"col")},"shift+tab":function(e){e.preventDefault();var t=r.selection.getSelectedCell();if(d.isRangeId(t)){e=r.selection.getFocusedCell();return r.endEdit(),r.selection.setSelectedCell(t),void r.selection.setFocusedCell(d.getPrevRangeCell(t,e))}v(r,o,null,i,-1,"col")},arrowLeft:function(e){l||(e.preventDefault(),v(r,o,null,i,-1,"col"))},arrowRight:function(e){l||(e.preventDefault(),v(r,o,null,i,1,"col"))},arrowDown:function(e){e.preventDefault(),a.navigate("arrowDown")||l||v(r,o,null,i,1,"row")},arrowUp:function(e){e.preventDefault(),a.navigate("arrowUp")||l||v(r,o,null,i,-1,"row")},"ctrl+arrowLeft":function(){v(r,o,1,i,null,"col")},"ctrl+arrowRight":function(){v(r,o,o.config.columns.length-1,i,null,"col")},"ctrl+arrowDown":function(){v(r,o,o.data.getLength()-1,i,null,"row")},"ctrl+arrowUp":function(){v(r,o,0,i,null,"row")},home:function(e){l||(e.preventDefault(),v(r,o,1,i,null,"col"))},end:function(e){l||(e.preventDefault(),v(r,o,o.config.columns.length-1,i,null,"col"))},"ctrl+home":function(){v(r,o,0,i,null,"row"),v(r,o,1,i,null,"col")},"ctrl+end":function(){v(r,o,o.data.getLength()-1,i,null,"row"),v(r,o,o.config.columns.length-1,i,null,"col")},"ctrl+z":function(e){var t=r.selection.getFocusedCell(),n=d.getCellInfo(t,i);t&&n.edited||e.preventDefault(),r.undo()},"ctrl+y":function(e){e.preventDefault(),r.redo()},"ctrl+shift+z":function(){r.redo()},"ctrl+b":function(){var e=r.selection.getSelectedCell(),e=h.getToggledValue(i,e,"font-weight","bold");r.setStyle(r.selection.getSelectedCell(),{"font-weight":e})},"ctrl+i":function(){var e=r.selection.getSelectedCell(),e=h.getToggledValue(i,e,"font-style","italic");r.setStyle(r.selection.getSelectedCell(),{"font-style":e})},"ctrl+u":function(e){e.preventDefault();e=r.selection.getSelectedCell(),e=h.getToggledValue(i,e,"text-decoration","underline");r.setStyle(r.selection.getSelectedCell(),{"text-decoration":e})},backspace:function(){l||r.setValue(r.selection.getSelectedCell(),"")}})}},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(7),s=n(8),a=n(36),l=n(16),n=(c.prototype.endEdit=function(){var t=this;this.edit&&(o.awaitRedraw().then(function(){var e;t._events.fire(s.SpreadsheetEvents.cellInput,[t._config.oninput[1],(null===(e=t._list.selection.getItem())||void 0===e?void 0:e.value)||t._input.value]),t._endEdit(),t._popup.hide()}),this.edit=!1)},c.prototype.setValue=function(e){e=e.map(function(e){return(null==e?void 0:e.toString().trim())||""}),e=new Set(e);this._data.parse(Array.from(e).map(function(e){return{value:e}}))},c.prototype.toHTML=function(e){var t=this;return this._config=e,this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),[o.el("input.dhx_cell_input",i(i({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide(),"ArrowDown"!==e.code&&"ArrowUp"!==e.code||l.focusManager.setFocusId(t._list._uid)},oninput:this._handlers.oninput,_hooks:i(i({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:function(){return document.removeEventListener("mousedown",t._handlers.onOuterClick)}})})),o.el(".dxi.dxi-menu-up.dhx_spreadsheet_cell_drop-down",{onclick:function(){return t.endEdit()}})]},c.prototype._filter=function(t){this._list.data.filter(function(e){return t?e.value.includes(t):e})},c.prototype._showPopup=function(){var e,t=this;this._popup.show(this._input,{centering:!0,mode:"bottom"}),this._list.selection.add((null===(e=this._list.data.find(function(e){return e.value===t._input.value}))||void 0===e?void 0:e.id)||"")},c.prototype._initHandlers=function(){var n=this;this._handlers={onFocus:function(){o.awaitRedraw().then(function(){n._showPopup()})},onOuterClick:function(e){var t;e.target instanceof Node&&(t=n._input&&n._input.contains(e.target),e=n._popup&&n._popup.getRootNode()&&n._popup.getRootNode().contains(e.target),t||e||n._popup.hide())},oninput:function(e){var t=e.target.value;t||n._showPopup(),t.startsWith("=")&&n._popup.isVisible()&&n._popup.hide(),n._filter(t);t=n._config.oninput;(0,t[0])(t[1],e)},didInsert:function(e){var t=e.el;n._input=t,n._input.addEventListener("focus",n._handlers.onFocus),n._config._hooks.didInsert(e)}},this._list.events.on(a.ListEvents.click,function(){n.endEdit()}),this._events.on(s.SpreadsheetEvents.afterEditEnd,function(){n._popup.hide()}),this._popup.events.on(r.PopupEvents.afterShow,function(){var e=n._list.getFocus();n._list.data.getItem(e)||n._list.setFocus(n._list.data.getId(0))})},c);function c(e,t){this._list=new a.List(null,{keyNavigation:!0,css:"dhx_editor-list"}),this._data=this._list.data,this._popup=new r.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._list),this._events=t,this._endEdit=e,this._initHandlers()}t.SelectEditor=n},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(221),r=n(8),s=n(86),a=n(21),l=n(7),c=n(4),n=(u.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide()},u.prototype.formValidation=function(e){if(!e)return!0;if("range"!==this._form.getItem("criteria").getValue())return!0;var t=c.getCellIds(e),e=t.row,t=t.start;return e||t},u.prototype.show=function(e,t){this._modal.isVisible()||this._modal.show();var n=i({},t);t.editor&&(t=t.editor.options,n.target="string"==typeof t?t:t.join(","),n.criteria="string"==typeof t?"range":"items"),this._form.setValue(i({cell:e,criteria:"items",target:""},n))},u.prototype._save=function(e){var t=this._form.getValue(),n=t.target,i=t.cell,t=t.criteria;this._form.validate()?e&&!n||((t="range"===t)&&!c.getCellIds(n).start&&(n+=":"+n),this.hide(),n=t?n:n.split(",").map(function(e){return e.trim()}),this._set(i,e?n:null)):this._form.blur("target")},u.prototype._initHandlers=function(){var t=this;this._form.events.on(o.FormEvents.focus,function(e){t._focus=e}),this._modal.events.on(l.PopupEvents.afterShow,function(){t._form.setFocus("target")}),this._form.events.on(o.FormEvents.click,function(e){switch(e){case"save":t._save(!0);break;case"remove":t._save(!1);break;default:t.hide()}}),this._form.getItem("criteria").events.on(o.FormEvents.change,function(e){e="Enter "+("range"===e?"cell range":" items separated by a comma");t._form.getItem("target").setProperties({placeholder:e}),t._form.setFocus("target")}),this._events.on(r.SpreadsheetEvents.afterSelectionSet,function(e){"cell"===t._focus&&(t._form.setValue({cell:e}),t._form.setFocus("cell")),"target"===t._focus&&"range"===t._form.getItem("criteria").getValue()&&(t._form.setValue({target:e}),t._form.setFocus("target"))})},u);function u(e,t){this._set=t,this._modal=new s.Window({title:a.default.validation,movable:!0,closable:!0,css:"dhx-spreadsheet-validation-form",height:250,width:600}),this._form=new o.Form(null,{rows:[{name:"cell",type:"input",label:"Cell range:",labelPosition:"left",labelWidth:70,width:270,placeholder:"Enter cell range"},{cols:[{name:"criteria",type:"combo",label:"Criteria:",labelPosition:"left",labelWidth:70,width:270,readonly:!0,multiselection:!1,data:[{value:"List of items",id:"items"},{value:"List from a range",id:"range"}]},{labelWidth:3,width:260,labelPosition:"left",name:"target",type:"input",validation:this.formValidation.bind(this),errorMessage:"Invalid cell range",placeholder:"Enter cell range"}]},{align:"end",cols:[{type:"button",text:"Cancel",id:"cancel",view:"link"},{type:"button",text:"Remove validation",id:"remove",view:"link"},{type:"button",text:"Save",id:"save"}]}]}),this._modal.attach(this._form),this._events=e,this._initHandlers()}t.ValidationForm=n},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(88)),i(t(230)),i(t(5));t=t(5);n.FormEvents=t.FormEvents},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(1),c=n(0),u=n(3),d=n(6),h=n(9),f=n(5);(n=a=t.RadioButtonEvents||(t.RadioButtonEvents={})).change="change",n.focus="focus",n.blur="blur",n.keydown="keydown";var p,o=(p=d.View,o(g,p),g.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._handlers=this._uid=this._props=this._propsItem=null,this.unmount()},g.prototype.setProperties=function(e){if(e&&!l.isEmptyObj(e)){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.paint()}},g.prototype.getProperties=function(){var e,t={};for(e in this.config)this._props.includes(e)&&(t[e]=this.config[e]);return t},g.prototype.getValue=function(){if(this.config.checked)return this.config.value},g.prototype.setValue=function(e){this.config.checked=e,this.paint()},g.prototype.focus=function(){var e=this;c.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},g.prototype.blur=function(){var e=this;c.awaitRedraw().then(function(){e.getRootView().refs.input.el.blur()})},g.prototype.disable=function(){this.config.$disabled=!0,this.paint()},g.prototype.enable=function(){this.config.$disabled=!1,this.paint()},g.prototype.isDisabled=function(){return this.config.$disabled},g.prototype.clear=function(){this.config.checked=!1,this.paint()},g.prototype.validate=function(){var e=!1;return this.config.checked&&(e=!0),this.config.$validationStatus=e?f.ValidationStatus.success:f.ValidationStatus.error,this.paint(),e},g.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this.paint()},g.prototype._draw=function(){var e=this.config,t=e.id,n=e.value,i=e.checked,o=e.$disabled,r=e.$name,s=e.$required,e=e.text;return c.el("label.dhx_radiobutton.dhx_form-group",{class:h.getFormItemCss(this.config,!!s)},[c.el("input.dhx_radiobutton__input",{type:"radio",id:t,value:n||"",name:r||"",disabled:o,checked:i,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input"}),c.el("span.dhx_radiobutton__visual-input"),c.el("span.dhx_text",[e])])},g);function g(e,t){void 0===t&&(t={});var n=p.call(this,e,r({text:"",width:"content",height:"content",padding:0},t))||this;n._propsItem=["text"],n._props=s(h.baseProps,n._propsItem),n._handlers={onchange:function(e){n.config.checked=e.target.checked,n.events.fire(a.change,[e.target.checked])},onfocus:function(){return n.events.fire(a.focus,[n.getValue()||"",n.config.id])},onblur:function(){var e;return null===(e=n.events)||void 0===e?void 0:e.fire(a.blur,[n.getValue()||"",n.config.id])},onkeydown:function(e){n.events.fire(a.keydown,[e,n.config.id])}},n.events=new u.EventSystem;return n.mount(e,c.create({render:function(){return n._draw()}})),n}t.RadioButton=o},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(99)),i(t(224)),i(t(43))},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(1),c=n(0),u=n(3),d=n(2),h=n(28),f=n(6),p=n(10),g=n(12),v=n(13),_=n(38),m=n(25),y=n(55),b=n(43),w=n(99),x=n(225),E=n(226),C=n(227),S=n(228),o=(a=f.View,o(I,a),I.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort()},I.prototype.getRootView=function(){return this._layout.getRootView()},I.prototype._initUI=function(e){var t=this,n=this.config.toolbar?x.layoutConfig:x.layoutConfigWithoutTopbar;n.on=this._getDragEvents();e=this._layout=new g.Layout(e,n),n=this.toolbar=new _.Toolbar(null,{css:"vault-toolbar"});this.toolbar.data.parse([{id:"add",tooltip:y.default.add,type:"button",icon:"dxi-plus"},{id:"upload",tooltip:y.default.upload,type:"button",icon:"dxi icon-upload"},{id:"spacer",type:"spacer"},{id:"remove-all",tooltip:y.default.clearAll,type:"button",icon:"dxi-delete-forever"}]),this._hideUploadAndDeleteButtons(),this._vaultView=f.toViewLike(c.create({render:function(){return t._draw()}})),this.config.toolbar&&e.getCell("topbar").attach(n),e.getCell("vault").attach(this._vaultView)},I.prototype._initHandlers=function(){var n=this;this._handlers={onclick:{".action-add":function(){return n.uploader.selectFile()},".action-remove-file":function(e){var t=d.locate(e);t&&(n.data.update(t,{$toRemove:!0}),setTimeout(function(){n.data.update(t,{$toRemove:!1},!0),n.data.remove(t)},200))}},onmouseover:{".action-download":function(e){v.tooltip(y.default.download,{node:e.target,position:v.Position.bottom})},".action-remove-file":function(e){v.tooltip(y.default.clear,{node:e.target,position:v.Position.bottom})},".title-content, .dhx-file-name":function(e){var t=d.locate(e),t=n.data.getItem(t);v.tooltip(t.name,{node:e.target,position:v.Position.bottom,css:"tooltip-light"})}}}},I.prototype._getDragEvents=function(){var o=this,r={left:null,top:null,width:null,height:null};return{dragleave:function(e){o._canDrop&&(e.pageX>r.left+r.width-1||e.pageX<r.left||e.pageY>r.top+r.height-1||e.pageY<r.top)&&(o._canDrop=!1,o.config.toolbar&&o._layout.getCell("topbar").show(),o._layout.config.css="vault-layout",o._layout.paint())},dragenter:function(e){if(e.preventDefault(),!o.uploader.isActive&&!o._canDrop){for(var t=0,n=e.dataTransfer.types;t<n.length;t++){var i=n[t];if("Files"!==i&&"application/x-moz-file"!==i)return void(o._canDrop=!1)}o._canDrop=!0;e=o.getRootView().node.el.getBoundingClientRect();r.left=e.left+window.pageXOffset,r.top=e.top+window.pageYOffset,r.width=e.width,r.height=e.height,o._canDrop=!0,o.config.toolbar&&o._layout.getCell("topbar").hide(),o._layout.config.css="vault-layout dhx-dragin",o._layout.paint()}},dragover:function(e){e.preventDefault()},drop:function(e){e.preventDefault(),o._canDrop&&(e=e.dataTransfer,o.uploader.parseFiles(e),o._canDrop=!1,o.config.toolbar&&o._layout.getCell("topbar").show(),o._layout.config.css="vault-layout",o._layout.paint())}}},I.prototype._hideUploadAndDeleteButtons=function(){this.toolbar.hide(["upload","remove-all"])},I.prototype._showUploadAndDeleteButtons=function(){this.uploader.config.autosend?this.toolbar.show("remove-all"):this.toolbar.show(["upload","remove-all"])},I.prototype._initEvents=function(){var t=this;this.data.events.on(p.DataEvents.change,function(){t.data.getLength()?t._showUploadAndDeleteButtons():t._hideUploadAndDeleteButtons(),t._vaultView.paint()}),this.events.on(b.UploaderEvents.uploadBegin,function(){t.config.toolbar&&t._layout.getCell("topbar").attach(t._progressBar)}),this.events.on(b.UploaderEvents.uploadComplete,function(){t.config.mode===b.VaultMode.grid&&t.uploader.config.autosend&&t._readStack.read(),t.config.toolbar&&t._layout.getCell("topbar").attach(t.toolbar)}),this.toolbar.events.on(m.NavigationBarEvents.click,function(e){switch(e){case"add":t.uploader.selectFile();break;case"remove-all":t.data.removeAll();break;case"upload":t.uploader.send()}}),this.events.on(b.ProgressBarEvents.cancel,function(){t.uploader.abort(),t._vaultView.paint()})},I.prototype._draw=function(){var e=!this.data.getLength(),t=this.config.mode===b.VaultMode.grid?this._drawGrid():this._drawList();return c.el("div",r(r({class:"vault dhx_widget"+(this._canDrop?" drop-here":"")},this._handlers),{"data-dhx-widget-id":this._uid}),[this._canDrop||e?this._drawDropableArea():this.config.customScroll?this._scrollView.render(t):t])},I.prototype._getFileActions=function(e){var t,n=[],i=[],o=[c.el(".dhx-default-actions",n),c.el(".dhx-hover-actions",i)];if(e.status===b.FileStatus.inprogress)return o;e.status!==b.FileStatus.failed&&e.link&&(t=(r=(this.config.downloadURL||"")+e.link).split("/").pop().split("?")[0],r=c.el("a",{download:t,class:"download-link",href:r},[c.el(".icon-btn.dxi.dxi-download.action-download")]),i.push(r));var r=c.el(".icon-btn.dxi.dxi-delete-forever.action-remove-file");return i.push(r),e.status===b.FileStatus.failed&&(r=c.el(".dxi.dxi-alert-circle.warning-status"),n.push(r)),e.status===b.FileStatus.uploaded&&(e=c.el(".dxi.dxi-checkbox-marked-circle.uploaded-status"),n.push(e)),o},I.prototype._drawList=function(){var r=this;return c.el(".dhx-files-block.dhx-webkit-scroll",this.data.map(function(e){var t=e.status===b.FileStatus.failed&&e.request,n=e.status===b.FileStatus.inprogress,i=e.status===b.FileStatus.queue,o=e.status!==b.FileStatus.uploaded;return c.el("div",{class:"dhx-file-item"+(e.$toRemove?" to-remove":"")+(i?" in-queue":""),"data-dhx-id":e.id,_key:e.id},[c.el(".dhx-file-icon",[c.el("div",{class:"dhx-file-type "+E.getFileClassName(e)+(o?" not-loaded":"")})]),c.el(".dhx-file-title",[c.el(".dhx-title-content",e.name),c.el(".dhx-file-info",[t&&c.el(".warn-message",e.request.statusText||y.default.error),n?c.el(".progress-value",(100*e.progress).toFixed(1)+"%"):c.el(".dhx-size"+(t?".dhx-size-error":""),E.getBasis(e.size))])]),n&&c.el(".dhx-download-progress",{style:{width:(100*e.progress).toFixed(1)+"%"}}),!n&&c.el(".dhx-file-action",r._getFileActions(e))])}))},I.prototype._drawDropableArea=function(){return c.el(".dhx-dropable-area.drop-files-here",[c.el(".dhx-big-icon-block",[c.el(".dxi.icon-upload")]),!this._canDrop&&c.el(".drop-area-bold-text",y.default.dragAndDrop),!this._canDrop&&c.el(".drop-area-bold-text",y.default.filesOrFoldersHere),!this._canDrop&&c.el(".drop-area-light-text",y.default.or),!this._canDrop&&c.el("button.dhx_btn.dhx_btn--flat.dhx_btn--small.action-add",y.default.browse)])},I.prototype._drawGrid=function(){var l=this;return c.el("div",{class:"dhx-files-grid dhx-webkit-scroll"},[c.el(".dhx-grid-content",this.data.map(function(a){var e=a.status===b.FileStatus.inprogress,t=a.status===b.FileStatus.queue,n=a.status===b.FileStatus.failed;return c.el("div",{class:"dhx-file-grid-item"+(e?" in-progress":"")+(a.$toRemove?" to-remove":"")+(t?" in-queue":"")+(n?" failed":""),"data-dhx-id":a.id,_key:a.id},[c.el(".dhx-preview-wrapper",s([a.preview?c.el(".dhx-server-file-preview",[c.el("img",{src:a.preview})]):a.image?c.el("canvas",{width:98*l.config.scaleFactor,height:98*l.config.scaleFactor,_hooks:{didInsert:function(e){var t=E.calculateCover(a.image),n=t.dx,i=t.dy,o=t.sx,r=t.sy,s=t.sHeight,t=t.sWidth;e.el.getContext("2d").drawImage(a.image,o,r,t,s,n,i,98*l.config.scaleFactor,98*l.config.scaleFactor)}}}):c.el("div",{class:"dhx-file-preview dhx-file-type "+E.getFileClassName(a)}),e&&l._drawCircle(a.progress)],l._getFileActions(a),[c.el(".dhx-file-info",[n&&c.el(".warn-message",a.request.statusText||y.default.error),!e&&c.el(".dhx-size"+(n?".dhx-size-error":""),E.getBasis(a.size))])])),c.el(".dhx-file-name",E.truncateWord(a.name))])}))])},I.prototype._drawCircle=function(e){return c.el(".progress-layout",[c.el(".progress-amount",(100*e).toFixed(1)+"%"),c.sv("svg",{xmlns:"http://www.w3.org/2000/svg",class:"progress-circle",viewBox:"0 0 60 60"},[c.sv("circle",{cx:30,cy:30,r:28,"stroke-width":4,class:"progress-bar-background"}),c.sv("circle.active-circle",{cx:30,cy:30,r:28,"stroke-width":4,"stroke-dasharray":"175.9 175.9","stroke-dashoffset":175.9*(1-e),class:"progress-bar-active"})])])},I);function I(e,t){void 0===t&&(t={});var i=a.call(this,null,l.extend({mode:b.VaultMode.list,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{}},t))||this;return i.config.toolbar||(i.config.uploader.autosend=!0),t.data?(i.data=t.data,i.events=t.data.events,i.events.context=i):(i.events=new u.EventSystem(i),i.data=new p.DataCollection({},i.events)),i.data.config.init=function(e){return e.status=e.status||b.FileStatus.uploaded,e.file?(e.size=e.file.size,e.name=e.file.name):(e.size=e.size||0,e.name=e.name||""),i.config.mode===b.VaultMode.grid&&e.file&&E.isImage(e)&&i._readStack.add(e,i.uploader.config.autosend),e},i._readStack=new S.ReadStackPreview(i.data),i.uploader=new w.Uploader(i.config.uploader,i.data,i.events),i._scrollView=new h.ScrollView(function(){return i._vaultView.getRootView()}),i._progressBar=new C.ProgressBar(i.events,i.config.progressBar),i.events.on(b.UploaderEvents.uploadProgress,function(e,t,n){return i._progressBar.setState(e,{current:t,total:n})}),i._initHandlers(),i._initUI(e),i._initEvents(),i}t.Vault=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layoutConfig={css:"vault-layout",rows:[{id:"topbar",css:"vault-topbar"},{id:"vault",css:"vault-file-grid"}]},t.layoutConfigWithoutTopbar={css:"vault-layout",rows:[{id:"vault",css:"vault-file-grid"}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(55),o=["byte","kilobyte","megabyte","gigabyte"];t.getBasis=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e<1024?e+" "+i.default[o[t]]:this.getBasis(Math.round(e/1024),t+1)};var r;function s(e){return{extension:e.name.split(".").pop()||"none",mime:e.file?e.file.type:""}}function a(e,t){switch(e){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return r.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return r.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return r.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return r.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return r.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return r.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return r.presentation;case"html":case"htm":case"eml":return r.web;case"exe":return r.application;case"dmg":return r.apple;case"pdf":case"ps":case"eps":return r.pdf;case"psd":return r.psd;case"txt":case"djvu":case"nfo":case"xml":return r.text;default:switch(t.split("/")[0]){case"image":return r.image;case"audio":return r.audio;case"video":return r.video;default:return r.other}}}t.truncateWord=function(e,t){if(void 0===t&&(t=13),e.length<=t)return e;var n,i=e.lastIndexOf(".");return(-1===i?(n=e.substr(e.length-4),e.substr(0,t-7)):(i=i-3,n=e.substr(i),e.substr(0,t-(e.length-i))))+"..."+n},t.calculateCover=function(e){var t,n,i,o=e.width,r=e.height,o=1<(e=o/r)?(t=n=r,i=(o-n)/2,0):e<1?(i=0,(r-(t=n=o))/2):(n=t=o,i=0);return{sx:i,sy:o,sWidth:n,sHeight:t,dx:0,dy:0}},(n=r=t.FileType||(t.FileType={})).image="image",n.video="video",n.archive="archive",n.table="table",n.document="document",n.presentation="presentation",n.application="application",n.web="web",n.apple="apple",n.pdf="pdf",n.psd="psd",n.audio="audio",n.other="other",n.text="text",t.getFileType=a,t.getFileClassName=function(e){var t=s(e),e=t.mime;return a(t=t.extension,e)+" extension-"+t},t.isImage=function(e){var t=s(e),e=t.mime;return a(t.extension,e)===r.image}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(0),a=n(6),l=n(55),c=n(43),o=(r=a.View,o(u,r),u.prototype.setState=function(e,t){this._progress=e,this.config.template?this._progressText=this.config.template(e,t):this._progressText=this._progress.toFixed(1)+"%",this.paint()},u.prototype._draw=function(){return s.el(".progress-bar",{_key:this._uid},[s.el(".progress-indicator",{style:{width:this._progress+"%"}}),s.el(".progress-text",{".innerHTML":this._progressText}),s.el("button",{class:"dhx_btn dhx_btn--flat dhx_btn_small action-abort-all",onclick:this._abortUpload},l.default.cancel)])},u);function u(e,t){var n=r.call(this,null,t)||this;n.events=e,n._progress=0;return n.mount(null,s.create({render:function(){return n._draw()}})),n._abortUpload=function(){n.events.fire(c.ProgressBarEvents.cancel)},n}t.ProgressBar=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(o.prototype.add=function(e,t){void 0===t&&(t=!1),this._readerStack.push(e),t||this.read()},o.prototype.read=function(){var n,e,i=this;this._readerStack.length&&!this._isActive&&(n=this._readerStack.shift(),this._isActive=!0,(e=new FileReader).readAsDataURL(n.file),e.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){i._data.exists(n.id)&&i._data.update(n.id,{image:t}),i._isActive=!1,i.read()}},e.onerror=function(){i._isActive=!1,i.read()})},o.prototype.stop=function(){this._readerStack=[]},o);function o(e){this._readerStack=[],this._isActive=!1,this._data=e}t.ReadStackPreview=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={simpleVaultText:"Drag & drop files or folders here or",simpleVaultLabel:"browse files"}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),C=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n},S=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(88),I=n(5),a=n(12),k=n(1),M=n(90),P=n(89),O=n(54),D=n(91),V=n(42),A=n(92),F=n(93),R=n(98),T=n(97),H=n(94),L=n(95),j=n(100),N=n(101),$=n(231),z=n(102),B=n(232),o=(r=s.Form,o(l,r),l.prototype._addLayoutItem=function(e){var n=this,t=e.id=e.id||k.uid(),i=e.name=e.name||t.toString();e.type=e.type&&e.type.toLowerCase();var o=e.width,r=e.height,s=e.css,t=e.padding,a=C(e,["css","padding"]),l=s?s+" dhx_form-element":"dhx_form-element",s=!("spacer"===e.type||void 0===e.type);switch(s&&!o&&(o="content"),s&&!r&&(r="content"),a.type){case"button":a.full&&(l+=" dhx_button--full-gravity");var c=this._attachments[i]=new M.Button(null,a);c.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),c.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),c.events.on(I.ItemEvent.click,function(e){e.preventDefault(),n.events.fire(I.FormEvents.click,[i,e]),n.events.fire(I.FormEvents.buttonClick,[i,e]),c.config.submit&&n.validate()&&c.config.url&&n.send(c.config.url)}),c.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),c.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),c.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),c.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),c.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),c.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),c.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"datepicker":var u=this._attachments[i]=new P.DatePicker(null,a);this._state[i]=u.getValue("Date"===a.valueFormat),u.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),u.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=u.getValue("Date"===a.valueFormat),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),u.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),u.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),u.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),u.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),u.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),u.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),u.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),u.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),u.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),u.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"checkbox":var d=this._attachments[i]=new O.Checkbox(null,a);this._state[i]=d.getValue(),d.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),d.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=d.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),d.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),d.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),d.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),d.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),d.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),d.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),d.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),d.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),d.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),d.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"checkboxgroup":var h=this._attachments[i]=new D.CheckboxGroup(null,a);this._state[i]=h.getValue(),h.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),h.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=h.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),h.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),h.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),h.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),h.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),h.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),h.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),h.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),h.events.on(I.ItemEvent.focus,function(e,t){n.events.fire(I.FormEvents.focus,[i,e,t])}),h.events.on(I.ItemEvent.blur,function(e,t){n.events.fire(I.FormEvents.blur,[i,e,t])}),h.events.on(I.ItemEvent.keydown,function(e,t){n.events.fire(I.FormEvents.keydown,[e,i,t])});break;case"combo":var f=this._attachments[i]=new B.ProCombo(null,a);this._state[i]=f.getValue(),f.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),f.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=f.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),f.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),f.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),f.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),f.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),f.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),f.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),f.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),f.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),f.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),f.events.on(I.ItemEvent.keydown,function(e,t){n.events.fire(I.FormEvents.keydown,[e,i,t])});break;case"input":var p=this._attachments[i]=new V.Input(null,a);this._state[i]=p.getValue(),p.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),p.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=p.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),p.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),p.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),p.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),p.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),p.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),p.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),p.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),p.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),p.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),p.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"radiogroup":var g=this._attachments[i]=new A.RadioGroup(null,a);this._state[i]=g.getValue(),g.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),g.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=g.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),g.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),g.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),g.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),g.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),g.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),g.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),g.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),g.events.on(I.ItemEvent.focus,function(e,t){n.events.fire(I.FormEvents.focus,[i,e,t])}),g.events.on(I.ItemEvent.blur,function(e,t){n.events.fire(I.FormEvents.blur,[i,e,t])}),g.events.on(I.ItemEvent.keydown,function(e,t){n.events.fire(I.FormEvents.keydown,[e,i,t])});break;case"select":var v=this._attachments[i]=new F.Select(null,a);this._state[i]=v.getValue(),v.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),v.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=v.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),v.events.on(I.ItemEvent.changeOptions,function(e){n.layout.getCell(i).config.options=S(e)}),v.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),v.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),v.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),v.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),v.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),v.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),v.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),v.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),v.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),v.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"simplevault":a.$vaultHeight=r;var _=this._attachments[i]=new R.SimpleVault(null,a);this._state[i]=_.getValue(),_.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),_.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=_.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),_.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),_.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),_.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),_.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),_.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),_.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),_.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])});break;case"slider":var m=this._attachments[i]=new T.SliderForm(null,a);this._state[i]=m.getValue(),m.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),m.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),m.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),m.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),m.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),m.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),m.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),m.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"textarea":var y=this._attachments[i]=new H.Textarea(null,a);this._state[i]=y.getValue(),y.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),y.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=y.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),y.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),y.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),y.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),y.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),y.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),y.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),y.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),y.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),y.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),y.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"text":"content"===o&&(l+=" dhx_form-element--fit-content");var b=this._attachments[i]=new L.Text(null,a);this._state[i]=b.getValue(),b.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),b.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=b.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),b.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),b.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),b.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),b.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),b.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),b.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),b.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])});break;case"timepicker":var w=this._attachments[i]=new j.TimePicker(null,a);this._state[i]=a.value&&w.getValue("timeObject"===a.valueFormat)||"",w.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),w.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=w.getValue("timeObject"===a.valueFormat),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),w.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),w.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),w.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),w.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),w.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),w.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),w.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),w.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),w.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),w.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"colorpicker":var x=this._attachments[i]=new N.ColorPicker(null,a);this._state[i]=x.getValue(),x.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),x.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n._state[i]=x.getValue(),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),x.events.on(I.ItemEvent.change,function(e){n._state[i]=e,n.events.fire(I.FormEvents.change,[i,e])}),x.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),x.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),x.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),x.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])}),x.events.on(I.ItemEvent.beforeValidate,function(e){return n.events.fire(I.FormEvents.beforeValidate,[i,e])}),x.events.on(I.ItemEvent.afterValidate,function(e,t){n.events.fire(I.FormEvents.afterValidate,[i,e,t])}),x.events.on(I.ItemEvent.focus,function(e){n.events.fire(I.FormEvents.focus,[i,e])}),x.events.on(I.ItemEvent.blur,function(e){n.events.fire(I.FormEvents.blur,[i,e])}),x.events.on(I.ItemEvent.keydown,function(e){n.events.fire(I.FormEvents.keydown,[e,i])});break;case"container":var E=this._attachments[i]=new $.Container(null,a);E.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),E.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),E.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),E.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),E.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),E.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])});break;case"spacer":default:E=this._attachments[i]=new z.Spacer(null,a);E.events.on(I.ItemEvent.beforeChangeProperties,function(e){return n.events.fire(I.FormEvents.beforeChangeProperties,[i,e])}),E.events.on(I.ItemEvent.afterChangeProperties,function(e){n._changeProps(i,e),n.events.fire(I.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()}),E.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return n.events.fire(I.FormEvents.beforeHide,[i,e])}),E.events.on(I.ItemEvent.beforeShow,function(e){return n.events.fire(I.FormEvents.beforeShow,[i,e])}),E.events.on(I.ItemEvent.afterHide,function(e,t){n.layout.getCell(i).hide(),t||n.events.fire(I.FormEvents.afterHide,[i,e])}),E.events.on(I.ItemEvent.afterShow,function(e){n.layout.getCell(i).show(),n.events.fire(I.FormEvents.afterShow,[i,e])})}t={id:i,width:o,height:r,padding:t,css:l};return"gravity"in e&&(t.gravity=e.gravity),t},l.prototype._initUI=function(e){var t=this._attachments={},n={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,n);var i,o=this.layout=new a.ProLayout(e,n);for(i in t)o.getCell(i).attach(t[i])},l);function l(e,t){return r.call(this,e,t)||this}t.ProForm=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0),l=n(6),c=n(5),u=n(3),d=n(1),h=n(12),f=n(9),o=(s=l.View,o(p,s),p.prototype.attach=function(e){this.container.attach(e)},p.prototype.attachHTML=function(e){this.container.attachHTML(e)},p.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[void 0])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[void 0]))},p.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[void 0,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[void 0,e]))},p.prototype.isVisible=function(){return!this.config.hidden},p.prototype.disable=function(){this.config.disabled=!0,this.paint()},p.prototype.enable=function(){this.config.disabled=!1,this.paint()},p.prototype.isDisabled=function(){return this.config.disabled},p.prototype.setProperties=function(e){if(e&&!d.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)f.baseProps.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},p.prototype.getProperties=function(){var e,t={};for(e in this.config)f.baseProps.includes(e)&&(t[e]=this.config[e]);return t},p.prototype._getRootView=function(){return this.container.getRootView()},p.prototype._draw=function(){var e=this.config,t=e.name,n=e.id,e=e.disabled?" dhx_form-group--disabled":"";return a.el(".dhx_form-group.dhx_form-group--container",{class:e,"data-dhx-id":t||n},[a.inject(this._getRootView())])},p);function p(e,t){var n=s.call(this,e,r({disabled:!1,hidden:!1,width:"content",height:"content",padding:0},t))||this;if(n.events=new u.EventSystem,d.isEmptyObj(t))throw new Error("Check the configuration is correct");n.container&&n.container.destructor();var i,o={};for(i in t)"id"!==i&&"type"!==i&&"name"!==i&&"width"!==i&&"height"!==i&&(n.config[i]=t[i],"validation"!==i&&(o[i]=t[i]));n.container=new h.Layout(null,{rows:[o]}),n.config.hidden&&a.awaitRedraw().then(function(){n.hide(!0)}),n.paint();return n.mount(e,a.create({render:function(){return n._draw()}})),n}t.Container=o},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(96),a=n(1),l=n(35),c=n(0),o=(r=s.Combo,o(u,r),u.prototype._initView=function(e){var t=this;if(a.isEmptyObj(e))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",readOnly:!1,template:void 0,filter:void 0,multiselection:!1,selectAllButton:!1,itemsCount:void 0,itemHeight:32,virtual:!1,listHeight:224,required:!1,validation:void 0,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:0};var n,i={};for(n in e)"id"!==n&&"type"!==n&&"name"!==n&&(this.config[n]=e[n],"validation"!==n&&(i[n]=e[n]));this.combobox=new l.ProCombobox(null,i),this.config.hidden&&c.awaitRedraw().then(function(){t.hide(!0)}),this.paint()},u);function u(e,t){return r.call(this,e,t)||this}t.ProCombo=o},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(49),s=n(7),a=n(8),l=n(17),c=n(26),n=(u.prototype.endEdit=function(){},u.prototype.setValue=function(e){this._isFromSet=!0,this._initialDate&&l.isNumeric(e)&&(this._initialDate=c.excelDateToJSDate(e));var t=l.isNumeric(e)?c.excelDateToJSDate(e):c.timeStringToJS(e);t!==e&&this._timepicker.setValue(t)},u.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},u.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this._initialDate=e.initValue,document.addEventListener("mousedown",this._handlers.onOuterClick),r.el("input.dhx_cell_input",i(i({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:i(i({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:this._handlers.didRemove})}))},u.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},u.prototype._initHandlers=function(){var o=this;this._handlers={onFocus:function(){r.awaitRedraw().then(function(){o._showPopup()})},onOuterClick:function(e){var t;e.target instanceof Node&&(t=o._input&&o._input.contains(e.target),e=o._popup&&o._popup.getRootNode()&&o._popup.getRootNode().contains(e.target),t||e||o._popup.hide())},oninput:function(e){var t=e.target.value;t||o._showPopup(),t.startsWith("=")&&o._popup.isVisible()&&o._popup.hide();var n=o._config.oninput,i=n[0],n=n[1];o.setValue(t),i(n,e)},didInsert:function(e){var t=e.el;o._input=t,o._input.addEventListener("focus",o._handlers.onFocus),o._config._hooks.didInsert(e),o._initTimePickerEvents()},didRemove:function(){document.removeEventListener("mousedown",o._handlers.onOuterClick)}}},u.prototype._initTimePickerEvents=function(){var t=this;this._timepicker.events.on(o.TimepickerEvents.change,function(e){t._isFromSet?r.awaitRedraw().then(function(){t._isFromSet=!1}):t._events.fire(a.SpreadsheetEvents.cellInput,[t._config.oninput[1],l.getFormattedValue(c.getExcelDateFromJs(c.timeStringToJS(e)),t._config.format)])})},u);function u(e,t,n){this._timepicker=new o.Timepicker(null,{timeFormat:t}),this._popup=new s.Popup({css:"dhx_editor_popup"}),this._popup.attach(this._timepicker),this._events=n,this._initHandlers()}t.TimeEditor=n}],o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/codebase/",o(o.s=103);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i}),window.dhx_legacy){if(window.dhx)for(var key in dhx)dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}