/*
@license

dhtmlxSpreadsheet v.5.0.0 Professional

This software can be used only as part of dhtmlx.com site.
You are not allowed to use it on any other site

(c) XB Software.

*/
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dhx=t():e.dhx=t()}(window,function(){return n={},o.m=i=[function(e,o,n){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=n(125);function i(i){function t(e){var t=e.el.offsetHeight,e=e.el.offsetWidth;i(e,t)}var n=window.ResizeObserver;return n?o.el("div.dhx-resize-observer",{_hooks:{didInsert:function(e){new n(function(){return t(e)}).observe(e.el)}}}):o.el("iframe.dhx-resize-observer",{_hooks:{didInsert:function(e){e.el.contentWindow.onresize=function(){return t(e)},t(e)}}})}o.el=t.defineElement,o.sv=t.defineSvgElement,o.view=t.defineView,o.create=t.createView,o.inject=t.injectView,o.KEYED_LIST=t.KEYED_LIST,o.disableHelp=function(){t.DEVMODE.mutations=!1,t.DEVMODE.warnings=!1,t.DEVMODE.verbose=!1,t.DEVMODE.UNKEYED_INPUT=!1},o.resizer=i,o.resizeHandler=function(e,t){return o.create({render:function(){return i(t)}}).mount(e)},o.awaitRedraw=function(){return new e(function(e){requestAnimationFrame(function(){e()})})}}).call(this,n(15))},function(e,t,i){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),n=(new Date).valueOf();t.uid=function(){return"u"+n++},t.extend=function e(t,i,n){if(void 0===n&&(n=!0),i)for(var o in i){var r=i[o],s=t[o];void 0===r?delete t[o]:!n||"object"!=typeof s||s instanceof Date||s instanceof Array?t[o]=r:e(s,r)}return t},t.copy=function(e,t){var i,n={};for(i in e)t&&i.startsWith("$")||(n[i]=e[i]);return n},t.naturalSort=function(e){return e.sort(function(e,t){return"string"==typeof e?e.localeCompare(t):e-t})},t.findIndex=function(e,t){for(var i=e.length,n=0;n<i;n++)if(t(e[n]))return n;return-1},t.isEqualString=function(e,t){if(e=e.toString(),t=t.toString(),e.length>t.length)return!1;for(var i=0;i<e.length;i++)if(e[i].toLowerCase()!==t[i].toLowerCase())return!1;return!0},t.singleOuterClick=function(t){var i=function(e){t(e)&&document.removeEventListener("click",i)};document.addEventListener("click",i)},t.detectWidgetClick=function(t,i){function e(e){return i(r.locate(e,"data-dhx-widget-id")===t)}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}},t.unwrapBox=function(e){return Array.isArray(e)?e[0]:e},t.wrapBox=function(e){return Array.isArray(e)?e:[e]},t.isDefined=function(e){return null!=e},t.range=function(e,t){if(t<e)return[];for(var i=[];e<=t;)i.push(e++);return i},t.isNumeric=function(e){return!isNaN(e-parseFloat(e))},t.downloadFile=function(e,t,i){void 0===i&&(i="text/plain");var n,o,i=new Blob([e],{type:i});window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(i,t):(n=document.createElement("a"),o=URL.createObjectURL(i),n.href=o,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(o)},0))},t.debounce=function(o,r,s){var a;return function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=s&&!a;clearTimeout(a),a=setTimeout(function(){a=null,s||o.apply(e,t)},r),n&&o.apply(this,t)}},t.compare=function e(t,i){for(var n in t){if(t.hasOwnProperty(n)!==i.hasOwnProperty(n))return!1;switch(typeof t[n]){case"object":if(!e(t[n],i[n]))return!1;break;case"function":if(void 0===i[n]||"compare"!==n&&t[n].toString()!==i[n].toString())return!1;break;default:if(t[n]!==i[n])return!1}}for(var n in i)if(!t.hasOwnProperty(n))return!1;return!0},t.isType=function(e){return((Object.prototype.toString.call(e).match(/^\[object (\S+?)\]$/)||[])[1]||"undefined").toLowerCase()},t.isEmptyObj=function(e){for(var t in e)return!1;return!0},t.getMaxArrayNymber=function(e){if(e.length){for(var t=-1/0,i=0,n=e.length;i<n;i++)e[i]>t&&(t=e[i]);return t}},t.getMinArrayNymber=function(e){if(e.length){for(var t=1/0,i=0,n=e.length;i<n;i++)e[i]<t&&(t=e[i]);return t}},t.getStringWidth=function(e,t){t=o({font:"normal 14px Roboto",lineHeight:20},t);var i=document.createElement("canvas"),n=i.getContext("2d");t.font&&(n.font=t.font);e=n.measureText(e).width;return r.isIE()||i.remove(),e},t.rgbToHex=function(e){if("#"===e.substr(0,1))return e;e=/(.*?)rgb[a]?\((\d+), *(\d+), *(\d+),* *([\d+.]*)\)/.exec(e);return"#"+parseInt(e[2],10).toString(16).padStart(2,"0")+parseInt(e[3],10).toString(16).padStart(2,"0")+parseInt(e[4],10).toString(16).padStart(2,"0")}},function(e,w,x){"use strict";(function(t){var _=this&&this.__assign||function(){return(_=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var i={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i};Object.defineProperty(w,"__esModule",{value:!0});var l=x(1),s=x(34),n=x(17),o=x(12);function r(e){if(!e)return"";var t=(e=--e)%26,t=String.fromCharCode(65+t),e=Math.floor(e/26);return 0<e?r(e)+t:t}function a(e){return e?(e=e.toUpperCase()).split("").reduce(function(e,t,i,n){return e+=(t.charCodeAt(0)-64)*Math.pow(26,n.length-(i+1))},0):-1}function c(e,t){if(!e)return{};var i=e.match(/([a-zA-Z]*\d*):([a-zA-Z]*\d*)/);if(i){var n=c(i[1],t),o=c(i[2],t),r=(+n.row<=o.row?n:o).row,i=(+n.col<=o.col?n:o).col;return{start:{row:r,col:i},end:{row:(r===o.row?n:o).row,col:(i===o.col?n:o).col}}}if(!u(e,t))return{};t=s.str2pos(e),e=t[0];return{col:t[1],row:e}}function u(e,t,i){void 0===i&&(i=!1);var n=e.match(/([a-zA-Z]*)(\d*)/);if(n&&n[1]&&n[2]){e=parseInt(n[2],10),i=t.data[i?"_initOrder":"_order"];return{col:a(n[1]),row:function e(t,i,n,o){if(o<n)return-1;var r=Math.floor((n+o)/2);if(!t[r])return r;var s=+t[r].id;return s===i?r:i<s?e(t,i,n,r-1):e(t,i,r+1,o)}(i,e,0,e)}}}function d(e,t,i){e=i.data.getId(e)||e+1;return""+r(t)+e}function h(e,t,i){var n;if(!t)return"";t=(null===(n=e.data.getItem(t))||void 0===n?void 0:n.$index)||t,e=l.findIndex(e.config.columns,function(e){return i.toString()===e.id});return e<0&&0<i&&(e=+i),t<0||e<0?void 0:""+r(e)+t}function f(e){return new RegExp(/([A-Z]+\d+:[A-Z]+\d+)|(?:,)([A-Z]+\d+)/).test(e)}function p(e,t,i){return void 0===i&&(i=!1),e=e.includes(":")?e.split(":").map(function(e){return u(e,t,i)}):e.split(",").map(function(e){return u(e,t,i)}),{start:{row:Math.min(e[0].row,e[1].row),col:Math.min(e[0].col,e[1].col)},end:{row:Math.max(e[0].row,e[1].row),col:Math.max(e[0].col,e[1].col)}}}function g(e,t,i){void 0===i&&(i="row");var n=[],o="row"===i?"col":"row";if(e)for(var e=p(e,t,!0),r=e.start,s=e.end,a=r[i];a<=s[i];a++)for(var l=r[o];l<=s[o];l++){var c="row"===i?h(t,a+1,l):h(t,l+1,a);n.push(c)}return n}function m(e){if(e){for(var t={},i=0,n=e.split(";");i<n.length;i++){var o=n[i];o&&("height"!==(o=o.trim().split(":"))[0]&&"width"!==o[0]&&(t[o[0]]=o[1]))}return t}}function v(e){if("string"!=typeof e||e.includes(" "))return!1;try{return new URL(e),e}catch(e){return!1}}function y(e,t,i,n){var o=e.split(":"),e=o[0],o=o[1];return l.compare(b(e,t,i,n),b(o,t,i,n))}function b(e,t,i,n){e=c(e,n),n=e.col;return{isTopFixed:e.row<(null!=i?i:-1),isLeftFixed:n<(null!=t?t:-1)}}w.getLetterFromNumber=r,w.getNumberFromLetter=a,w.getCellIds=c,w.getCellIndex=u,w.getCellNameByIndex=d,w.getCellNameById=h,w.getCellInfo=function(e,t,i){return(i=c(e,i)).start&&(i=i.start),i&&e?t.getCell(i.row,i.col)||{}:{locked:!1}},w.isRangeId=f,w.getRangeIndexes=p,w.getRangeArray=g,w.getRangeMatrix=function(e,t,i){void 0===i&&(i="row");var n=[],o="row"===i?"col":"row";if(e)for(var r=(e=p(e,t)).start,s=e.end,a=r[i];a<=s[i];a++){for(var l=[],c=r[o];c<=s[o];c++){var u="row"===i?d(a,c,t):d(c,a,t);l.push(u)}n.push(l)}return n},w.getNextRangeCell=function(e,t,i,n){return void 0===n&&(n="row"),(n=g(e,i,n))[n.indexOf(t)+1]||n[0]},w.getPrevRangeCell=function(e,t,i,n){return void 0===n&&(n="row"),(n=g(e,i,n))[n.indexOf(t)-1]||n[n.length-1]},w.getCellsArray=function(e,i){if(e)return e.split(",").reduce(function(e,t){return f(t=t.toUpperCase())?e=e.concat(g(t,i)):e.push(t),e},[])},w.extendConfig=function(e,t,i){for(var n in void 0===e&&(e={}),void 0===t&&(t={}),void 0===i&&(i=!0),e){var o=t[n],r=e[n];r&&"validate"in r&&(t[n]=r.validate(o)?o:r.default,e[n]=r.default)}return l.extend(e,t,i)},w.cleanActionConfig=function(e){return e.page,e.dataStore,e.sheets,e.editLine,e.grid,e.activePage,e.spreadsheet,e.mouseEvent,e.events,i(e,["page","dataStore","sheets","editLine","grid","activePage","spreadsheet","mouseEvent","events"])},w.isWasmSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1},w.fetchFile=function(e,o,r){return new t(function(t,i){var n=new XMLHttpRequest;n.open(o,e,!0),n.responseType=r,n.onload=function(){var e=n.response;e?t(e):i(n)},n.onerror=function(){return i(n)},n.send(null)})},w.parseHtmlTable=function(e){var t=e.substring(e.indexOf("<style"),e.indexOf("</style>")),i={};if(t.includes(".x")){var n=t.substring(t.indexOf(".x"),t.indexOf("--\x3e")).split("\r\n.");n[0]=n[0].substr(1);for(var o=0,r=n;o<r.length;o++){var s=r[o];s&&(i[s.substring(0,s.indexOf("\r\n\t"))]=m(s.substring(s.indexOf("{")+1,s.indexOf("}")).trim()))}}n=e.substring(e.indexOf("<table"),e.indexOf("</table>")+8),(e=document.createElement("div")).innerHTML=n;for(var a=e.querySelector("table"),n=a.rows.length,e=a.rows[0].cells.length,l=[],c=[],u=0;u<a.rows.length;u++)for(var d=a.rows[u],h=0;h<d.cells.length;h++){var f=d.cells[h];l.push(f.innerText.trim());for(var p={},g=0;g<f.classList.length;g++){var v=f.classList[g];i[v]&&(p=_(_({},p),i[v]))}p=_(_({},p),m(f.getAttribute("style"))),c.push(p)}return{values:l,styles:c,rowsCount:n,colsCount:e}},w.parseFromText=function(e){for(var e=e.split(/\n/),t=[],i=0,n=e;i<n.length;i++)var o=n[i].split(/\t/),t=t.concat(o);return{values:t,rowsCount:e.length,colsCount:e[0].split("\t").length}},w.getTextHeight=function(e,t){var i=document.createElement("div");return i.style.width=t+"px",i.innerText=e,i.classList.add("dhx-spreadsheet-height-detector"),document.body.appendChild(i),e=i.scrollHeight,i.remove(),e},w.convertStyles=function(e){if(!e)return{};var t,i,n=null,o=_({},e),r=o.textAlign||o["text-align"],s=o.verticalAlign||o["vertical-align"];if(r){switch(r){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end"}o["justify-content"]=n}if(s){switch(s){case"top":i="flex-start";break;case"center":i="center";break;case"bottom":i="flex-end"}o["align-items"]=i+" !important"}var a=e.multiline,r=e.color,s=e.background,e=e["background-color"];return a&&(t="wrap"===a?"normal":"nowrap",a="wrap"===a?"break-all":"normal",o["white-space"]=t,o["word-break"]=a),r&&(o.color=l.rgbToHex(r)),e&&(o["background-color"]=l.rgbToHex(e)),s&&(o.background=l.rgbToHex(s),o["background-color"]=l.rgbToHex(s)),o},w.isMac=function(){var e;return!(null===(e=navigator.userAgentData)||void 0===e||!e.platform.match(/(Mac)/i))},w.getCellNode=function(e,t,i){if(void 0===i&&(i=!1),e=u(e,t,i),i=e.row,e=e.col,i=t.getRootNode().querySelector(".dhx_grid_data [data-dhx-id='"+(i+1)+"']"))return i.querySelector("[data-dhx-col-id='"+e+"']")},w.isURL=v,w.doesContainUrl=function(e){if("string"==typeof e)return e.split(" ").find(v)},w.getStylesObject=function(e){void 0===e&&(e="");var e=(e||"").split(" ")||[],t={};return e.forEach(function(e){t=_(_({},t),dhx.css.get(e))}),t},w.checkSpan=function(e,t,i,n){var o=e.from,r=e.to,s=o.column,e=o.row,o=r.column,r=r.row;return y(d(e,s+1,n)+":"+d(r,o+1,n),t,i,n)},w.checkSpanByNames=y,w.isCellFixed=b,w.isCellSpaned=function(e,t,i){if(null!=t&&t.length){var i=c(e,i),o=i.col,r=i.row;return t.find(function(e){var t=e.from,i=e.to,n=t.row,e=t.column,t=i.row,i=i.column;return n<=r&&r<=t&&e<=o&&o<=i})}},w.showAlert=function(e){n.alert({header:o.default.alertTitle,text:e,buttons:[o.default.ok],buttonsAlignment:"right"})}}).call(this,x(15))},function(e,t,i){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,i){for(void 0===t&&(t="data-dhx-id"),void 0===i&&(i="target"),e instanceof Event&&(e=e[i]);e;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}}Object.defineProperty(t,"__esModule",{value:!0}),t.toNode=function(e){var t;return"string"==typeof e?document.getElementById(e)||document.querySelector(e)||(null===(t=document.querySelector("[data-dhx-root-id="+e+"]"))||void 0===t?void 0:t.parentElement)||document.body:e||document.body},t.eventHandler=function(s,a,l){var c=Object.keys(a);return function(e){var t=s(e);if(void 0!==t){var i=e.target;e:for(;i;){var n=i.getAttribute&&i.getAttribute("class")||"";if(n.length)for(var o=n.split(" "),r=0;r<c.length;r++)if(o.includes(c[r])){if(!1===a[c[r]](e,t)||e.cancelBubble)return!1;break e}i=i.parentNode}}return l&&l(e),!0}},t.locateNode=n,t.locate=function(e,t){return void 0===t&&(t="data-dhx-id"),(e=n(e,t))?e.getAttribute(t):""},t.locateNodeByClassName=function(e,t){for(e instanceof Element||(e=e.target);e;){if(t){if(e.classList&&e.classList.contains(t))return e}else if(e.getAttribute&&e.getAttribute("data-dhx-id"))return e;e=e.parentNode}},t.getBox=function(e){var t=e.getBoundingClientRect(),i=document.body,n=window.pageYOffset||i.scrollTop,e=window.pageXOffset||i.scrollLeft;return{top:t.top+n,left:t.left+e,right:i.offsetWidth-t.right,bottom:i.offsetHeight-t.bottom,width:t.right-t.left,height:t.bottom-t.top}};var o=-1;t.getScrollbarWidth=function(){if(-1<o)return o;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",o=e.offsetWidth-e.clientWidth,document.body.removeChild(e),o};var r=-1;function s(e){e=e.getBoundingClientRect();return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}}function u(){return{rightBorder:window.pageXOffset+window.innerWidth,bottomBorder:window.pageYOffset+window.innerHeight}}function l(e,t){var i,n,o,r=u(),s=r.rightBorder,a=r.bottomBorder-e.bottom-t.height,l=e.top-t.height;if("bottom"===t.mode?0<=a?i=e.bottom:0<=l&&(i=l):0<=l?i=l:0<=a&&(i=e.bottom),a<0&&l<0){if(t.auto)return d(e,c(c({},t),{mode:"right",auto:!1}));i=l<a?e.bottom:l}return{left:t.centering?(n=e,o=t.width,r=s,a=(o-(n.right-n.left))/2,l=n.left-a,a=n.right+a,0<=l&&a<=r?l:l<0?0:r-o):(s=s-e.left-t.width,t=e.right-t.width,0<=s||!(0<=t)&&s<t?e.left:t),top:i}}function d(e,t){var i,n,o=u(),r=o.rightBorder,s=o.bottomBorder,a=r-e.right-t.width,o=e.left-t.width;if("right"===t.mode?0<=a?n=e.right:0<=o&&(n=o):0<=o?n=o:0<=a&&(n=e.right),o<0&&a<0){if(t.auto)return l(e,c(c({},t),{mode:"bottom",auto:!1}));n=a<o?o:e.right}return{left:n,top:t.centering?(a=e,i=t.height,o=r,n=(i-(a.bottom-a.top))/2,r=a.top-n,n=a.bottom+n,0<=r&&n<=o?r:r<0?0:o-i):(i=e.bottom-t.height,!(0<=(t=s-e.top-t.height))&&(0<i||t<i)?i:e.top)}}function a(e,t){var i=("bottom"===t.mode||"top"===t.mode?l:d)(e,t),e=i.left,i=i.top;return{left:Math.round(e)+"px",top:Math.round(i)+"px",minWidth:Math.round(t.width)+"px",position:"absolute"}}t.getScrollbarHeight=function(){if(-1<r)return r;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",r=e.offsetHeight-e.clientHeight,document.body.removeChild(e),r},t.isIE=function(){var e=window.navigator.userAgent;return e.includes("MSIE ")||e.includes("Trident/")},t.isSafari=function(){function e(e){return e.test(window.navigator.userAgent)}var t=e(/Chrome/),i=e(/Firefox/);return!t&&!i&&e(/Safari/)},t.isFirefox=function(){function e(e){return e.test(window.navigator.userAgent)}var t=e(/Chrome/),i=e(/Safari/);return!t&&!i&&e(/Firefox/)},t.getRealPosition=s,t.calculatePosition=a,t.fitPosition=function(e,t){return a(s(e),t)};var h=function(e){return e.href&&-1===e.ownerNode.outerHTML.indexOf(window.location.origin)&&(-1!==e.ownerNode.outerHTML.indexOf("http")||-1!==e.ownerNode.outerHTML.indexOf("https")||-1!==e.ownerNode.outerHTML.indexOf('href="//'))};t.getPageInlineCss=function(){for(var e=[],t=0;t<document.styleSheets.length;t++){var i=document.styleSheets[t];if(!h(i))for(var n=("cssRules"in i&&i.cssRules.length?i.cssRules:i.rules),o=0;o<n.length;o++){var r=n[o];"cssText"in r?e.push(r.cssText):e.push(r.selectorText+" {\n"+r.style.cssText+"\n}\n")}}return e.join("\n")},t.getPageLinksCss=function(){for(var e=[],t=0;t<document.styleSheets.length;t++){var i=document.styleSheets[t];h(i)&&e.push('<link href="'+i.href+'" rel="stylesheet"/>')}return e.join("\n")},t.getLabelStyle=function(e){var t=e.helpMessage,i=e.type,n=e.labelWidth,o=e.label,r=n&&n.toString().startsWith("0"),e="text"!==i&&e.required;return!!(t||e||!(!o||o&&r)||n&&!r)&&{style:(o||n)&&!r&&{width:n,"max-width":"100%"},label:o&&r?null:o}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.on=function(e,t,i){e=e.toLowerCase();this.events[e]=this.events[e]||[],this.events[e].push({callback:t,context:i||this.context})},o.prototype.detach=function(e,t){var e=e.toLowerCase(),i=this.events[e];if(t&&i&&i.length)for(var n=i.length-1;0<=n;n--)i[n].context===t&&i.splice(n,1);else this.events[e]=[]},o.prototype.fire=function(e,t){void 0===t&&(t=[]);e=e.toLowerCase();return!this.events[e]||!this.events[e].map(function(e){return e.callback.apply(e.context,t)}).includes(!1)},o.prototype.clear=function(){this.events={}},o);function o(e){this.events={},this.context=e||this}t.EventSystem=n,t.EventsMixin=function(e){var t=new n(e=e||{});e.detachEvent=t.detach.bind(t),e.attachEvent=t.on.bind(t),e.callEvent=t.fire.bind(t)}},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.SpreadsheetEvents||(t.SpreadsheetEvents={})).beforeValueChange="beforeValueChange",n.afterValueChange="afterValueChange",n.beforeStyleChange="beforeStyleChange",n.afterStyleChange="afterStyleChange",n.beforeFormatChange="beforeFormatChange",n.afterFormatChange="afterFormatChange",n.beforeSelectionSet="beforeSelectionSet",n.afterSelectionSet="afterSelectionSet",n.beforeSelectionRemove="beforeSelectionRemove",n.afterSelectionRemove="afterSelectionRemove",n.beforeRowAdd="beforeRowAdd",n.afterRowAdd="afterRowAdd",n.beforeRowDelete="beforeRowDelete",n.afterRowDelete="afterRowDelete",n.beforeColumnAdd="beforeColumnAdd",n.afterColumnAdd="afterColumnAdd",n.beforeColumnDelete="beforeColumnDelete",n.afterColumnDelete="afterColumnDelete",n.beforeFocusSet="beforeFocusSet",n.afterFocusSet="afterFocusSet",n.beforeEditStart="beforeEditStart",n.afterEditStart="afterEditStart",n.beforeAction="beforeAction",n.afterAction="afterAction",n.beforeEditEnd="beforeEditEnd",n.afterEditEnd="afterEditEnd",n.groupFill="groupFill",n.beforeSheetAdd="beforeSheetAdd",n.afterSheetAdd="afterSheetAdd",n.beforeSheetRemove="beforeSheetRemove",n.afterSheetRemove="afterSheetRemove",n.beforeSheetRename="beforeSheetRename",n.afterSheetRename="afterSheetRename",n.beforeSheetChange="beforeSheetChange",n.afterSheetChange="afterSheetChange",n.beforeSheetClear="beforeSheetClear",n.afterSheetClear="afterSheetClear",n.beforeClear="beforeClear",n.afterClear="afterClear",n.editLineInput="editLineInput",n.editLineFocus="editLineFocus",n.editLineBlur="editLineBlur",n.cellInput="cellInput",n.gridRedraw="gridRedraw",n.afterPopupHide="afterPopupHide",(n=t.Actions||(t.Actions={})).setCellStyle="setCellStyle",n.setCellValue="setCellValue",n.setCellFormat="setCellFormat",n.removeCellStyles="removeCellStyles",n.lockCell="lockCell",n.deleteRow="deleteRow",n.addRow="addRow",n.deleteColumn="deleteColumn",n.addColumn="addColumn",n.groupAction="groupAction",n.groupRowAction="groupRowAction",n.groupColAction="groupColAction",n.addSheet="addSheet",n.deleteSheet="deleteSheet",n.renameSheet="renameSheet",n.clearSheet="clearSheet",n.clear="clear",n.resizeCol="resizeCol",n.resizeRow="resizeRow",n.setValidation="setValidation",n.sortCells="sortCells",n.insertLink="insertLink",n.fitColumn="fitColumn",n.filter="filter",n.merge="merge",n.unmerge="unmerge",(t=t.FilterConditions||(t.FilterConditions={})).e="e",t.ne="ne",t.tc="tc",t.tdc="tdc",t.ts="ts",t.te="te",t.tex="tex",t.d="d",t.db="db",t.da="da",t.gt="gt",t.geq="geq",t.lt="lt",t.leq="leq",t.eq="eq",t.neq="neq",t.ib="ib",t.inb="inb"},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.FormEvents||(t.FormEvents={})).change="change",n.click="click",n.focus="focus",n.blur="blur",n.keydown="keydown",n.beforeShow="beforeShow",n.afterShow="afterShow",n.beforeHide="beforeHide",n.afterHide="afterHide",n.afterValidate="afterValidate",n.beforeValidate="beforeValidate",n.beforeChangeProperties="beforeChangeProperties",n.afterChangeProperties="afterChangeProperties",n.beforeSend="beforesend",n.afterSend="aftersend",n.buttonClick="buttonClick",n.validationFail="validationfail",(n=t.FileStatus||(t.FileStatus={})).queue="queue",n.uploaded="uploaded",n.failed="failed",n.inprogress="inprogress",(n=t.UploaderEvents||(t.UploaderEvents={})).uploadBegin="uploadbegin",n.beforeUploadFile="beforeuploadfile",n.uploadFile="uploadfile",n.uploadFail="uploadfail",n.uploadComplete="uploadcomplete",n.uploadProgress="uploadprogress",(n=t.ItemEvent||(t.ItemEvent={})).click="click",n.change="change",n.input="input",n.focus="focus",n.blur="blur",n.keydown="keydown",n.changeOptions="changeOptions",n.beforeShow="beforeShow",n.afterShow="afterShow",n.beforeHide="beforeHide",n.afterHide="afterHide",n.beforeValidate="beforeValidate",n.afterValidate="afterValidate",n.beforeUploadFile="beforeUploadFile",n.uploadFile="uploadfile",n.uploadBegin="uploadBegin",n.uploadComplete="uploadComplete",n.uploadFail="uploadFail",n.uploadProgress="uploadProgress",n.beforeChangeProperties="beforeChangeProperties",n.afterChangeProperties="afterChangeProperties",(n=t.ClearMethod||(t.ClearMethod={})).value="value",n.validation="validation",(n=t.Validation||(t.Validation={})).empty="",n.validEmail="email",n.validInteger="integer",n.validNumeric="numeric",n.validAlphaNumeric="alphanumeric",n.validIPv4="IPv4",(t=t.ValidationStatus||(t.ValidationStatus={}))[t.pre=0]="pre",t[t.error=1]="error",t[t.success=2]="success"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(3),i=(r.prototype.mount=function(e,t){t&&(this._view=t),e&&this._view&&this._view.mount&&(this._container=o.toNode(e),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},r.prototype.unmount=function(){var e=this.getRootView();e&&e.node&&(e.unmount(),this._view=null)},r.prototype.getRootView=function(){return this._view},r.prototype.getRootNode=function(){return this._view&&this._view.node&&this._view.node.el},r.prototype.paint=function(){this._view&&(this._view.node||this._container)&&(this._doNotRepaint=!1,this._view.redraw())},r);function r(e,t){this.config=t||{},this._uid=this.config.rootId||n.uid()}t.View=i,t.toViewLike=function(t){return{getRootView:function(){return t},paint:function(){return t.node&&t.redraw()},mount:function(e){return t.mount(e)}}}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(146)),n(t(75))},function(e,t,i){"use strict";var n=this&&this.__rest||function(e,t){var i={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i};Object.defineProperty(t,"__esModule",{value:!0});var l=i(6);t.getFormItemCss=function(e,t,i){void 0===i&&(i=!1);var n=e.labelPosition,o=e.required,r=e.disabled,s=e.hiddenLabel,a=e.$validationStatus,a=((e={})[l.ValidationStatus.pre]="",e[l.ValidationStatus.error]=" dhx_form-group--state_error",e[l.ValidationStatus.success]=" dhx_form-group--state_success",e[a]||""),n="left"===n?" dhx_form-group--inline":"",r=r?" dhx_form-group--disabled":"",s=s?" dhx_form-group--label_sr":"";return t?n+(i?"":a)+(o?" dhx_form-group--required":"")+r+s:n+r+s};var o=((i={})[l.Validation.validAlphaNumeric]=/^[a-zA-Z0-9_]+$/,i[l.Validation.validEmail]=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i[l.Validation.validInteger]=/^-?\d+$/,i[l.Validation.validIPv4]=/\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}\b/,i[l.Validation.validNumeric]=/^-?\d+(\.\d+)?$/,i);t.getValidationMessage=function(e){var t;return(t={undefined:e.preMessage})[l.ValidationStatus.pre]=e.preMessage,t[l.ValidationStatus.error]=e.errorMessage,t[l.ValidationStatus.success]=e.successMessage,t[e.$validationStatus]||""},t.validateTemplate=function(e,t){return!o[e]||o[e].test(t)},t.isBlock=function(e){return Boolean(e.rows)||Boolean(e.cols)},t.validateInput=function(e,t){var i=!0;return"function"==typeof t?i=t(e):(t=o[t])&&(i=t.test(e.toString())),i},t.baseInputValidate=function(e,t){var i=t.inputType,n=t.min,o=t.max,r=t.minlength,t=t.maxlength;return"number"===i?void 0!==n&&void 0!==o?Number(n)<=Number(o)&&Number(n)<=Number(e)&&Number(o)>=Number(e):void 0!==n?Number(n)<=Number(e):void 0!==o?Number(o)>=Number(e):0===e||"0"===e||!!e:void 0!==r&&void 0!==t?Number(r)<=String(e).length&&Number(t)>=String(e).length:void 0!==r?Number(r)<=String(e).length:void 0!==t?Number(t)>=String(e).length:"string"==typeof e&&!!e},t.isTimeFormat=function(e,t){return(12===t?/(^0?([1-9][0-2]?):[0-5][0-9]?([AP][M]?)$)/i:/(^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$)/i).test(e)},t.isVerify=function(t){return["required","validation","minlength","maxlength","min","max"].some(function(e){switch(e){case"required":return!!t[e];case"validation":return"function"==typeof t[e]||"email"===t[e]||"integer"===t[e]||"numeric"===t[e]||"alphanumeric"===t[e]||"IPv4"===t[e];case"minlength":case"maxlength":return"number"==typeof t[e]||"string"==typeof t[e];case"min":case"max":return("number"==typeof t[e]||"string"==typeof t[e])&&"number"===t.inputType}})},t.baseProps=["width","height","padding","css"],t.widgetConfig=function(e){e.width,e.type,e.id,e.name,e.hidden,e.editable,e.valueFormat,e.css,e.required,e.helpMessage,e.preMessage,e.successMessage,e.errorMessage,e.label,e.labelWidth,e.labelPosition,e.hiddenLabel,e.validation,e.icon;return n(e,["width","type","id","name","hidden","editable","valueFormat","css","required","helpMessage","preMessage","successMessage","errorMessage","label","labelWidth","labelPosition","hiddenLabel","validation","icon"])}},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.GridEvents||(t.GridEvents={})).scroll="scroll",n.expand="expand",n.filterChange="filterChange",n.beforeResizeStart="beforeResizeStart",n.resize="resize",n.afterResizeEnd="afterResizeEnd",n.cellClick="cellClick",n.cellRightClick="cellRightClick",n.cellMouseOver="cellMouseOver",n.cellMouseDown="cellMouseDown",n.cellDblClick="cellDblClick",n.headerCellClick="headerCellClick",n.footerCellClick="footerCellClick",n.headerCellMouseOver="headerCellMouseOver",n.footerCellMouseOver="footerCellMouseOver",n.headerCellMouseDown="headerCellMouseDown",n.footerCellMouseDown="footerCellMouseDown",n.headerCellDblClick="headerCellDblClick",n.footerCellDblClick="footerCellDblClick",n.headerCellRightClick="headerCellRightClick",n.footerCellRightClick="footerCellRightClick",n.beforeEditStart="beforeEditStart",n.afterEditStart="afterEditStart",n.beforeEditEnd="beforeEditEnd",n.afterEditEnd="afterEditEnd",n.beforeKeyDown="beforeKeyDown",n.afterKeyDown="afterKeyDown",n.beforeColumnHide="beforeColumnHide",n.afterColumnHide="afterColumnHide",n.beforeColumnShow="beforeColumnShow",n.afterColumnShow="afterColumnShow",n.beforeRowHide="beforeRowHide",n.afterRowHide="afterRowHide",n.beforeRowShow="beforeRowShow",n.afterRowShow="afterRowShow",n.beforeRowDrag="beforeRowDrag",n.dragRowStart="dragRowStart",n.dragRowOut="dragRowOut",n.dragRowIn="dragRowIn",n.canRowDrop="canRowDrop",n.cancelRowDrop="cancelRowDrop",n.beforeRowDrop="beforeRowDrop",n.afterRowDrop="afterRowDrop",n.afterRowDrag="afterRowDrag",n.beforeColumnDrag="beforeColumnDrag",n.dragColumnStart="dragColumnStart",n.dragColumnOut="dragColumnOut",n.dragColumnIn="dragColumnIn",n.canColumnDrop="canColumnDrop",n.cancelColumnDrop="cancelColumnDrop",n.beforeColumnDrop="beforeColumnDrop",n.afterColumnDrop="afterColumnDrop",n.afterColumnDrag="afterColumnDrag",n.beforeRowResize="beforeRowResize",n.afterRowResize="afterRowResize",n.beforeSort="beforeSort",n.afterSort="afterSort",(n=t.GridSystemEvents||(t.GridSystemEvents={})).cellTouchMove="cellTouchMove",n.cellTouchEnd="cellTouchEnd",n.headerCellTouchMove="headerCellTouchMove",n.headerCellTouchEnd="headerCellTouchEnd",(t=t.GridSelectionEvents||(t.GridSelectionEvents={})).beforeUnSelect="beforeUnSelect",t.afterUnSelect="afterUnSelect",t.beforeSelect="beforeSelect",t.afterSelect="afterSelect"},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(23)),n(t(66)),n(t(132)),n(t(133)),n(t(31)),n(t(164)),n(t(24)),n(t(69)),n(t(68)),n(t(165)),n(t(67)),n(t(52))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={undo:"Undo",redo:"Redo",textColor:"Text color",backgroundColor:"Background color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",link:"Link",halign:"Horizontal align",valign:"Vertical align",left:"Left",right:"Right",center:"Center",top:"Top",bottom:"Bottom",multiline:"Text wrapping",clip:"Clip",wrap:"Wrap",merge:"Merge",unmerge:"Unmerge",lockCell:"Lock cell",unlockCell:"Unlock cell",clear:"Clear",clearValue:"Clear value",clearStyles:"Clear styles",clearAll:"Clear all",columns:"Columns",rows:"Rows",addColumn:"Add column",removeColumn:"Remove column",fitToData:"Fit to data",addRow:"Add row",removeRow:"Remove row",format:"Format",common:"Common",number:"Number",currency:"Currency",percent:"Percent",text:"Text",date:"Date",time:"Time",filter:"Filter",help:"Help",deleteSheet:"Delete",renameSheet:"Rename",renameSheetAlert:"A sheet with the name $name already exists. Please enter another name. ",file:"File",import:"Import",export:"Export",downloadAs:"Download as...",importAs:"Import as...",data:"Data",validation:"Data validation",search:"Search",sort:"Sort",ascSort:"Sort A to Z",descSort:"Sort Z to A",copy:"Copy",edit:"Edit",insert:"Insert",remove:"Remove",linkCopied:"Link copied to clipboard",e:"Is empty",ne:"Is not empty",tc:"Text contains",tdc:"Text doesn't contain",ts:"Text starts with",te:"Text ends with",tex:"Text is exactly",d:"Date is",db:"Date is before",da:"Date is after",gt:"Greater than",geq:"Greater or equal to",lt:"Less than",leq:"Less or equal to",eq:"Is equal to",neq:"Is not equal to",ib:"Is between",inb:"Is not between",none:"None",empty:"Empty",value:"Value",values:"By values",condition:"By condition",and:"And",cancel:"Cancel",save:"Save",removeValidation:"Remove validation",selectAll:"Select all",unselectAll:"Unselect all",apply:"Apply",ok:"Ok",alertTitle:"There was a problem!",mergeAlertMessage:"You can't $action a range containing merges!",spanMergeAlert:"You can't merge frozen and non-frozen cells!",dontShowAgain:"Don't show again",spanPasteError:"You can't paste merges that cross the boundary of a frozen region",spanMergeLockedError:"You can't merge locked cells!",spanUnmergeLockedError:"You can't unmerge locked cells!"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(16),r=i(12),s=i(27),a={},l=[],c={decimal:".",thousands:","},u="$",d="(\\[\\$[\\w\\W]*?\\]|[\\$]{0,1})",h="([,. ]{0,1})",i="([#0]*)",f=new RegExp("\\[\\$([\\w\\W]*?)\\]|(\\$)"),p=new RegExp(d+i+h+i+h+i+"([%]{0,1})"+d),g={};function v(){return l}function _(t){return l[n.findIndex(l,function(e){return e.id===t})]}function m(e){return!isNaN(e-parseFloat(e))}function y(e){if(e&&"string"==typeof e){if(g[e])return g[e];var t,i=e.match(p),i={currencyBefore:(i=i)[1],digits:i[2],thousandsSeparator:i[3],optionalDigits:i[4],decimalSeparator:i[5],decimalDigits:i[6],percent:i[7],currencyAfter:i[8],decimalLength:0};return!i.decimalSeparator&&i.thousandsSeparator&&(i.decimalSeparator=i.thousandsSeparator,i.decimalDigits=i.optionalDigits,i.thousandsSeparator="",i.optionalDigits=""),i.currencyBefore&&(t=i.currencyBefore.match(f),i.currencyBefore=t[1]||t[2]),i.currencyAfter&&(t=i.currencyAfter.match(f),i.currencyAfter=t[1]||t[2]),i.percent&&(i.currencyBefore="",i.currencyAfter=""),i.decimalLength=i.decimalDigits?i.decimalDigits.split("0").length-1:i.decimalLength,"common"===e&&(i.decimalSeparator=".",i.decimalLength="",i.thousandsSeparator=","),g[e]=i}}function b(e,t){if(!t)return e;if(!m(e))return e;var i="";t.currencyBefore&&(i+=t.currencyBefore);var n=parseFloat(e),o=n<0;o&&(n=Math.abs(n));e=n.toString();t.percent&&(n*=100),t.digits&&(e=n.toFixed(t.decimalLength||2));var r=(null==t?void 0:t.digits)+(null==t?void 0:t.optionalDigits),n=e.split(".");if(r&&r.length>n[0].length){for(var s=n[0].split(""),a=n[0],l=0,c=r.length-1;-1<c;c--){var u=r[c],d=s[l];"0"!==u||d||(a="0"+a),l++}e=a+(1<n.length?"."+n[1]:"")}return i+=t.digits?function(e,t,i,n){void 0===t&&(t=""),void 0===n&&(n=3);for(var o=e.toString().split("."),r=[],s=1,a=o[0].length-1;-1<a;a--)r.push(o[0][a]),s===n&&a?(r.push(t),s=1):s++;return o[0]=r.reverse().join(""),o.join(i)}(e,t.thousandsSeparator,t.decimalSeparator,t.optionalDigits.length):e,i+=t.percent,t.currencyAfter&&(i+=t.currencyAfter),o&&(i="-"+i),i}function w(e){var t=c,i=(l.filter(function(e){return e.mask.startsWith("[$")})||[]).map(function(e){return e.mask.substring(2,e.mask.indexOf("]"))});if(i.length)for(var n=0;n<i.length;n++){var o=i[n];if(e.toString().startsWith(o))return w((""+e).substr(o.length))}return(""+e).replace(new RegExp("["+t.thousands+"$%s]","g"),"").replace(new RegExp("["+t.decimal+"]","g"),".")}t.getDefaultFormats=v,t.getFormat=_,t.isNumeric=m,t.initFormat=function(e,t,i){a=e.config,l=[{name:r.default.common,id:"common",mask:"",example:"1500.31"},{name:r.default.number,id:"number",mask:"#,##0.00",example:"1500.31"},{name:r.default.percent,id:"percent",mask:"#,##0.00%",example:"15.0031"},{name:r.default.currency,id:"currency",mask:"$#,##0.00",example:"1500.31"},{name:r.default.date,id:"date",mask:"mm-dd-yy",example:"44490",dateFormat:t},{name:r.default.time,id:"time",mask:"h:mm:ss "+(12<i?"":"am/pm"),example:"0.5625",timeFormat:i},{name:r.default.text,id:"text",mask:"@",example:"some text"}],a.formats.forEach(function(t){var e=n.findIndex(l,function(e){return e.id===t.id});0<=e?l[e]=t:l.push(t)}),i=y(_("number").mask),c={decimal:i.decimalSeparator,thousands:i.thousandsSeparator},i=y(_("currency").mask),u=i.currency||u,(a.formats=l).forEach(function(e){y(e.mask)})},t.getDefaultFormatsMap=function(){return l.reduce(function(e,t){return e[t.mask]=t.id,e},{})},t.getPureNumber=function(e){var t="string"==typeof e&&e.includes("%"),e=parseFloat((""+e).replace(/[^.\d]/g,""));return t?e/100:e},t.getCleanValue=w,t.getUnformattedValue=function(e,t){return"common"===t?e:(e=w(e),"percent"===t?(parseFloat(e)/100).toFixed(4):e)},t.detectCellFormat=function(e){if(!m(w(e)))return"";var t=""+e,i=t.indexOf("%"),n=0===t.indexOf("$");if(0===i||i===t.length-1)return _("percent").mask;if(n)return _("currency").mask;var o=l.filter(function(e){return e.mask.startsWith("[$")})||[],r=o.map(function(e){return e.mask.substring(2,e.mask.indexOf("]"))});if(r.length)for(var s=0;s<r.length;s++){var a=r[s];if(e.toString().startsWith(a))return o[s].mask}return _("number").mask},t.getFormattedValue=function(e,t){return"boolean"==typeof e?(""+e).toUpperCase():t&&"@"!==t.mask?"date"===t.id?m(e)?o.getFormattedDate(t.dateFormat,s.excelDateToJSDate(+e)):e:"time"!==t.id?b(e,y(t.mask)):e&&(t="%"+(12<t.timeFormat?"H":"h")+":%i:%s "+(12<t.timeFormat?"":"%A"),m(e)?o.getFormattedDate(t,s.excelDateToJSDate(+e)):"string"==typeof(e=s.timeStringToJS(e))?e:o.getFormattedDate(t,e)):e}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(72)),n(t(143)),n(t(54))},function(e,t,i){(function(o,r){!function(){o="undefined"!=typeof window?window:this;var t=1,i={},n=!1;function u(e){o.setImmediate?r(e):o.importScripts?setTimeout(e):(i[++t]=e,o.postMessage(t,"*"))}function d(e){"use strict";if("function"!=typeof e&&null!=e)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var t,i,n=this,r=0,s=0,o=[];(n.promise=n).resolve=function(e){return t=n.fn,i=n.er,r||(s=e,r=1,u(c)),n},n.reject=function(e){return t=n.fn,i=n.er,r||(s=e,r=2,u(c)),n},n._d=1,n.then=function(e,t){if(1!=this._d)throw TypeError();var i=new d;return i.fn=e,i.er=t,3==r?i.resolve(s):4==r?i.reject(s):o.push(i),i},n.catch=function(e){return n.then(null,e)};var a=function(e){r=e||4,o.map(function(e){3==r&&e.resolve(s)||e.reject(s)})};try{"function"==typeof e&&e(n.resolve,n.reject)}catch(e){n.reject(e)}return n;function l(e,t,i,n){if(2==r)return n();if("object"!=typeof s&&"function"!=typeof s||"function"!=typeof e)n();else try{var o=0;e.call(s,function(e){o++||(s=e,t())},function(e){o++||(s=e,i())})}catch(e){s=e,i()}}function c(){var e;try{e=s&&s.then}catch(e){return s=e,r=2,c()}l(e,function(){r=1,c()},function(){r=2,c()},function(){try{1==r&&"function"==typeof t?s=t(s):2==r&&"function"==typeof i&&(s=i(s),r=1)}catch(e){return s=e,a()}s==n?(s=TypeError(),a()):l(e,function(){a(3)},a,function(){a(1==r&&3)})})}}o.setImmediate||o.addEventListener("message",function(e){if(e.source==o)if(n)u(i[e.data]);else{n=!0;try{i[e.data]()}catch(e){}delete i[e.data],n=!1}}),d.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof d?t:new d(function(e){e(t)})},d.reject=function(i){if(1!=this._d)throw TypeError();return new d(function(e,t){t(i)})},d.all=function(n){if(1!=this._d)throw TypeError();if(!(n instanceof Array))return d.reject(TypeError());var o=new d;return function i(e,t){return t?o.resolve(t):e?o.reject(e):(0==n.reduce(function(e,t){return t&&t.then?e+1:e},0)&&o.resolve(n),void n.map(function(e,t){e&&e.then&&e.then(function(e){return n[t]=e,i(),e},i)}))}(),o},d.race=function(n){if(1!=this._d)throw TypeError();if(!(n instanceof Array))return d.reject(TypeError());if(0==n.length)return new d;var o=new d;return function i(e,t){return t?o.resolve(t):e?o.reject(e):(0==n.reduce(function(e,t){return t&&t.then?e+1:e},0)&&o.resolve(n),void n.map(function(e,t){e&&e.then&&e.then(function(e){i(null,e)},i)}))}(),o},d._d=1,e.exports=d}()}).call(this,i(49),i(119).setImmediate)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),o=t(1);n.locale={monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Monday"],cancel:"Cancel"};var _,r={"%d":function(e){e=e.getDate();return e<10?"0"+e:e},"%j":function(e){return e.getDate()},"%l":function(e){return n.locale.days[e.getDay()]},"%D":function(e){return n.locale.daysShort[e.getDay()]},"%m":function(e){e=e.getMonth()+1;return e<10?"0"+e:e},"%n":function(e){return e.getMonth()+1},"%M":function(e){return n.locale.monthsShort[e.getMonth()]},"%F":function(e){return n.locale.months[e.getMonth()]},"%y":function(e){return e.getFullYear().toString().slice(2)},"%Y":function(e){return e.getFullYear()},"%h":function(e){e=e.getHours()%12;return 0===e&&(e=12),e<10?"0"+e:e},"%g":function(e){e=e.getHours()%12;return 0===e&&(e=12),e},"%H":function(e){e=e.getHours();return e<10?"0"+e:e},"%G":function(e){return e.getHours()},"%i":function(e){e=e.getMinutes();return e<10?"0"+e:e},"%s":function(e){e=e.getSeconds();return e<10?"0"+e:e},"%a":function(e){return 12<=e.getHours()?"pm":"am"},"%A":function(e){return 12<=e.getHours()?"PM":"AM"},"%u":function(e){return e.getMilliseconds()}},m={"%d":function(e,t){/(^([0-9][0-9])$)/i.test(t)?e.setDate(Number(t)):e.setDate(Number(1))},"%j":function(e,t){/(^([0-9]?[0-9])$)/i.test(t)?e.setDate(Number(t)):e.setDate(Number(1))},"%m":function(e,t){var i=/(^([0-9][0-9])$)/i.test(t);i?e.setMonth(Number(t)-1):e.setMonth(Number(0)),i&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%n":function(e,t){var i=/(^([0-9]?[0-9])$)/i.test(t);i?e.setMonth(Number(t)-1):e.setMonth(Number(0)),i&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%M":function(e,t){var i=o.findIndex(n.locale.monthsShort,function(e){return e===t});-1===i?e.setMonth(0):e.setMonth(i),-1!==i&&e.getMonth()!==i&&e.setMonth(i)},"%F":function(e,t){var i=o.findIndex(n.locale.months,function(e){return e===t});-1===i?e.setMonth(0):e.setMonth(i),-1!==i&&e.getMonth()!==i&&e.setMonth(i)},"%y":function(e,t){/(^([0-9][0-9])$)/i.test(t)?e.setFullYear(Number("20"+t)):e.setFullYear(Number("2000"))},"%Y":function(e,t){/(^([0-9][0-9][0-9][0-9])$)/i.test(t)?e.setFullYear(Number(t)):e.setFullYear(Number("2000"))},"%h":function(e,t,i){/(^0[1-9]|1[0-2]$)/i.test(t)&&"pm"===i||"PM"===i?e.setHours(Number(t)):e.setHours(Number(0))},"%g":function(e,t,i){/(^[1-9]$)|(^0[1-9]|1[0-2]$)/i.test(t)&&"pm"===i||"PM"===i?e.setHours(Number(t)):e.setHours(Number(0))},"%H":function(e,t){/(^[0-2][0-9]$)/i.test(t)?e.setHours(Number(t)):e.setHours(Number(0))},"%G":function(e,t){/(^[1-9][0-9]?$)/i.test(t)?e.setHours(Number(t)):e.setHours(Number(0))},"%i":function(e,t){/(^([0-5][0-9])$)/i.test(t)?e.setMinutes(Number(t)):e.setMinutes(Number(0))},"%s":function(e,t){/(^([0-5][0-9])$)/i.test(t)?e.setSeconds(Number(t)):e.setSeconds(Number(0))},"%u":function(e,t){/(^([0-9][0-9][0-9])$)/i.test(t)?e.setMilliseconds(Number(t)):e.setMilliseconds(Number(0))},"%a":function(e,t){"pm"===t&&e.setHours(e.getHours()+12)},"%A":function(e,t){"PM"===t&&e.setHours(e.getHours()+12)}};function y(e){for(var t=[],i="",n=0;n<e.length;n++)"%"===e[n]?(0<i.length&&(t.push({type:_.separator,value:i}),i=""),t.push({type:_.datePart,value:e[n]+e[n+1]}),n++):i+=e[n];return 0<i.length&&t.push({type:_.separator,value:i}),t}function s(e,t,i){if("string"==typeof e){for(var n,o=[],r=0,s=null,a=0,l=y(t);a<l.length;a++){var c=l[a];if(c.type===_.separator){var u=e.indexOf(c.value,r);if(-1===u){if(i)return!1;throw new Error("Incorrect date, see docs: https://docs.dhtmlx.com/suite/calendar__api__calendar_dateformat_config.html")}s&&(o.push({formatter:s,value:e.slice(r,u)}),s=null),r=u+c.value.length}else c.type===_.datePart&&(s=c.value)}"%A"===s||"%a"===s?o.unshift({formatter:s,value:e.slice(r)}):s&&o.push({formatter:s,value:e.slice(r)}),o.reverse();for(var d=0,h=o;d<h.length;d++)"%A"!==(v=h[d]).formatter&&"%a"!==v.formatter||(n=v.value);for(var f=new Date(0),p=0,g=o;p<g.length;p++){var v=g[p];m[v.formatter]&&m[v.formatter](f,v.value,n)}return!!i||f}}(t=_=_||{})[t.separator=0]="separator",t[t.datePart=1]="datePart",n.getFormattedDate=function(e,i){return y(e).reduce(function(e,t){return t.type===_.separator?e+t.value:r[t.value]?e+r[t.value](i):e},"")},n.stringToDate=s;a.copy=function(e){return new Date(e)},a.fromYear=function(e){return new Date(e,0,1)},a.fromYearAndMonth=function(e,t){return new Date(e,t,1)},a.weekStart=function(e,t){t=(e.getDay()+7-t)%7;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)},a.monthStart=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},a.yearStart=function(e){return new Date(e.getFullYear(),0,1)},a.dayStart=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},a.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},a.addMonth=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth()+t)},a.addYear=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear()+t,e.getMonth())},a.withHoursAndMinutes=function(e,t,i,n){return void 0===n||!n&&12===t||n&&12!==t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,i):n&&12===t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,i):new Date(e.getFullYear(),e.getMonth(),e.getDate(),t+12,i)},a.setMonth=function(e,t){e.setMonth(t)},a.setYear=function(e,t){e.setFullYear(t)},a.mergeHoursAndMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())},a.isWeekEnd=function(e){return 0===e.getDay()||6===e.getDay()},a.getTwelweYears=function(e){e=e.getFullYear(),e-=e%12;return i.range(e,11+e)},a.getDayOrdinal=function(e){return(e.valueOf()-a.yearStart(e).valueOf())/864e5},a.getWeekNumber=function(e){6!==e.getDay()&&(e=a.addDay(e,6-e.getDay()));var t=a.getDayOrdinal(e);return t-e.getDay()<0&&(e=new Date(e.getFullYear()-1,12,0),t=a.getDayOrdinal(e)),Math.floor((t-e.getDay()+10)/7)},a.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},a.toDateObject=function(e,t){return"string"==typeof e?s(e,t):new Date(e)},a.nullTimestampDate=new Date(0),t=a;function a(){}n.DateHelper=t},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(117)),n(t(118)),n(t(122)),n(t(62)),n(t(48))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),i=(o.prototype.getFocusId=function(){return this._activeWidgetId},o.prototype.setFocusId=function(e){this._activeWidgetId=e},o);function o(){var t=this;this._initHandler=function(e){return t._activeWidgetId=n.locate(e,"data-dhx-widget-id")},this._removeFocusClass=function(e){var t=document.body.classList;t.contains("utilityfocus")&&t.remove("utilityfocus")},this._addFocusClass=function(e){var t=document.body.classList;"Tab"===e.code?t.contains("utilityfocus")||t.add("utilityfocus"):t.contains("utilityfocus")&&t.remove("utilityfocus")},document.addEventListener("focusin",this._initHandler),document.addEventListener("pointerdown",this._initHandler),document.addEventListener("mousedown",this._removeFocusClass),document.addEventListener("keydown",this._addFocusClass)}t.focusManager=new i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(3),c=i(7),u=i(8),o=(s=c.View,o(d,s),d.prototype._destructor=function(){this._helper&&this._helper.destructor(),this.config=this._handlers=this._helper=null,this.unmount()},d.prototype._getHandlers=function(){return{}},d.prototype._init=function(){},d.prototype._draw=function(){return this._drawLabel()},d.prototype._drawLabel=function(){var e=this.config,t=e.id,i=e.helpMessage,n=e.required;this.config.helpMessage&&(this._helper||(this._helper=new u.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));e=l.getLabelStyle(this.config);return e&&a.el((this.config.type.includes("group")?"legend":"label")+".dhx_label",{for:t||this._uid,class:i?"dhx_label--with-help":"",style:e.style},i?[(e.label||n)&&a.el("span.dhx_label__holder",e.label),a.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper,id:"dhx_label__help_"+(t||this._uid)})]:e.label)},d);function d(e,t){void 0===t&&(t={});var i=s.call(this,e,t)||this;i._handlers=r({showHelper:function(e){e.preventDefault(),e.stopPropagation(),i._helper.show(e.target,{mode:"left"===i.config.labelPosition?"bottom":"right"})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),i._helper.hide()}},i._getHandlers());return i.mount(e,a.create({render:function(){return i._draw()}})),i}t.Label=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(18),s=i(3);function a(e){for(var t=e.toLowerCase().match(/\w+/g),i=0,n="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?i+=4:"shift"===r?i+=2:"alt"===r?i+=1:n=r}return i+n}var l={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},i=(n.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},n.prototype.addHotKey=function(e,t){e=a(e);this._keysStorage[e]||(this._keysStorage[e]=[]),this._keysStorage[e].push({handler:t})},n.prototype.removeHotKey=function(e,i){var n,o,r=this;e?e&&i?(n=a(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")},this._keysStorage[n].forEach(function(e,t){o(e.handler)===o(i)&&(delete r._keysStorage[n][t],r._keysStorage[n]=r._keysStorage[n].filter(function(e){return e}))})):(e=a(e),delete this._keysStorage[e]):this._keysStorage={}},n.prototype.exist=function(e){e=a(e);return!!this._keysStorage[e]},n.prototype.getKeyStorageLength=function(){return Object.keys(this._keysStorage).length},n);function n(e){var o=this;this._keysStorage={},this._initHandler=function(e){var t;t=48<=e.which&&e.which<=57||65<=e.which&&e.which<=90?String.fromCharCode(e.which):(t=32===e.which?e.code:e.key,s.isIE()&&l[t]||t);var i=o._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(t&&t.toLowerCase())];if(i)for(var n=0;n<i.length;n++){if(o._beforeCall&&!1===o._beforeCall(e,r.focusManager.getFocusId()))return;i[n].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}t.KeyManager=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),n=i(3);t.transpose=function(e,t){for(var i=[],n=0;n<e.length;n++)for(var o=e[n],r=0;r<o.length;r++){i[r]=i[r]||[];var s=t?t(o[r]):o[r];i[r].push(s)}return i},t.getStyleByClass=function(e,t,i,n){return t=t.querySelector("."+i),i=t,i="string"==typeof(e='<div class="'+e+'"></div>')?(i.insertAdjacentHTML("beforeend",e),i.lastChild):(i.appendChild(e),e),e={color:"rgb(0, 0, 0)"===(e=window.getComputedStyle(i)).color?n.color:o.rgbToHex(e.color),background:"rgba(0, 0, 0, 0)"===e.backgroundColor?n.background:o.rgbToHex(e.backgroundColor),fontSize:parseFloat(e.fontSize)},t.removeChild(i),e.color===n.color&&e.background===n.background&&e.fontSize===n.fontSize?null:e},t.removeHTMLTags=function(e){return"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e?"":(""+(null==e?"":e)).replace(/<[^>]*>/g,"").replace(/["]/g,"&quot;").trim()},t.isCssSupport=function(t,i){try{return CSS.supports(t,i)}catch(e){var n=document.createElement("div");return n.style[t]=i,n.style[t]===i}},t.isRowEmpty=function(i){if(i)return Object.keys(i).reduce(function(e,t){return"id"!==t&&!t.startsWith("$")&&e&&void 0!==i[t]&&""!==i[t]?void 0:e},!0)},t.isSortable=function(e,t){return!1!==t.sortable&&e.sortable||t.sortable},t.isAutoWidth=function(t,e){if(e)return!1!==e.autoWidth&&t.autoWidth||e.autoWidth;var i=!1;return t.columns.map(function(e){(!1!==e.autoWidth&&t.autoWidth||e.autoWidth)&&(i=!0)}),i},t.isTooltip=function(e,t){return!1!==t.tooltip&&e.tooltip||t.tooltip},t.isHtmlEnable=function(e,t){return!1!==t.htmlEnable&&e.htmlEnable||t.htmlEnable},t.getTotalWidth=function(e){return e.reduce(function(e,t){return e+(t.$width||0)},0)},t.getTotalHeight=function(e){return e.reduce(function(e,t){return e+(t.$height||0)},0)},t.scrollFixedColsAndRows=function(e){var t=n.locateNode(e,"data-dhx-widget-id").querySelector(".dhx_grid-body"),i=e.deltaY,i=e.shiftKey?[i,0]:[0,i];null!=t&&t.scrollBy.apply(t,i)}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(166)),n(t(167)),n(t(41))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TreeFilterType||(t.TreeFilterType={})).all="all",n.level="level",n.leafs="leafs",(n=t.DataEvents||(t.DataEvents={})).afterAdd="afteradd",n.beforeAdd="beforeadd",n.removeAll="removeall",n.beforeRemove="beforeremove",n.afterRemove="afterremove",n.change="change",n.load="load",n.loadError="loaderror",n.beforeLazyLoad="beforelazyload",n.afterLazyLoad="afterlazyload",n.dataRequest="dataRequest",(n=t.DragEvents||(t.DragEvents={})).beforeDrag="beforeDrag",n.dragStart="dragStart",n.dragOut="dragOut",n.dragIn="dragIn",n.canDrop="canDrop",n.cancelDrop="cancelDrop",n.beforeDrop="beforeDrop",n.afterDrop="afterDrop",n.afterDrag="afterDrag",(t=t.DataDriver||(t.DataDriver={})).json="json",t.csv="csv",t.xml="xml"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(31),o=i(67);t.isEqualObj=function(e,t){for(var i in e)if(e[i]!==t[i]||Array.isArray(e[i]))return!1;return!0},t.naturalCompare=function(e,t){if(isNaN(e)||isNaN(t)){var n=[],o=[];for(e.replace(/(\d+)|(\D+)/g,function(e,t,i){n.push([t||1/0,i||""])}),t.replace(/(\d+)|(\D+)/g,function(e,t,i){o.push([t||1/0,i||""])});n.length&&o.length;){var i=n.shift(),r=o.shift(),r=i[0]-r[0]||i[1].localeCompare(r[1]);if(r)return r}return n.length-o.length}return e-t},t.findByConf=function(e,t){if("function"==typeof t){if(t.call(this,e))return e}else if(t.by&&t.match&&e[t.by]===t.match)return e},t.isDebug=function(){var e=window.dhx;if(void 0!==e)return void 0!==e.debug&&e.debug},t.dhxWarning=function(e){console.warn(e)},t.dhxError=function(e){throw new Error(e)},t.toProxy=function(e){var t=typeof e;return"string"==t?new n.DataProxy(e):"object"==t?e:void 0},t.toDataDriver=function(e){if("string"==typeof e){var t=window.dhx,t=t&&t.dataDrivers||o.dataDrivers;if(t[e])return new t[e];console.warn("Incorrect data driver type:",e),console.warn("Available types:",JSON.stringify(Object.keys(t)))}else if("object"==typeof e)return e},t.copyWithoutInner=function(e,t){var i,n={};for(i in e)i.startsWith("$")||t&&t[i]||(n[i]=e[i]);return n},t.isTreeCollection=function(e){return Boolean(e.getRoot)},t.hasJsonOrArrayStructure=function(e){if("object"==typeof e)return!0;if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return"[object Object]"===Object.prototype.toString.call(t)||Array.isArray(t)}catch(e){return!1}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=i(1),M=i(21),P=i(16);function l(e,t){e[t]&&("string"==typeof e[t]?e[t]=[{text:""+e[t]}]:e[t]=e[t].map(function(e){return"string"==typeof e&&(e={text:e}),e}))}t.normalizeColumns=function(e,t){var i=e.columns,n=e.htmlEnable;void 0===t&&(t=!1);for(var o=0,r=i;o<r.length;o++){var s=r[o];s.$htmlEnable=!(!s.htmlEnable&&!n),s.$cellCss=s.$cellCss||{},l(s,"header"),l(s,"footer"),s.header.reduce(function(e,t){return e||!!t.content},!1)&&(s.$uniqueData=[]),s.minWidth&&s.minWidth<20&&(s.minWidth=20),s.maxWidth&&s.maxWidth<20&&(s.maxWidth=20);var a=s.minWidth||100;s.width&&(a=(a=s.maxWidth&&s.minWidth?s.width>=s.minWidth&&s.width<=s.maxWidth?s.width:s.width>=s.maxWidth?s.maxWidth:s.minWidth:s.maxWidth?s.width<=s.maxWidth?s.width:100<s.maxWidth?s.maxWidth:100:!s.minWidth||s.width>=s.minWidth?s.width:s.minWidth)<20?20:a),s.$width=s.$width&&!t?s.$width:a,s.$width>s.maxWidth&&(s.$width=s.maxWidth),s.$width<s.minWidth&&(s.$width=s.minWidth)}},t.countColumns=function(e,t){var n=0,o=0,r=0,s=!1,i=0,a=!1;return t.forEach(function(e){if(n=Math.max(n,e.header.length),r+=e.$width,e.footer&&(o=Math.max(o,e.footer.length),a=a||!0),!s)for(var t=0,i=e.header;t<i.length;t++)if(i[t].colspan)return void(s=!0)}),t.forEach(function(e){if(e.header.length<n)for(var t=0;t<n;t++)e.header[t]=e.header[t]||{text:""};if(a&&(e.footer=e.footer||[]),e.footer&&e.footer.length<o)for(t=0;t<o;t++)e.footer[t]=e.footer[t]||{text:""};e.header=e.header.map(function(e){return"object"!=typeof e&&(e={text:e}),e.css=e.css||"",e.text||e.css.includes("dhx_cell-empty")||(e.css+=" dhx_cell-empty dxi dxi-select-all"),e}),""===e.header[0].text&&i++}),e.$totalWidth=r,e.$headerLevel=n,e.$footerLevel=o,e.$colspans=s,e.$footer=a,i},t.calculatePositions=function(e,t,i,n,o){for(var r=n.columns||[],s=r.length,a=o||[],l=a.length,o=null!==(c=n.leftSplit)&&void 0!==c?c:0,c=null!==(c=n.topSplit)&&void 0!==c?c:0,u=0,d=i.left,h=n.$totalWidth/s,f=0;f<s;f++){if(!(0<(d-=r[f].$width)+h/2))break;u++}for(var p=0,g=i.top,v=n.$totalHeight/l,f=0;f<l;f++){if(!(0<(g-=(k=a[f]).$height)+v/2))break;p++}for(var _=0,m=0,y=-1/0,b=1/0,w=0;w<s;w++){var x=r[w];u<=w&&_<e&&!x.hidden&&(_+=x.$width,m++),x.$width>y&&(y=x.$width),x.$width<b&&(b=x.$width)}for(var C=0,E=0,S=-1/0,I=1/0,w=0;w<l;w++){var k=a[w];p<=w&&C<t&&!k.hidden&&(C+=k.$height,E++),k.$height>S&&(S=k.$height),k.$height<I&&(I=k.$height)}return I=I<n.rowHeight?I:n.rowHeight,i=Math.round(y/b),n=Math.round(S/I),{xStart:o<=u-i?u-i:o,xEnd:u+m+i,yStart:c<=p-n?p-n:c,yEnd:p+E+n}},t.getUnique=function(e,t,i){var n=e.map(function(e){return e[t]});return i&&n.forEach(function(e,t){null!=e&&e.includes(", ")&&(e.split(", ").forEach(function(e){return n.push(e)}),delete n[t])}),n.filter(function(e,t,i){return i.indexOf(e)===t&&_.isDefined(e)}).sort()},t.getMaxRowHeight=function(e,t,i){void 0===i&&(i={font:"20px Roboto",lineHeight:20});var n=document.createElement("canvas"),o=n.getContext("2d",{alpha:!1});o.font=i.font;for(var r={},s=t.length,a=0;a<s;a++)t[a].template?r[t[a].id]={width:t[a].$width||0,htmlEnable:t[a].$htmlEnable,template:t[a].template,cols:t[a]}:r[t[a].id]={width:t[a].$width||0,htmlEnable:t[a].$htmlEnable};for(var l=[],c=[],u=0,d=Object.entries(e);u<d.length;u++){var h,f=d[u],p=f[0],g=f[1];!r[p]||"id"===p||"height"===p||p.startsWith("$")||"string"!=typeof g&&"number"!=typeof g||(h="",h=null!==(f=r[p])&&void 0!==f&&f.template?(f=r[p].template(g,e,r[p].cols),r[p].htmlEnable?M.removeHTMLTags(f):f):"string"==typeof g?r[p].htmlEnable?M.removeHTMLTags(g):g:g.toString(),l.push(h.split("\n").length),c.push(Math.round(o.measureText(h).width/(null===(p=r[p])||void 0===p?void 0:p.width))))}var v=Math.max(_.getMaxArrayNymber(l),_.getMaxArrayNymber(c));return n.remove(),v*i.lineHeight},t.getMaxColsWidth=function(e,t,i,n){if(void 0===i&&(i={font:"normal 14.4px Arial"}),e.length&&t.length){var o=document.createElement("canvas"),r=o.getContext("2d",{alpha:!1});r.font=i.font;for(var s={},a=t.length,l=0;l<a;l++){var c=t[l],u=c.template,d=c.$htmlEnable,h=c.format,f=c.id,p=c.type;s[f]=u&&"data"===n?{width:20,htmlEnable:d,template:u,cols:c,type:p}:{width:20,htmlEnable:d,format:"date"===p?h||"%M %d %Y":h,type:p}}for(var g=e.length,l=0;l<g;l++)for(var v=0,_=Object.entries(e[l]);v<_.length;v++){var m,y,b=_[v],w=b[0],x=b[1],C=s[w];C&&"id"!==w&&"height"!==w&&!w.startsWith("$")&&("string"==typeof x||"number"==typeof x||x instanceof Date)&&(u=C.template,m=C.cols,h=C.format,p=C.type,y=C.htmlEnable,b=C.width,C=void 0,C="function"==typeof u?(m=u(x,e[l],m),y?M.removeHTMLTags(m):m):y?M.removeHTMLTags(x):x.toString(),(y=h&&"date"===p&&new Date(C))&&(C=P.getFormattedDate(h,y)),b<(C=r.measureText(C).width)&&(s[w].width=C))}o.remove();for(var E={},S=0,I=Object.entries(s);S<I.length;S++){var k=I[S],w=k[0],x=k[1];E[w]=Math.ceil(x.width)}return E}},t.toFormat=function(s,e,a){if("boolean"==typeof s)return s;if(!s&&"number"!=typeof s)return s;switch(e){case"number":case"percent":return a=a||"#",_.isDefined(s)&&!isNaN(Number(s))?function(e){var t=a.replace(/#+/g,"#").split("#").filter(function(e){return e}),i=a.match(/0/g)&&a.match(/0/g).length;s=("percent"===e?100*Number(s):s).toString();var n,o,r=Math.trunc(Number(s));i&&(o=s.split(".")[1]||"0",n=t.find(function(e){return e.includes("0")}).replace(/0+/g,""),o=Number("0."+o).toFixed(i),1<=Number(o)&&r++,o=o.toString().split(".")[1].padEnd(i,"0"));var r=(s<0&&0===Math.abs(r)?"-":"")+r,t=t.find(function(e){return!e.includes("0")}),r=t?r.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1"+t):r;return r+=(n||"")+(o||""),"percent"===e?r+"%":r}(e):s;case"date":return a=a||"%M %d %Y","string"==typeof s?s=P.getFormattedDate(a,P.stringToDate(s,a)):"object"==typeof s&&(s=P.getFormattedDate(a,s)),s;default:return s}},t.getCalculatedRowHeight=function(e,t){void 0===t&&(t={rowHeight:40,padding:8});var i=t.rowHeight<40?e:e+2*t.padding;return e<t.rowHeight?t.rowHeight:i},t.getTreeCellWidthOffset=function(e){return 20+20*e.$level-(e.$items?20:0)}},function(e,t,i){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var d=i(13),h=i(2);function o(e,t){return'<div class="dhx_custom_header_cell">\n\t\t\t'+e+'\n\t\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id='+t+'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<i class="dxi dxi-dots-vertical dhx_header_icon" data-dhx-id='+t+"></i>\n\t</div>"}t.getHeaderCell=o,t.getIndexRowCell=function(e){return'<div class="dhx_custom_index_cell">'+e+'\n\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id='+(e-1)+'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>'},t.updateColumns=function(e){var t=e.columns,n=0;null!=t&&t.map(function(e,t){var i;e.width=e.width||120,n+=e.hidden?0:e.width,"$index"!==e.id&&(i=h.getLetterFromNumber(t),e.header=[{text:o(i,t),css:""}],e.$letter=i)}),e.$totalWidth=n},t.updateRowsIndex=function(e){e.map(function(e,t){e.$index=t+1})},t.removeRowsCss=function(t){t.data.map(function(e){t.removeRowCss(e.id,"dhx_selected_row")})},t.setAutoHeightToRow=function(e,t,i,n){var o=(l=i.getMeta()).cols,r=l.rows,s=(c=h.getCellIds(e,t)).row,a=c.col,l="wrap"===n,c=h.getCellInfo(e,i,t),n=r[s],e=c.value,c=c.format;if(e){var c=d.getFormattedValue(e,c),a=null===(a=o[a])||void 0===a?void 0:a.width,c=h.getTextHeight(c,a);if(n.wrap=(n.wrap||0)+(l?1:-1),r[s]=u({},n),i.setMeta({rows:r}),!(null!==(a=r[s])&&void 0!==a&&a.changedByUser||l&&c<=r[s].height||!l&&n.wrap))return r[s]=u(u({},n),{height:l?c:t.config.rowHeight}),i.setMeta({rows:r}),!0}},t.updateSpans=function(r,s,a,e){if(null!=(t=e.getMeta().merged)&&t.length){var l=!1,t=t.map(function(e){var t=e.from,e=e.to;if(r&&(t.column>=a||e.column>=a)){var i={from:n=u({},t),to:u(u({},e),{column:e.column+r})};return(t.column>=a&&0<r||t.column>a&&r<0)&&(o=n.column,n.column=o+r<0?0:o+r),l=!0,i}if(s&&(t.row>=a||e.row>=a)){var n,o,i={from:n=u({},t),to:u(u({},e),{row:e.row+s})};return(t.row>=a&&0<s||t.column>a&&s<0)&&(o=n.row,n.row=o+s<0?0:o+s),l=!0,i}return{from:t,to:e}});if(l)return e.setMeta({merged:t}),t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(16);function r(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function s(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}function a(e){var t,i=0,n=0,o=0;if("string"==typeof e){var r=e.match(/\d+/g);if(!r)return e;e.toLowerCase().includes("pm")&&(t=!0),n=s(+r[0],23)+(t?12:0),i=s(+r[1],59),o=s(+r[2],59)}return new Date(1991,0,1,n,i,o)}t.getExcelDateFromJs=r,t.excelDateToJSDate=function(e){return e=new Date(Math.round(86400*(e-25569)*1e3)),new Date(e.getTime()+6e4*e.getTimezoneOffset())},t.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.addTime=function(e,t){return void 0===t&&(t=36e5),new Date(e.getTime()+t)},t.dateDiff=function(e,t){return t=t.getTime(),e=e.getTime(),parseInt(""+(t-e)/864e5)},t.timeDiff=function(e,t){var i=new Date,n=new Date;return i.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds()),n=n.getTime(),i=i.getTime(),parseInt(""+(n-i))},t.timeStringToJS=a,t.isTimeCheck=function(e){return/([0-2][0-9]:[0-5][0-9]:[0-5][0-9])/i.test(e)},t.getExcelDateFromString=function(e,t){if("string"!=typeof e)return e;var i=e;switch(t.id){case"date":i=o.stringToDate(e,t.dateFormat,!0)?r(o.stringToDate(e,t.dateFormat)):e;break;case"time":var n=a(e);i="string"==typeof n?n:r(n)}return i}},function(e,t,i){"use strict";var k=this&&this.__assign||function(){return(k=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var M=i(1),P=i(0),O=i(37),_=i(21),n=i(10),o=i(136),c=i(3),m=i(25);function r(e,t,i,n,o){t=c.locateNodeByClassName(o.target,"dhx_grid-fixed-cols-wrap")?0:t;var r,s,a=c.locateNodeByClassName(o.target,"dhx_grid-cell"),l=c.locateNodeByClassName(o.target,"dhx_span-cell");(a||l)&&n&&(t=a?a.parentNode:l,r=(a||l).getAttribute("data-dhx-col-id"),l=i.columns.filter(function(e){return!e.hidden}).find(function(e){return e.id===r}),s=t.getAttribute("data-dhx-id"),t=i.data.find(function(e){return e.id.toString()===s}),(n.toLocaleLowerCase().includes("touch")?i._events:i.events).fire(n,[t,l,o]))}function D(e,t,i){return{onclick:[r,e,t,i,n.GridEvents.cellClick],onmouseover:[r,e,t,i,n.GridEvents.cellMouseOver],onmousedown:[r,e,t,i,n.GridEvents.cellMouseDown],ondblclick:[r,e,t,i,n.GridEvents.cellDblClick],oncontextmenu:[r,e,t,i,n.GridEvents.cellRightClick],ontouchstart:[r,e,t,i,n.GridEvents.cellMouseDown],ontouchmove:[r,e,t,i,n.GridSystemEvents.cellTouchMove],ontouchend:[r,e,t,i,n.GridSystemEvents.cellTouchEnd]}}function y(e,t,i,n){var o=n.$editable&&n.$editable.row===t.id&&n.$editable.col===i.id,r="",s=i.align?" dhx_align-"+i.align:"dhx_align-left";n.dragMode&&"row"===n.dragItem&&(r+=(t.$drophere&&!o?" dhx_grid-cell--drophere":"")+(t.$dragtarget&&!o?" dhx_grid-cell--dragtarget":"")+(o?"":" dhx_grid-cell--drag"));var a=m.getTreeCellWidthOffset(t);return P.el(".dhx_grid-cell",k({class:"dhx_tree-cell "+(i.$cellCss[t.id]||"")+" "+(t.$items?"dhx_grid-expand-cell":"")+" "+(o?"dhx_tree-editing-cell":"")+" "+r+s,style:{width:i.$width,height:t.$height,padding:t.$items?0:"0 0 0 "+a+"px"},"data-dhx-col-id":i.id},{role:"gridcell","aria-colindex":1}),[t.$items?P.el(".dhx_grid-expand-cell-icon",k(k({class:t.$opened?"dxi dxi-chevron-up":"dxi dxi-chevron-down","data-dhx-id":t.id},{role:"button","aria-label":t.$opened?"Collapse group":"Expand group"}),{style:{padding:t.$level?"0 0 0 "+(4+a)+"px":"0 0 0 4px"}})):null,P.el(".dhx_tree-cell",{class:s+(n.autoHeight?" dhx_tree-cell_auto-height":"")},[e])])}function F(e,t,i){return o.getEditor(e,t,i)}t.getHandlers=D,t.getTreeCell=y,t.getCells=function(f){if(!f.data||!f.columns)return[];var p=f.$positions,n=f.data?f.data.slice(p.yStart,p.yEnd):[],o=f.columns.slice(p.xStart,p.xEnd),g=f.selection.getCell(),v=!0;return n.map(function(h,e){var t=n.length-1===e,i="";return f.rowCss&&(i=f.rowCss(h)),h.$css&&(i+=h.$css),P.el(".dhx_grid-row",k({style:{height:t?h.$height+1:h.$height},"data-dhx-id":h.id,class:i,_key:h.id,_flags:P.KEYED_LIST},{role:"row","aria-rowindex":p.yStart+e+1}),h.$customRender?[h.$customRender(h,f)]:o.map(function(i,e){var t;if(!i.hidden){var n=h[i.id];(i.editable||f.editable&&!1!==i.editable)&&("select"===i.editorType||"combobox"===i.editorType||"multiselect"===i.editorType)&&i.options&&(n=(n="string"==typeof n&&"multiselect"===i.editorType?n.split(",").map(function(e){return e.trim()}):[null==n?void 0:n.toString()]).map(function(t){var e;return null!==(e=null===(e=i.options.find(function(e){return e.id&&e.id.toString()===t}))||void 0===e?void 0:e.value)&&void 0!==e?e:t}).join(", "));var o=m.toFormat(n,i.type,i.format),r=function(e,t,i,n){return k({role:"gridcell","aria-colindex":t,"aria-readonly":n?"false":"true"},(t=e,n=h,e={tabindex:-1},g?g.row.id===n.id&&g.column.id===t.id&&(e.tabindex=0):v&&(e.tabindex=0,e.onfocus=function(e){var t;f.selection&&!g&&(t=e.target.parentNode.getAttribute("data-dhx-id"),(e=e.target.getAttribute("data-dhx-col-id"))&&t&&(f.selection.setCell(t,e),g=f.selection.getCell()))}),v=!1,e))},s=i.template?i.template(o,h,i):"boolean"!=typeof(t=o)&&"boolean"!==i.type||"string"==typeof t?t||0===t?t:"":""+Boolean(t);"string"==typeof s&&(s=_.isHtmlEnable(f,i)?P.el("div.dhx_grid-cell__content",k({".innerHTML":s},{role:"button","aria-label":"Edit content"})):s);var a=((i.$cellCss&&i.$cellCss[h.id]||"")+" dhx_"+i.type+"-cell").replace(/\s+/g," "),l=i.$width,c=f.$editable&&f.$editable.row===h.id&&f.$editable.col===i.id,u=f.leftSplit,d=f.columns;return((c||"boolean"===i.type&&(f.editable&&(null===(n=i.editable)||void 0===n||n)||!f.editable&&i.editable))&&(s=F(h,i,f).toHTML(),a+=" dhx_grid-cell__editable",u===d.indexOf(i)+1&&--l),"tree"===f.type&&f.firstColId===i.id)?y(s,h,i,f):(f.dragMode&&"row"===f.dragItem&&(a+=(h.$drophere&&!c?" dhx_grid-cell--drophere":"")+(h.$dragtarget&&!c?" dhx_grid-cell--dragtarget":"")+(c?"":" dhx_grid-cell--drag")),i.align&&(a+=" dhx_align-"+i.align),_.isHtmlEnable(f,i)&&(a+=" dhx_grid-cell__content_html-enable"),f.autoHeight&&(a+=" dhx_grid-cell__content_auto-height"),P.el(".dhx_grid-cell",k({class:a,style:{width:l,height:h.$height+"px"},_key:i.id,"data-dhx-col-id":i.id},r(i,p.xStart+e+1,0,f.editable)),[s]))}}))})},t.getSpans=function(y,b){var w,x=[],C=y.$positions,E=y.columns,S=y.data,e=y.spans;if(!E.length||!e)return null;for(var I=e.filter(function(e){return null===(e=e.$renderFrom)||void 0===e?void 0:e.includes(y.$renderFrom)}).sort(function(e,t){return"string"==typeof e.row&&"string"==typeof t.row?e.row.localeCompare(t.row):e.row-t.row}),t=0;t<I.length;t++)!function(e){var t=I[e].row,i=I[e].column,n=I[e].rowspan,o=I[e].colspan,r=I[e].css,s=I[e].$markCss;if(1===n)return;var a=M.findIndex(E,function(e){return""+e.id==""+i}),l=M.findIndex(S,function(e){return""+e.id==""+t});if(a<0||l<0)return;var c=E[a],u=S[l];if(c.hidden)return;var d=I[e].text||(void 0===u[i]?"":u[i]);d="string"==typeof(d=(c.template||function(e,t,i){return e||0===e?e:""})(d,u,c))?P.el("div.dhx_span-cell-content",{".innerHTML":d}):d;for(var h=0,f=0;f<l;f++)h+=S[f].$height;for(var p=h-(b?0:1),g=0,v=a-1;0<=v;v--)g+=E[v].$width;var _=a===E.length-1,m=a+o===E.length,e=c.header[0].text?" dhx_span-cell":" dhx_span-cell dhx_span-cell--title";e+=s?" "+s:"",e+=r?" "+r:"",e+=0===l?" dhx_span-first-row":"",e+=0===a?" dhx_span-first-col":"",e+=_||m?" dhx_span-last-col":"",e+=o?" dhx_span-string-cell":" dhx_span-"+(c.type||"string")+"-cell",e+=c.align?" dhx_align-"+c.align:" dhx_align-left";_=1<o?O.getWidth(E,o,a):c.$width,m=1<n?O.getHeight(S,n,l):u.$height;(y.$editable&&y.$editable.row===t&&y.$editable.col===i||"boolean"===c.type&&(y.editable&&(null===(w=c.editable)||void 0===w||w)||!y.editable&&c.editable))&&(o=y.leftSplit,n=y.topSplit,o&&a<o||n&&l<n||(d=F(u,c,y).toHTML(),e+=" dhx_span__editable",o===a+1&&--_)),x.push(P.el("div",k({class:e,style:{width:_,height:m,top:p,left:g},"data-dhx-col-id":i,"data-dhx-id":t,"aria-hidden":"true"},D(C.yStart,C.xStart,y)),[d]))}(t);return x},t.getShifts=function(e){var t=e.columns.slice(0,e.$positions.xStart),e=e.data.slice(0,e.$positions.yStart);return{x:_.getTotalWidth(t),y:_.getTotalHeight(e)}},t.normalizeSpan=function(e,t){var i=void 0===(l=t.leftSplit)?0:l,n=void 0===(c=t.topSplit)?0:c,o=t.data,r=t.columns,s=e.column,a=e.row,l=e.colspan,c=e.rowspan,t=r.findIndex(function(e){return e.id==s}),r=o.findIndex(function(e){return e.id==a}),o=[];return i<=t+(l||0)&&n<=r+(c||0)&&o.push("render"),t<i&&o.push("fixedCols"),r<n&&i<=t&&o.push("fixedRows"),k(k({},e),{$renderFrom:o})}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(80)),n(t(155)),n(t(81)),n(t(55))},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(87)),n(t(178))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),i=(o.prototype.updateUrl=function(e,t){for(var i in void 0===t&&(t={}),this._url=this.url=e||this._url,this.url+=this.url.includes("?")?"&":"?",t)this.config[i]=t[i],this.url+=i+"="+encodeURIComponent(t[i])+"&";this.url=this.url.slice(0,-1)},o.prototype.load=function(){return n.ajax.get(this.url,null,{responseType:"text"})},o.prototype.save=function(e,t){switch(t){case"delete":return n.ajax.delete(this.url,e);case"update":return n.ajax.put(this.url,e);case"insert":default:return n.ajax.post(this.url,e)}},o);function o(e,t){this.url=this._url=e,this.config=t}t.DataProxy=i},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t(1),o=t(0),_=t(3);i.scrollViewConfig={enable:!1,autoHide:!0,timeout:1e3,scrollHandler:function(){}};n.prototype.enable=function(){this.config.enable=!0,this._getRootView().redraw()},n.prototype.disable=function(){this.config.enable=!1,this._getRootView().redraw()},n.prototype.render=function(e,t){var i=this;if(void 0===t&&(t=""),!this.config.enable||!e.length)return e;t&&(this._uid=t);var n=this.config.enable?[o.el(".y-scroll",((n={})[this._wheelName]=this._handlers[this._wheelName],n._ref=t?"scroll-y-area-"+t:"scroll-y-area",n.onmousedown=this._handlers.onmousedownArea,n.onmouseenter=this._handlers.onmouseenter,n.onmouseleave=this._handlers.onmouseleave,n.style={width:"6px",height:"100%",right:0,top:0,position:"absolute"},n),[o.el(".scroll-runner",{_ref:t?"scroll-y-runner-"+t:"scroll-y-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",top:this._runnerYTop}})]),o.el(".x-scroll",((n={})[this._wheelName]=this._handlers[this._wheelName],n._ref=t?"scroll-x-area-"+t:"scroll-x-area",n.onmousedown=this._handlers.onmousedownArea,n.onmouseenter=this._handlers.onmouseenter,n.onmouseleave=this._handlers.onmouseleave,n.style={width:"100%",height:"6px",left:0,bottom:0,position:"absolute"},n),[o.el(".scroll-runner",{_ref:t?"scroll-x-runner-"+t:"scroll-x-runner",onmousedown:this._handlers.onmousedownRunner,style:{width:this._runnerWidth+"px",left:this._runnerXLeft}})])]:null;return o.el(".scroll-view-wrapper",[o.el(".scroll-view",{onscroll:this._handlers.onscroll,_ref:t?"scroll-view-"+t:"scroll-view",_hooks:{didInsert:function(){i.update()},didRecycle:function(){i.update()}},style:{width:"calc(100% + "+this._scrollWidth+"px)",height:"calc(100% + "+this._scrollHeight+"px)"}},e)].concat(n))},n.prototype.update=function(){var e,t,i,n,o,r=this._getRefs();r&&(o=r.area,e=r.areaX,t=r.areaY,i=r.runnerY,n=r.runnerX,this._visibleYArea=o.clientHeight/o.scrollHeight,this._visibleXArea=o.clientWidth/o.scrollWidth,this._scrollYTop=o.scrollTop,this._scrollXLeft=o.scrollLeft,this._runnerYTop=this._scrollYTop*this._visibleYArea,this._runnerXLeft=this._scrollXLeft*this._visibleXArea,this._runnerHeight=this._visibleYArea<1?o.clientHeight*this._visibleYArea:0,this._runnerWidth=this._visibleXArea<1?o.clientWidth*this._visibleXArea:0,r=i.style.top,o=n.style.left,i.style.opacity=1,i.style.top=this._runnerYTop+"px",i.style.height=this._runnerHeight+"px",n.style.opacity=1,n.style.left=this._runnerXLeft+"px",n.style.width=this._runnerWidth+"px",r!==i.style.top&&(t.style.opacity=.9,t.style.width="10px"),o!==n.style.left&&(e.style.opacity=.9,e.style.height="10px"),this.config.autoHide?this._autoHideFunc||(this._autoHideFunc=s.debounce(function(){i.style.opacity=0,t.style.width="6px",n.style.opacity=0,e.style.height="6px"},this.config.timeout)):this._autoHideFunc=s.debounce(function(){t.style.width="6px",e.style.height="6px"},this.config.timeout),this._autoHideFunc())},n.prototype._getRefs=function(){var e=this._getRootView(),t=!(!e.refs["scroll-view"]||!e.refs["scroll-x-runner"]&&!e.refs["scroll-y-runner"]),i=!(!this._uid||!e.refs["scroll-view-"+this._uid]||!e.refs["scroll-x-runner-"+this._uid]&&!e.refs["scroll-y-runner-"+this._uid]);if(e.refs)return t?{area:e.refs["scroll-view"].el,areaY:e.refs["scroll-y-area"].el,areaX:e.refs["scroll-x-area"].el,runnerY:e.refs["scroll-y-runner"].el,runnerX:e.refs["scroll-x-runner"].el}:i?{area:e.refs["scroll-view-"+this._uid].el,areaY:e.refs["scroll-y-area-"+this._uid].el,areaX:e.refs["scroll-x-area-"+this._uid].el,runnerY:e.refs["scroll-y-runner-"+this._uid].el,runnerX:e.refs["scroll-x-runner-"+this._uid].el}:void 0},t=n;function n(e,t){var v=this;void 0===t&&(t={}),this.config=s.extend({enable:i.scrollViewConfig.enable,autoHide:i.scrollViewConfig.autoHide,timeout:i.scrollViewConfig.timeout,scrollHandler:i.scrollViewConfig.scrollHandler},t),this._wheelName=_.isIE()?"onmousewheel":"onwheel",this._getRootView=e,this._scrollYTop=this._scrollXLeft=this._runnerYTop=this._runnerXLeft=this._runnerHeight=this._runnerWidth=0,this._visibleYArea=this._visibleXArea=1,this._scrollWidth=_.getScrollbarWidth(),this._scrollHeight=_.getScrollbarHeight(),this._handlers=((e={onscroll:function(e){v.config.scrollHandler(e),v.update()}})[this._wheelName]=function(e){var t=!!_.locateNodeByClassName(e.target,"y-scroll");e.preventDefault();var i,n=40*(0<(e.deltaY||-e.wheelDelta)?1:-1),e=v._getRefs().area;t?(t=e.scrollHeight-v._runnerHeight,i=v._scrollYTop+n,e.scrollTop=i<0?0:t<i?t:i):(i=e.scrollWidth-v._runnerWidth,n=v._scrollXLeft+n,e.scrollLeft=n<0?0:i<n?i:n),v.update()},e.onmousedownRunner=function(e){e.preventDefault();function t(e){var t;i?(t=e.pageY-u,o.scrollTop=t<=a?0:l<t?c:(t-a)/v._visibleYArea):(e=e.pageX-p,o.scrollLeft=e<=d?0:h<e?f:(e-d)/v._visibleXArea),v.update()}var i=!!_.locateNodeByClassName(e.target,"y-scroll"),n=v._getRefs(),o=n.area,r=n.runnerY,s=n.runnerX,n=o.getBoundingClientRect(),a=n.top+window.pageYOffset,l=n.bottom+window.pageYOffset,c=o.scrollHeight-v._runnerHeight,u=e.pageY-r.getBoundingClientRect().top-window.pageYOffset,d=n.left+window.pageXOffset,h=n.right+window.pageXOffset,f=o.scrollWidth-v._runnerWidth,p=e.pageX-s.getBoundingClientRect().left-window.pageXOffset,g=function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",g),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",t),document.addEventListener("mouseup",g)},e.onmousedownArea=function(e){var t,i,n,o;_.locateNodeByClassName(e,"scroll-runner")||(e.preventDefault(),t=!!_.locateNodeByClassName(e.target,"y-scroll"),i=(o=v._getRefs()).area,n=o.runnerY,o=o.runnerX,t?i.scrollTop+=(e.pageY-n.getBoundingClientRect().top)/v._visibleYArea:i.scrollLeft+=(e.pageX-o.getBoundingClientRect().left)/v._visibleXArea,v.update())},e.onmouseenter=function(e){var t,i;_.locateNodeByClassName(e,"scroll-runner")||(i=v._getRefs())&&(t=!!_.locateNodeByClassName(e.target,"y-scroll"),e=i.areaX,i=i.areaY,t&&0<v._runnerHeight?i.style.background="#eee":!t&&0<v._runnerWidth&&(e.style.background="#eee"))},e.onmouseleave=function(e){var t,i;_.locateNodeByClassName(e,"scroll-runner")||(i=v._getRefs())&&(t=!!_.locateNodeByClassName(e.target,"y-scroll"),e=i.areaX,i=i.areaY,t&&0<v._runnerHeight?i.style.background="transparent":!t&&0<v._runnerWidth&&(e.style.background="transparent"))},e)}i.ScrollView=t},function(e,t,i){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),d=i(1);t.getCount=function(e,t,i){var n={danger:" dhx_navbar-count--color_danger",secondary:" dhx_navbar-count--color_secondary",primary:" dhx_navbar-count--color_primary",success:" dhx_navbar-count--color_success"}[e.countColor]||" dhx_navbar-count--color_danger";return r.el(".dhx_navbar-count",{class:t+n+(!i&&99<parseInt(e.count,10)?" dhx_navbar-count--overlimit":"")},i&&99<parseInt(e.count,10)?"99+":e.count)},t.getIcon=function(e,t){return void 0===e&&(e=""),e.startsWith("dxi")&&(e="dxi "+e),r.el("span",{class:"dhx_"+t+"__icon "+e,"aria-hidden":"true"})};var s=function(e,t,i){var n="",o="",o=(n=i?"dhx_menu-item":"dhx_"+e+"__item")+(t.css?" "+t.css:"");return"spacer"!==t.type&&"separator"!==t.type||(o+=" "+n+"--"+t.type),"button"!==t.type||"sidebar"!==e||t.icon||(o+=" dhx_navbar-item--colapse_hidden"),o};t.navbarComponentMixin=function(e,t,i,n){var i=s(e,t,i),e="ribbon"===e&&("navItem"===t.type||"imageButton"===t.type);return r.el("li",o({_key:t.id,class:i+(t.icon&&!t.value&&e?" dhx_ribbon__item--icon":"")+(t.src&&!t.value&&e?" dhx_ribbon__item--icon":"")+(t.size&&e?" dhx_ribbon__item--"+t.size:""),".innerHTML":"customHTML"===t.type?t.html:void 0,"data-dhx-id":"customHTML"===t.type?t.id:void 0},(i=t.type,e={role:"none"},"separator"===i&&(e.role="separator",e["aria-orientation"]="vertical"),e)),"customHTML"!==t.type?[n]:void 0)},t.getNavbarButtonCSS=function(e,t){var i=e.color,n=e.size,o=e.view,r=e.full,s=e.icon,a=e.circle,l=e.loading,c=e.value,u=e.active,e=e.count;return({danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[i]||" dhx_button--color_primary")+({small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[n]||" dhx_button--size_medium")+({flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[o]||" dhx_button--view_flat")+(r?" dhx_button--width_full":"")+(a?" dhx_button--circle":"")+(l?" dhx_button--loading":"")+(u?" dhx_button--active":"")+(s&&!c?" dhx_button--icon":"")+(d.isDefined(e)?" dhx_button--count":"")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y,n={1:"#ERROR",2:"#ERROR",3:"#REF!"},_=function(){return(_=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function m(e,t,i){return i+64*t+64*e*4096}function b(e){return[e<2147483648?e>>18:e/262144&16777215,e>>6&4095,63&e]}function w(e){return e<2147483648?e>>18:e/262144&16777215}function s(e){return e>>6&4095}function o(e){return 63&e}function x(e,t){for(var i,n,o,r=e.code,s=e.source,a="",l=r.length,c=0;c<l;c+=3)switch(r[c]){case 5:var u=void 0;9===r[c+6]&&(u=t.pageName(63&r[c+7])),a+=(-1!==(u=u||e.source.substr(r[c+1],r[c+2])).indexOf(" ")?"'"+u+"'":u)+"!";break;case 7:a+=d(i=(o=b(r[c+4]))[0],n=o[1],r[c+5]);break;case 4:a+=s.substr(r[c+1],r[c+2]).toUpperCase();break;case 8:i=(u=b(r[c+4]))[0],n=u[1],u=(o=b(r[c+7]))[0],o=o[1],a+=d(i,n,r[c+5]),a+=":",a+=d(u,o,r[c+8]);break;case 9:break;case 2:a+="{{"+s.substr(r[c+1],r[c+2])+"}}";break;case 3:a+="#REF!";break;case 1:a+='"'+s.substr(r[c+1],r[c+2])+'"';break;default:a+=s.substr(r[c+1],r[c+2])}return a}function d(e,t,i){var n="";2&i&&(n+="$");var o="";for(t+=1;0<t;){var r=t%26;0===r&&(r=26),o=String.fromCharCode(64+r)+o,t=(t-r)/26}return n+=o,1&i&&(n+="$"),n+(e+1)}function C(e){e=e.charCodeAt(0);return 48<=e&&e<=57}function E(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function S(e,t,i){for(var n,o=e.length,r=!0,s=t,a=!1,l=!1,c=!1,u=0;s<o;s++){var d=e[s];if("'"!==d){if(!a){c=!0;var h=d.charCodeAt(0);if((n=h)<=122?65<=n||35===n||36===n||46===n:191<n)h<=122?97<=h&&(l=!0):r=!1,1==u&&u++;else{if(!C(d))break;0==u&&u++}}}else{if(c)break;if(a){s++;break}a=!0}}var f=e[s],p=t,g=s-t;return a&&((g-=1+("'"===e[s-1]?1:0))<0&&(g=0),p++,i=5),0===i&&(":"===f&&r?1!==u?i=3:(i=8,l&&(y=!0)):"!"===f?i="#"===e[p]?3:5:"("===f?((t=e.substr(p,g)).toUpperCase()!==t&&(y=!0),i=4):"}"===f&&"}"===e[s-1]?i=2:1===u&&r?(i=7,l&&(y=!0)):i=6),[p,g,s,i]}function I(e,t,i){for(var n=0,o=0,r=1,s=1,a=0,l=!1,c=t.length-1;0<=c;c--){var u=t[c].charCodeAt(0);36!==u?u<58?(o+=(u-48)*r,r*=10):(l||(n=o,l=!(o=0),s+=r=1),o+=(u-(96<u?96:64))*r,r*=26):a+=s}4095<o?e.push(3,0,0):e.push(9,m(n-1,o-1,i),a)}function r(e,t){var i=[];y=!1;for(var n,o=-1,r=0;r<e.length;r++){var s,a,l,c,u,d,h,f,p,g,v,_=e[r];'"'!=_?-1<o||("{"!=_||"{"!=e[r+1]?"'"==_||((a=_.charCodeAt(0))<=122?65<=a||35===a||36===a:191<a)?(p=(l=S(e,r,0))[0],g=l[1],s=l[2],h=l[3],a=i.length,7!==h&&8!==h||5!==i[i.length-3]?(n=t.z,i.push(h,p,g)):(u="'"===e[p-2]?1:0,l=i[a-2],c=i[a-1],void 0===(n=t.page(e.substr(l,c)))&&(i.push(3,0,0),n=0),i.push(h,p-c-2*u-1,g+c+2*u+1)),r=s-1,6===h?t.name(i,e,t):8===h?(c=i.length,I(i,e.substr(p,g),n),p=(u=S(e,r+2,0))[0],g=u[1],s=u[2],5===(h=u[3])&&(p=(d=S(e,s+1,0))[0],g=d[1],s=d[2],h=d[3]),7===h?(I(i,e.substr(p,g),n),u=i[c+1],((d=i[c+4])<u||w(u)>w(d))&&(i[c+1]=d,i[c+4]=u),i[c-1]+=g+1,r=s-1):i[c-3]=7):7===h?I(i,e.substr(p,g),n):3!==h&&5!==h||r++):r=E(_)?(h=function(e,t){for(var i;i=e[++t],E(i););return t}(e,r),i.push(12,r,h-r),h-1):C(_)?(f=function(e,t){for(var i;t++,i=e.charCodeAt(t),48<=i&&i<=57;);return t}(e,r),i.push(11,r,f-r),f-1):(_=void 0,"<"===(f=e)[v=r]?">"!==(_=f[v+1])&&"="!==_||v++:">"===f[v]&&"="===f[v+1]&&v++,v=v+1,i.push(10,r,v-r),v-1):(p=(v=S(e,r+2,2))[0],g=v[1],v=v[2],i.push(2,p,g),r=v+2-1)):o=-1<o?(i.push(1,o+1,r-o-1),-1):r}var m={code:i,source:e,exec:null,broken:0,triggers:null};return y&&(m.source=x(m,t)),m}var h=[">","<","=","+"];function a(d,e){var t=function(e){for(var t,i=d.code,n=d.source,o="",r=i.length,s=0;s<r;s+=3)switch(i[s]){case 4:o+='ctx.m["'+n.substr(i[s+1],i[s+2]).toUpperCase()+'"]';break;case 1:o+='"'+n.substr(i[s+1],i[s+2])+'"';break;case 2:o+='ctx.p("'+n.substr(i[s+1],i[s+2])+'")';break;case 6:case 7:var a=void 0,l=void 0;if(10===i[s-3]?a=s-3:12===i[s-3]&&10===i[s-6]&&(a=s-6),10===i[s+6]?l=s+6:12===i[s+6]&&10===i[s+9]&&(l=s+9),a||l){var c=a?n[i[a+1]]:null,u=l?n[i[l+1]]:null;if("&"==c||"&"==u){o+="(ctx.v("+i[s+4]+') === null ? "" : ctx.v('+i[s+4]+"))";break}if(-1!=h.indexOf(c)||-1!=h.indexOf(u)){o+="(ctx.v("+i[s+4]+") === null ? 0 : ctx.v("+i[s+4]+"))";break}}o+="ctx.v("+i[s+4]+")";break;case 8:o+="ctx.r("+i[s+4]+", "+i[s+7]+")";break;case 10:1===i[s+2]?o+="&"===(t=n[i[s+1]])?'+""+':e&&"+"==t?"*1+1*":"="===t?"==":";"===t?",":"{"===t?"[":"}"===t?"]":t:2===i[s+2]?o+="<>"===(t=n.substr(i[s+1],i[s+2]))?"!=":t:o+=n.substr(i[s+1],i[s+2]);break;case 11:o+=n.substr(i[s+1],i[s+2]);break;case 3:return""}return o}(e);if(!t)return d.broken=3,void(d.exec=null);try{d.exec=new Function("ctx","return "+t)}catch(e){d.broken=1,d.exec=null}}var f="#DIV/0!",c="#VALUE!",l="#NUM!",p="#N/A";function u(e){var t=new Date(e.getFullYear(),0,0),e=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(e/864e5)}function g(e){e=new Date(Math.round(86400*(e-25569)*1e3));return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function v(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function k(e){return!(!e&&0!==e||(e*=1,isNaN(e)))&&e}function M(e){if(1===e.length){var t=e[0];return"object"==typeof t?t:[t]}for(var i=[],n=0;n<e.length;n++)i=i.concat(e[n]);return i}function P(e){return!e&&0!==e}function O(e){return"string"==typeof e?"TRUE"===e:!!e}function D(e){var t="string"==typeof e?new Date(e):g(e);if(t.getTime())return t;throw e+" is invalid date"}function F(e){var t=k(e);if("number"!=typeof t)throw e+" is not a number";return t}function A(e,t,i,n,o){var r=k(e);r<0&&8==o&&(t=null);t=t?k(t):null;if("number"!=typeof r||"boolean"==typeof t)throw c;if(r<i&&(r=i),n<r&&(r=n),t<-1)throw l;t=t&&Math.floor(+t);e=e<0&&16===o?"FF":"",o=(n<2147483648?r>>>0&n-i:r>>>0).toString(o);if(t&&o.length>t)throw l;return(e+o).padStart(t,"0").toUpperCase()}function V(e){return 0<e?Math.floor(e):Math.ceil(e)}function R(e){return e<0?Math.floor(e):Math.ceil(e)}function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=M(e),o=0;o<n.length;o++){var r=k(n[o]);"number"==typeof r&&(i+=r)}return i}function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=0,o=M(e),r=0;r<o.length;r++){var s=k(o[r]);"number"==typeof s&&(i+=s,n++)}return n?i/n:0}function L(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=M(e),n=0,o=0,r=0;r<i.length;r++){var s=i[r],a=k(i[r]);"number"==typeof a?(n+=a,o++):(!0===s&&n++,!s&&!1!==s||o++)}return o?n/o:0}function j(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=M(e),o=0;o<n.length;o++)"number"==typeof k(n[o])&&i++;return i}function N(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=M(e),o=0;o<n.length;o++)n[o]&&0!=+n[o]&&i++;return i}function $(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=-1/0,n=M(e),o=0;o<n.length;o++){var r=k(n[o]);"number"==typeof r&&i<r&&(i=r)}return i===-1/0?0:i}function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=1/0,n=M(e),o=0;o<n.length;o++){var r=k(n[o]);"number"==typeof r&&r<i&&(i=r)}return i===1/0?0:i}function B(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=!1,n=1,o=M(e),r=0;r<o.length;r++){var s=k(o[r]);"number"==typeof s&&(i=!0,n*=s)}return i?n:null}function W(e,t,i){for(var n=M(e),o=t?0:-1,r=(i?L:H).apply(void 0,e),s=0,a=0;a<n.length;a++){var l=n[a],c=k(n[a]);if("number"!=typeof c){if(!i||"boolean"!=typeof l&&!l)continue;c=!0===l?1:0}o++,s+=Math.pow(c-r,2)}return o?s/o:0}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W(e,!1,!1)}function U(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W(e,!1,!0)}function q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W(e,!0,!1)}function Y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W(e,!0,!0)}function X(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(G.apply(void 0,e))}function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(q.apply(void 0,e))}function J(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return Math.pow(e,t)}var Z={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},Q=[];function ee(e){e=k(e);if("number"==typeof e&&-1<e){e=Math.floor(e);return 0===e||1===e?1:(0<Q[e]||(Q[e]=ee(e-1)*e),Q[e])}}function te(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return ee(e)/(ee(t)*ee(e-t))}var ie=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function ne(e,t,i){void 0===i&&(i="i");var n=k(e),o=k(t);if("number"!=typeof n&&"number"!=typeof o)throw l;n="",o="";return e&&(n=e.toString()),t&&1!==t?o=t+i:1===t&&(o=i),0<t?(n?n+"+":"")+o:n+o}function oe(e,t){return void 0===t&&(t=null),A(e,t,-512,511,2)}function re(e,t){return void 0===t&&(t=null),A(e,t,-274877906944,274877906943,16)}function se(e,t){return void 0===t&&(t=null),A(e,t,-536870912,536870911,8)}var ae=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function le(e){for(var t,i=e<0,n=0,o=0,r=2/(2+(e=Math.abs(e))),s=4*r-2,a=ae.length-1;0<a;a--)t=s*n-o+ae[a],o=n,n=t;e=r*Math.exp(-e*e+.5*(ae[0]+s*n)-o);return i?e-1:1-e}function ce(e,t){e=k(e),t=k(t);if("number"==typeof e)return"number"==typeof t?le(t)-le(e):le(e);throw c}var ue=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],de=Math.pow(2,39);function he(e){if("string"!=typeof e)throw c;if(0<=["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e))return 0;var t=e.indexOf("+"),i=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===i&&(i=e.indexOf("-",1));var n=e.substring(e.length-1,e.length),n="i"===n||"j"===n;if(0<=t||0<=i){if(!n)throw l;if(0<=t){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw l;return Number(e.substring(0,t))}if(isNaN(+e.substring(0,i))||isNaN(+e.substring(i+1,e.length-1)))throw l;return Number(e.substring(0,i))}if(n){if(isNaN(+e.substring(0,e.length-1)))throw l;return 0}if(isNaN(+e))throw l;return+e}function fe(e){if("string"!=typeof e)throw c;if(0<=["i","j"].indexOf(e))return 1;var t=(e=e.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),i=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===i&&(i=e.indexOf("-",1));var n=e.substring(e.length-1,e.length),n="i"===n||"j"===n;if(0<=t||0<=i){if(!n)throw l;if(0<=t){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw l;return Number(e.substring(t+1,e.length-1))}if(isNaN(+e.substring(0,i))||isNaN(+e.substring(i+1,e.length-1)))throw l;return-Number(e.substring(i+1,e.length-1))}if(n){n=+e.substring(0,e.length-1);if(isNaN(n))throw l;return n}if(isNaN(+e))throw l;return 0}function pe(e){var t=+he(e),e=+fe(e);return ne(Math.cos(t)*Math.cosh(e),-Math.sin(t)*Math.sinh(e))}function ge(e){var t=+he(e),e=+fe(e);return ne(Math.cos(e)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(e)*(Math.exp(t)-Math.exp(-t))/2)}function ve(e,t){var i=+he(e),n=+fe(e),o=+he(t),e=+fe(t),t=Math.pow(o,2)+Math.pow(e,2);return ne((i*o+n*e)/t,(n*o-i*e)/t)}function _e(e){var t=+he(e),e=+fe(e);return ne(Math.sin(t)*Math.cosh(e),Math.cos(t)*Math.sinh(e))}function me(e){var t=+he(e),e=+fe(e);return ne(Math.cos(e)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(e)*(Math.exp(t)+Math.exp(-t))/2)}var ye=Math.pow(2,29);function be(e,t,i){var n=k(t);if("number"!=typeof n||t<0||1<t||i&&(0===t||1===t))throw c;t=M(e).sort(function(e,t){return e-t});i&&(t=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n}([0],t));e=(t.length+(i?0:-1))*n,i=Math.floor(e);if(void 0===t[i+1])return t[i];n=t[i+1]-t[i];return t[i]+n*(e-i)}function we(e,t,i){t=k(t);if("number"!=typeof t)throw c;switch(t){case 0:if(i)throw c;return z.apply(void 0,e);case 1:return be(e,.25,i);case 2:return be(e,.5,i);case 3:return be(e,.75,i);case 4:if(i)throw c;return $.apply(void 0,e);default:throw l}}function xe(e,t,i,n){var o=F(e),e=F(t),i=F(i);if(1==t)return 1/i;t=Math.exp(-Math.pow(o/i,e));return n?1-t:e/Math.pow(i,e)*Math.pow(o,e-1)*t}function Ce(e,t,i,n){void 0===n&&(n=!1);function o(e,t,i){return te(t,e)*Math.pow(i,e)*Math.pow(1-i,t-e)}var r=F(e),s=F(t),a=F(i);if(!n)return o(r,s,a);for(var l=0,c=0;c<r+1;c++)l+=o(c,s,a);return l}function Ee(e,t,i){var n=e.filter(function(e){return"number"==typeof e}),o=t.filter(function(e){return"number"==typeof e});if(n.length!==o.length)throw p;var r=n.length;if(0===r)throw f;for(var s=n.reduce(function(e,t){return e+t},0)/r,a=o.reduce(function(e,t){return e+t},0)/r,l=0,c=0;c<r;c++)l+=(n[c]-s)*(o[c]-a);return l/(i?r-1:r)}function Se(e,t){return Ee(e,t,!1)}var Ie={ABS:function(e){e=k(e);if("number"==typeof e)return Math.abs(e)},ACOS:function(e){e=k(e);if("number"==typeof e)return Math.acos(e)},ACOSH:function(e){e=k(e);if("number"==typeof e)return Math.acosh(e)},ACOT:function(e){e=k(e);if("number"==typeof e)return Math.atan(1/e)},ACOTH:function(e){e=k(e);if("number"==typeof e)return.5*Math.log((e+1)/(e-1))},ADD:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e+t},ARABIC:function(e){if(!k(e)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(""+e)){var t=0;return(""+e).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,function(e){return t+=Z[e],e}),+t}},ASIN:function(e){e=k(e);if("number"==typeof e)return Math.asin(e)},ASINH:function(e){e=k(e);if("number"==typeof e)return Math.asinh(e)},ATAN:function(e){e=k(e);if("number"==typeof e)return Math.atan(e)},ATAN2:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return Math.atan2(t,e)},ATANH:function(e){e=k(e);if("number"==typeof e)return Math.log((1+e)/(1-e))/2},AVEDEV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=M(e).filter(function(e){return"number"==typeof e}),n=i.length;if(0===n)throw f;var o=i.reduce(function(e,t){return e+t},0)/n;return i.reduce(function(e,t){return e+Math.abs(t-o)},0)/n},AVERAGE:H,AVERAGEA:L,BASE:function(e,t,i){void 0===i&&(i=0);e=k(e),t=k(t),i=k(i);if("number"==typeof e&&"number"==typeof t&&"number"==typeof i){t=e.toString(t);return new Array(Math.max(i+1-t.length,0)).join("0")+t.toUpperCase()}},BINOMDIST:Ce,"BINOM.INV":function(e,t,i){for(var n=F(e),o=F(t),r=F(i),s=0;s<=n;s++)if(Ce(s,n,o,!0)>=r)return s},"BINOM.DIST.RANGE":function(e,t,i,n){var o=F(e),r=F(t),i=F(i),s=k(n);"number"!=typeof s&&(s=i);for(var a=0,l=i;l<=s;l++)a+=te(o,l)*Math.pow(r,l)*Math.pow(1-r,o-l);return a},"BINOM.DIST":Ce,BITAND:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e&t;throw c},BITLSHIFT:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return 0<t?e<<t:e>>-t;throw c},BITOR:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e|t;throw c},BITRSHIFT:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return 0<t?e>>t:e<<-t;throw c},BITXOR:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e^t;throw c},CEILING:function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=0);var n=k(e),e=k(t),t=k(i);if("number"==typeof n&&"number"==typeof e&&"number"==typeof t)return 0===e?0:(e=Math.abs(e),0<=n?Math.ceil(n/e)*e:0===i?-1*Math.floor(Math.abs(n)/e)*e:-1*Math.ceil(Math.abs(n)/e)*e)},COMBIN:te,COMBINA:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return 0===e&&0===t?1:te(e+t-1,e-1)},COMPLEX:ne,CORREL:function(e,t){if(e.length!==t.length)throw p;for(var i=e.filter(function(e){return"number"==typeof e}),n=t.filter(function(e){return"number"==typeof e}),o=i.length,r=i.reduce(function(e,t){return e+t},0)/o,s=n.reduce(function(e,t){return e+t},0)/o,a=0,l=0,c=0,u=0;u<o;u++)a+=(i[u]-r)*(n[u]-s),l+=Math.pow(i[u]-r,2),c+=Math.pow(n[u]-s,2);t=Math.sqrt(l*c);if(!t)throw f;return a/t},COS:function(e){e=k(e);if("number"==typeof e)return Math.cos(e)},COSH:function(e){e=k(e);if("number"==typeof e)return Math.cosh(e)},COT:function(e){e=k(e);if("number"==typeof e)return 1/Math.tan(e)},COTH:function(e){e=k(e);if("number"==typeof e){e=Math.exp(2*e);return(e+1)/(e-1)}},COUNT:j,COUNTA:N,COUNTBLANK:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=M(e),o=0;o<n.length;o++)0===n[o]||n[o]||i++;return i},COVAR:Se,"COVARIANCE.P":Se,"COVARIANCE.S":function(e,t){return Ee(e,t,!0)},CSC:function(e){e=k(e);if("number"==typeof e)return 1/Math.sin(e)},CSCH:function(e){e=k(e);if("number"==typeof e)return 2/(Math.exp(e)-Math.exp(-e))},DEC2BIN:oe,DEC2HEX:re,DEC2OCT:se,DECIMAL:function(e,t){e=k(e),t=k(t);if(!(""+e).match("/[2-9]/")&&"number"==typeof e&&"number"==typeof t&&1<t&&t<37)return parseInt(""+e,t)},DEGREES:function(e){e=k(e);if("number"==typeof e)return 180*e/Math.PI},DELTA:function(e,t){e=k(e),t=k(t);if("number"==typeof e||"number"==typeof e)return+(e===t);throw c},DEVSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=M(e),n=[];i.forEach(function(e){"number"==typeof e&&n.push(e)});var o=n.reduce(function(e,t){return e+t},0)/n.length;return n.reduce(function(e,t){return e+Math.pow(t-o,2)},0)},DIVIDE:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t&&0!==t)return e/t},EQ:function(e,t){return typeof e==typeof t&&e==t},ERF:ce,ERFC:function(e,t){e=k(e);if("number"==typeof e)return 1-ce(e,t);throw c},EVEN:function(e){var t=k(e);if("number"==typeof t){e=R(t);return e%2?e+Math.sign(t):e}},EXP:function(e){e=k(e);if("number"==typeof e)return Math.exp(e);throw c},FACT:ee,FACTDOUBLE:function e(t){t=k(t);if("number"==typeof t){t=Math.floor(t);return t<=0?1:t*e(t-2)}},FISHER:function(e){e=k(e);if("number"==typeof e&&-1<e&&e<1)return.5*Math.log((1+e)/(1-e));throw c},FISHERINV:function(e){e=k(e);if("number"!=typeof e)throw c;e=Math.exp(2*e);return(e-1)/(e+1)},FLOOR:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t){t=Math.abs(t);return 0<=e?Math.floor(e/t)*t:-1*Math.ceil(Math.abs(e)/t)*t}},GAMMA:function e(t){var i=k(t);if("number"!=typeof i)throw c;if(Number.isInteger(i)&&i<=0)throw l;if(i<.5)return Math.PI/(Math.sin(Math.PI*i)*e(1-i));--i;for(var n=ue[0],o=1;o<9;o++)n+=ue[o]/(i+o);t=i+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,i+.5)*Math.exp(-t)*n},GCD:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=M(e),n=i.length;if(!n)return 1;for(var o=i[0],r=1;"number"!=typeof o;){if(o=i[r],r>i.length)throw"The arguments should contain at least one numeric value";r++}for(var s=o<0?-o:o;r<n;r++){var a=k(i[r]);if("number"==typeof a){for(var l=a<0?-a:a;s&&l;)l<s?s%=l:l%=s;s+=l}}return s},GEOMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=M(e);if(i.some(function(e){return!Number.isFinite(e)||e<=0}))throw l;return Math.pow(i.reduce(function(e,t){return t*e},1),1/i.length)},GESTEP:function(e,t){void 0===t&&(t=0);var i=k(e),n=k(t);if("number"==typeof i&&"number"==typeof n)return+(t<=e);throw c},GT:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return t<e},GTE:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return t<=e},HARMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=M(e);if(i.some(function(e){return!Number.isFinite(e)||e<=0}))throw l;var n=i.reduce(function(e,t){return e+1/t},0);return 1/(1/i.length*n)},HEX2BIN:function(e,t){return oe(parseInt(e.toString(),16),t)},HEX2DEC:function(e,t){var i=parseInt(e.toString(),16);if(!Number.isFinite(i))throw c;e=de<i;e&&(i=-(i-2*de));t=t?k(t):null,i=i.toString();return(e?"-":"")+(t?i.padStart(t,"0"):i)},HEX2OCT:function(e,t){void 0===t&&(t=null);e=parseInt(e.toString(),16);return de<e&&(e^=de),se(e,t)},IMABS:function(e){var t=he(e),e=fe(e);if(!Number.isFinite(+t)||!Number.isFinite(+e))throw c;return Math.sqrt(Math.pow(+t,2)+Math.pow(+e,2))},IMAGINARY:fe,IMCONJUGATE:function(e){return ne(+he(e),-+fe(e))},IMCOS:pe,IMCOSH:ge,IMCOT:function(e){return ve(pe(e),_e(e))},IMCSC:function(e){return ve("1",_e(e))},IMCSCH:function(e){return ve("1",me(e))},IMDIV:ve,IMEXP:function(e){var t=+he(e),i=+fe(e),e=Math.exp(t);return ne(e*Math.cos(i),e*Math.sin(t))},IMLN:function(e){var t=+he(e),e=+fe(e);return ne(Math.log(Math.sqrt(t*t+e*e)),Math.atan(e/t))},IMPOWER:function(e,t){var i=k(t);if("number"!=typeof i)throw c;var n=+he(e),t=+fe(e),e=Math.sqrt(n*n+t*t),e=Math.pow(e,i),n=Math.atan(t/n);return ne(e*Math.cos(i*n),e*Math.sin(i*n))},IMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw c;for(var i,n,o,r=e[0],s=0,a=e.slice(1);s<a.length;s++){var l=a[s];i=r.toString(),n=l.toString(),l=o=void 0,o=+he(i),l=+fe(i),i=+he(n),n=+fe(n),r=ne(o*i-l*n,o*n+l*i)}return r.toString()},IMREAL:he,IMSEC:function(e){return ve("1",pe(e))},IMSECH:function(e){return ve("1",ge(e))},IMSIN:_e,IMSINH:me,IMSQRT:function(e){var t=+he(e),i=+fe(e),e=Math.sqrt(Math.sqrt(t*t+i*i)),t=Math.atan(i/t)/2;return ne(e*Math.cos(t),e*Math.sin(t))},IMSUB:function(e,t){var i=+he(e),e=+fe(e);return ne(i-+he(t),e-+fe(t))},IMSUM:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw c;for(var i,n,o=e[0],r=0,s=e.slice(1);r<s.length;r++){var a=s[r];i=o.toString(),n=a.toString(),a=void 0,a=+he(i),i=+fe(i),o=ne(a+ +he(n),i+ +fe(n))}return o.toString()},IMTAN:function(e){return ve(_e(e),pe(e))},INT:function(e){e=k(e);if("number"==typeof e)return Math.floor(e)},LARGE:function(e,t){var i=k(t),t=e.sort(function(e,t){return e-t});if("number"==typeof i&&!e.some(function(e){return"number"!=typeof k(e)}))return t[t.length-i];throw c},LN:function(e){e=k(e);if("number"==typeof e)return Math.log(e)},LOG:function(e,t){void 0===t&&(t=10);e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return Math.log(e)/Math.log(t)},LOG10:function(e){e=k(e);if("number"==typeof e)return Math.log(e)/Math.log(10)},LT:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e<t},LTE:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e<=t},MAX:$,MEDIAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=M(e);i.sort(function(e,t){return e-t});var n=Math.floor(i.length/2);return i.length%2?i[n]:(i[n-1]+i[n])/2},MIN:z,MINUS:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e-t},MOD:function(e,t){var i=k(e),e=k(t);if("number"==typeof i&&"number"==typeof e&&0!==e){e=Math.abs(i%e);return 0<t?e:-e}},MROUND:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t&&-1<e*t)return Math.round(e/t)*t},MULTINOMIAL:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=M(e),n=0,o=1,r=0;r<i.length;r++){var s=k(i[r]);"number"==typeof s&&(n+=s,o*=ee(i[r]))}return ee(n)/o},MULTIPLY:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e*t},NE:function(e,t){return typeof e!=typeof t||e!=t},OCT2BIN:function(e,t){void 0===t&&(t=null);e=parseInt(e.toString(),8);return e&ye&&(e=-(2*ye-e)),oe(e,t)},OCT2DEC:function(e,t){void 0===t&&(t=null);t=t?k(t):null,e=parseInt(e.toString(),8);if(e&ye&&(e=-(2*ye-e)),!Number.isFinite(e)||"boolean"==typeof t)throw c;return e.toString().padStart(t||0,"0")},OCT2HEX:function(e,t){void 0===t&&(t=null);e=parseInt(e.toString(),8);return e&ye&&(e=-(2*ye-e)),re(e,t)},ODD:function(e){var t=k(e);if("number"==typeof t){e=R(t);return e%2?e:e+Math.sign(t)}},PERCENTILE:be,"PERCENTILE.INC":be,"PERCENTILE.EXC":function(e,t){return be(e,t,!0)},PERMUT:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return ee(e)/ee(e-t);throw c},PI:function(){return Math.PI},POW:function(e,t){var i=k(e),n=k(t);if("number"==typeof i&&"number"==typeof n)return J(e,t)},POWER:J,PRODUCT:B,QUARTILE:we,"QUARTILE.INC":we,"QUARTILE.EXC":function(e,t){return we(e,t,!0)},QUOTIENT:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return V(e/t)},RADIANS:function(e){e=k(e);if("number"==typeof e)return e*Math.PI/180},RAND:function(){return Math.random()},RANDBETWEEN:function(e,t){e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t)return e+Math.ceil((t-e+1)*Math.random())-1},ROMAN:function(e){e=k(e);if("number"==typeof e){for(var t=String(e).split(""),i="",n=3;n--;)i=(ie[+t.pop()+10*n]||"")+i;return new Array(+t.join("")+1).join("M")+i}},ROUND:function(e,t){e=k(e),t=k(t)||0;if("number"==typeof e&&"number"==typeof t)return parseFloat(e.toFixed(t))},ROUNDDOWN:function(e,t){e=k(e),t=k(t)||0;if("number"==typeof e&&"number"==typeof t)return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},ROUNDUP:function(e,t){e=k(e),t=k(t)||0;if("number"==typeof e&&"number"==typeof t)return Math.ceil(e*Math.pow(10,t))/Math.pow(10,t)},SEC:function(e){e=k(e);if("number"==typeof e)return 1/Math.cos(e)},SECH:function(e){e=k(e);if("number"==typeof e)return 2/(Math.exp(e)+Math.exp(-e))},SIGN:function(e){e=k(e);if("number"==typeof e)return 0===e?0:e/Math.abs(e);throw c},SIN:function(e){e=k(e);if("number"==typeof e)return Math.sin(e)},SINH:function(e){e=k(e);if("number"==typeof e)return Math.sinh(e)},SMALL:function(e,t){var i=k(t),t=e.sort(function(e,t){return e-t});if("number"==typeof i&&!e.some(function(e){return"number"!=typeof k(e)}))return t[i-1];throw c},SQRT:function(e){e=k(e);if("number"==typeof e&&0<=e)return Math.sqrt(e)},SQRTPI:function(e){e=k(e);if("number"==typeof e&&-1<e)return Math.sqrt(e*Math.PI)},STDEV:X,"STDEV.S":X,"STDEV.P":K,STDEVA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(U.apply(void 0,e))},STDEVP:K,STDEVPA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(Y.apply(void 0,e))},STEYX:function(e,t){if(e.length!==t.length)throw p;var i=e.filter(function(e){return"number"==typeof e}),n=t.filter(function(e){return"number"==typeof e}),o=i.length;if(2===o)throw f;for(var r=i.reduce(function(e,t){return e+t},0)/o,s=n.reduce(function(e,t){return e+t},0)/o,a=0,l=0,c=0,u=0;u<o;u++)a+=(i[u]-r)*(n[u]-s),l+=Math.pow(i[u]-r,2),c+=Math.pow(n[u]-s,2);if(2===c)throw f;return Math.sqrt((l-Math.pow(a,2)/c)/(o-2))},SUBTOTAL:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var e=k(e),n=M(t);if("number"==typeof e)switch(e){case 1:case 101:return H.apply(void 0,n);case 102:case 2:return j.apply(void 0,n);case 103:case 3:return N.apply(void 0,n);case 104:case 4:return $.apply(void 0,n);case 105:case 5:return z.apply(void 0,n);case 106:case 6:return B.apply(void 0,n);case 107:case 7:case 110:case 10:return;case 108:case 8:return K.apply(void 0,n);case 109:case 9:return T.apply(void 0,n);case 111:case 11:return q.apply(void 0,n)}},SUM:T,SUMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0].length;for(o in e)if(e[o].length!==i)return;for(var n=0,o=0;o<e[0].length;o++){var r,s=!1,a=1;for(r in e){var l=k(e[r][o]);"number"==typeof l&&(a*=l,s=!0)}s&&(n+=a)}return n},SUMSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=M(e),o=0;o<n.length;o++){var r=k(n[o]);"number"==typeof r&&(i+=Math.pow(r,2))}return i},SUMX2MY2:function(e,t){if(!e.find(function(e){return"number"!=typeof k(e)})&&!t.find(function(e){return"number"!=typeof k(e)})){for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n]-t[n]*t[n];return i}},SUMX2PY2:function(e,t){if(!e.find(function(e){return"number"!=typeof k(e)})&&!t.find(function(e){return"number"!=typeof k(e)})){for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n]+t[n]*t[n];return i}},SUMXMY2:function(e,t){if(!e.find(function(e){return"number"!=typeof k(e)})&&!t.find(function(e){return"number"!=typeof k(e)})){for(var i=0,n=0;n<e.length;n++)i+=Math.pow(e[n]-t[n],2);return i}},TAN:function(e){e=k(e);if("number"==typeof e)return Math.tan(e)},TANH:function(e){e=k(e);if("number"==typeof e)return Math.tanh(e)},TRUNC:function(e){e=k(e);if("number"==typeof e)return V(e)},VAR:G,"VAR.S":G,"VAR.P":q,VARA:U,VARP:q,VARPA:Y,WEIBULL:xe,"WEIBULL.DIST":xe},ke=/[\0-\x1F]/g,Me=Object.freeze({__proto__:null,CONCATENATE:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M(e).join("")},LEFT:function(e,t){return P(e)?"":e.toString().substring(0,t)},MID:function(e,t,i){return P(e)?"":e.toString().substring(t,t+i)},RIGHT:function(e,t){return P(e)?"":e.toString().substring(e.length-t)},LOWER:function(e){return P(e)?"":e.toString().toLowerCase()},UPPER:function(e){return P(e)?"":e.toString().toUpperCase()},PROPER:function(e){if(P(e))return"";var t,i=e.toString().toLowerCase().split(" ");for(t in e="",i)e+=(e?" ":"")+i[t].substring(0,1).toUpperCase()+i[t].substring(1);return e},TRIM:function(e){return P(e)?"":e.toString().trim()},LEN:function(e){return P(e)?0:e.toString().length},CHAR:function(e){e=k(e);if("number"==typeof e)return String.fromCharCode(e)},CLEAN:function(e){return void 0===e&&(e=""),(""+e).replace(ke,"")},CODE:function(e){return void 0===e&&(e=""),(""+e).charCodeAt(0)},EXACT:function(e,t){return e===t},FIND:function(e,t,i){void 0===i&&(i=0);i=k(i);if("number"==typeof i&&t)return(""+t).indexOf(""+e,i-1)+1;throw"index cannot be string"},FIXED:function(e,t,i){void 0===t&&(t=2),void 0===i&&(i=!1);e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t){t=e.toFixed(t);if(O(i))return""+t;i=(""+t).split("."),t=i[0],i=i[1];return t.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+i}},NUMBERVALUE:function(e,t,i){if(void 0===t&&(t="."),void 0===i&&(i=","),"string"==typeof e&&"string"==typeof t&&"string"==typeof i)return Number(e.replace(t,".").replace(i,""))},REGEXEXTRACT:function(e,t){if("string"==typeof e&&"string"==typeof t){t=e.match(new RegExp(t));return t?t[1<t.length?t.length-1:0]:null}},REGEXMATCH:function(e,t){if("string"==typeof e&&"string"==typeof t)return!!e.match(new RegExp(t))},REGEXREPLACE:function(e,t,i){if("string"==typeof e&&"string"==typeof t)return e.replace(new RegExp(t),""+i)},REPT:function(e,t){t=k(t);if("number"==typeof t)return new Array(t+1).join(""+e)},SEARCH:function(e,t,i){void 0===i&&(i=0);i=k(i);if("number"==typeof i){i=(""+t).toLowerCase().indexOf((""+e).toLowerCase(),i-1)+1;if(0!==i)return i;throw"not found"}},SUBSTITUTE:function(e,t,i,n){if(!e||!t||!i&&""!==i)return""+e;if(void 0===n)return(""+e).replace(new RegExp(""+t,"g"),""+i);for(var o=0,r=0;0<(""+e).indexOf(""+t,o);)if(o=(""+e).indexOf(""+t,o+1),++r===n)return(""+e).substring(0,o)+i+(""+e).substring(o+(""+t).length)},T:function(e){return"string"==typeof e&&"TRUE"!==e&&"FALSE"!==e?""+e:""},JOIN:function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=[];return e.forEach(function(e){"object"==typeof e?n.push(e.join(""+t)):n.push(e)}),n.join(""+t)},REPLACE:function(e,t,i,n){t=k(t),i=k(i);if("number"==typeof t&&"number"==typeof i){e=e.toString(),n=n.toString();return e.replace(e.substr(t-1,i),n)}},ARRAYTOTEXT:function(e,t){return t?"{"+e.map(function(e){return"string"==typeof e?'"'+e+'"':e}).join("; ")+"}":e.join("; ")}});function Pe(i,e,t){void 0===t&&(t=0);var n,o=-1;return 0===t?o=e.indexOf(i):(n="string"==typeof i?"":-1/0*t,1===t?e.forEach(function(e,t){e<=i&&n<e&&(n=e,o=t)}):-1===t&&e.forEach(function(e,t){i<=e&&e<n&&(n=e,o=t)})),o+1}var Oe={LOOKUP:function(e,t,i){e=Pe(e,t,1);if(0===e)throw"#N/A";return(i||t)[e-1]},HLOOKUP:function(e,t,i,n){var o=!0;void 0!==n&&(o=O(n));n=t.$width||t.length,o=Pe(e,t.slice(0,n),o?1:0);if(0===o)throw"#N/A";return t[n*((i||1)-1)+o-1]||null},VLOOKUP:function(e,t,i,n){var o=!0;void 0!==n&&(o=O(n));var r,s=t.$width||1,a=t.length/s;if(1==a)r=t;else{r=[];for(var l=0;l<a;l++)r.push(t[s*l])}o=Pe(e,r,o?1:0);if(0===o)throw"#N/A";return t[s*(o-1)+(i||1)-1]||null},XLOOKUP:function(e,t,i,n,o,r){o=Pe(e,t,o);if(0!==o)return(i||t)[o-1];if(void 0!==n)return n;throw"#N/A"},INDEX:function(e,t,i){return e[(e.$width||1)*(t-1)+(i||1)-1]||null},MATCH:function(e,t,i){var n=i;void 0===i&&(n=1);n=Pe(e,t,n);if(0===n)throw"#N/A";return n},XMATCH:function(e,t,i,n){i=Pe(e,t,i);if(0===i)throw"#N/A";return i}},De=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Fe=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],Ae=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Ve(e,t){e=D(e),t=D(t);if(e&&t)return Math.round((e.getTime()-t.getTime())/864e5)}function Re(e){var t=D(e);if(t){t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));e=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-e.getTime())/864e5+1)/7)}}function Te(e,t,i,n){e=D(e),t=D(t);if(e&&t){for(var o=void 0===i?Ae[1]:Ae[i],r=n||[],s=0;s<r.length;s++){if((h=g(r[s]))instanceof Error)throw"The "+r[s]+" is not a  number";r[s]=h}for(var a=(t.getTime()-e.getTime())/864e5+1,l=Math.round(a),c=e,s=0;s<a;s++){var u=0<(new Date).getTimezoneOffset()?c.getUTCDay():c.getDay(),d=!1;u!==o[0]&&u!==o[1]||(d=!0);for(var h,f=0;f<r.length;f++)if((h=r[f]).getDate()===c.getDate()&&h.getMonth()===c.getMonth()&&h.getFullYear()===c.getFullYear()){d=!0;break}d&&l--,c.setDate(c.getDate()+1)}return l}}function He(e,t,i,n){var o=D(e),r=k(t);if(o&&"number"==typeof r){for(var s=void 0===i?Ae[1]:Ae[i],a=n||[],l=0;l<a.length;l++){if((d=g(a[l]))instanceof Error)throw"The "+a[l]+" is not a  number";a[l]=d}for(var c=0;c<r;){o.setDate(o.getDate()+1);var u=o.getDay();if(u!==s[0]&&u!==s[1]){for(var d,h=0;h<a.length;h++)if((d=a[h]).getDate()===o.getDate()&&d.getMonth()===o.getMonth()&&d.getFullYear()===o.getFullYear()){c--;break}c++}}return v(o)}}function Le(e){return 1===new Date(e,1,29).getMonth()}function je(e,t,i){void 0===i&&(i=0);var n=D(e),o=D(t);if(n&&o){var r=n.getDate(),s=n.getMonth()+1,a=n.getFullYear(),l=o.getDate(),c=o.getMonth()+1,u=o.getFullYear(),d=365,t=u-a+1,h=(new Date(u+1,0,1).getTime()-new Date(a,0,1).getTime())/1e3/60/60/24/t;switch(i){case 0:return 31===r&&31===l?l=r=30:31===r?r=30:30===r&&31===l&&(l=30),(l+30*c+360*u-(r+30*s+360*a))/360;case 1:return a===u||a+1===u&&(c<s||s===c&&l<=r)?((a===u&&Le(a)||function(e,t){var i=e.getFullYear(),n=new Date(i,2,1);if(Le(i)&&e<n&&n<=t)return 1;i=t.getFullYear(),n=new Date(i,2,1);return Le(i)&&n<=t&&e<n}(n,o)||1===c&&29===l)&&(d=366),Ve(o.toDateString(),n.toDateString())/d):Ve(o.toDateString(),n.toDateString())/h;case 2:return Ve(o.toDateString(),n.toDateString())/360;case 3:return Ve(o.toDateString(),n.toDateString())/365;case 4:return(l+30*c+360*u-(r+30*s+360*a))/360}}}var Ne={DATE:function(e,t,i){return v(new Date(e,t-1,i))},TIME:function(e,t,i){i=v(new Date(1900,0,1,e,t,i,0));return i-Math.trunc(i)},DAY:function(e){return g(e).getDate()},MONTH:function(e){return g(e).getMonth()+1},YEAR:function(e){return g(e).getFullYear()},HOUR:function(e){return g(e).getHours()},MINUTE:function(e){return g(e).getMinutes()},SECOND:function(e){return g(e).getSeconds()},NOW:function(){return v(new Date)},DATEDIF:function(e,t,i){i=i.toLowerCase();if("d"===i)return t-e;var n,o,r=g(e),s=g(t);switch(i){case"y":return s.getFullYear()-r.getFullYear();case"m":return(n=12*(s.getFullYear()-r.getFullYear()))+s.getMonth()-r.getMonth();case"d":return Math.floor(t-e);case"md":if((o=s.getDate()-r.getDate())<0){var a=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();return s.getDate()+a-r.getDate()}return o;case"ym":return(n=s.getMonth()-r.getMonth())<0?12+n:n;case"yd":return(o=u(s)-u(r))<0?365+o:o}},DATEVALUE:function(e){if("string"==typeof e)return v(new Date(new Date(e).toDateString()))},DAYS:Ve,DAYS360:function(e,t,i){void 0===i&&(i=0);var n=D(e),o=D(t);if(n&&o){var r=n.getMonth(),s=o.getMonth(),a=void 0,e=void 0;return e=O(i)?(a=31===n.getDate()?30:n.getDate(),31===o.getDate()?30:o.getDate()):(t=new Date(n.getFullYear(),r+1,0).getDate(),i=new Date(o.getFullYear(),s+1,0).getDate(),a=n.getDate()===t?30:n.getDate(),o.getDate()===i?a<30?(s++,1):30:o.getDate()),360*(o.getFullYear()-n.getFullYear())+30*(s-r)+(e-a)}},EDATE:function(e,t){e=D(e),t=k(t);if(e&&"number"==typeof t)return e.setMonth(e.getMonth()+t),v(e)},EOMONTH:function(e,t){e=D(e),t=k(t);if(e&&"number"==typeof t)return v(new Date(e.getFullYear(),e.getMonth()+t+1,0))},ISOWEEKNUM:Re,NETWORKDAYS:function(e,t,i){return Te(e,t,1,i)},"NETWORKDAYS.INTL":Te,TIMEVALUE:function(e){if("string"==typeof e){var t=e.split(" "),i=t[1],e=t[0].split(":"),t=new Date;return t.setHours(+e[0]),i&&"PM"===i.toUpperCase()&&t.setHours(t.getHours()+12),t.setMinutes(+e[1]),e[2]&&t.setSeconds(+e[2]),(3600*t.getHours()+60*t.getMinutes()+t.getSeconds())/86400}},WEEKNUM:function(e,t){void 0===t&&(t=1);var i=D(e);if(21===t)return Re(t);var n=Fe[t],e=new Date(i.getFullYear(),0,1),t=e.getDay()<n?1:0,n=e.getTime()-24*Math.abs(e.getDay()-n)*60*60*1e3;return Math.floor((i.getTime()-n)/864e5/7+1)+t},WEEKDAY:function(e,t){void 0===t&&(t=1);e=D(e).getDay();return De[t][e]},WORKDAY:function(e,t,i){return He(e,t,1,i)},"WORKDAY.INTL":He,YEARFRAC:je},$e=Object.freeze({__proto__:null,IF:function(e,t,i){return e?t:i},AND:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++)if(!O(e[i]))return!1;return!0},NOT:function(e){return!O(e)},OR:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++)if(e[i])return!0;return!1},CHOOSE:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];e=k(e);if(1<t.length&&"number"==typeof e){if(t.length<e)throw"the index number is greater than the length of the array of values";if(e<=0)throw"index cannot be less than or equal to 0";return t[--e]}},FALSE:function(){return!1},TRUE:function(){return!0}}),ze=Object.freeze({__proto__:null,ISBLANK:P,ISBINARY:function(e){return/^[01]{1,10}$/.test(""+e)},ISEVEN:function(e){e=k(e);return"number"==typeof e&&e%2==0},ISODD:function(e){e=k(e);return"number"==typeof e&&e%2!=0},ISNONTEXT:function(e){return"string"!=typeof e},ISNUMBER:function(e){return"number"==typeof k(e)},ISTEXT:function(e){return"string"==typeof e},N:function(e){var t=k(e);if("number"==typeof t)return t;t=new Date(e);return t.getTime()?v(t):"TRUE"===e||!0===e?1:0}});function Be(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r,e=F(e),t=F(t),i=F(i),n=F(n);return 0===e?r=(i+n)/t:(r=e*(i*(t=Math.pow(1+e,t))+n)/(t-1),1===o&&(r/=1+e)),-r}function We(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=F(e),e=F(t),t=F(i),i=F(n);if(0!==r){n=Math.pow(1+r,e);return-(1===o?i*n+t*(1+r)*(n-1)/r:i*n+t*(n-1)/r)}}function Ge(e,t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);e=F(e),i=F(i),t=F(t),n=F(n),o=Be(e,i,n,F(o),r);return(1===t?1===r?0:-n:1===r?We(e,t-2,o,n,1)-o:We(e,t-1,o,n,0))*e}var Ue=Object.freeze({__proto__:null,ACCRINT:function(e,t,i,n,o,r,s){void 0===o&&(o=0),void 0===s&&(s=0);var a=D(e),l=D(i),c=F(n),n=F(o),o=F(r),r=F(s);if(1!==o)throw"This function is only supported with frequency 1";if(-1===[0,1,2,3,4].indexOf(r))throw"Basis is "+s+". It's should be 0, 1, 2, 3 or 4";if(l<=a)throw"Settlement canot be before or equal to issue";return n*c*je(e,i,r)},PMT:Be,FV:We,DB:function(e,t,i,n,o){void 0===o&&(o=12);var r=F(e),s=F(t),e=F(i),t=F(n),i=F(o);if(r<0||s<0||e<0||t<0)throw"Parameters cannot be negative";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(i))throw"Month is "+o+". It's should be beetwen 1 and 12";if(e<t)throw"Period cannot be greater than life";if(r<=s)return 0;for(var a=+(1-Math.pow(s/r,1/e)).toFixed(3),i=r*a*i/12,l=i,c=0,u=n===e?e-1:n,d=2;d<=u;d++)l+=c=(r-l)*a;return 1===n?i:n===e?(r-l)*a:c},DDB:function(e,t,i,n,o){void 0===o&&(o=2);var r=F(e),s=F(t),a=F(i),i=F(n),l=F(o);if(r<0||s<0||a<0||i<0||l<0)throw"Parameters cannot be negative";if(a<i)throw"Period cannot be greater than life";if(r<=s)return 0;for(var c=0,u=0,d=1;d<=n;d++)c+=u=Math.min(l/a*(r-c),r-s-c);return u},DOLLAR:function(e,t){void 0===t&&(t=2);e=k(e),t=k(t);if("number"==typeof e&&"number"==typeof t){if(0<=t)return"$"+e.toFixed(t);t=Math.pow(10,-t);return"$"+Math.trunc(e/t)*t}},DOLLARDE:function(e,t){var i=F(e),t=F(t);if(t<0)throw"Fraction cannot be negative";if(0<=t&&t<1)throw"Fraction cannot be zero";t=parseInt(""+t,10);e=parseInt(""+e,10);e+=i%1*Math.pow(10,Math.ceil(Math.log(t)/Math.LN10))/t;t=Math.pow(10,Math.ceil(Math.log(t)/Math.LN2)+1);return Math.round(e*t)/t},DOLLARFR:function(e,t){var i=F(e),t=F(t);if(t<0)throw"Fraction cannot be negative";if(0<=t&&t<1)throw"Fraction cannot be zero";return t=parseInt(""+t,10),parseInt(""+e,10)+i%1*Math.pow(10,-Math.ceil(Math.log(t)/Math.LN10))*t},EFFECT:function(e,t){e=F(e),t=F(t);if(e<=0)throw"Rate cannot be less than or equal to zero";if(t<1)throw"Periods cannot be less than 1";return t=parseInt(""+t,10),Math.pow(1+e/t,t)-1},FVSCHEDULE:function(e,t){for(var e=F(e),i=t.map(F),n=i.length,o=e,r=0;r<n;r++)o*=1+i[r];return o},IRR:function(e,t){void 0===t&&(t=0);for(var i=M(e).map(F),e=F(t),n=[],o=!1,r=!1,s=0;s<i.length;s++)n[s]=0===s?0:n[s-1]+365,0<i[s]&&(o=!0),i[s]<0&&(r=!0);if(!o||!r)throw"Values should contain at least one positive value and one negative value";for(var a,l,c,u,d=e=void 0===t?.1:e;a=d-(c=function(e,t,i){for(var n=i+1,o=e[0],r=1;r<e.length;r++)o+=e[r]/Math.pow(n,(t[r]-t[0])/365);return o}(i,n,d))/function(e,t,i){for(var n=i+1,o=0,r=1;r<e.length;r++){var s=(t[r]-t[0])/365;o-=s*e[r]/Math.pow(n,1+s)}return o}(i,n,d),l=Math.abs(a-d),d=a,u=1e-10<l&&1e-10<Math.abs(c),u;);return d},IPMT:Ge,ISPMT:function(e,t,i,n){e=F(e),t=F(t),i=F(i);return F(n)*e*(t/i-1)},NPV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=M(e).map(F),n=F(i[0]),o=0,r=1;r<i.length;r++)o+=i[r]/Math.pow(1+n,r);return o},NOMINAL:function(e,t){e=F(e),t=F(t);if(e<=0)throw"Rate cannot be less then or equal to zero";if(t<1)throw"Periods cannot be less then 1";return t=parseInt(""+t,10),(Math.pow(e+1,1/t)-1)*t},NPER:function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);e=F(e),t=F(t),i=F(i),n=F(n),o=F(o),n=t*(1+e*o)-n*e,o=i*e+t*(1+e*o);return Math.log(n/o)/Math.log(1+e)},PDURATION:function(e,t,i){e=F(e),t=F(t),i=F(i);if(e<=0)throw"Rate cannot be less then or equal to zero";return(Math.log(i)-Math.log(t))/Math.log(1+e)},PPMT:function(e,t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);e=F(e),t=F(t),i=F(i),n=F(n),o=F(o),r=F(r);return Be(e,i,n,o,r)-Ge(e,t,i,n,o,r)},PV:function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);e=F(e),t=F(t),i=F(i),n=F(n),o=F(o);return 0===e?-i*t-n:((1-Math.pow(1+e,t))/e*i*(1+e*o)-n)/Math.pow(1+e,t)},SYD:function(e,t,i,n){e=F(e),t=F(t),i=F(i);return(e-t)*(i-F(n)+1)*2/(i*(i+1))},TBILLPRICE:function(e,t,i){e=D(e),t=D(t),i=F(i);if("number"==typeof i&&e<t)return 100*(1-i*Math.round((t.getTime()-e.getTime())/864e5)/360)},TBILLYIELD:function(e,t,i){e=D(e),t=D(t),i=F(i);if("number"==typeof i&&e<t)return(100-i)/i*360/Math.round((t.getTime()-e.getTime())/864e5)}}),qe={number:Ie,string:Me,date:Ne,other:$e,information:ze,financial:Ue,lookup:Oe},Ye=_(_(_(_(_(_(_({},Ie),Me),Ne),$e),ze),Ue),Oe),Xe=Math.pow(10,8);function Ke(e){if(e.keys)return Array.from(e.keys());var i=[];return e.forEach(function(e,t){return i.push(t)}),i}function Je(e){if(e.values)return e.values();var i=[];e.forEach(function(e,t){return i.push(t)});var t=0;return{add:function(e){i.push(e)},next:function(){var e=i[t];return{done:++t>i.length,value:e}}}}var Ze=(Qe.prototype.setValue=function(e,t,i,n){""===t&&(t=null),this._removeTriggers(e,null),this._setter(e,t,i)&&(n||this.trigger(e))},Qe.prototype.clean=function(e){this._removeTriggers(e,null)},Qe.prototype.getValue=function(e){return this._getter(e)},Qe.prototype.setPlaceholder=function(i,e){var n=this;"*"===i?Object.entries(e).forEach(function(e){return n.setPlaceholder(e[0],e[1])}):(null===e?delete this._holders[i]:this._holders[i]=e,this.each(function(e,t){!function(e,t,i){for(var n=0;n<e.length;n+=3)if(2===e[n]&&t.substr(e[n+1],e[n+2])==i)return 1}(t.code,t.source,i)||n.setMath(e,t.source,n._parseContext)}))},Qe.prototype.getPlaceholder=function(e){if("*"===e)return this._holders;e=this._holders[e];return void 0===e?null:e},Qe.prototype.setMath=function(e,t,i,n){i=this._generate(t,i),i=this._setMathAt(e,i);n||this._execAndTrigger(i)},Qe.prototype.refresh=function(e){this._execAndTrigger(e)},Qe.prototype.getMath=function(e){return this._data.get(e)},Qe.prototype.trigger=function(e,t){var i=this._triggers.get(e);if(i){e=!t;t=t||new Set;for(var n=0;n<i.length;n++)t.add(i[n]);e&&this.triggerSet(t)}return null},Qe.prototype.triggerSet=function(t){for(var i=this,e=new Map;t.size;){var n=Je(t),o=!1;e:for(var r=n.next();!r.done;r=n.next()){var s=this._data.get(r.value),a=e.get(r.value);if(!a||(1==a&&(a=this._check_for_loops(r.value,s.triggers,e)),2!=a)){var l=s.triggers;if(l)for(var c=0;c<l.length;c++)if(t.has(l[c]))continue e;this._execAndTrigger(r.value,t),a||e.set(r.value,1),t.delete(r.value),o=!0}}if(!o)return void t.forEach(function(e){return i._errorAndTrigger(e,t)})}},Qe.prototype.getStats=function(){return{math:this._data.size,trigger:this._triggers.size}},Qe.prototype._check_for_loops=function(e,t,i){var n=new Set;t.forEach(function(e){return n.add(e)});for(var o=Je(n),r=o.next();!r.done;r=o.next()){if(r.value==e)return i.set(e,2),2;var s=i.get(r.value);if(s&&1<s)return i.set(e,s),s;s=this._data.get(r.value);s&&s.triggers&&s.triggers.forEach(function(e){return t=n,i=e,void((e=o).add?t.has(i)||e.add(i):t.add(i));var t,i})}return i.set(e,3),3},Qe.prototype._setMathAt=function(e,t){if(this._removeTriggers(e,t)){if(t.triggers)if(-1===t.triggers.indexOf(e)&&3!==t.broken)for(var i=0;i<t.triggers.length;i++){var n=t.triggers[i],o=this._triggers.get(n);void 0===o&&(o=[],this._triggers.set(n,o)),o.push(e)}else t=_(_({},t),{broken:3});return this._data.set(e,t),e}},Qe.prototype._removeTriggers=function(t,e){var i=this._data.get(t);if(!i)return!0;if(i===e)return!1;var n=i.triggers;if(n&&3!==i.broken)for(var o=0;o<n.length;o++){var r=n[o],s=this._triggers.get(r);s&&((s=s.filter(function(e){return e!==t})).length?this._triggers.set(r,s):this._triggers.delete(r))}return this._data.delete(t),!0},Qe.prototype.parse=function(e,t){return this._parser(e,t||this._parseContext)},Qe.prototype.exec=function(e,t){t=this._generate(e,t);return this._exec(t)},Qe.prototype.each=function(t){var i=this;Ke(this._data).forEach(function(e){return t(e,i._data.get(e))})},Qe.prototype.setLogger=function(e){this._err_handler=e},Qe.prototype._setErr=function(e,t){return e.broken=2,t&&this._err_handler&&this._err_handler(t),n[e.broken]},Qe.prototype._exec=function(t){if(0<t.broken&&2!==t.broken)return n[t.broken];try{var e=t.exec(this._context);return t.broken=0,"number"==typeof e?isFinite(e)?Math.round(e*Xe)/Xe:this._setErr(t):e}catch(e){return this._setErr(t,e)}},Qe.prototype.toString=function(e,t){return x(e,t||this._parseContext)},Qe.prototype.regenerate=function(r,s,a){var l=this;a=_({},a||this._parseContext),Ke(this._data).forEach(function(e){var t=!1,i=l._data.get(e),n=63&e;if(s&&n===r)l._removeTriggers(e,null);else{for(var o=0;o<i.code.length;o+=3)if(9===i.code[o]&&(63&i.code[o+1])===r){t=!0;break}t&&(a.z=n,s?l.setMath(e,i.source,a):(i.source=x(i,a),i.code=l._parser(i.source,a).code))}})},Qe.prototype.recalculate=function(i,n){var o=this;n=_({},n||this._parseContext);var r=new Set;this.each(function(e){if(i){var t=o._data.get(e);if(t.broken&&2!==t.broken)return n.z=63&e,void o.setMath(e,t.source,n)}r.add(e)}),this.triggerSet(r)},Qe.prototype._generate=function(e,t,i){var s=i||this._parser(e,t||this._parseContext);return this._printer(s,this._strict),s.triggers=function(){for(var t,i=[],e=s.code,n=e.length,o=0;o<n;o+=3)switch(e[o]){case 7:case 6:var r=e[o+4];i.push(r);break;case 8:!function(e,t,i){for(var n=(o=b(e))[0],o=o[1],r=(t=b(t))[0]-n,s=t[1]-o,a=0;a<=r;a++)for(var l=0;l<=s;l++)i(e+64*l+4096*a*64)}(e[o+4],e[o+7],function(e){return i.push(e)})}return 10<i.length&&(t=new Set,i=i.filter(function(e){return!t.has(e)&&(t.add(e),!0)})),i.length?i:null}(),s},Qe.prototype._execAndTrigger=function(e,t){this.$count+=1;var i=this._data.get(e);i&&(i=this._exec(i),this._setter(e,i,2)&&this.trigger(e,t))},Qe.prototype._errorAndTrigger=function(e,t){var i=this._data.get(e),i=this._setErr(i);this._setter(e,i,2)&&this.trigger(e,t)},Qe.prototype.debug=function(e){console.log(function(e){for(var t=e.code,i=e.source,n="",o=t.length,r=0;r<o;r+=3){var s=t[r],a=void 0;switch(s){case 4:a="method";break;case 1:a="text";break;case 5:a="page";break;case 2:a="holder";break;case 6:a="name";break;case 7:a="arg";break;case 8:a="range";break;case 9:a="data";break;case 10:a="op";break;case 11:a="number";break;case 3:a="error";break;case 12:a="extra"}n+=9===s?"              "+t[r+1]+" x "+t[r+2]+")\n":"["+a+"]"+"              ".substr(0,10-a.length)+i.substr(t[r+1],t[r+2])+"\n"}return n}(this.parse(e)))},Qe.prototype.transpose=function(e,a,l,c){var u=this;c=c||this._parseContext;var e=b(e),d=e[0],h=e[1],f=e[2],p=new Map,g=new Map,v=new Set;Ke(this._data).forEach(function(e){var t=b(e),i=t[0],n=t[1],o=t[2],r=u._data.get(e),s=o===c.z?c:_(_({},c),{z:o}),t=u._transpose(r,d,h,a,l,c,s),s=e;o===f&&(h<=n||d<=i)&&(s=m(d<=i?i+a:i,h<=n?n+l:n,o)),r===t&&e===s||(g.set(e,t),o===f&&(l<0&&h<=n&&n<h-l||a<0&&d<=i&&i<d-a)||(p.set(s,t),r.broken!==t.broken&&v.add(s)))}),Ke(p).forEach(function(e){return u._setMathAt(e,p.get(e))}),Array.from(g.keys()).forEach(function(e){p.has(e)||u._removeTriggers(e,null)}),0<a&&this._triggerRow(d,a,v),0<l&&this._triggerColumn(h,l,v),a<0&&this._triggerColumn(d-1,2,v),l<0&&this._triggerColumn(h-1,2,v),this.triggerSet(v)},Qe.prototype._triggerColumn=function(i,e,n){var o=this,r=e?i+e:i;Ke(this._triggers).forEach(function(e){var t=s(e);i<=t&&t<r&&o.trigger(e,n)})},Qe.prototype._triggerRow=function(i,e,n){var o=this,r=e?i+e:i;Ke(this._triggers).forEach(function(e){var t=w(e);i<=t&&t<r&&o.trigger(e,n)})},Qe.prototype.transposeMath=function(e,t,i,n){return"string"==typeof e&&(e=this.parse(e,n)),n=n||this._parseContext,this._transpose(e,-1,-1,t,i,n,n).source},Qe.prototype._transpose=function(e,t,i,n,o,r,s){for(var a=!0,l=e.code,c=!(t<0||i<0),u=0;u<l.length;u+=3)if(7===l[u]){var d=b(l[u+4]),h=d[0],f=d[1],p=d[2];if(r.z!==p)continue;var g=l[u+5];if(!c&&3==g)continue;(c||0==(1&g))&&0!==n&&t<=h&&(a&&(l=[].concat(l),a=!1),((h+=n)<t||h<0)&&(l[u]=3)),(c||0==(2&g))&&0!==o&&i<=f&&(a&&(l=[].concat(l),a=!1),((f+=o)<i||f<0)&&(l[u]=3)),a||(l[u+4]=m(h,f,p)),u+=3}else if(8===l[u]){var v=l[u+5],_=l[u+8];if(!c&&3===v&&3===_)continue;d=b(l[u+4]),g=d[0],h=d[1],f=(p=d[2],b(l[u+7])),d=f[0],f=f[1];if(r.z!==p)continue;0!==n&&((c||0==(1&v))&&(0<n?t<=g:t<g)&&(a&&(l=[].concat(l),a=!1),(g+=n)<0&&(l[u]=3)),(c||0==(1&_))&&t<=d&&(a&&(l=[].concat(l),a=!1),(d+=n)<g&&(l[u]=3))),0!==o&&((c||0==(2&v))&&(0<o?i<=h:i<h)&&(a&&(l=[].concat(l),a=!1),(h+=o)<0&&(l[u]=3)),(c||0==(2&_))&&i<=f&&(a&&(l=[].concat(l),a=!1),(f+=o)<h&&(l[u]=3))),a||(l[u+4]=m(g,h,p),l[u+7]=m(d,f,p)),u+=6}if(a)return e;e={code:l,broken:e.broken,source:e.source,triggers:null,exec:null},e=this._parser(x(e,s),s);return this._generate(e.source,s,e)},Qe);function Qe(e){var c=this;(e=e||{get:null,set:null,strict:!1})&&(this._getter=e.get,this._setter=e.set,this._strict=e.strict),this._parser=r,this._printer=a,this._parseContext={name:function(){},pageName:function(){return""},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={v:function(e){if(-1===e)throw new Error;e=c._getter(e);return void 0===e?null:e},r:function(e,t){var i=b(e),n=i[0],i=i[1],t=b(t),o=t[0]-n,r=t[1]-i+1,s=[];s.$width=r;for(var a=0;a<=o;a++)for(var l=0;l<r;l++)s[a*r+l]=c._getter(e+64*l+4096*a*64);return s},m:Ye,e:function(e){throw e},p:function(e){return c.getPlaceholder(e)}}}var et=(tt.prototype.getMeta=function(){return this._meta},tt.prototype.setMeta=function(e){this._meta=_(_({},this._meta),e)},tt.prototype.getID=function(){return this._id},tt.prototype.cellID=function(e,t){return m(e,t,this._id)},tt.prototype.getSize=function(){var e=this._data.length,t=0;return this._data.forEach(function(e){e&&e.length>t&&(t=e.length)}),[e,t]},tt.prototype.getContext=function(){return this._parseContext},tt.prototype.addRow=function(e,t){this._data.splice.apply(this._data,it(e,t)),this._store.transpose(m(e,0,this._id),t,0,this._parseContext)},tt.prototype.removeRow=function(e,t){this._data.splice(e,t),this._store.transpose(m(e,0,this._id),-t,0,this._parseContext)},tt.prototype.addColumn=function(e,t){var i=it(e,t);this._data.forEach(function(e){e&&e.splice.apply(e,i)}),this._store.transpose(m(0,e,this._id),0,t,this._parseContext)},tt.prototype.removeColumn=function(t,i){this._data.forEach(function(e){e&&e.splice(t,i)}),this._store.transpose(m(0,t,this._id),0,-i,this._parseContext)},tt.prototype.setCell=function(e,t,i){var n=this._data[e],o=(n=n||(this._data[e]=[]))[t];n[t]=o?_(_(_({},o),i),{value:o.value}):i,void 0!==i.value&&this.setValue(e,t,i.value)},tt.prototype.setValue=function(e,t,i,n){"string"==typeof i&&1<i.length&&"="===i[0]?this._store.setMath(m(e,t,this._id),i.substr(1),this._parseContext):this._store.setValue(m(e,t,this._id),i,n)},tt.prototype.getCell=function(e,t,i){var n=this._data[e],o=n?n[t]:null;return o||!i||((o=(n=n||(this._data[e]=[]))[t])||(o=n[t]={value:""})),o},tt.prototype.getValue=function(e,t,i){if(i){i=this._store.getMath(m(e,t,this._id));if(i)return"="+i.source}t=this.getCell(e,t,!1);return t?t.value:null},tt.prototype.getRange=function(e,t,i,n){for(var o=[],r=e;r<=i;r++)for(var s=t;s<=n;s++)o.push(this.getValue(r,s,!1));return o},tt.prototype.getCellRange=function(e,t,i,n){for(var o=[],r=e;r<=i;r++)for(var s=t;s<=n;s++)o.push(this.getCell(r,s));return o},tt.prototype.eachCell=function(n){this._data.forEach(function(e,i){e&&e.forEach(function(e,t){e&&n(i,t,e)})})},tt.prototype.serialize=function(o){var r=this,s=[];return this.eachCell(function(e,t,i){var n;i=_({},i),o&&(n=r._store.getMath(m(e,t,r.getID())))&&(i.value="="+n.source),s.push([e,t,i])}),s},tt.prototype.parse=function(e,s){var a=this;this._store.each(function(e){(63&e)===a._id&&a._store.clean(e)}),this._data=[];var l=new Set;e.forEach(function(e){var t,i=e[0],n=e[1],o=e[2],r=(o=(a._data[i]||(a._data[i]=[]))[n]=_({},o)).value;r&&("string"==typeof r&&1<r.length&&"="===r[0]?(t=m(i,n,a._id),e=r.substr(1),a._store.setMath(t,e,a.getContext(),!0),l.add(t)):s&&(o.value=null,t=m(i,n,a._id),a._store.setValue(t,r,null,!0),a._store.trigger(t,l)))}),this._store.triggerSet(l)},tt);function tt(e,t,i){this._data=[],this._id=e,this._store=t,this._meta={},this._parseContext=_(_({},i),{z:e})}function it(e,t){for(var i=[e,0],n=0;n<t;n++)i.push(null);return i}var nt=(ot.prototype.get=function(e){return this._store.getMath(this._ranges.get(e))},ot.prototype.toId=function(e){return this._ranges.get(e)},ot.prototype.add=function(e,t){var i=this._ranges.get(e)||this._next_id();this._store.setMath(i,t,this._page.getContext()),this._ranges.set(e,i),this._refresh(e)},ot.prototype.remove=function(e){this._ranges.delete(e),this._counter=1,this._refresh(e)},ot.prototype.serialize=function(){var t=this;return Array.from(this._ranges.keys()).map(function(e){return[e,t.get(e).source]})},ot.prototype.parse=function(e){var t=this;e.forEach(function(e){return t.add(e[0],e[1])})},ot.prototype._refresh=function(n){var o=this,e=n.indexOf("!"),r="";-1!==e&&(r=n.substr(0,e),n=n.substr(e+1)),this._store.each(function(e,t){var i;!function(e,t,i,n){for(var o=0;o<e.length;o+=3)if(6===e[o]){if(""!==i){if(5===e[o-3]&&t.substr(e[o-2],e[o-1])!==i)continue;return 1}if(t.substr(e[o+1],e[o+2])===n)return 1}}(t.code,t.source,r,n)||(i=63&e,o._store.setMath(e,t.source,o._pageGetter(i).getContext()))})},ot.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,m(this._counter,0,this._page.getID())},ot.prototype.renamePage=function(n,o){var r=this;n+="!",o&&(o+="!"),this._ranges.forEach(function(e,t,i){0===t.indexOf(n)&&(o?i.set(t.replace(n,o),e):r._store.clean(e),i.delete(t))})},ot);function ot(e,t,i){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=e,this._page=t,this._pageGetter=i}rt.prototype.addPage=function(e){for(;this._pages[this._pCounter];)this._pCounter++;var t=this._pCounter,i=new et(t,this._store,this._parseContext);return this._pageName2ID.set(e,t),this._pages[t]=i,this._pageNames[t]=e,i},rt.prototype.renamePage=function(e,t){var i;e!==t&&(i=this._pageName2ID.get(e),this._pageName2ID.delete(e),this._pageName2ID.set(t,i),this._pageNames[i]=t,this._ranges.renamePage(e,t),t=this._pages[i].getContext(),this._store.regenerate(i,!1,t))},rt.prototype.removePage=function(e){var t=this._pageName2ID.get(e),i=this._pages[t].getContext();this._pageName2ID.delete(e),this._pages[t]=this._pageNames[t]=null,this._pCounter=0,this._ranges.renamePage(e,null),this._store.regenerate(t,!0,i)},rt.prototype.getPage=function(e){return"string"==typeof e&&(e=this._pageName2ID.get(e)),this._pages[e]},rt.prototype.getRanges=function(){return this._ranges},rt.prototype.getStore=function(){return this._store},Oe=rt;function rt(e){var r=this;this._cfg=e||{strict:!1},this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(e){return r._pageName2ID.get(e)},pageName:function(e){return r._pageNames[e]},pageObj:function(e){return r._pages[e]},name:function(e,t,i){var n=e.length,o=t.substr(e[n-2],e[n-1]);o=5===e[n-6]?(n=t.substr(e[n-5],e[n-4]),r._ranges.toId(n+"!"+o)||r._ranges.toId(o)):r._ranges.toId(i.pageName(i.z)+"!"+o)||r._ranges.toId(o),e.push(9,o||-1,0)},z:0},this._store=new Ze(_(_({},this._cfg),{get:function(e){var t=b(e),i=t[0],e=t[1],t=t[2];return r._pages[t].getValue(i,e)},set:function(e,t,i){var n=b(e),o=n[0],e=n[1],n=n[2],o=r._pages[n].getCell(o,e,!0),e=2===i;return null!=i&&2!=i||(i=o.$format||0),o.$format=i,"string"==typeof t&&1!=i&&t&&(i=parseFloat(t),e&&(i=i.toString()),i==t&&(t=parseFloat(t))),o.value!==t&&(o.value=t,!0)}}));e=this._pages[63]=new et(63,this._store,this._parseContext);this._ranges=new nt(this._store,e,this.getPage.bind(this))}t.D_COMMON=0,t.D_STRING=1,t.DataPage=et,t.DataStore=Oe,t.Store=Ze,t.T_ARG=7,t.T_DATA=9,t.T_ERROR=3,t.T_METHOD=4,t.T_NAME=6,t.T_NUMBER=11,t.T_OPERATOR=10,t.T_PAGE=5,t.T_PLACEHOLDER=2,t.T_RANGE=8,t.T_SPACE=12,t.T_TEXT=1,t.addMethod=function(e,t){Ye[e]=t},t.column=s,t.fromId=b,t.methodGroups=qe,t.methods=Ye,t.page=o,t.row=w,t.str2id=function(e){var t=[];return I(t,e,0),t[1]},t.str2pos=function(e){var t=[];return I(t,e,0),b(t[1]).slice(0,2)},t.str2range=function(e){var t=[];e.split(":").map(function(e){return I(t,e,0)});var i=b(t[1]),n=i[0],e=i[1],i=b(t[4]);return[n,e,i[0],i[1]]},t.toId=m},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.UploaderEvents||(t.UploaderEvents={})).uploadBegin="uploadbegin",n.beforeUploadFile="beforeuploadfile",n.uploadFile="uploadfile",n.uploadFail="uploadfail",n.uploadComplete="uploadcomplete",n.uploadProgress="uploadprogress",(t.ProgressBarEvents||(t.ProgressBarEvents={})).cancel="cancel",(n=t.FileStatus||(t.FileStatus={})).queue="queue",n.uploaded="uploaded",n.failed="failed",n.inprogress="inprogress",(t=t.VaultMode||(t.VaultMode={})).grid="grid",t.list="list"},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(70)),n(t(162)),n(t(10)),n(t(37));var o=t(28);i.getTreeCell=o.getTreeCell,n(t(25)),n(t(21))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);t.getWidth=function(e,n,o){return e=e.filter(function(e){return!e.hidden}),n?e.reduce(function(e,t,i){t=t.$width;return e+=o<=i&&i<o+n?t:0},0):e[o].$width},t.getHeight=function(e,n,o){return e=e.filter(function(e){return!e.hidden}),n?e.reduce(function(e,t,i){t=t.$height;return e+=o<=i&&i<o+n?t:0},0):e[o].$height},t.getSpan=function(t,i,r){if(r.spans){var s=r.data.findIndex(function(e){return e.id.toString()===t.toString()}),a=r.columns.findIndex(function(e){return e.id.toString()===i}),e=n.findIndex(r.spans,function(t){var e=r.data.findIndex(function(e){return e.id.toString()===t.row.toString()}),i=r.columns.findIndex(function(e){return e.id.toString()===t.column.toString()}),n=t.rowspan?e+t.rowspan:e+1,o=t.colspan?i+t.colspan:i+1;return e<=s&&s<n&&i<=a&&a<o});return r.spans[e]}}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(140)),n(t(78))},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(79)),n(t(157)),n(t(84))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.SelectionEvents||(t.SelectionEvents={})).beforeUnSelect="beforeunselect",t.afterUnSelect="afterunselect",t.beforeSelect="beforeselect",t.afterSelect="afterselect"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i=i(11);t.DataEvents=i.DataEvents,(t=t.NavigationBarEvents||(t.NavigationBarEvents={})).inputCreated="inputCreated",t.click="click",t.openMenu="openMenu",t.beforeHide="beforeHide",t.afterHide="afterHide",t.inputFocus="inputFocus",t.inputBlur="inputBlur",t.inputChange="inputChange"},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var a=t(1),l=t(5),i=t(182),n=t(183),o=t(184),c=t(185),u=t(186),d=t(187),h=t(188),f=t(189),p=t(190),g=t(191),v=t(192),_=t(193),m=t(194),y=t(195),b=t(196),w=t(197),x=t(198),C=t(199),E=t(200),S=t(2),I=t(201),k=t(202),M=t(203),P=t(204),O=t(205),D=t(206),t=t(207);r.actions={setCellStyle:y.SetCellStyle,setCellValue:b.SetCellValue,setCellFormat:m.SetCellFormat,removeCellStyles:v.RemoveCellStyles,lockCell:g.LockCell,deleteRow:u.DeleteRow,addRow:n.AddRow,deleteColumn:c.DeleteColumn,addColumn:i.AddColumn,groupAction:h.GroupAction,groupRowAction:p.GroupRowAction,groupColAction:f.GroupColAction,addSheet:o.AddSheet,deleteSheet:d.DeleteSheet,renameSheet:_.RenameSheet,clear:w.Clear,clearSheet:x.ClearSheet,resizeCol:C.ResizeCol,resizeRow:E.ResizeRow,setValidation:I.SetValidation,sortCells:k.SortCells,insertLink:M.InsertLink,fitColumn:P.FitColumn,filter:O.Filter,merge:D.Merge,unmerge:t.Unmerge};F.prototype.execute=function(e,t){if(Array.isArray(e)){o=(o=e,i=this._config,n=o.map(function(e){var t=e.groupAction||e.action;if(t)return new r.actions[t](s(s({},e),i))}),{do:function(){n.map(function(e){return e.do()})},undo:function(){n.map(function(e){return e.undo()})},config:i});return o.do(),this._actions.push({command:e[0].action,action:o}),void this._sheets.push(this._config.spreadsheet.activeSheetName)}var i,n,o;a.extend(t,this._config),r.actions[e]&&(o=new r.actions[e](t),this._events.fire(l.SpreadsheetEvents.beforeAction,[e,S.cleanActionConfig(t)])&&(o.do(),t.action===l.Actions.addSheet||t.action===l.Actions.deleteSheet||t.action===l.Actions.renameSheet?this._sheets.push(null):this._sheets.push(this._config.spreadsheet.activeSheetName),this._actions.push({command:e,action:o}),e!==l.Actions.resizeCol&&e!==l.Actions.resizeRow&&this._events.fire(l.SpreadsheetEvents.afterAction,[e,S.cleanActionConfig(t)])))},F.prototype.undo=function(){var e,t,i,n=this._actions[this._actions.length-1];n&&(e=n.command,t=n.action,this._events.fire(l.SpreadsheetEvents.beforeAction,[e,S.cleanActionConfig(t.config),!0])&&(this._actions.pop(),t.undo(),(i=this._sheets.pop())&&(n=this._dataStore.getPage(i),this._config.spreadsheet._changeSheet(n.getMeta().toolbarId)),this._redoActions.push({command:e,action:t}),this._redoSheets.push(i),e!==l.Actions.resizeCol&&e!==l.Actions.resizeRow&&this._events.fire(l.SpreadsheetEvents.afterAction,[e,S.cleanActionConfig(t.config)])))},F.prototype.redo=function(){var e,t,i,n=this._redoActions[this._redoActions.length-1];n&&(e=n.command,t=n.action,this._events.fire(l.SpreadsheetEvents.beforeAction,[e,S.cleanActionConfig(t.config),!0])&&(this._redoActions.pop(),t.do(),(i=this._redoSheets.pop())&&(n=this._dataStore.getPage(i),this._config.spreadsheet._changeSheet(n.getMeta().toolbarId)),this._actions.push({command:e,action:t}),this._sheets.push(i),e!==l.Actions.resizeCol&&e!==l.Actions.resizeRow&&this._events.fire(l.SpreadsheetEvents.afterAction,[e,S.cleanActionConfig(t.config)])))},t=F;function F(e){this._config=e,this._actions=[],this._redoActions=[],this._sheets=[],this._redoSheets=[],this._dataStore=e.dataStore,this._events=e.events}r.ActionsManager=t},function(e,t,i){"use strict";var g=this&&this.__assign||function(){return(g=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var v=i(12),_=i(13),m=i(2);function y(e,t){return'<div class="dxi dxi-'+t+' dhx_toolbar-button__icon dhx_toolbar-button__colorpicker" style="border-bottom: solid 3px '+e+'"></div>'}function n(e,t){void 0===t&&(t="1500.31");var i=e.name,e=_.getFormattedValue(t,e);return'<div class="dhx_format-item"><span class="dhx_format-name">'+(v.default[i]||i)+' </span><span class="dhx_format-helper">'+e+"</span></div>"}t.getColorpickerTemplate=y,t.updateToolbar=function(c,u,e,t){var i=(s=e.getMeta()).merged,n=s.focusedCell;if((a=s.selectedCells)&&n){var o=a.join(","),r=g({locked:!1,format:_.getFormat("common")},m.getCellInfo(n.cell,e,t)),s=[],a=!!m.getCellsArray(o,t).find(function(e){return!m.isCellSpaned(e,i,t)});r.css&&(s="string"==typeof r.css?r.css.split(" "):r.css);for(var l={},d=0,h=s;d<h.length;d++)var f=h[d],l=g(g({},l),dhx.css.get(f));n=g({color:"#4C4C4C",background:"#FFF","text-align":"left","vertical-align":"center","font-style":"","font-weight":"","text-decoration":"",multiline:"clip"},l),o=v.default[a?"merge":"unmerge"],s="dxi dxi-table-"+(a?"merge":"split")+"-cell"+(a?"s":"");c.data.update("merge",{active:!a,icon:s,tooltip:o}),u.data.update("merge",{value:o,tooltip:o}),function(l){for(var e in l){var t=function(e){switch(e){case"color":c.data.update(e,{html:y(l[e]||"#4C4C4C","format-color-text")});break;case"background":case"background-color":c.data.update("background",{html:y(l[e]||"#FFF","format-color-fill")});break;case"text-align":if(!c.data.exists("halign"))return{value:void 0};var t="halign-"+l[e];c.data.update("halign",{icon:c.data.getItem(t).icon});var i={};c.data.getItem("halign").items.forEach(function(e){i[e.id]=!1,u.data.update(e.id,{active:e.id===t})}),i[t]=!0,c.setState(i);break;case"vertical-align":if(!c.data.exists("valign"))return{value:void 0};var n="valign-"+l[e],o={};c.data.getItem("valign").items.forEach(function(e){o[e.id]=!1,u.data.update(e.id,{active:e.id===n})}),o[n]=!0,c.setState(o),c.data.update("valign",{icon:c.data.getItem(n).icon});break;case"multiline":if(!c.data.exists("multiline"))return{value:void 0};var r="multiline-"+l[e],s={};c.data.getItem("multiline").items.forEach(function(e){s[e.id]=!1,u.data.update(e.id,{active:e.id===r})}),s[r]=!0,c.setState(s),c.data.update("multiline",{icon:c.data.getItem(r).icon});break;case"font-weight":c.data.update("font-weight-bold",{active:"bold"==l[e]||"700"==l[e]}),u.data.update("font-weight-bold",{active:"bold"==l[e]||"700"==l[e]});break;case"font-style":c.data.update("font-style-italic",{active:"italic"===l[e]}),u.data.update("font-style-italic",{active:"italic"===l[e]});break;case"text-decoration":var a={active:l[e].includes("underline")};c.data.update("text-decoration-underline",a),u.data.update("text-decoration-underline",a);a={active:l[e].includes("line-through")};c.data.update("text-decoration-line-through",a),u.data.update("text-decoration-line-through",a)}}(e);if("object"==typeof t)return t.value}}(n);n=c.data.getItem("format");n&&n.items.map(function(e){return e.active=!1});for(var p in r)!function(e){switch(e){case"locked":c.data.getItem("lock")&&c.data.update("lock",{active:r[e]});break;case"format":var t=_.getDefaultFormatsMap()[r[e].mask]||"common";c.data.getItem("format")&&c.data.update("format",{value:_.getFormat(t).name||t}),c.data.getItem(t)&&c.data.update(t,{active:!0}),u.data.getItems("format").forEach(function(e){u.data.update(e.id,{active:t===e.id})})}}(p);for(p in e)"filter"===p&&c.data.getItem("filter")&&c.data.update("filter",{active:e[p]})}},t.getToggledValue=function(e,t,i,n,o){e=m.getCellInfo(t,e,o),o=[],e.css&&(o="string"==typeof e.css?e.css.split(" "):e.css);for(var r={},s=0,a=o;s<a.length;s++)var l=a[s],r=g(g({},r),dhx.css.get(l));return o=r[i],n=(o=o&&"none"!==o?o:"").includes(n)?o.split(n).join(""):o+" "+n,"text-decoration"!==i||n||(n="none"),n.trim()},t.getFormatItem=n,t.getFormatsDropdown=function(e){return e.formats.map(function(e){return{id:e.id,css:"dhx_format-name-wrap",twoState:!0,group:"format",html:n(e,e.example)}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.WindowEvents||(t.WindowEvents={})).resize="resize",t.headerDoubleClick="headerdoubleclick",t.move="move",t.afterShow="aftershow",t.afterHide="afterhide",t.beforeShow="beforeshow",t.beforeHide="beforehide"},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(88)),n(t(224))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,m=i(0),y=i(1),b=i(9),a=i(19),l=i(4),c=i(6),o=(s=a.Label,o(u,s),u.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._isValid=this._propsItem=this._propsItem=null,s.prototype._destructor.call(this),this.unmount()},u.prototype.setProperties=function(e){if(e&&!y.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},u.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},u.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(c.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[t]))},u.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[i,e]))},u.prototype.isVisible=function(){return!this.config.hidden},u.prototype.disable=function(){this.config.disabled=!0,this.paint()},u.prototype.enable=function(){this.config.disabled=!1,this.paint()},u.prototype.isDisabled=function(){return this.config.disabled},u.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue():t;if(e||this.events.fire(c.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?b.validateInput(t,this.config.validation):this.config.required?!(!b.baseInputValidate(t,this.config)||!String(t).trim().length):b.baseInputValidate(t,this.config),e||(this.config.$validationStatus=this._isValid?c.ValidationStatus.success:c.ValidationStatus.error,this.events.fire(c.ItemEvent.afterValidate,[t,this._isValid])),this._isValid},u.prototype.clearValidate=function(){this.config.$validationStatus=c.ValidationStatus.pre,this.paint()},u.prototype.clear=function(){""!==this.config.value&&(this.config.value="",this.events.fire(c.ItemEvent.change,[this.getValue()]))},u.prototype.setValue=function(e){void 0!==e&&this.config.value!==e&&(this.config.value=e,this.events.fire(c.ItemEvent.change,[this.getValue()]),b.isVerify(this.config)&&this.validate())},u.prototype.getValue=function(){var e=this.config,t=e.inputType,e=e.value;return"number"===t&&"number"==typeof e||null===e?e:"number"===t&&"string"==typeof e?e.length?Number(e):"":"string"==typeof e?e.length?e:"":void 0===e?"":String(e)},u.prototype.focus=function(){var e=this;m.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},u.prototype.blur=function(){var e=this;m.awaitRedraw().then(function(){e.getRootView().refs.input.el.blur()})},u.prototype._initView=function(e){var t,i=this;if(y.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:"input",id:e.id,name:e.name,disabled:!1,hidden:!1,inputType:"text",required:!1,icon:"",placeholder:"",autocomplete:!1,readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&m.awaitRedraw().then(function(){i.hide(!0)}),this.paint()},u.prototype._initHandlers=function(){var e=this;this.events.on(c.ItemEvent.change,function(){return e.paint()}),this.events.on(c.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?c.ValidationStatus.success:c.ValidationStatus.error,e.paint()})},u.prototype._getHandlers=function(){var t=this;return{oninput:function(e){e=e.target.value;t.config.value=e,t.events.fire(c.ItemEvent.input,[e])},onchange:function(e){e=e.target.value;t.config.value=e,t.events.fire(c.ItemEvent.change,[t.getValue()]),b.isVerify(t.config)&&t.validate(),t.paint()},onfocus:function(){t.events.fire(c.ItemEvent.focus,[t.getValue()]),t.paint()},onblur:function(){t._uid&&(t.events.fire(c.ItemEvent.blur,[t.getValue()]),t.paint())},onkeydown:function(e){"Enter"===e.code&&"input"===t.config.type&&e.preventDefault(),t.events.fire(c.ItemEvent.keydown,[e])}}},u.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.disabled,o=e.name,r=e.icon,s=e.placeholder,a=e.required,l=e.inputType,c=e.hidden,u=e.autocomplete,d=e.readOnly,h=e.maxlength,f=e.minlength,p=e.max,g=e.min,v=e.label,_=e.helpMessage,e=c?" dhx_form-group--hidden":"",c=(null===(c=null===(c=null===(c=this.getRootView())||void 0===c?void 0:c.refs)||void 0===c?void 0:c.input)||void 0===c?void 0:c.el)===document.activeElement;return m.el("div.dhx_form-group",{class:b.getFormItemCss(this.config,b.isVerify(this.config),c)+e},[this._drawLabel(),m.el(".dhx_input__wrapper",{},[m.el("div.dhx_input__container",{},[this.config.icon?m.el(".dhx_input__icon",{class:this.config.icon}):null,m.el("input.dhx_input",{type:["text","number","password"].includes(l)?l:"text","data-dhx-id":o||t,id:t||this._uid,placeholder:s||"",value:y.isDefined(i)?i:"",name:o||"",disabled:n,required:a,readOnly:d,maxlength:h,minlength:f,max:p,min:g,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,class:r?"dhx_input--icon-padding":"",autocomplete:u?"on":"off",_ref:"input","aria-label":v||_||"type "+(o||l||"text"),"aria-describedby":_?"dhx_label__help_"+(t||this._uid):null})]),b.getValidationMessage(this.config)&&m.el("span.dhx_input__caption",b.getValidationMessage(this.config))])])},u);function u(e,t){void 0===t&&(t={});var i=s.call(this,null,t)||this;return i.events=new l.EventSystem,i._propsItem=["inputType","required","validation","icon","placeholder","autocomplete","readOnly","maxlength","minlength","min","max","step","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],i._props=r(b.baseProps,i._propsItem),i._isValid=!0,i._initView(t),i._initHandlers(),i}t.Input=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={dragAndDrop:"Drag & drop",or:"or",grid:"Grid",list:"List",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clearAllSelected:"Clear selected",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.RealPosition||(t.RealPosition={})).left="left",n.right="right",n.top="top",n.bottom="bottom",n.center="center",(n=t.Position||(t.Position={})).right="right",n.bottom="bottom",n.center="center",n.left="left",n.top="top",(t=t.MessageContainerPosition||(t.MessageContainerPosition={})).topLeft="top-left",t.topRight="top-right",t.bottomLeft="bottom-left",t.bottomRight="bottom-right"},function(e,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,i){"use strict";function n(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function o(e){var t,i,n,o=e.r/255,r=e.g/255,s=e.b/255,a=Math.max(o,r,s),l=a-Math.min(o,r,s),c=function(e){return(a-e)/6/l+.5};return 0==l?t=i=0:(i=l/a,n=c(o),e=c(r),c=c(s),o===a?t=c-e:r===a?t=1/3+n-c:s===a&&(t=2/3+e-n),t<0?t+=1:1<t&&--t),{h:Math.floor(360*t),s:i,v:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.HSVtoRGB=function(e){var t,i={r:0,g:0,b:0},n=e.h/60,o=e.s,r=e.v,e=Math.floor(n)%6,n=n-Math.floor(n),s=255*r*(1-o),a=255*r*(1-o*n),l=255*r*(1-o*(1-n));switch(r*=255,e){case 0:i.r=r,i.g=l,i.b=s;break;case 1:i.r=a,i.g=r,i.b=s;break;case 2:i.r=s,i.g=r,i.b=l;break;case 3:i.r=s,i.g=a,i.b=r;break;case 4:i.r=l,i.g=s,i.b=r;break;case 5:i.r=r,i.g=s,i.b=a}for(t in i)i[t]=Math.round(i[t]);return i},t.RGBToHex=function(i){return Object.keys(i).reduce(function(e,t){t=i[t].toString(16).toUpperCase();return e+(t=1===t.length?"0"+t:t)},"#")},t.HexToRGB=n,t.RGBToHSV=o,t.HexToHSV=function(e){return o(n(e))},t.isHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={cancel:"Cancel",select:"Select",rightClickToDelete:"Right click to delete",customColors:"Custom colors",addNewColor:"Add new color"}},function(e,t,i){"use strict";(function(c){Object.defineProperty(t,"__esModule",{value:!0});var u=i(23),d=i(24);function h(e){return e?e.includes("json")?"json":e.includes("xml")?"xml":"text":"text"}function n(o,r,s,e,a){var n,l=e||{};return a&&(l.Accept="application/"+a),"GET"!==s&&(l["Content-Type"]=l["Content-Type"]||"application/json"),"GET"===s&&((e=r&&"object"==typeof r?(n=r,Object.keys(n).reduce(function(e,t){var i="object"==typeof n[t]?JSON.stringify(n[t]):n[t];return e.push(t+"="+encodeURIComponent(i)),e},[]).join("&")):r&&"string"==typeof r?r:"")&&(o+=o.includes("?")?"&":"?",o+=e),r=null),window.fetch?window.fetch(o,{method:s,body:r?JSON.stringify(r):null,headers:l}).then(function(t){if(!t.ok)return t.text().then(function(e){return c.reject({status:t.status,statusText:t.statusText,message:e})});var e=a||h(t.headers.get("Content-Type"));if("raw"===e)return{headers:Object.fromEntries(t.headers.entries()),url:t.url,body:t.body};if(204!==t.status)switch(e){case"json":return t.json();case"xml":var i=d.toDataDriver(u.DataDriver.xml);return i?t.text().then(function(e){return i.toJsonObject(e)}):t.text();default:return t.text()}}):new c(function(e,t){var i,n=new XMLHttpRequest;for(i in n.onload=function(){200<=n.status&&n.status<300?("raw"===a&&e({url:n.responseURL,headers:n.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(function(e,t){t=t.split(": ");return e[t[0]]=t[1],e},{}),body:n.response}),204===n.status?e():e(function(e,t){switch(t){case"json":return JSON.parse(e);case"text":return e;case"xml":var i=d.toDataDriver(u.DataDriver.xml);return i?i.toJsonObject(e):{parseError:"Incorrect data driver type: 'xml'"};default:return e}}(n.responseText,a||h(n.getResponseHeader("Content-Type"))))):t({status:n.status,statusText:n.statusText})},n.onerror=function(){t({status:n.status,statusText:n.statusText,message:n.responseText})},n.open(s,o),l)n.setRequestHeader(i,l[i]);switch(s){case"POST":case"DELETE":case"PUT":n.send(void 0!==r?JSON.stringify(r):"");break;case"GET":default:n.send()}})}t.ajax={get:function(e,t,i){return n(e,t,"GET",i&&i.headers,void 0!==i?i.responseType:void 0)},post:function(e,t,i){return n(e,t,"POST",i&&i.headers,void 0!==i?i.responseType:void 0)},put:function(e,t,i){return n(e,t,"PUT",i&&i.headers,void 0!==i?i.responseType:void 0)},delete:function(e,t,i){return n(e,t,"DELETE",i&&i.headers,void 0!==i?i.responseType:void 0)}}}).call(this,i(15))},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(141)),n(t(77))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.LayoutEvents||(t.LayoutEvents={})).beforeShow="beforeShow",t.afterShow="afterShow",t.beforeHide="beforeHide",t.afterHide="afterHide",t.beforeResizeStart="beforeResizeStart",t.resize="resize",t.afterResizeEnd="afterResizeEnd",t.beforeAdd="beforeAdd",t.afterAdd="afterAdd",t.beforeRemove="beforeRemove",t.afterRemove="afterRemove",t.beforeCollapse="beforeCollapse",t.afterCollapse="afterCollapse",t.beforeExpand="beforeExpand",t.afterExpand="afterExpand"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.ListEvents||(t.ListEvents={})).click="click",t.doubleClick="doubleclick",t.focusChange="focuschange",t.beforeEditStart="beforeEditStart",t.afterEditStart="afterEditStart",t.beforeEditEnd="beforeEditEnd",t.afterEditEnd="afterEditEnd",t.itemRightClick="itemRightClick",t.itemMouseOver="itemMouseOver",t.contextmenu="contextmenu"},function(e,t,i){"use strict";var C=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var E=i(13),S=i(2),I=i(27);function k(e,t,i){e=S.getCellIndex(e,i),t=S.getCellIndex(t,i),i=t.col-e.col,t=t.row-e.row,e=i<0||t<0;return{x:i,y:t,isLargerByX:Math.abs(i)>Math.abs(t),negativeDir:e}}function M(e){var t=e.map(function(e){return parseFloat(e)||0}),i=t.reduce(function(e,t){return e+t},0),e=t.length;return(i/e*2-2*t[0])/(e-1)}function P(e){for(var t=I.dateDiff(e[0],e[1]),i=1;i<e.length-1;i++)I.dateDiff(e[i],e[i+1])!==t&&(t=0,i=e.length);return t}function O(e){for(var t=I.timeDiff(e[0],e[1]),i=1;i<e.length-1;i++)I.timeDiff(e[i],e[i+1])!==t&&(t=0,i=e.length);return t}t.getCellsDiff=k,t.getLastCopyingCell=function(e,t,i){S.isRangeId(e)&&(e=e.split(":")[1]);var n=S.getCellIndex(e,i),e=(o=k(e,t,i)).x,t=o.y,o=o.isLargerByX,t=n.row+t,e=n.col+e,e=o?e:n.col,t=o?n.row:t;return S.getCellNameByIndex(t,e,i)},t.getProgressionStep=M,t.getDateStep=P,t.getTimeStep=O,t.isCellGreater=function(e,t,i){return e=S.getCellIndex(e,i),i=S.getCellIndex(t,i),e.row===i.row?e.col>i.col:e.row>i.row},t.getAutoFilledCells=function(a,e,t,l,c){var i=a.filter(function(e){return E.isNumeric(e.value)&&"date"!==e.format.id&&"time"!==e.format.id&&"text"!==e.format.id}).map(function(e){return e.value}),n=a.filter(function(e){return E.isNumeric(e.value)&&"date"===e.format.id}).map(function(e){return I.excelDateToJSDate(e.value)}),o=a.filter(function(e){return E.isNumeric(e.value)&&"time"===e.format.id}).map(function(e){return I.excelDateToJSDate(e.value)});function r(e,t){return e=S.getCellIndex(e,c),t=S.getCellIndex(t,c),e.row===t.row?e.col>t.col:e.row>t.row}1===i.length&&i.push(+i[0]+1);var u=n.length<2?1:P(n),d=o.length<2?36e5:O(o),h=S.getCellsArray(e,c),f=M(i),p=[],g=parseFloat(i[i.length-1]),v=n[n.length-1],_=o[o.length-1],m=0,s=(b=e.split(":"))[0],y=b[1],b=(e=t.split(":"))[0],e=e[1],w=k(s===b&&y?y:s,b,c).isLargerByX,x=r(s,r(b,e)?e:b);return x&&(u=-u,v=n[0],d=-d,_=o[0],f=M(C(i.reverse())),g=parseFloat(i[i.length-1])),i=S.getCellsArray(t,c).filter(function(e){return!h.includes(e)}),x&&(i=i.reverse(),a=a.reverse()),t=i.map(function(e,t){var i,n,o=a[m].value.toString().startsWith("="),r=a[m].value,s=a[m].span;if(s&&(n=s.from,i=s.to,s=S.getCellIndex(e,c),n=e+":"+S.getCellNameByIndex(s.row+i.row-n.row,s.col+i.column-n.column,c),p.includes(n)||p.push(n)),o&&(o=n=0,t=x?-1*(t+m+h.length+1):t-m+h.length,w?o=t:n=t,r=l.transposeMath(r,n,o)),E.isNumeric(r))switch(a[m].format.id){case"date":v=I.addDay(v,u),r=I.getExcelDateFromJs(v);break;case"time":_=I.addTime(_,d),r=I.getExcelDateFromJs(_);break;default:r=(g+=f).toFixed(5)}return m=void 0!==a[m+1]?m+1:0,r}),x&&(t=t.reverse()),{cells:i[0]+":"+i[i.length-1],value:t,spans:p}}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(89)),n(t(240)),n(t(6));t=t(6);i.FormEvents=t.FormEvents},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,d=i(0),a=i(4),h=i(9),l=i(8),c=i(6),u=i(19),f=i(1),o=(s=u.Label,o(p,s),p.prototype.setProperties=function(e,t){if(void 0===t&&(t=!1),e&&!f.isEmptyObj(e)&&(t||this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()]))){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);t||this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},p.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},p.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[this.getValue()]))},p.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[this.getValue(),e]))},p.prototype.isVisible=function(){return!this.config.hidden},p.prototype.disable=function(){this.config.disabled=!0,this.paint()},p.prototype.enable=function(){this.config.disabled=!1,this.paint()},p.prototype.isDisabled=function(){return this.config.disabled},p.prototype.validate=function(e){if(void 0===e&&(e=!1),e||this.events.fire(c.ItemEvent.beforeValidate,[this.getValue()]))return(this.config.required||this.config.$required)&&(this._isValid=!!this.config.checked),e||(this.config.$validationStatus=this._isValid?c.ValidationStatus.success:c.ValidationStatus.error,this.events.fire(c.ItemEvent.afterValidate,[this.getValue(),this._isValid])),this._isValid},p.prototype.clearValidate=function(){this.config.$validationStatus=c.ValidationStatus.pre,this.paint()},p.prototype.setValue=function(e,t){void 0===t&&(t=!1),void 0!==e&&e!==this.config.checked&&(this.config.checked=!!e,t||(this.events.fire(c.ItemEvent.change,[this.getValue()]),h.isVerify(this.config)&&this.validate()))},p.prototype.getValue=function(){var e=this.config,t=e.value,e=e.checked;return t?e?t:"":!!e},p.prototype.clear=function(e){this.config.checked&&(this.config.checked=!1,e||this.events.fire(c.ItemEvent.change,[this.getValue()]))},p.prototype.destructor=function(){this.events&&this.events.clear(),this._inGroup=this._propsItem=this._props=this._isValid=this._uid=this.events=null,s.prototype._destructor.call(this),this.unmount()},p.prototype.focus=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},p.prototype.blur=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.blur()})},p.prototype.isChecked=function(){return!!this.config.checked},p.prototype._initView=function(e){var t=this;if(this._inGroup=this.config.$group,this._inGroup){for(var i in this.config={type:e.type,id:e.id,text:"",width:"content",height:"content",padding:0},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this._handlers={onchange:function(e){t.config.checked=e.target.checked,t.events.fire(c.ItemEvent.change,[t.getValue()]),h.isVerify(t.config)&&t.validate()},onfocus:function(){return t.events.fire(c.ItemEvent.focus,[t.getValue(),t.config.id])},onblur:function(){var e;return null===(e=t.events)||void 0===e?void 0:e.fire(c.ItemEvent.blur,[t.getValue(),t.config.id])},onkeydown:function(e){t.events.fire(c.ItemEvent.keydown,[e,t.config.id])}}}else{for(var i in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.helpMessage&&(this._helper=new l.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.show(e.target,{mode:"left"===t.config.labelPosition?"bottom":"right"})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.hide()},onchange:function(e){t.config.checked=e.target.checked,t.events.fire(c.ItemEvent.change,[t.getValue()]),h.isVerify(t.config)&&t.validate()},onfocus:function(){return t.events.fire(c.ItemEvent.focus,[t.getValue()])},onblur:function(){var e;return null===(e=t.events)||void 0===e?void 0:e.fire(c.ItemEvent.blur,[t.getValue()])},onkeydown:function(e){t.events.fire(c.ItemEvent.keydown,[e])}}}this.config.hidden&&d.awaitRedraw().then(function(){t.hide(!0)})},p.prototype._initHandlers=function(){var e=this;this.events.on(c.ItemEvent.change,function(){return e.paint()}),this.events.on(c.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?c.ValidationStatus.success:c.ValidationStatus.error,e.paint()})},p.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.checked,o=e.disabled,r=e.name,s=e.required,a=e.$required,l=e.text,c=e.label,u=e.labelWidth,e=e.helpMessage;return d.el("label.dhx_checkbox.dhx_form-group.dhx_form-group--checkbox",{class:h.getFormItemCss(this.config,h.isVerify(this.config)||!!a)},this._inGroup?[d.el(".dhx_checkbox__holder",[d.el("input.dhx_checkbox__input",{type:"checkbox",id:t,value:i||"",name:r||"",disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input"}),d.el("span.dhx_checkbox__visual-input"),d.el("span.dhx_text",[l])])]:[c||u||e||s?this._drawLabel():null,d.el(".dhx_checkbox__container",[d.el(".dhx_checkbox__holder",[d.el("input.dhx_checkbox__input",{type:"checkbox","data-dhx-id":r||t,id:t,value:i,name:r,disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input","aria-label":c||"checkbox "+(l||""),"aria-describedby":e?"dhx_label__help_"+(t||this._uid):null}),d.el("span.dhx_checkbox__visual-input"),d.el("span.dhx_text",[l])]),s&&h.getValidationMessage(this.config)&&d.el("span.dhx_input__caption",h.getValidationMessage(this.config))])])},p);function p(e,t){void 0===t&&(t={});var i=s.call(this,e,t)||this;i.events=new a.EventSystem,i._isValid=!0,i._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","text"],i._props=r(h.baseProps,i._propsItem),i._initView(t),i._initHandlers();return i.mount(e,d.create({render:function(){return i._draw()}})),i}t.Checkbox=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),i=(o.prototype.update=function(){this._styleCont.innerHTML!==this._generateCss()&&(document.head.appendChild(this._styleCont),this._styleCont.innerHTML=this._generateCss())},o.prototype.remove=function(e){delete this._classes[e],this.update()},o.prototype.add=function(e,t,i){void 0===i&&(i=!1);var n=this._toCssString(e),e=this._findSameClassId(n);return e&&t&&t!==e?(this._classes[t]=this._classes[e],t):e||this._addNewClass(n,t,i)},o.prototype.get=function(e){if(this._classes[e]){for(var t={},i=0,n=this._classes[e].split(";");i<n.length;i++){var o=n[i];o&&(t[(o=o.split(":"))[0]]=o[1])}return t}return null},o.prototype.destructor=function(){this._classes=this._styleCont=null},o.prototype._findSameClassId=function(e){for(var t in this._classes)if(e===this._classes[t])return t;return null},o.prototype._addNewClass=function(e,t,i){t=t||"dhx_generated_class_"+n.uid();return this._classes[t]=e,i||this.update(),t},o.prototype._toCssString=function(e){var t,i="";for(t in e){var n=e[t];i+=t.replace(/[A-Z]{1}/g,function(e){return"-"+e.toLowerCase()})+":"+n+";"}return i},o.prototype._generateCss=function(){var e,t="";for(e in this._classes)t+="."+e+"{"+this._classes[e]+"}\n";return t},o);function o(){this._classes={};var e=document.createElement("style");e.id="dhx_generated_styles",this._styleCont=document.head.appendChild(e)}t.CssManager=i,t.cssManager=new i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={apply:"apply",reject:"reject"}},function(e,t,i){"use strict";function n(e){var t=document.activeElement;t.classList.contains("dhx_alert__apply-button")&&"Enter"===e.key||t.classList.contains("dhx_alert__confirm-reject")||t.classList.contains("dhx_alert__confirm-aply")||e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0}),t.blockScreen=function(e){var t=document.createElement("div");return t.className="dhx_alert__overlay "+(e||""),document.body.appendChild(t),document.addEventListener("keydown",n),function(){document.body.removeChild(t),document.removeEventListener("keydown",n)}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(3),d=i(48),h=750,f=200;function u(e,t,i,n,o,r){var s,a,l;switch(void 0===o&&(o=8),void 0===r&&(r=0),1<r&&(t=d.Position.center),t){case d.Position.center:return(a=e.left+window.pageXOffset+(e.width-i)/2)+o<window.pageXOffset&&(a=e.left+window.pageXOffset),{left:a,top:l=e.top+window.pageYOffset+(e.height-n)/2,pos:s=d.RealPosition.center};case d.Position.right:return(s=d.RealPosition.right,(a=e.right+window.pageXOffset+o)+i>window.innerWidth+window.pageXOffset)?u(e,d.Position.left,i,n,o,++r):{left:a,top:l=window.pageYOffset+e.top+(e.height-n)/2,pos:s};case d.Position.left:return(s=d.RealPosition.left,(a=window.pageXOffset+e.left-i-o)<0)?u(e,d.Position.right,i,n,o,++r):{left:a,top:l=window.pageYOffset+e.top+(e.height-n)/2,pos:s};case d.Position.top:return s=d.RealPosition.top,(a=window.pageXOffset+e.left+(e.width-i)/2)+i>window.innerWidth+window.pageXOffset?a=window.innerWidth+window.pageXOffset-i:a<0&&(a=0),(l=window.pageYOffset+e.top-n-o)-n<0?u(e,d.Position.bottom,i,n,o,++r):{left:a,top:l,pos:s};case d.Position.bottom:default:return(a=window.pageXOffset+e.left+(e.width-i)/2)+i>window.innerWidth+window.pageXOffset?a=window.innerWidth+window.pageXOffset-i:a<0&&(a=0),s=d.RealPosition.bottom,(l=window.pageYOffset+e.bottom+o)+n>window.innerHeight+window.pageYOffset?u(e,d.Position.top,i,n,o,++r):{left:a,top:l,pos:s}}}t.findPosition=u;var p=document.createElement("div"),g=document.createElement("span");g.className="dhx_tooltip__text",p.appendChild(g),p.setAttribute("role","tooltip"),p.style.position="absolute";var v,_=null,m=!1,y=null,b=null;function w(e){return e&&(e.classList.contains("dhx_popup--window")&&e.classList.contains("dhx_popup--window_active")||e.classList.contains("dhx_popup--window_modal")||e.classList.contains("dhx_popup"))?2147483647:null!=e&&e.classList.contains("dhx_popup--window")?2147483646:e&&e.offsetParent?w(e.offsetParent):null}function x(e,t,i,n,o,r,s){void 0===o&&(o=!1),void 0===r&&(r=8);var a=e.getBoundingClientRect();s?g.innerHTML=t:g.textContent=t,document.body.appendChild(p),p.className="dhx_widget dhx_tooltip"+(o?" dhx_tooltip--forced":"");var t=p.getBoundingClientRect(),r=u(a,i,t.width,t.height,r),l=r.left,c=r.top,r=r.pos,e=w(e);switch(e&&(p.style.zIndex=e.toString()),r){case d.RealPosition.bottom:case d.RealPosition.top:case d.RealPosition.left:case d.RealPosition.right:case d.RealPosition.center:p.style.left=l+"px",p.style.top=c+"px"}p.className+=" dhx_tooltip--"+r+" "+(n||""),m=!0,o||setTimeout(function(){p.className+=" dhx_tooltip--animate"})}function r(t,e,i){var n=i.force,o=i.showDelay,r=i.hideDelay,s=i.position,a=i.css,l=i.htmlEnable,c=i.margin;n||(b=setTimeout(function(){x(t,e,s||d.Position.bottom,a,!1,c,l)},o||h));var u=function(){var e;m&&(e=r,_&&(y=setTimeout(function(){document.body.removeChild(p),m=!1,y=null},e||f))),clearTimeout(b),t.removeEventListener("mouseleave",u),t.removeEventListener("blur",u),document.removeEventListener("mousedown",u),v=_=null};n&&x(t,e,s,a,n,c,l),t.addEventListener("mouseleave",u),t.addEventListener("blur",u),document.addEventListener("mousedown",u),v=u}function s(e,t){var i=o.toNode(t.node);i!==_&&(v&&(v(),v=null),_=i,y?(clearTimeout(y),y=null,r(i,e,n(n({},t),{force:!0}))):r(i,e,t))}function a(e){e=o.locateNode(e,"dhx_tooltip_text");e&&s(e.getAttribute("dhx_tooltip_text"),{position:e.getAttribute("dhx_tooltip_position")||d.Position.bottom,node:e})}t.getZIndex=w,t.tooltip=s,t.enableTooltip=function(){document.addEventListener("mousemove",a)},t.disableTooltip=function(){document.removeEventListener("mousemove",a)}},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(124)),n(t(65)),n(t(64)),n(t(50));t=t(51);i.locale=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grayShades=["#000000","#4C4C4C","#666666","#808080","#999999","#B3B3B3","#CCCCCC","#E6E6E6","#F2F2F2","#FFFFFF"],t.palette=[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.ColorpickerEvents||(t.ColorpickerEvents={})).change="change",t.apply="apply",t.cancelClick="cancelClick",t.modeChange="modeChange",t.selectClick="selectClick",t.colorChange="colorChange",t.viewChange="viewChange"},function(e,t,i){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=i(4),r=i(128),s=i(131),a=i(31),c=i(24),u=i(23),p=i(1),i=(d.prototype._reset=function(){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this._meta=new WeakMap,this._loaded=!1},d.prototype.add=function(e,i){var n=this;if(this.events.fire(u.DataEvents.beforeAdd,[e])){e=Array.isArray(e)?e.map(function(e,t){return 0!==t&&(i+=1),n._add(e,i)}):this._add(e,i);return this._applySmart(),e}},d.prototype.remove=function(e){var t=this;e&&(e instanceof Array?n(e).map(function(e){t._remove(e)}):this._remove(e))},d.prototype.removeAll=function(){this._reset(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},d.prototype.exists=function(e){return!!this._pull[e]},d.prototype.getNearId=function(e){if(!this._pull[e])return this._order[0].id||""},d.prototype.getItem=function(e){return this._pull[e]},d.prototype.update=function(e,t,i){var n=this.getItem(e);n?c.isEqualObj(t,n)||(t.id&&e!==t.id?(c.dhxWarning("this method doesn't allow change id"),c.isDebug()):(t.parent&&n.parent&&t.parent!==n.parent&&this.move(e,-1,this,t.parent),p.extend(this._pull[e],t,!1),this.config.update&&this.config.update(this._pull[e]),i||this._onChange("update",e,this._pull[e])),this._applySmart()):c.dhxWarning("item not found")},d.prototype.getIndex=function(t){if(!t)return-1;var e=p.findIndex(this._order,function(e){return e&&e.id.toString()===t.toString()});return this._pull[t]&&0<=e?e:void 0},d.prototype.getId=function(e){if(this._order[e])return this._order[e].id},d.prototype.getLength=function(){return this._order.length},d.prototype.isDataLoaded=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._order.length),p.isNumeric(e)&&p.isNumeric(t)?0===this._order.slice(e,t).filter(function(e){return e&&e.$empty}).length:(this._loaded||(this._loaded=!this.find(function(e){return e.$empty})),!!this._loaded)},d.prototype.filter=function(e,t){var i;this.isDataLoaded()?(t&&t.add||(this._order=this._initOrder||this._order,this._initOrder=null),!e||"function"==typeof e||void 0!==(i=e).by&&void 0!==i.match&&(e=i.compare?function(e){return i.compare(e[i.by],i.match,e,i.multi)}:function(e){return e[i.by]==i.match}),this._filter=t&&t.smartFilter?e:null,this._applyFilters(e),this.events.fire(u.DataEvents.change)):c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype.find=function(e){for(var t in this._pull){var i=c.findByConf(this._pull[t],e);if(i)return i}return null},d.prototype.findAll=function(e){var t,i=[];for(t in this._pull){var n=c.findByConf(this._pull[t],e);n&&i.push(n)}return i},d.prototype.sort=function(e,t){this.isDataLoaded()?(t&&t.smartSorting&&(this._sorter=e),e&&this._applySorters(e),this.events.fire(u.DataEvents.change)):c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype.copy=function(e,i,n,o){var r=this;return e instanceof Array?e.map(function(e,t){return r._copy(e,i,n,o,t)}):this._copy(e,i,n,o)},d.prototype.move=function(e,i,n,o,t){var r=this;return e instanceof Array?e.map(function(e,t){return r._move(e,i,n,o,t)}):this._move(e,i,n,o,0,t)},d.prototype.forEach=function(e){for(var t=0;t<this._order.length;t++)e.call(this,this._order[t],t,this._order)},d.prototype.load=function(e,t){return"string"==typeof e&&(this.dataProxy=e=new a.DataProxy(e)),this.dataProxy=e,this._loader.load(e,t)},d.prototype.parse=function(e,t){return this._reset(),this._loader.parse(e,t)},d.prototype.$parse=function(e){var t=this.config.approximate;t&&(e=this._approximate(e,t.value,t.maxNum)),this._parse_data(e),this._applySmart(),this.events.fire(u.DataEvents.change,["load"]),this.events.fire(u.DataEvents.load)},d.prototype.save=function(e){"string"==typeof e&&(e=new a.DataProxy(e)),this._loader.save(e)},d.prototype.changeId=function(e,t,i){var n;void 0===t&&(t=p.uid()),i||this.isDataLoaded()?(n=this.getItem(e))?(n.id=t,p.extend(this._pull[e],n),this._pull[t]=this._pull[e],i||this._onChange("update",t,this._pull[t]),delete this._pull[e]):c.dhxWarning("item not found"):c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype.isSaved=function(){return!this._changes.order.length},d.prototype.map=function(e){for(var t=[],i=0;i<this._order.length;i++)t.push(e.call(this,this._order[i],i,this._order));return t},d.prototype.mapRange=function(e,t,i){e<0&&(e=0),t>this._order.length-1&&(t=this._order.length-1);for(var n=this._order.slice(e,t),o=[],r=e;r<=t;r++)o.push(i.call(this,this._order[r],r,n));return o},d.prototype.reduce=function(e,t){for(var i=0;i<this._order.length;i++)t=e.call(this,t,this._order[i],i);return t},d.prototype.serialize=function(e){void 0===e&&(e=u.DataDriver.json);for(var i=[],n=this,t=0;t<this._order.length;t++)!function(e){var t=l({},n._order[e]);Object.keys(t).forEach(function(e){e.startsWith("$")&&delete t[e]}),i.push(t)}(t);e=c.toDataDriver(e);if(e)return e.serialize(i)},d.prototype.getInitialData=function(){return this._initOrder},d.prototype.setMeta=function(e,t,i){var n;e&&((n=this._meta.get(e))||(n={},this._meta.set(e,n)),n[t]=i)},d.prototype.getMeta=function(e,t){e=this._meta.get(e);return e?e[t]:null},d.prototype.getMetaMap=function(e){return this._meta.get(e)},d.prototype.setRange=function(e,t){this._range=t?[e,t]:null},d.prototype.getRawData=function(e,t,i,n){if(i=i||this._order,1===n)return i;var o;if(this._range&&(e=this._range[0]+e,t=-1===t||e+(o=Math.abs(t-e))>this._range[1]?this._range[1]:e+o),!t||0===e&&(-1===t||t===i.length))return i;if(e>=i.length)return[];(-1===t||t>i.length)&&(t=i.length);i=i.slice(e,t);return 0!==i.filter(function(e){return e.$empty}).length&&this.events.fire(u.DataEvents.dataRequest,[e,t]),i},d.prototype._add=function(e,t){if(this.isDataLoaded()){t=this._addCore(e,t);return this._onChange("add",e.id,e),this.events.fire(u.DataEvents.afterAdd,[e]),t}c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._remove=function(e){if(this.isDataLoaded()){var t=this._pull[e];if(t){if(!this.events.fire(u.DataEvents.beforeRemove,[t]))return;this._removeCore(t.id),this._onChange("remove",e,t)}this.events.fire(u.DataEvents.afterRemove,[t])}else c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._copy=function(e,t,i,n,o){if(this.isDataLoaded()){if(!this.exists(e))return null;var r=p.uid();return(o&&(t=-1===t?-1:t+o),i)?i instanceof d||!n?i.exists(e)?(i.add(l(l({},c.copyWithoutInner(this.getItem(e))),{id:r}),t),r):(i.add(c.copyWithoutInner(this.getItem(e)),t),e):void i.add(c.copyWithoutInner(this.getItem(e)),t):(this.add(l(l({},c.copyWithoutInner(this.getItem(e))),{id:r}),t),r)}c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._move=function(e,t,i,n,o,r){if(this.isDataLoaded()){if(o&&(t=-1===t?-1:t+o),i&&i!==this&&this.exists(e)){var s=p.copy(this.getItem(e),!0);return r&&(s.id=r),(!r&&i.exists(e)||i.exists(r))&&(s.id=p.uid()),n&&(s.parent=n),i.add(s,t),this.remove(e),s.id}if(this.getIndex(e)===t)return null;s=this._order.splice(this.getIndex(e),1)[0];return-1===t&&(t=this._order.length),this._order.splice(t,0,s),this.events.fire(u.DataEvents.change,[e,"update",this.getItem(e)]),e}c.dhxWarning("the method doesn't work with lazyLoad")},d.prototype._addCore=function(e,t){var i;return this.config.init&&(e=this.config.init(e)),e.id=null!==(i=e.id)&&void 0!==i?i:p.uid(),this._pull[e.id]&&c.dhxError("Item "+e.id+" already exist"),this._initOrder&&!c.isTreeCollection(this)&&this._addToOrder(this._initOrder,e,t),this._addToOrder(this._order,e,t),e.id},d.prototype._removeCore=function(t){0<=this.getIndex(t)&&(this._order=this._order.filter(function(e){return e.id!==t}),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==t}),delete this._pull[t])},d.prototype._parse_data=function(e){var t=this._order.length;this.config.prep&&(e=this.config.prep(e));for(var i=0,n=e;i<n.length;i++){var o=n[i];this._addCore(o,t++)}},d.prototype._approximate=function(e,t,i){for(var n=e.length,o=t.length,r=Math.floor(n/i),s=Array(Math.ceil(n/r)),a=0,l=0;l<n;l+=r){for(var c=p.copy(e[l]),u=Math.min(n,l+r),d=0;d<o;d++){for(var h=0,f=l;f<u;f++)h+=e[f][t[d]];c[t[d]]=h/(u-l)}s[a++]=c}return s},d.prototype._onChange=function(e,t,i){for(var n=0,o=0,r=this._changes.order;o<r.length;o++){var s=r[o],a=this._changes.order.indexOf(s);if(s.id===t&&!s.saving&&(n+=1,a===this._changes.order.length-1||this._changes.order[a+1].id!==t))return s.error&&(s.error=!1),s=l(l({},s),{obj:i,status:e}),10<(n+=1)?this._changes.order.splice(a,n-10,s):this._changes.order.splice(a+1,0,s),this._loader.updateChanges(this._changes),"remove"===e&&i.$emptyRow?void 0:void this.events.fire(u.DataEvents.change,[t,e,i])}this._changes.order.push({id:t,status:e,obj:l({},i),saving:!1}),this._loader.updateChanges(this._changes),this.events.fire(u.DataEvents.change,[t,e,i])},d.prototype._addToOrder=function(e,t,i){0<=i&&e[i]?(this._pull[t.id]=t,e.splice(i,0,t)):(this._pull[t.id]=t,e.push(t))},d.prototype._applySmart=function(){this._filter&&this._applyFilters(),this._sorter&&this._applySorters()},d.prototype._applySorters=function(e){this._sort.sort(this._order,e,this._sorter),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,e,this._sorter)},d.prototype._applyFilters=function(t){var e,i=this._filter;t===i&&(t=null),(t||i)&&(e=this._order.filter(function(e){return(!t||t(e))&&(!i||i(e))}),this._initOrder||(this._initOrder=this._order),this._order=e)},d);function d(e,t){var n=this;this._changes={order:[]},this.config=e||{},this._sort=new s.Sort,this._loader=new r.Loader(this,this._changes),this.events=t||new o.EventSystem(this),this.events.on(u.DataEvents.dataRequest,function(e,t){var i=n.dataProxy;i&&i.updateUrl&&(i.updateUrl(null,{from:e,limit:i.config.limit||t-e}),n.load(i))}),this.events.on(u.DataEvents.loadError,function(e){setTimeout(function(){"string"!=typeof e?c.dhxError(e):c.dhxWarning(e)},0)}),this._reset()}t.DataCollection=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(68),r=i(69),i=i(129);t.dataDrivers={json:o.JsonDriver,csv:r.CsvDriver},t.dataDriversPro=n(n({},t.dataDrivers),{xml:i.XMLDriver})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.toJsonArray=function(e){return this.getRows(e)},o.prototype.serialize=function(e){return e},o.prototype.getFields=function(e){return e},o.prototype.getRows=function(e){return"string"==typeof e?JSON.parse(e):e},o);function o(){}t.JsonDriver=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=(r.prototype.getFields=function(e,t){for(var i=new RegExp('(?<!")'+this.config.columnDelimiter+'(?!")'),n=e.trim().split(i),o={},r=0;r<n.length;r++)o[t?t[r]:r+1]=isNaN(Number(n[r]))?n[r].replace(/"[,;"]"/gi,function(e){return e.split("").splice(1,1).slice(-1,1).join("")}):parseFloat(n[r]);return o},r.prototype.getRows=function(e){return e.trim().split(this.config.rowDelimiter)},r.prototype.toJsonArray=function(e){var t=this,i=this.getRows(e),n=this.config.names;return this.config.skipHeader&&(e=i.splice(0,this.config.skipHeader),this.config.nameByHeader&&(n=e[0].trim().split(this.config.columnDelimiter))),i.map(function(e){return t.getFields(e,n)})},r.prototype.serialize=function(e,t){var i=e[0]?Object.keys(e[0]).filter(function(e){return!e.startsWith("$")}).join(this.config.columnDelimiter)+this.config.columnDelimiter+this.config.rowDelimiter:"",e=this._serialize(e);return t?e:i+e},r.prototype._serialize=function(e){var o=this;return e.reduce(function(e,n){var t=Object.keys(n).reduce(function(e,t,i){return t.startsWith("$")||"items"===t?e:""+e+n[t].replaceAll(/[,;"]/gi,function(e){return'"'+e+'"'})+(i===n.length-1?"":o.config.columnDelimiter)},"");return n.items?e+(e?"\n":"")+t+o._serialize(n.items):""+e+(e?o.config.rowDelimiter:"")+t},"")},r);function r(e){this.config=n(n({},{skipHeader:0,nameByHeader:!1,rowDelimiter:"\n",columnDelimiter:","}),e),this.config.nameByHeader&&(this.config.skipHeader=1)}t.CsvDriver=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),g=this&&this.__assign||function(){return(g=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),r=i(4),l=i(3),p=i(1),c=i(20),u=i(7),h=i(11),d=i(134),_=i(25),f=i(37),m=i(21),v=i(135),y=i(10),b=i(71),w=i(16),x=i(159),C=i(160),E=i(17),S=i(161),I=i(18),k=i(28),o=(s=u.View,o(M,s),M.prototype.destructor=function(){this._destroyContent(),this.keyManager&&this.keyManager.destructor(),this.events.events={},this.events.context=null,this._activeFilters=this._filterData=this._scroll=this.content=null,this.unmount()},M.prototype.setColumns=function(e){var t=this;this.config.columns=e,this._parseColumns(!0),this._adjustColumns(),this._checkFilters(),this._checkMarks(),this.paint(),this.config.keyNavigation&&a.awaitRedraw().then(function(){t._initHotKey(!0),t.paint()})},M.prototype.addRowCss=function(e,t){var i=this.data.getItem(e),e=i.$css||"";e.match(new RegExp(t,"g"))||(i.$css=e+" "+t,this.paint())},M.prototype.removeRowCss=function(e,t){e=this.data.getItem(e),t=e.$css?e.$css.replace(t,""):"";e.$css=t,this.paint()},M.prototype.addCellCss=function(e,t,i){var n=this._getColumn(t),o=this.config.spans?this.getSpan(e,t):null;(o||n)&&((t=o?o.css:n.$cellCss[e])?(t=t.match(new RegExp(i,"g"))?"":" "+i,o?o.css+=t:n.$cellCss[e]+=t):this.data.getItem(e)&&(o?o.css=i+" ":n.$cellCss[e]=i+" "),this.paint())},M.prototype.removeCellCss=function(e,t,i){t=this._getColumn(t);t&&(t.$cellCss[e]?(t.$cellCss[e]=t.$cellCss[e].replace(i,""),this.paint()):this.data.getItem(e)&&(t.$cellCss[e]=""))},M.prototype.showColumn=function(e){var t=this._getColumn(e);t&&t.hidden&&this.events.fire(y.GridEvents.beforeColumnShow,[t])&&(t.hidden=!1,this.config.$totalWidth+=t.$width,(e=this._hiddenFilters&&this._hiddenFilters[t.id])&&(this._activeFilters[t.id]=e,delete this._hiddenFilters[t.id]),this.paint(),this._checkFilters(),this.events.fire(y.GridEvents.afterColumnShow,[t]))},M.prototype.hideColumn=function(e){var t,i=this,n=this._getColumn(e);n&&!n.hidden&&this.events.fire(y.GridEvents.beforeColumnHide,[n])&&(n.hidden=!0,this.config.$totalWidth-=n.$width,(e=this._activeFilters&&this._activeFilters[n.id])&&(this._hiddenFilters||(this._hiddenFilters={}),this._hiddenFilters[n.id]=e,delete this._activeFilters[n.id],this.data.filter()),this.paint(),e=this.content.comboFilter,t=function(){i._checkFilters(),i.events.fire(y.GridEvents.afterColumnHide,[n])},Object.keys(e.element).length?a.awaitRedraw().then(function(){i.paint(),t()}):t())},M.prototype.isColumnHidden=function(e){e=this._getColumn(e);if(e)return!!e.hidden},M.prototype.showRow=function(e){var t;p.isDefined(e)&&(t=e.toString(),(e=this.data.getItem(t))&&e.hidden&&this.events.fire(y.GridEvents.beforeRowShow,[e])&&(this.data.update(t,{hidden:!1}),this.data.filter(function(e){return!e.hidden}),this.events.fire(y.GridEvents.afterRowShow,[e])))},M.prototype.hideRow=function(e){var t;p.isDefined(e)&&(t=e.toString(),(e=this.data.getItem(t))&&this.events.fire(y.GridEvents.beforeRowHide,[e])&&(this.data.update(t,{hidden:!0}),this.data.filter(function(e){return!e.hidden}),this.events.fire(y.GridEvents.afterRowHide,[e])))},M.prototype.isRowHidden=function(e){if(p.isDefined(e)){e=this.data.getItem(e.toString());return e?!!e.hidden:void 0}},M.prototype.getScrollState=function(){return{x:this._scroll.left,y:this._scroll.top}},M.prototype.scroll=function(e,t){var i=this.getRootView().refs.grid_body.el.querySelector(".scroll-view")||this.getRootView().refs.grid_body.el;i.scrollLeft=!e&&0!==e||"number"!=typeof e?i.scrollLeft:e,i.scrollTop=!t&&0!==t||"number"!=typeof t?i.scrollTop:t,this.paint()},M.prototype.scrollTo=function(t,i){var e=this.selection.getCell(),n=this.config.columns.filter(function(e){return!e.hidden}),o=p.findIndex(n,function(e){return e.id==i}),r=e?e.column:this.config.columns[0],s=p.findIndex(n,function(e){return e.id==r.id}),a=this.config.leftSplit?m.getTotalWidth(n.slice(0,this.config.leftSplit)):0,l=m.getTotalWidth(n.slice(0,o))-(o-s<0?a:0),c=this.data.getRawData(0,-1),u=p.findIndex(c,function(e){return e.id==t}),d=m.getTotalHeight(c.slice(0,u)),h=this.getScrollState(),f=this.config.width+h.x,e=this.config.height+h.y-this.config.headerRowHeight*this.config.$headerLevel,s=d-h.y-c[u].$height,a=l-h.x-n[o].$width,e=d+2*c[u].$height+18-e,f=l+2*n[o].$width+18-f,e=0<s&&e<0?0:s<0?s:e,f=0<a&&f<0?0:a<0?a:f;this.scroll(f+h.x,e+h.y)},M.prototype.adjustColumnWidth=function(t,e){void 0===e&&(e=!0);var i=this.config.columns.filter(function(e){return!e.hidden}),n=i.filter(function(e){return e.id===t}),r=this._adjustColumnsWidth(this.config.data,n,e);this.config.$totalWidth=i.reduce(function(e,t){var i,n,o;return r[t.id]&&(t.$fixed=!0,i=t.maxWidth,n=t.minWidth,o=r[t.id],t.$width=o,i&&i<o&&(t.$width=i),n&&t.$width<n&&(t.$width=n)),e+t.$width},0),this.paint()},M.prototype.getCellRect=function(t,i){var e=this.config.columns.filter(function(e){return!e.hidden}),n=this.data.getRawData(0,-1),o=this.getSpan(t,i),r=p.findIndex(e,function(e){return e.id==(o?o.column:i)}),s=p.findIndex(n,function(e){return e.id==(o?o.row:t)});return{x:m.getTotalWidth(e.slice(0,r)),y:m.getTotalHeight(n.slice(0,s)),height:null!=o&&o.rowspan?f.getHeight(n,o.rowspan,s):n[s]?n[s].$height:0,width:null!=o&&o.colspan?f.getWidth(e,o.colspan,r):e[r]?e[r].$width:0}},M.prototype.getColumn=function(t){var e=p.findIndex(this.config.columns,function(e){return e.id==t});if(0<=e)return this.config.columns[e]},M.prototype.addSpan=function(t){this.config.spans=this.config.spans||[];var e=p.findIndex(this.config.spans,function(e){return""+e.row==""+t.row&&""+e.column==""+t.column});0<=e?this.config.spans[e]=t:(this.config.spans.push(k.normalizeSpan(t,this.config)),this._checkMarks(),this.paint())},M.prototype.getSpan=function(e,t){var r=this;if(this.config.spans){var s=this.data.getIndex(e.toString()),a=this.config.columns.findIndex(function(e){return e.id===t}),i=p.findIndex(this.config.spans,function(t){var e=r.data.getIndex(t.row.toString()),i=r.config.columns.findIndex(function(e){return e.id===t.column}),n=t.rowspan?e+t.rowspan:e+1,o=t.colspan?i+t.colspan:i+1;return e<=s&&s<n&&i<=a&&a<o});return null===(e=this.config)||void 0===e?void 0:e.spans[i]}},M.prototype.removeSpan=function(t,i){var e;this.config.spans&&(e=p.findIndex(this.config.spans,function(e){return""+e.row==""+t&&""+e.column==""+i}),this.config.spans.splice(e,1),this.paint())},M.prototype.editCell=function(e,t,i){var n,o=this.data.getItem(e),r=this.getColumn(t);o&&r?(n=r.editorType,i||("date"===r.type&&(i="datePicker"),"boolean"===r.type&&(i="checkbox"),n&&(i=n)),this.events.fire(y.GridEvents.beforeEditStart,[o,r,i])&&(null!==(n=this.config.$editable)&&void 0!==n&&n.editor||this.config.$editable&&this.config.$editable.row===e&&this.config.$editable.col===t&&this.config.$editable.editorType===i||(this.config.$editable={row:o.id,col:r.id,editorType:i},this.selection.config.disabled||this.selection.setCell(e.toString(),t.toString()),this.paint(),this.events.fire(y.GridEvents.afterEditStart,[o,r,i])))):h.dhxWarning("item not found")},M.prototype.editEnd=function(e){this.config.$editable&&this.config.$editable.editor&&this.config.$editable.editor.endEdit(e)},M.prototype.getSortingState=function(){return{dir:this._sortDir,by:this._sortBy}},M.prototype.getHeaderFilter=function(i){var n=this,e=this.getColumn(i);if(e){var o=null;return e.header.forEach(function(e){var t;e.content&&(t=n.content[e.content].element[i],o="comboFilter"===e.content?t:n.getRootView().refs[i+"_filter"].el)}),o}},M.prototype.edit=function(e,t,i){this.editCell(e,t,i)},M.prototype.paint=function(){var e=this.config.hotkeys?Object.keys(this.config.hotkeys).length:0;!this.keyManager||this.keyManager.getKeyStorageLength()-e||this._initHotKey(!0),s.prototype.paint.call(this)},M.prototype._createView=function(){var i=this;return a.create({render:function(e,t){return b.render(e,t,i._htmlEvents,i.selection,i._uid)}},this)},M.prototype._parseColumns=function(e){void 0===e&&(e=!1),_.normalizeColumns(this.config,e);e=this.config.columns.filter(function(e){return!e.hidden});_.countColumns(this.config,e)},M.prototype._parseData=function(){this.config.data=this._prepareData(this.data),this._detectColsTypes(),this._checkFilters(),this._checkMarks(),this.data.filter(function(e){return!e.hidden}),this._render()},M.prototype._createCollection=function(e){this.data=new h.DataCollection({prep:e},this.events)},M.prototype._getRowIndex=function(e){return this.data.getIndex(e)},M.prototype._setEventHandlers=function(){function i(e){return 1}var d=this;this.data.events.on(h.DataEvents.load,function(){d._parseData(),d._checkFilters()}),this.data.events.on(h.DataEvents.change,function(t,e,i){if("setPage"!==e){if("add"===e||"update"===e||"remove"===e?(!t||"remove"!==e||(n=d.selection.getCells().find(function(e){return e.row.id===t}))&&d.selection.removeCell(n.row.id,n.column.id),d.config.data=d._prepareData(d.data)):(h.isTreeCollection(d.data)&&(d.config.data=d._prepareData(d.data)),d._adjustColumns()),t&&(d._filterData=d.data.map(function(e){return e})||[],d._checkFilters()),d._detectColsTypes(),d._removeMarks(),d._checkMarks(),d.config.autoEmptyRow&&(!d._activeFilters||p.isEmptyObj(d._activeFilters))){var n=d.data.find({by:"$emptyRow",match:!0});if(n){if(n.id===t)return;d.data.move(n.id,d.data.getLength()-1)}else d._addEmptyRow()}d._render()}else a.awaitRedraw().then(function(){var e=d.config.columns.find(function(e){return!0!==e.hidden});d.scrollTo(d.data.getId(i[0]).toString(),e.id.toString()),d._render()})}),this.data.events.on(h.DataEvents.removeAll,function(){d.config.columns.map(function(t){t.header.map(function(e){!e.content||"selectFilter"!==e.content&&"comboFilter"!==e.content||(t.$uniqueData=[])})})}),this.events.on(h.DragEvents.beforeDrag,function(e,t){return d.data.getItem(e.start)?d.events.fire(y.GridEvents.beforeRowDrag,[e,t]):"column"===d.config.dragItem||"both"===d.config.dragItem?d.events.fire(y.GridEvents.beforeColumnDrag,[e,t]):void 0}),this.events.on(h.DragEvents.dragStart,function(e,t){i({$dragtarget:!0}),d.data.getItem(e.start)?d.events.fire(y.GridEvents.dragRowStart,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.dragColumnStart,[e,t])}),this.events.on(h.DragEvents.dragIn,function(e,t){d.data.getItem(e.start)?d.events.fire(y.GridEvents.dragRowIn,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.dragColumnIn,[e,t])}),this.events.on(h.DragEvents.dragOut,function(e,t){d.data.getItem(e.start)?d.events.fire(y.GridEvents.dragRowOut,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.dragColumnOut,[e,t])}),this.events.on(h.DragEvents.canDrop,function(e,t){i({$drophere:!0}),d.data.getItem(e.start)||d.data.getItem(e.target)?d.events.fire(y.GridEvents.canRowDrop,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.canColumnDrop,[e,t])}),this.events.on(h.DragEvents.cancelDrop,function(e,t){i({$drophere:void 0}),d.data.getItem(e.start)?d.events.fire(y.GridEvents.cancelRowDrop,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.cancelColumnDrop,[e,t])}),this.events.on(h.DragEvents.beforeDrop,function(e,t){return"row"!==d.config.dragItem||"both"!==d.config.dragMode&&"target"!==d.config.dragMode?"column"===d.config.dragItem||"both"===d.config.dragItem?d.events.fire(y.GridEvents.beforeColumnDrop,[e,t]):void 0:d.events.fire(y.GridEvents.beforeRowDrop,[e,t])}),this.events.on(h.DragEvents.afterDrop,function(t,e){var i;if(d.data.getItem(t.start)){d.events.fire(y.GridEvents.afterRowDrop,[t,e]);for(var n=d.data.getItem(t.start),o=0,r=d.config.columns;o<r.length;o++){var s=r[o];void 0===n[s.id]&&d.data.update(n.id,((i={})[s.id]=null,i),!0)}var a,l=d.data.getInitialData(),c=null==l?void 0:l.findIndex(function(e){return e.id.toString()===t.start}),u=null==l?void 0:l.findIndex(function(e){return e.id.toString()===t.target});for(a in-1<c&&-1<u&&null!=l&&l.splice(u,0,null==l?void 0:l.splice(c,1)[0]),d.config.data=d._prepareData(l||d.data.map(function(e){return e})),d.data.parse(d.config.data),d._activeFilters)d.data.filter(d._activeFilters[a],{add:!0})}else"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.afterColumnDrop,[t,e])}),this.events.on(h.DragEvents.afterDrag,function(e,t){i({$dragtarget:void 0}),d.data.getItem(e.start)?d.events.fire(y.GridEvents.afterRowDrag,[e,t]):"column"!==d.config.dragItem&&"both"!==d.config.dragItem||d.events.fire(y.GridEvents.afterColumnDrag,[e,t]),d.config.data=d._prepareData(d.data instanceof Array?d.data.map(function(e){return e}):d.data.getInitialData()||d.data),d.data.parse(d.config.data)}),this.events.on(y.GridEvents.cellMouseDown,function(e,t,i){i.targetTouches?(d._touch.timer=setTimeout(function(){d._dragStart(i)},d._touch.duration),d._touch.timeStamp?(d._touch.dblDuration>=d._touch.timeStamp-+i.timeStamp.toFixed()&&((!1!==t.editable&&d.config.editable||t.editable)&&d.editCell(e.id,t.id,t.editorType),i.preventDefault(),d.events.fire(y.GridEvents.cellDblClick,[e,t,i])),d._touch.timeStamp=null):d._touch.timeStamp=+i.timeStamp.toFixed(),setTimeout(function(){d._touch.timeStamp=null},d._touch.dblDuration)):d._dragStart(i)}),this._events.on(y.GridSystemEvents.cellTouchMove,function(e,t,i){d._touch.start&&i.preventDefault(),d._clearTouchTimer()}),this._events.on(y.GridSystemEvents.cellTouchEnd,function(){d._touch.start=!1,d._clearTouchTimer()}),this.events.on(y.GridEvents.filterChange,function(t,e,o){var i;t=null!=t?t:"",!d.config.autoEmptyRow||(i=d.data.find({by:"$emptyRow",match:!0}))&&d.data.remove(i.id),d._activeFilters||(d._activeFilters={});var n,r,s,a=d._getColumn(e),l=a.header.filter(function(e){return e.content===o&&void 0!==e.customFilter})[0];for(s in""!==t?("combobox"!==a.editorType&&"select"!==a.editorType&&"multiselect"!==a.editorType||!a.options||(t=Array.isArray(t)?t.map(function(t){var e;return(null===(e=a.options.find(function(e){return"string"==typeof e?e===t:e.value===t}))||void 0===e?void 0:e.id)||t}):null!==(i=null===(i=a.options.find(function(e){return"string"==typeof e?e===t:e.value===t}))||void 0===i?void 0:i.id)&&void 0!==i?i:t),d._activeFilters[e]={by:e,match:t,compare:null!==(l=null==l?void 0:l.customFilter)&&void 0!==l?l:(n=e,r=d._getColumn(n),function(e,t,i,n){return d.content[o].match({val:e,match:t,obj:i,multi:n,col:r})}),multi:"multiselect"===(null==a?void 0:a.editorType)}):delete d._activeFilters[e],d.data.filter(function(e){return!e.hidden}),d._activeFilters)d.data.filter(d._activeFilters[s],{add:!0})}),this.events.on(y.GridEvents.scroll,function(e){d._scroll={top:e.y,left:e.x},d.editEnd(),d.paint()}),this.events.on(y.GridEvents.cellDblClick,function(e,t){(!1!==t.editable&&d.config.editable||t.editable)&&d.editCell(e.id,t.id,t.editorType)}),this.events.on(y.GridEvents.afterEditEnd,function(e,t,i){var n,o;null!==(n=d.config.$editable)&&void 0!==n&&n.editor&&(d.config.$editable.col!==i.id||d.config.$editable.row!==t.id)||(t=d.config.$editable?(o=d.config.$editable.row,d.config.$editable.col):(o=t.id,i.id),delete(i=d.data.getItem(o)).$emptyRow,void 0!==e&&d.data.update(o,g(g({},i),((i={})[t]=e,i))),d.config.$editable=null,d._checkFilters(),d.paint())}),this.events.on(y.GridEvents.headerCellMouseDown,function(e,t){var i=t.target.getAttribute("dhx_resized");i&&d.events.fire(y.GridEvents.beforeResizeStart,[e,t])&&C.startResize(d,i.toString(),t,function(){d.paint(),d.config.$resizing=null,d.events.fire(y.GridEvents.afterResizeEnd,[e,t])}),t.targetTouches&&(d._touch.timeStamp?(d._touch.dblDuration>=d._touch.timeStamp-+t.timeStamp.toFixed()&&(t.preventDefault(),d.events.fire(y.GridEvents.headerCellDblClick,[e,t])),d._touch.timeStamp=null):d._touch.timeStamp=+t.timeStamp.toFixed(),setTimeout(function(){d._touch.timeStamp=null},d._touch.dblDuration))}),this.events.on(y.GridEvents.footerCellDblClick,function(e,t){t.targetTouches&&(d._touch.timeStamp?(d._touch.dblDuration>=d._touch.timeStamp-+t.timeStamp.toFixed()&&(t.preventDefault(),d.events.fire(y.GridEvents.footerCellDblClick,[e,t])),d._touch.timeStamp=null):d._touch.timeStamp=+t.timeStamp.toFixed(),setTimeout(function(){d._touch.timeStamp=null},d._touch.dblDuration))}),this.events.on(y.GridEvents.resize,function(){d._parseColumns(),d._checkFilters()}),this.events.on(y.GridEvents.afterResizeEnd,function(t){var e;d.config.columns=null===(e=d.config.columns)||void 0===e?void 0:e.map(function(e){return e.id==t.id&&(e.width=t.$width),e}),d._parseColumns(!0),d._checkFilters()})},M.prototype._addEmptyRow=function(){var e=this.data.getId(this.data.getLength()-1),t=this.data.getItem(e),e=this.config.columns.filter(function(e){return!e.hidden});m.isRowEmpty(t)||this.data.add(e.reduce(function(e,t){return e[t.id]="",e},{$emptyRow:!0}))},M.prototype._sort=function(i,e,t){var n=this;e?this._sortDir=e:this._sortBy===i?this._sortDir="asc"===this._sortDir?"desc":"asc":this._sortDir="asc";this._sortBy=i,this.data.sort({by:i,dir:this._sortDir,as:null!=t?t:function(e){var t=n.getColumn(i);return e&&"date"===t.type?("string"==typeof e?w.stringToDate(e,t.format):e).getTime():e?""+e:""}}),this.events.fire(y.GridEvents.afterSort,[this.getColumn(i),this._sortDir])},M.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},M.prototype._checkFilters=function(){var o=this,r=this._filterData;if(r){this.config.columns.forEach(function(o){o.header.forEach(function(e){var t,i,n;!e.content||"selectFilter"!==e.content&&"comboFilter"!==e.content||(i=o.header.find(function(e){return e.filterConfig}),n=[],"comboFilter"===e.content&&null!==(t=e.filterConfig)&&void 0!==t&&t.readonly&&n.push(""),n.push.apply(n,_.getUnique(r,o.id,i?i.filterConfig.multiselection:null)),o.$uniqueData&&o.$uniqueData.length>n.length?n.forEach(function(e){o.$uniqueData.includes(e)||o.$uniqueData.push(e)}):o.$uniqueData=n)})});var e,s=this;for(e in this._activeFilters)!function(t){var i=s.config.columns.find(function(e){return e.id===t}),e=i.header.find(function(e){return!!e.content}),n=!1,n=Array.isArray(s._activeFilters[t].match)?s._activeFilters[t].match.reduce(function(e,t){if(i.$uniqueData.find(function(e){return e.toString()===t}))return!0},!1):i.$uniqueData.find(function(e){return e.toString()===o._activeFilters[t].match});!e||"selectFilter"!==e.content&&"comboFilter"!==e.content||n?s.data.filter(s._activeFilters[t],{add:!0}):(delete s._activeFilters[t],s.data.filter())}(e)}},M.prototype._adjustColumns=function(){var e,r,t,i=this;"boolean"==typeof this.config.adjust||"data"===this.config.adjust||"header"===this.config.adjust||"footer"===this.config.adjust?(t=this.config.columns.filter(function(e){return!e.hidden})).length&&(e=this.config.data&&this.config.data.length?this.config.data:this.data.map(function(e){return e}),r=this._adjustColumnsWidth(e,t),this.config.$totalWidth=t.reduce(function(e,t){t.$fixed=!0;var i=t.maxWidth,n=t.minWidth,o=r[t.id];return t.$width=o,i&&i<o&&(t.$width=i),n&&t.$width<n&&(t.$width=n),e+t.$width},0)):(t=this.config.columns.filter(function(e){return!e.hidden&&e.adjust})).length&&t.forEach(function(e){i.adjustColumnWidth(e.id,e.adjust)})},M.prototype._prepareData=function(e){var t=this;return this.config.autoHeight&&(this.config.autoHeight=!1),this._adjustColumns(),e.map(function(e){return e.$height=e.height||t.config.rowHeight,e})},M.prototype._adjustColumnsWidth=function(e,t,i){void 0===i&&(i=this.config.adjust);var n={};if("header"===i||!0===i){var o=t.filter(function(e){return e.header});if(u=_.getMaxColsWidth(this._prepareColumnData(o,"header"),o,{font:"bold 14.4px Arial"},"header"))for(var r=0,s=Object.entries(u);r<s.length;r++)var a=s[r],l=a[0],c=a[1],n=Object.assign(n,((a={})[l]=+c+(m.isSortable(this.config,this.getColumn(l))?36:16),a))}if("footer"===i||!0===i){var u,o=t.filter(function(e){return e.footer});if(u=_.getMaxColsWidth(this._prepareColumnData(o,"footer"),o,{font:"bold 14.4px Arial"},"footer"))for(var d=0,h=Object.entries(u);d<h.length;d++){var f=h[d],l=f[0],c=f[1];(n[l]&&n[l]<+c+16||!n[l])&&(n=Object.assign(n,((f={})[l]=+c+16,f)))}}if(("data"===i||!0===i)&&(u=_.getMaxColsWidth(e,t,{font:"normal 14.4px Arial"},"data")))for(var p=0,g=Object.entries(u);p<g.length;p++){var v=g[p],l=v[0],c=v[1];(n[l]&&n[l]<+c+16||!n[l])&&(n=Object.assign(n,((v={})[l]=+c+16,v)))}return n},M.prototype._prepareColumnData=function(e,t){for(var i,n,o=[],r=0;r<e.length;r++){for(var s=[],a=0;a<(null===(i=e[a])||void 0===i?void 0:i[t].length);a++){var l={};null!==(i=null===(i=e[r])||void 0===i?void 0:i[t][a])&&void 0!==i&&i.text?(l[e[r].id]=(null===(n=null===(n=e[r])||void 0===n?void 0:n[t][a])||void 0===n?void 0:n.text)||"",s.push(l)):null!==(n=null===(n=e[r])||void 0===n?void 0:n[t][a])&&void 0!==n&&n.content&&(l[e[r].id]=this.content[null===(n=null===(n=e[r])||void 0===n?void 0:n[t][a])||void 0===n?void 0:n.content].toHtml(this.getColumn(e[r].id),this.config)||"",s.push(l))}for(var c=0;c<s.length;c++)for(var u=0,d=Object.entries(s[c]);u<d.length;u++){var h=d[u],f=h[0],p=h[1];o[c]=g({},o[c])||{},o[c]=Object.assign(o[c],((h={})[f]=p,h))}}return o},M.prototype._dragStart=function(e){if(this.config.dragMode&&("row"===this.config.dragItem||"both"===this.config.dragItem)&&!this.config.$editable){var t=this._getColumn(e.target.getAttribute("data-dhx-col-id"));if(!1!==(null==t?void 0:t.draggable)){t=l.locateNode(e,"data-dhx-id"),t=t&&t.getAttribute("data-dhx-id");return e.targetTouches&&(this._touch.start=!0),h.dragManager.onMouseDown(e,[t])}}},M.prototype._getColumn=function(e){for(var t=0,i=this.config.columns;t<i.length;t++){var n=i[t];if(n.id==e)return n}},M.prototype._init=function(){this.events=new r.EventSystem(this),this._events=new r.EventSystem(this),this._attachDataCollection(),this.export=new d.Exporter(this),this._setEventHandlers()},M.prototype._attachDataCollection=function(){var t=this;if(this.config.data instanceof h.DataCollection)return this.data=this.config.data,void(this.config.data=this.data.serialize());this._createCollection(function(e){return e.spans&&(t.config.spans=e.spans,e=e.data),e})},M.prototype._setMarks=function(o,r){for(var e=this.data.map(function(e){return{id:e.id,data:e[o.id],row:e}}),s=this.data.map(function(e){return e[o.id]}),a=this,t=0,i=e;t<i.length;t++)!function(e){var t,i,n=r(e.data,s,e.row,o);n&&(o.$cellCss=o.$cellCss||{},t=(o.$cellCss[e.id]||"").split(" "),n.split(" ").map(function(e){t.includes(e)||t.push(e)}),i=t.join(" "),n=a.getSpan(e.id,o.id),o.$cellCss[e.id]=i,n&&(n.rowspan||n.colspan&&n.column===o.id)&&n.$markCss!==i&&(n.$markCss=i))}(i[t])},M.prototype._checkMarks=function(){var t=this;this.config.columns.map(function(e){var o=e.mark;o&&("function"==typeof o?t._setMarks(e,o):t._setMarks(e,function(e,t){var i=[];t.forEach(function(e){null!=e&&""!==e&&i.push(parseFloat(e))});var n=p.getMinArrayNymber(i),t=p.getMaxArrayNymber(i);return o.max&&t===parseFloat(e)?o.max:!(!o.min||n!==parseFloat(e))&&o.min}))})},M.prototype._removeMarks=function(){var e;this.config.columns.forEach(function(e){e.mark&&(e.$cellCss={})}),null!==(e=this.config.spans)&&void 0!==e&&e.forEach(function(e){e.$markCss&&delete e.$markCss})},M.prototype._detectColsTypes=function(){this.config.columns.forEach(function(e){return e.type?e:e.format?(e.type="number",e):void(e.type||(e.type="string"))})},M.prototype._destroyContent=function(){for(var e in this.content)"comboFilter"===e&&this.content[e].destroy()},M.prototype._render=function(){this.paint()},M.prototype._initHotKey=function(e){void 0===e&&(e=!1);var t=S.getKeysHandlers(this);for(i in t)this.keyManager.exist(i)||this.keyManager.addHotKey(i,t[i]);if(!e)for(var i in this.config.hotkeys)this.keyManager.addHotKey(i,this.config.hotkeys[i])},M);function M(e,t){var r=s.call(this,e,t)||this;r._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null},r.config=p.extend({rowHeight:40,headerRowHeight:40,footerRowHeight:40,keyNavigation:!0,sortable:!0,columns:[],data:[],tooltip:!0,rootParent:"string"==typeof e&&e||r._uid,headerSort:!0},t),r.content=x.getContent(),r._scroll={top:0,left:0};function i(){var e;r.config.spans=null===(e=r.config.spans)||void 0===e?void 0:e.map(function(e){return k.normalizeSpan(e,r.config)})}r.config.data instanceof h.DataCollection?a.awaitRedraw().then(i):i(),r.config.autoWidth=r.config.autoWidth||r.config.fitToContainer,r.config.adjust=r.config.adjust||r.config.columnsAutoWidth,r.config.editable=r.config.editable||r.config.editing,r.config.leftSplit=r.config.leftSplit||r.config.splitAt,r.config.sortable&&r.config.headerSort||(r.config.sortable=!1),r.config.columns.forEach(function(e){e.format=e.format||e.dateFormat});function n(e,t,i){var n,o;e&&t&&m.isTooltip(r.config,t)&&(n=_.toFormat(e[t.id],t.type,t.format),o=function(){return!!n||"boolean"==typeof n},t.tooltipTemplate?n=t.tooltipTemplate(n,e,t)||null:o()&&t.template&&(n=t.template(n,e,t)),o()&&E.tooltip(n.toString(),{css:"dhx_grid_tooltip",node:i,htmlEnable:m.isHtmlEnable(r.config,t)}))}function o(e,t){var i;t&&m.isTooltip(r.config,t)&&((i=e.target.querySelector(".dhx_grid-header-cell-text span")&&e.target.querySelector(".dhx_grid-header-cell-text span").textContent||e.target.querySelector(".dhx_grid-footer-cell-text span")&&e.target.querySelector(".dhx_grid-footer-cell-text span").textContent||"")&&E.tooltip(i,{css:"dhx_grid_tooltip",node:e.target,htmlEnable:m.isHtmlEnable(r.config,t)}))}return r._htmlEvents={onclick:l.eventHandler(function(e){return l.locate(e)},{"dhx_grid-header-cell--sortable":function(e,t){var i,n=e.target.getAttribute("dhx_resized"),o=r._getColumn(t);o&&m.isSortable(r.config,o)&&!n&&r.events.fire(y.GridEvents.beforeSort,[o,r._sortDir?"asc":"desc"])&&(e=(i=null===(e=l.locateNodeByClassName(e,"dhx_grid-header-cell"))||void 0===e?void 0:e.querySelector(".dhx_grid-header-cell-text_content").innerHTML)?o.header.find(function(e){return e.text===i}):null,o="asc"===r._sortDir&&r._sortBy===t?"desc":"asc",r._sort(t,o,null==e?void 0:e.sortAs))},"dhx_grid-expand-cell":function(e,t){e.target.classList.contains("dhx_grid-expand-cell-icon")&&r.events.fire(y.GridEvents.expand,[t])}}),onscroll:function(e){r.events.fire(y.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])},onmouseover:{".dhx_grid-cell.dhx_boolean-cell .dhx_checkbox.dhx_cell-editor__checkbox":function(e){var t=e.composedPath(),i=r.data.getItem(t[2].getAttribute("data-dhx-id")),t=r._getColumn(t[1].getAttribute("data-dhx-col-id"));n(i,t,e.target)},".dhx_grid-cell:not(.dhx_boolean-cell)":function(e){var t=r.data.getItem(e.composedPath()[1].getAttribute("data-dhx-id")),i=r._getColumn(e.target.getAttribute("data-dhx-col-id"));n(t,i,e.target)},".dhx_grid-cell:not(.dhx_tree-cell) .dhx_grid-cell__content, .dhx_tree-cell :not(.dhx_grid-cell__content)":function(e){var t=e.composedPath(),i=r.data.getItem(t[2].getAttribute("data-dhx-id")),t=r._getColumn(t[1].getAttribute("data-dhx-col-id"));n(i,t,e.target)},".dhx_grid-cell.dhx_tree-cell .dhx_grid-cell__content":function(e){var t=e.composedPath(),i=r.data.getItem(t[3].getAttribute("data-dhx-id")),e=r._getColumn(t[2].getAttribute("data-dhx-col-id"));n(i,e,t[2])},".dhx_span-cell:not(.dhx_grid-header-cell)":function(e){var t,i=r.data.getItem(e.target.getAttribute("data-dhx-id")),n=r._getColumn(e.target.getAttribute("data-dhx-col-id")),o=r.getSpan(i.id,n.id);i&&o&&m.isTooltip(r.config,o)&&(t=o.text||_.toFormat(i[n.id],n.type,n.format),o.tooltipTemplate?t=o.tooltipTemplate(t,o):n.template&&(t=n.template(t,i,n)),t&&E.tooltip(t,{css:"dhx_grid_tooltip",node:e.target,htmlEnable:!0}))},".dhx_grid-header-cell:not(.dhx_span-cell)":function(e){var t=r._getColumn(e.target.getAttribute("data-dhx-id"));o(e,t)},".dhx_grid-footer-cell:not(.dhx_span-cell)":function(e){var t=r._getColumn(e.target.getAttribute("data-dhx-id"));o(e,t)},".dhx_grid-header-cell.dhx_span-cell":function(e){var t=r._getColumn(e.target.getAttribute("data-dhx-id")),i=t&&t.header.find(function(e){return!(!e.rowspan&&!e.colspan)});t&&i&&m.isTooltip(r.config,t)&&((i=i.text||"")&&E.tooltip(i,{css:"dhx_grid_tooltip",node:e.target,htmlEnable:m.isHtmlEnable(r.config,t)}))},".dhx_grid-header-cell-text_content":function(e){var t=e.composedPath(),i=r._getColumn(t[1].getAttribute("data-dhx-id"));i&&m.isTooltip(r.config,i)&&((e=t[2].querySelector(".dhx_grid-header-cell-text_content")&&t[2].querySelector(".dhx_grid-header-cell-text_content").textContent||"")&&E.tooltip(e,{css:"dhx_grid_tooltip",node:t[1],htmlEnable:m.isHtmlEnable(r.config,i)}))}}},(r.config.dragMode||r.config.dragItem)&&(h.dragManager.setItem(r._uid,r),r.config.dragItem||(r.config.dragItem="row"),r.config.dragMode||(r.config.dragMode="both")),r._init(),r.config.columns&&r._parseColumns(!0),r.config.data&&r.config.data instanceof Array&&r.config.data.length&&r.config.columns&&r.data.parse(r.config.data),r.selection=new v.Selection(r,{disabled:!r.config.selection},r.events,r._uid),r.mount(e,r._createView()),r.config.autoWidth&&r.config.autoHeight&&r._prepareData(r.config.data),a.awaitRedraw().then(function(){r.config.keyNavigation&&(r.keyManager=new c.KeyManager(function(e,t){return!(t!==r._uid||!r.events.fire(y.GridEvents.beforeKeyDown,[e]))&&(r.events.fire(y.GridEvents.afterKeyDown,[e]),!0)}),r._initHotKey(),I.focusManager.setFocusId(r._uid))}),t.autoEmptyRow&&0===r.data.getLength()&&(r._addEmptyRow(),r.paint()),r}t.Grid=o},function(e,t,i){"use strict";var y=this&&this.__assign||function(){return(y=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var b=i(0),w=i(3),a=i(25),x=i(21),C=i(28),E=i(85),S=i(86),I=i(1),k=2;function M(e,t,i){var n=e.config,o=n.columns.filter(function(e){return!e.hidden}),r=a.calculatePositions(i.width,i.height,e._scroll,n,t),s=o.slice(r.xStart,r.xEnd),i=t.slice(r.yStart,r.yEnd);return y(y({},n),{data:t,columns:o,scroll:e._scroll,$positions:r,headerHeight:n.$headerLevel*n.headerRowHeight,footerHeight:n.$footerLevel*n.footerRowHeight,firstColId:o[0]&&o[0].id,events:e.events,_events:e._events,currentColumns:s,currentRows:i,sortBy:e._sortBy,sortDir:e._sortDir,content:e.content,gridId:e._uid,$renderFrom:"render"})}function P(e){if(e&&(e.tagName||(e=e._parent._container),e)){var t=e.currentStyle||window.getComputedStyle(e),i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)||0,t=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)||0;return{width:e.clientWidth-i,height:e.clientHeight-t}}}function O(e,t){var i,n=C.getCells(e),o=e.columns,r=e.$resizing,s=e.$totalHeight,a=e.$totalWidth,l=e.leftSplit,c=e.data,u=e.$positions,d=e.currentRows,h=e.currentColumns,f=e.eventHandlers,p=C.getSpans(e);r&&(i=I.findIndex(o,function(e){return e.id===r}),v=x.getTotalWidth(o.slice(0,i))+o[i].$width,i=b.el(".dhx_grid-resize-line",{style:{top:0,left:v,height:s}}));var g,v="string"==typeof(v=e.selection?e.selection.toHTML():null)?b.el("div.dhx_selection",{".innerHTML":v}):v,u=u,_={};if(f)for(var m in f)f.hasOwnProperty(m)&&(g=f[m],_[m]=w.eventHandler(function(e){return t=e,i=w.locate(t,"data-dhx-id"),n=w.locate(t,"data-dhx-col-id"),e=d.filter(function(e){return e.id.toString()===i})[0],t=h.filter(function(e){return e.id===n})[0],{row:i?e:{},col:n?t:{}};var t,i,n},y({},g)));return b.el(".dhx_data-wrap",y({style:{height:s,width:a,"padding-left":t.x,"padding-top":t.y},role:"presentation"},_),[b.el(".dhx_grid_data"+(l?".dhx_grid_fixed_left":""),y(y({_flags:b.KEYED_LIST},C.getHandlers(u.yStart,u.xStart,e)),{role:"rowgroup","aria-rowcount":c.length}),n),b.el(".dhx_span-spans",{role:"presentation"},p),b.el(".dhx_grid_selection",{_ref:"selection","aria-hidden":"true"},[v,i])])}function D(e,t,i){i=i.height-k,i=t?i:i-e.headerHeight;return!e.$footer||t?i:i-e.footerHeight}function F(t,e,o,r,i){void 0===o&&(o=!0),void 0===r&&(r=!1),void 0===i&&(i=!1);var s,n=!i&&t.$totalHeight>=e.height-t.headerRowHeight?w.getScrollbarWidth():0,a=e.width-k-n,l=t.columns.filter(function(e){return!e.hidden}),n=l.filter(function(e){return!e.width&&!e.$fixed&&x.isAutoWidth(t,e)}),c=x.getTotalWidth(l.filter(function(e){return e.width||e.$fixed||!x.isAutoWidth(t,e)})),u=n.reduce(function(e,t){return e+(t.gravity||1)},0);a<t.$totalWidth?(s=n.reduce(function(e,t){return e+(t.maxWidth||t.$width)},0),n.length&&n.forEach(function(e){var t=0,i=(t=o?Math.abs(a-s)*((e.gravity||1)/u):Math.abs(a-c)*((e.gravity||1)/u))<e.minWidth,n=t>e.maxWidth;i||n?i?(c+=e.$width-t,e.$fixed=!0):n&&(e.$width=e.maxWidth,e.$fixed=!0):e.$width=t,e.$width<20&&(e.$width=20)})):n.forEach(function(e){var t=Math.abs(a-c)*((e.gravity||1)/u),i=t<e.minWidth,n=t>e.maxWidth;i||n?i?(c+=e.$width-t,r&&(e.$fixed=!0)):n&&(e.$width=e.maxWidth,r&&(e.$fixed=!0)):e.$width=t,e.$width<20&&(e.$width=20),!o&&e.$fixed&&delete e.$fixed}),o&&F(t,e,!1,r,i)}t.getRenderConfig=M,t.render=function(e,t,i,n,o){t._container||(t.config.width=1,t.config.height=1),e&&e.node&&e.node.parent&&e.node.parent.el&&(m=P(e.node.parent.el),t.config.width=m.width,t.config.height=m.height);var r=t.config;if(!r)return b.el("div");if(!r.columns.length)return b.el(".dhx_grid",{"data-dhx-root-id":r.rootParent});var s=t.data.getRawData(0,-1,null,2);r.columns.reduce(function(e,t){return t.hidden&&e},!0)?r.$totalHeight=0:r.$totalHeight=s.reduce(function(e,t){return e+(t.$height||0)},0);var a=P(t._container),l={width:r.width||a&&a.width||0,height:r.height||a&&a.height||0};x.isAutoWidth(r)&&(F(r,l),r.$totalWidth=x.getTotalWidth(r.columns.filter(function(e){return!e.hidden}))),r.width=l.width,r.height=l.height;var c=M(t,s,l);c.selection=n,c.datacollection=t.data;var u,d,h,f,p=C.getShifts(c),g=x.isCssSupport("position","sticky"),v=D(c,g,l),_={wrapper:l,sticky:g,shifts:p,gridBodyHeight:v},m=S.getFixedRows(c,y(y({},_),{name:"header",position:"top"})),a=c.$footer?S.getFixedRows(c,y(y({},_),{name:"footer",position:"bottom"})):null,s=c.$totalWidth+k<l.width?"dhx_grid-less-width":"",n=c.$totalHeight+k<l.height?"dhx_grid-less-height":"";return e.node||(e=t.getScrollState(),u=e.x,d=e.y,b.awaitRedraw().then(function(){t.scroll(u,d)})),b.el(".dhx_grid.dhx_widget",y({class:(c.css||"")+(g?"":" dhx_grid_border")+(r.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":o,"data-dhx-root-id":r.rootParent},(h=c.data,f=r.columns,e=c.editable,o=c.multiselection,{role:"grid","aria-rowcount":h.length,"aria-colcount":f.filter(function(e){return!e.hidden}).length,"aria-readonly":e?"false":"true","aria-multiselectable":o?"true":"false"})),[b.resizer(function(e){return x.isAutoWidth(t.config)&&e&&(r.$totalWidth=0,F(r,l,!0,!0)),t.paint()}),b.el(".dhx_grid-content",{style:y({},l),onclick:i.onclick,onmouseover:i.onmouseover,class:(s+" "+n).trim(),role:"presentation"},[g?null:m,b.el(".dhx_grid-body",{style:{height:v,width:l.width-k},onscroll:i.onscroll,_ref:"grid_body",role:"presentation"},[b.el("div",{},[g?m:null,O(c,p),g?a:null])]),E.getFixedColsHeader(c,_),E.getFixedCols(c,_),S.getFixedDataRows(c,_),g?null:a])])},t.proRender=function(e,t,i,n,o){t._container||(t.config.width=1,t.config.height=1),e&&e.node&&e.node.parent&&e.node.parent.el&&(v=P(e.node.parent.el),t.config.width=v.width,t.config.height=v.height);var r=t.config;if(!r)return b.el("div");if(!r.columns.length)return b.el(".dhx_grid",{"data-dhx-root-id":r.rootParent});var s=t.data.getRawData(0,-1,null,2);r.columns.reduce(function(e,t){return t.hidden&&e},!0)?r.$totalHeight=0:r.$totalHeight=s.reduce(function(e,t){return e+(t.$height||0)},0);var a=P(t._container),l={width:r.width||a&&a.width||0,height:r.height||a&&a.height||0};x.isAutoWidth(r)&&(F(r,l,!0,!1,t.scrollView&&t.scrollView.config.enable),r.$totalWidth=x.getTotalWidth(r.columns.filter(function(e){return!e.hidden}))),r.width=l.width,r.height=l.height;var c=M(t,s,l);c.selection=n,c.datacollection=t.data;var u,d,h=C.getShifts(c),f=x.isCssSupport("position","sticky"),p=D(c,f,l),g={wrapper:l,sticky:f,shifts:h,gridBodyHeight:p},v=S.getFixedRows(c,y(y({},g),{name:"header",position:"top"})),a=c.$footer?S.getFixedRows(c,y(y({},g),{name:"footer",position:"bottom"})):null,s=c.$totalWidth+k<l.width?"dhx_grid-less-width":"",n=c.$totalHeight+k<l.height?"dhx_grid-less-height":"";return e.node||(e=t.getScrollState(),u=e.x,d=e.y,b.awaitRedraw().then(function(){t.scroll(u,d)})),h=b.el("div",{},[f?v:null,O(c,h),f?a:null]),b.el(".dhx_grid.dhx_widget",{class:(c.css||"")+(f?"":" dhx_grid_border")+(r.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":o,"data-dhx-root-id":r.rootParent,role:"grid","aria-rowcount":c.data.length,"aria-colcount":r.columns.filter(function(e){return!e.hidden}).length},[b.resizer(function(e){return x.isAutoWidth(t.config)&&e&&(r.$totalWidth=0,F(r,l,!0,!0)),t.paint()}),b.el(".dhx_grid-content",{style:y({},l),onclick:i.onclick,onmouseover:i.onmouseover,class:(s+" "+n).trim(),role:"presentation"},[f?null:v,b.el(".dhx_grid-body",{style:{height:p,width:l.width-k},onscroll:i.onscroll,_ref:"grid_body",role:"presentation"},[t.scrollView&&t.scrollView.config.enable?t.scrollView.render([h]):h]),E.getFixedColsHeader(c,g),E.getFixedCols(c,g),S.getFixedDataRows(c,g),f?null:a])])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(54),a=i(73),l=i(0),o=(r=a.Cell,o(c,r),c.prototype.destructor=function(){for(var e=0,t=this._all;e<t.length;e++){var i=t[e];this._all[i].destructor()}this.config=this._cells=this._root=this._xLayout=this._isViewLayout=null,this._all={},this.unmount()},c.prototype.toVDOM=function(){if(this._isViewLayout){var e=[this.getCell(this.config.activeView).toVDOM()];return r.prototype.toVDOM.call(this,e)}var t=[];return this._inheritTypes(),this._cells.forEach(function(e){e=e.toVDOM();Array.isArray(e)?t=t.concat(e):t.push(e)}),r.prototype.toVDOM.call(this,t)},c.prototype.removeCell=function(t){if(this.events.fire(s.LayoutEvents.beforeRemove,[t])){var e=this.config.parent||this;if(e!==this)return e.removeCell(t);e=this.getCell(t);e&&(e=e.getParent(),delete this._all[t],e._cells=e._cells.filter(function(e){return e.id!=t}),e.paint()),this.events.fire(s.LayoutEvents.afterRemove,[t])}},c.prototype.addCell=function(e,t){var i;void 0===t&&(t=-1),this.events.fire(s.LayoutEvents.beforeAdd,[e.id])&&(i=this._createCell(e),t<0&&(t=this._cells.length+t+1),this._cells.splice(t,0,i),this.paint(),this.events.fire(s.LayoutEvents.afterAdd,[e.id]))},c.prototype.getId=function(e){return e<0&&(e=this._cells.length+e),this._cells[e]?this._cells[e].id:void 0},c.prototype.getRefs=function(e){return this._root.getRootView().refs[e]},c.prototype.getCell=function(e){var t;return null===(t=this._root)||void 0===t?void 0:t._all[e]},c.prototype.forEach=function(e,t,i){if(void 0===i&&(i=1/0),this._haveCells(t)&&!(i<1))for(var n=(t?this._root._all[t]:this._root)._cells,o=0;o<n.length;o++){var r=n[o];e.call(this,r,o,n),this._haveCells(r.id)&&r.forEach(e,r.id,--i)}},c.prototype.cell=function(e){return this.getCell(e)},c.prototype._getCss=function(e){var t=this._xLayout?"dhx_layout-columns":"dhx_layout-rows",i=this.config.align?" "+t+"--"+this.config.align:"";if(e)return t+" dhx_layout-cell"+(this.config.align?" dhx_layout-cell--"+this.config.align:"");var n=this.config.parent?r.prototype._getCss.call(this):"dhx_widget dhx_layout",e=this.config.parent?"":" dhx_layout-cell";return n+(this.config.full?e:" "+t)+i},c.prototype._parseConfig=function(){var t=this,e=this.config,i=e.rows||e.cols||e.views||[];this._xLayout=!e.rows,this._cells=i.map(function(e){return t._createCell(e)})},c.prototype._createCell=function(e){var t=e.rows||e.cols||e.views?(e.parent=this._root,new c(this,e)):new a.Cell(this,e);return this._root._all[t.id]=t,e.init&&e.init(t,e),t},c.prototype._haveCells=function(e){if(e){e=this._root._all[e];return e._cells&&0<e._cells.length}return 0<Object.keys(this._all).length},c.prototype._inheritTypes=function(e){var t,i=this;void 0===e&&(e=this._cells),Array.isArray(e)?e.forEach(function(e){return i._inheritTypes(e)}):((t=e.config).rows||t.cols)&&(e=e.getParent(),!t.type&&e&&(e.config.type?t.type=e.config.type:this._inheritTypes(e)))},c);function c(e,t){var i=r.call(this,e,t)||this;return i._root=i.config.parent||i,i._all={},i._parseConfig(),i.config.activeTab&&(i.config.activeView=i.config.activeTab),i.config.views&&(i.config.activeView=i.config.activeView||i._cells[0].id,i._isViewLayout=!0),t.parent||(t=l.create({render:function(){return i.toVDOM()}},i),i.mount(e,t)),i}t.Layout=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,c=i(1),u=i(0),s=i(7),d=i(54),h=i(142),a=i(4),f=i(36),o=(r=s.View,o(p,r),p.prototype.paint=function(){var e;this.isVisible()&&((e=this.getRootView())?e.redraw():this._parent.paint())},p.prototype.isVisible=function(){if(!this._parent)return!(!this._container||!this._container.tagName)||Boolean(this.getRootNode());var e=this._parent.config.activeView;return(!e||e===this.id)&&(!this.config.hidden&&(!this._parent||this._parent.isVisible()))},p.prototype.hide=function(){this.events.fire(d.LayoutEvents.beforeHide,[this.id])&&(this.config.hidden=!0,this._parent&&this._parent.paint&&this._parent.paint(),this.events.fire(d.LayoutEvents.afterHide,[this.id]))},p.prototype.show=function(){var e=this;this.events.fire(d.LayoutEvents.beforeShow,[this.id])&&(this._parent&&this._parent.config&&void 0!==this._parent.config.activeView?this._parent.config.activeView=this.id:this.config.hidden=!1,this._parent&&!this._parent.isVisible()&&this._parent.show(),this.paint(),this._ui instanceof f.Grid&&this._ui.config.keyNavigation&&u.awaitRedraw().then(function(){e._ui.setColumns(e._ui.config.columns),e.paint()}),this.events.fire(d.LayoutEvents.afterShow,[this.id]))},p.prototype.expand=function(){this.events.fire(d.LayoutEvents.beforeExpand,[this.id])&&(this.config.collapsed=!1,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(d.LayoutEvents.afterExpand,[this.id]),this.paint())},p.prototype.collapse=function(){this.events.fire(d.LayoutEvents.beforeCollapse,[this.id])&&(this.config.collapsed=!0,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(d.LayoutEvents.afterCollapse,[this.id]),this.paint())},p.prototype.toggle=function(){this.config.collapsed?this.expand():this.collapse()},p.prototype._checkNextSize=function(e){var t=null!=e?e:this._getNextCell();return!!t&&(this._isXDirection()&&t.config.$autoWidth&&t.config.width?!(t.config.width=void 0):!this._isXDirection()&&t.config.$autoHeight&&t.config.height?!(t.config.height=void 0):!e&&t._checkNextSize())},p.prototype.getParent=function(){return this._parent},p.prototype.destructor=function(){var e;this.events&&this.events.clear(),window.removeEventListener("resize",this._afterWindowResized),"function"==typeof(null===(e=this.getWidget())||void 0===e?void 0:e.destructor)&&this.getWidget().destructor(),this.config=this.events=this.id=this._parent=this._handlers=this._uid=this._disabled=this._resizerHandlers=null,this.unmount()},p.prototype.getWidget=function(){return this._ui},p.prototype.getCellView=function(){return this._parent&&this._parent.getRefs(this._uid)},p.prototype.attach=function(e,t){var i=this;return this.config.html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof s.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui instanceof f.Grid&&this._ui.config.keyNavigation&&u.awaitRedraw().then(function(){i._ui.setColumns(i._ui.config.columns),i.paint()}),this._ui},p.prototype.attachHTML=function(e){this.config.html=e,this.paint()},p.prototype.toVDOM=function(e){if(null===this.config&&(this.config={}),!this.config.hidden){var t,i=this._calculateStyle(),n=c.isDefined(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:this.config.padding+"px"}:"",i=this.config.full||this.config.html?i:l(l({},i),n);this.config.html||(t=this._ui?((o=this._ui.getRootView()).render&&(o=u.inject(o)),[o]):e||null);var o=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?u.el(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),l(l({},this._resizerHandlers),{_ref:"resizer_"+this._uid,tabindex:0}),[u.el("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,r={};if(this.config.on)for(var s in this.config.on)r["on"+s]=this.config.on[s];var a="",e=this.config.cols||this.config.rows;if(this.config.type&&e)switch(this.config.type){case"line":a=" dhx_layout-line";break;case"wide":a=" dhx_layout-wide";break;case"space":a=" dhx_layout-space"}n=u.el("div",l(l(((e={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,e),r),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?a:""),style:i}),this.config.full?[u.el("div",{tabindex:this.config.collapsable?"0":"-1",role:this.config.collapsable?"button":null,"aria-label":this.config.collapsable?"click to "+(this.config.collapsed?"expand":"collapse"):null,class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&u.el("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&u.el(".dhx_layout-cell-header__image-wrapper",[u.el("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&u.el("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?u.el("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):u.el("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:u.el("div",{style:l(l({},n),{height:"calc(100% - "+(this.config.headerHeight||37)+"px)"}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?a:"")},this.config.html?[u.el("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:t)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?t:[this.config.collapsed?null:u.el(".dhx_layout-cell-content",{style:n},[u.el(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})])]);return o?[n,o]:n}},p.prototype._getCss=function(e){return"dhx_layout-cell"},p.prototype._initHandlers=function(){var r=this;window.addEventListener("resize",this._afterWindowResized);function n(e,t){var i,n,o;void 0===t&&(t={x:0,y:0}),s.isActive&&(o=s.xLayout,i=e.targetTouches?e.targetTouches[0].clientX:e.clientX+t.x,n=e.targetTouches?e.targetTouches[0].clientY:e.clientY+t.y,e=o?"width":"height",(t=o?i-s.range.min+window.pageXOffset:n-s.range.min+window.pageYOffset)<0?t=s.resizerLength/2:t>s.size&&(t=s.size-s.resizerLength),n=(i=function(e){return parseInt(null===(e=r.config[e])||void 0===e?void 0:e.toString())})(o?"maxWidth":"maxHeight"),o=i(o?"minWidth":"minHeight"),(!n||t<n)&&(!o||o<t)&&(r.config[e]=t-s.resizerLength/2+"px",s.nextCell.config[e]=s.size-t-s.resizerLength/2+"px",s.nextCell._getAnyFlexCell()&&(s.nextCell._getAnyFlexCell().config[e]=void 0),r.paint(),r.events.fire(d.LayoutEvents.resize,[r.id])))}function i(e){var t,i,n;e.targetTouches&&e.preventDefault(),3!==e.which&&(s.isActive&&a(e),r.events.fire(d.LayoutEvents.beforeResizeStart,[r.id])&&(document.body.classList.add("dhx_no-select--resize"),i=r.getCellView(),n=(t=r._getNextCell()).getCellView(),e=r._getResizerView(),i=i.el.getBoundingClientRect(),e=e.el.getBoundingClientRect(),n=n.el.getBoundingClientRect(),s.xLayout=r._isXDirection(),s.left=i.left+window.pageXOffset,s.top=i.top+window.pageYOffset,s.collapsedSize=r._getCollapsedSize(r,t),s.margin=h.getMarginSize(r.getParent().config,s.xLayout),s.range=h.getBlockRange(i,n,s.xLayout),s.size=s.range.max-s.range.min-s.margin-s.collapsedSize,s.isActive=!0,s.nextCell=t,s.resizerLength=s.xLayout?e.width:e.height))}var s={left:null,top:null,isActive:!(this._handlers={enterCollapse:function(e){13===e.keyCode&&r._handlers.toggle()},collapse:function(){r.config.collapsable&&r.collapse()},expand:function(){r.config.collapsable&&r.expand()},toggle:function(){r.config.collapsable&&r.toggle()}}),range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,margin:null,collapsedSize:null},o={},a=function(e){if(s.isActive=!1,document.body.classList.remove("dhx_no-select--resize"),e.targetTouches)for(var t in document.removeEventListener("touchend",a),document.removeEventListener("touchmove",n),o)o[t].node.contentWindow.document.removeEventListener("touchend",a),o[t].node.contentWindow.document.removeEventListener("touchmove",o[t].listener);else for(var t in document.removeEventListener("mouseup",a),document.removeEventListener("mousemove",n),o)o[t].node.contentWindow.document.removeEventListener("mouseup",a),o[t].node.contentWindow.document.removeEventListener("mousemove",o[t].listener);r.events.fire(d.LayoutEvents.afterResizeEnd,[r.id])};this._resizerHandlers={onmousedown:function(e){i(e),document.addEventListener("mouseup",a),document.addEventListener("mousemove",n);e=document.querySelectorAll("iframe");if(e.length)for(var t in e.forEach(function(e,t){var i={x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y};o[t]={node:e,listener:function(e){return n(e,i)}}}),o)o[t].node.contentWindow.document.addEventListener("mouseup",a),o[t].node.contentWindow.document.addEventListener("mousemove",o[t].listener)},ontouchstart:function(e){i(e),document.addEventListener("touchend",a),document.addEventListener("touchmove",n);e=document.querySelectorAll("iframe");if(e.length)for(var t in e.forEach(function(e,t){var i={x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y};o[t]={node:e,listener:function(e){return n(e,i)}}}),o)o[t].node.contentWindow.document.addEventListener("touchend",a),o[t].node.contentWindow.document.addEventListener("touchmove",o[t].listener)},ondragstart:function(e){return e.preventDefault()}}},p.prototype._getCollapsedSize=function(e,t){var i=0,n=this._parent,e=n._cells.indexOf(e),o=n._cells.indexOf(t);if(o-e==1)return i;for(var r=e+1;r<o;r++)n._cells[r].config.collapsed&&(this._isXDirection()?i+=45:i+=Number(n._cells[r].config.headerHeight)||37);return i},p.prototype._getCollapseIcon=function(){return this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-right":this._isXDirection()&&!this.config.collapsed?"dxi dxi-chevron-left":!this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-up":this._isXDirection()||this.config.collapsed?void 0:"dxi dxi-chevron-down"},p.prototype._isLastCell=function(){var e=this._parent;return e&&e._cells.indexOf(this)===e._cells.length-1},p.prototype._getNextCell=function(){var e=this._parent,t=e._cells.indexOf(this),t=!this._isLastCell()&&e._cells[t+1];return!!t&&(t.config.hidden||t.config.collapsed?t._getNextCell():t)},p.prototype._getAnyFlexCell=function(t){var i=this;void 0===t&&(t=!1);var e=this._parent,n=this._isXDirection()?"$autoWidth":"$autoHeight",e=null===(e=null==e?void 0:e._cells)||void 0===e?void 0:e.filter(function(e){return!0===e.config[n]&&(!!t||e.id!==i.id)});return!(null==e||!e.length)&&e[e.length-1]},p.prototype._getResizerView=function(){return this._parent.getRefs("resizer_"+this._uid)},p.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},p.prototype._calculateStyle=function(){var e=this.config;if(e){var t={},i=!1,n=!1;isNaN(Number(e.width))||(e.width=e.width+"px"),isNaN(Number(e.height))||(e.height=e.height+"px"),isNaN(Number(e.minWidth))||(e.minWidth=e.minWidth+"px"),isNaN(Number(e.minHeight))||(e.minHeight=e.minHeight+"px"),isNaN(Number(e.maxWidth))||(e.maxWidth=e.maxWidth+"px"),isNaN(Number(e.maxHeight))||(e.maxHeight=e.maxHeight+"px"),"content"===e.width&&(i=!0),"content"===e.height&&(n=!0);var o=e.width,r=e.height,s=e.cols,a=e.rows,l=e.minWidth,c=e.minHeight,u=e.maxWidth,d=e.maxHeight,h=e.gravity,f=e.collapsed,p=e.$fixed,g=-1===Math.sign(h)?0:h;"boolean"==typeof h&&(g=h?1:0);var v="boolean"==typeof h?!h:-1===Math.sign(h);this._isXDirection()?(p||o||void 0===h&&(l||u))&&(v=!0):(p||r||void 0===h&&(c||d))&&(v=!0);var _,v=v?0:g||1,g=this._isXDirection()?"x":"y";return void 0===l||f||(t.minWidth=l),void 0===c||f||(t.minHeight=c),void 0!==u&&(t.maxWidth=u),void 0!==d&&(t.maxHeight=d),void 0===this._parent&&(g=!0),void 0!==o&&"content"!==o?t.width=o:!0===g?t.width="100%":"x"===g&&(i?t.flex="0 0 auto":(_=this._isXDirection()?"1px":"auto",t.flex=v+" "+(s||a?"0 "+_:"1 auto"))),void 0!==r&&"content"!==r?t.height=r:!0===g?t.height="100%":"y"===g&&(n?t.flex="0 0 auto":(_=this._isXDirection()?"auto":"1px",t.flex=v+" "+(s||a?"0 "+_:"1 auto"))),!0===g&&void 0===e.width&&void 0===e.height&&(t.flex=v+" 1 auto"),f&&(this._isXDirection()?t.width="auto":t.height="auto",t.flex="0 0 auto"),t}},p.prototype._resizedWindow=function(){var e;void 0===this._isLastFlexCell?this._isLastFlexCell=(null===(e=this._getAnyFlexCell(!0))||void 0===e?void 0:e.id)===this.id:this._isLastFlexCell||window.removeEventListener("resize",this._afterWindowResized),this._isLastFlexCell&&(e=this._isXDirection()?"width":"height",this.config[e]=void 0,this.paint())},p);function p(e,t){var i=r.call(this,e,t)||this;return i._disabled=[],e&&e.isVisible&&(i._parent=e),i._parent&&i._parent.events?i.events=i._parent.events:i.events=new a.EventSystem(i),i.config.full=void 0===i.config.full?Boolean(i.config.header||i.config.collapsable||i.config.headerHeight||i.config.headerIcon||i.config.headerImage):i.config.full,i._afterWindowResized=i._resizedWindow.bind(i),i._initHandlers(),i.id=i.config.id||c.uid(),i._isXDirection()&&!t.width&&(t.$autoWidth=!0),i._isXDirection()||t.height||(t.$autoHeight=!0),i}t.Cell=o},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(145)),n(t(76))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.PopupEvents||(t.PopupEvents={})).beforeHide="beforeHide",t.beforeShow="beforeShow",t.afterHide="afterHide",t.afterShow="afterShow",t.click="click"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.SliderEvents||(t.SliderEvents={})).change="change",t.focus="focus",t.blur="blur",t.keydown="keydown",t.mousedown="mousedown",t.mouseup="mouseup"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.TimepickerEvents||(t.TimepickerEvents={})).change="change",t.beforeApply="beforeApply",t.afterApply="afterApply",t.beforeClose="beforeClose",t.afterClose="afterClose",t.apply="apply",t.close="close",t.save="save"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.CalendarEvents||(t.CalendarEvents={})).change="change",t.beforeChange="beforechange",t.modeChange="modeChange",t.monthSelected="monthSelected",t.yearSelected="yearSelected",t.cancelClick="cancelClick",t.dateMouseOver="dateMouseOver",t.dateHover="dateHover"},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),h=i(0),s=i(4),f=i(3),a=i(152),l=i(7),c=i(11),u=i(14),p=i(29),g=i(8),v=i(156),_=i(82),m=i(40),y=i(83),b=i(84);function w(e){return e.icon?'<span class="'+e.icon+' dhx_combobox-options__icon"></span> <span class="dhx_combobox-options__value">'+e.value+"</span>":e.src?'<img src="'+e.src+'" class="dhx_combobox-options__image" alt='+e.value+'></img> <span class="dhx_combobox-options__value">'+e.value+"</span>":'<span class="dhx_combobox-options__value">'+e.value+"</span>"}var x,o=(x=l.View,o(C,x),C.prototype.focus=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.focus()},C.prototype.blur=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.blur(),this.popup.hide()},C.prototype.enable=function(){this.config.disabled=!1,this.paint()},C.prototype.disable=function(){this.config.disabled=!0,this.paint()},C.prototype.isDisabled=function(){return this.config.disabled},C.prototype.clear=function(){this.list.selection.remove(),this._state.value="",this._filter(),this.paint()},C.prototype.getValue=function(e){var t=this.list.selection.getId();return e?r.wrapBox(t):Array.isArray(t)?t.join(","):t},C.prototype.setValue=function(e){return this._setValue(e,!1)},C.prototype.addOption=function(e,t){void 0===t&&(t=!0),e&&"string"==typeof e&&(e=this.data.add({value:e}),e=this.config.multiselection&&t?d(this.list.selection.getId(),[e]):e,this.setValue(e))},C.prototype.destructor=function(){this.popup&&this.popup.destructor(),this.events&&this.events.clear(),this.list&&this.list.destructor(),this._helper&&this._helper.destructor(),this._layout&&this._layout.destructor(),this.config=this.events=this.list=this.popup=null,this._helper=this._keyListener=this._handlers=this._state=this._uid=this._isPopupConfiqureted=null,this.unmount()},C.prototype.setState=function(e){switch(e){case"success":this._state.currentState=b.ComboState.success;break;case"error":this._state.currentState=b.ComboState.error;break;default:this._state.currentState=b.ComboState.default}this.paint()},C.prototype._setValue=function(e,t){var i=this;if(void 0===t&&(t=!1),!this._exsistId(e))return!1;this._filter(),this.list.selection.remove(),this.config.multiselection?("string"==typeof e&&(e=e.split(",")),"number"==typeof e&&(e=[e]),e.forEach(function(e){i.list.selection.add(e,!1,!1,t)})):(e=r.unwrapBox(e),this.list.selection.add(e,!1,!1,t),(e=this.data.getItem(e))&&(this._state.value=this._getItemText(e))),this.paint()},C.prototype._createLayout=function(){var e=this.list=new p.List(null,{template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!1,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),t=this._layout=new u.Layout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});t.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&t.getCell("select-unselect-all").attach(y.selectAllView)},C.prototype._initHandlers=function(){var i=this;this.config.helpMessage&&(this._helper=new g.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={addOption:function(){return i.addOption(i._state.value)},showHelper:function(e){e.preventDefault(),e.stopPropagation(),i._helper.show(e.target,{mode:"left"===i.config.labelPosition?"bottom":"right"})},selectAll:function(){i._state.unselectActive?(i.list.selection.remove(),i.config.selectAllButton&&(i._layout.getCell("select-unselect-all").attach(y.selectAllView),i._state.unselectActive=!1)):(i.data.filter(),i.list.selection.add(),i.config.selectAllButton&&(i._layout.getCell("select-unselect-all").attach(y.unselectAllView),i._state.unselectActive=!0)),i._changePopupPosition(),i.paint()},onkeydown:function(e){var t;"Tab"===e.key&&i.popup.isVisible()?i._hideOptions():(i.popup.isVisible()||e.which!==a.KEY_CODES.DOWN_ARROW||i._showOptions(),i.popup.isVisible()&&(e.which===a.KEY_CODES.RIGHT_ARROW&&i.config.readOnly&&!i.config.multiselection&&(i.list.moveFocus(p.MOVE_DOWN),e.preventDefault()),e.which===a.KEY_CODES.LEFT_ARROW&&i.config.readOnly&&!i.config.multiselection&&(i.list.moveFocus(p.MOVE_UP),e.preventDefault()),e.which===a.KEY_CODES.DOWN_ARROW&&(i.list.moveFocus(p.MOVE_DOWN),e.preventDefault()),e.which===a.KEY_CODES.UP_ARROW&&(i.list.moveFocus(p.MOVE_UP),e.preventDefault()),e.which===a.KEY_CODES.ESC&&i._hideOptions(),e.which===a.KEY_CODES.ENTER&&(i.config.newOptions&&!i.data.getLength()?i.addOption(i._state.value,!0):(t=i.list.getFocus(),t=i.config.multiselection?d(i.list.selection.getId(),[t]):t,i.setValue(t)),i.config.multiselection?i._updatePopup():i._hideOptions()))),i.events.fire(b.ComboboxEvents.keydown,[e,i.list.getFocus()])},onkeyup:function(e){i.config.multiselection&&!i.config.itemsCount&&(i._state.ignoreNext?i._state.ignoreNext=!1:e.which===a.KEY_CODES.BACKSPACE&&!i._state.value&&i.config.multiselection&&i.list.selection.getId().length&&(e=(e=i.list.selection.getId())[e.length-1],i.list.selection.remove(e),i._changePopupPosition(),i.paint()))},oninput:function(e){i.config.disabled||(e=e.target.value,i.events.fire(b.ComboboxEvents.input,[e]),i._state.value=e,i._filter(),e.length?i._state.canDelete=!1:(i._state.ignoreNext=!0,i._state.canDelete=!0),i.config.multiselection||(i.list.selection.remove(),i.paint()),i.popup.isVisible()||i._showOptions(),i._updatePopup())},oninputclick:function(e){if(!i.config.disabled){if(i.focus(),e.target.classList.contains("dhx_combobox__action-remove")){var t=null===(t=i.data.getItem(f.locate(e)))||void 0===t?void 0:t.id;return t?(i.list.selection.remove(t),i._changePopupPosition(),void i.paint()):void 0}if(e.target.classList.contains("dhx_combobox__action-clear-all"))return i.list.selection.getId().forEach(function(e){return i.list.selection.remove(e)}),i.config.selectAllButton&&i._state.unselectActive&&(i._layout.getCell("select-unselect-all").attach(y.selectAllView),i._state.unselectActive=!1),void i.paint();e.preventDefault(),i.popup.isVisible()?i.focus():i._showOptions()}},toggleIcon:function(){i.focus(),i.popup.isVisible()?i._hideOptions():i._showOptions()},onfocus:function(){var e;return null===(e=i.events)||void 0===e?void 0:e.fire(b.ComboboxEvents.focus,[])},onblur:function(){var e;return null===(e=i.events)||void 0===e?void 0:e.fire(b.ComboboxEvents.blur,[])}}},C.prototype._initEvents=function(){var i=this;this.data.events.on(c.DataEvents.load,function(){i.config.value&&i._setValue(i.config.value,!0)}),this.data.events.on(c.DataEvents.afterAdd,function(){i.config.multiselection?i._changePopupPosition():i._hideOptions()}),this.list.events.on(p.ListEvents.click,function(){i.config.multiselection||i._hideOptions(),i._changePopupPosition()}),this.list.selection.events.on(m.SelectionEvents.afterSelect,function(){var e=i.getValue(i.config.multiselection);i.events.fire(b.ComboboxEvents.change,[e]),i._updateSelectedItem(e)}),this.list.selection.events.on(m.SelectionEvents.afterUnSelect,function(){var e,t=i.config.multiselection;i.config.readOnly&&!t||(e=i.getValue(t),i.events.fire(b.ComboboxEvents.change,[e]),t&&i._updateSelectedItem(e))}),this.popup.events.on(g.PopupEvents.beforeShow,function(){if(!i.popup.isVisible()&&!i._isPopupConfiqureted)return i._configurePopup(),!1}),this.config.readOnly&&this.popup.events.on(g.PopupEvents.afterShow,function(){var e;i._state.value?(e=i.list.selection.getId(),i.list.setFocus(e)):i.list.setFocus(i.data.getId(0)),i._keyListener.startNewListen(function(e){return i._findBest(e)})})},C.prototype._showOptions=function(){this.events.fire(b.ComboboxEvents.beforeOpen)&&(this._state.value.length&&(this._state.canDelete=!0),this._filter(),this._configurePopup()&&(this.events.fire(b.ComboboxEvents.open),this.events.fire(b.ComboboxEvents.afterOpen)))},C.prototype._configurePopup=function(){this._isPopupConfiqureted=!0;var e=this.getRootView();return!!(e&&e.refs&&e.refs.holder)&&(this.popup.isVisible()||this._updatePopup(),!0)},C.prototype._hideOptions=function(){var e=this;this.events.fire(b.ComboboxEvents.beforeClose)&&(this.config.readOnly&&this._keyListener.endListen(),this.list.setFocus(this.data.getId(0)),this.config.multiselection||this.config.readOnly||this.list.selection.contains()||(this._state.value=""),h.awaitRedraw().then(function(){return e.popup.isVisible()&&e.popup.hide()}),this.events.fire(b.ComboboxEvents.afterClose),this.events.fire(b.ComboboxEvents.close),this._filter(),this.paint())},C.prototype._filter=function(){var e,t,i,n=this;this.config.readOnly||(this.data.filter(function(e){return n.config.filter?n.config.filter(e,n._state.value):r.isEqualString(n._state.value,n._getItemText(e))}),this.config.multiselection?this.list.setFocus(this.data.getId(0)):(t=this.data.getIndex(this.list.selection.getId()),this.list.setFocus(this.data.getId(-1<t?t:0))),e=this._layout.getCell("list"),t=this._layout.getCell("not-found"),0===this.data.getLength()?(this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").hide(),e.hide(),this._state.creatingState=!0,i=this.config.newOptions?this._state.value:"",t.height=y.emptyListHeight(i,this.getRootView().refs.holder.el.offsetWidth),t.attach(y.emptyListView,i),t.show()):(this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").show(),!(this._state.value&&this.data.find(function(e){return e.value===n._state.value}))&&this._state.value?(this._state.creatingState=this.config.newOptions,e.show(),this.config.newOptions?(i=this._state.value,t.height=y.emptyListHeight(i,this.getRootView().refs.holder.el.offsetWidth),t.attach(y.emptyListView,i),t.show()):t.hide()):(this._state.creatingState=!1,t.isVisible()&&(e.show(),t.hide()))))},C.prototype._findBest=function(t){var i=this,e=this.data.find(function(e){return r.isEqualString(t,i._getItemText(e))});e&&this.list.selection.getId()!==e.id&&(this.list.setFocus(e.id),this.paint())},C.prototype._exsistId=function(e){var t=this;return e instanceof Array?e.every(function(e){return t.data.exists(e)}):this.data.exists(e)},C.prototype._draw=function(){if(!this.config)return h.el("div");var e=this.config,t=e.multiselection,i=e.labelPosition,n=e.hiddenLabel,o=e.required,r=e.disabled,s=e.css,a=e.helpMessage,l=e.readOnly,c=e.placeholder,u=t?null:this.data.getItem(this.list.selection.getId()),e=!this.list.selection.getId()||"object"==typeof this.list.selection.getId()&&0===this.list.selection.getId().length,t=f.getLabelStyle(this.config);return h.el("div",{"data-dhx-widget-id":this._uid,onkeydown:this._handlers.onkeydown,onkeyup:this._handlers.onkeyup,class:"dhx_widget dhx_combobox"+("left"===i?" dhx_combobox--label-inline":"")+(n?" dhx_combobox--sr_only":"")+(o?" dhx_combobox--required":"")+(r?" dhx_combobox--disabled":"")+(s?" "+s:"")},[t?h.el("label.dhx_label.dhx_combobox__label",{style:t.style,class:a?"dhx_label--with-help":"",onclick:this._handlers.oninputclick},a?[(t.label||o)&&h.el("span.dhx_label__holder",t.label),h.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,id:"dhx_label__help_"+this._uid})]:t.label):null,h.el("div.dhx_combobox-input-box"+(r?".dhx_combobox-input-box--disabled":"")+(l?".dhx_combobox-input-box--readonly":"")+(this._state.currentState===b.ComboState.error?".dhx_combobox-input-box--state_error":"")+(this._state.currentState===b.ComboState.success?".dhx_combobox-input-box--state_success":""),{_ref:"holder"},[h.el("div.dhx_combobox-input__icon",{onclick:this._handlers.toggleIcon},[h.el("span"+(this.popup.isVisible()?".dxi.dxi-menu-up":".dxi.dxi-menu-down"))]),h.el("div.dhx_combobox-input-list-wrapper",{onclick:this._handlers.oninputclick},[h.el("ul.dhx_combobox-input-list",d(this._drawSelectedItems(),[h.el("li.dhx_combobox-input-list__item.dhx_combobox-input-list__item--input",[h.el("input.dhx_combobox-input",{oninput:this._handlers.oninput,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_ref:"input",_key:this._uid,type:"text",placeHolder:e&&c?c:void 0,value:l&&u?this._getItemText(u):this._state.value,readOnly:l||r,required:o,"aria-label":l?"Select value":"Type or select value","aria-describedby":a?"dhx_label__help_"+this._uid:null,"aria-expanded":!0})])]))])])])},C.prototype._drawSelectedItems=function(){var e,i=this;if(!this.config.multiselection)return[];if(this.config.itemsCount){var t=this.list.selection.getId().length;return t?[h.el("li.dhx_combobox-input-list__item.dhx_combobox-tag",[h.el("span.dhx_combobox-tag__value",(e=t,"function"==typeof(t=this.config.itemsCount)?t(e):e+" "+_.default.selectedItems)),h.el("button.dhx_button.dhx_combobox-tag__action.dhx_combobox__action-clear-all",{"aria-label":"clear all"},[h.el("span.dhx_button__icon.dxi.dxi-close-circle")])])]:[]}return this.list.selection.getId().map(function(e){var t=i.data.getItem(e);return t?h.el("li.dhx_combobox-input-list__item.dhx_combobox-tag",{"data-dhx-id":e},[i._drawImageOrIcon(t),h.el("span.dhx_combobox-tag__value",i._getItemText(t)),h.el("button.dhx_button.dhx_button--icon.dhx_combobox-tag__action.dhx_combobox__action-remove",{type:"button","aria-label":"remove"},[h.el("span.dhx_button__icon.dxi.dxi-close-circle")])]):null})},C.prototype._drawImageOrIcon=function(e){return e.src?h.el("img.dhx_combobox-tag__image",{src:e.src,alt:""}):e.icon?h.el("span.dhx_combobox-tag__icon",{class:e.icon}):null},C.prototype._getItemText=function(e){return e?e.value:null},C.prototype._updateSelectedItem=function(e){this.config.multiselection?(this.config.selectAllButton&&!this._state.unselectActive&&this.data.getLength()===e.length?(this._layout.getCell("select-unselect-all").attach(y.unselectAllView),this._state.unselectActive=!0):this.config.selectAllButton&&this._state.unselectActive&&(this._layout.getCell("select-unselect-all").attach(y.selectAllView),this._state.unselectActive=!1),this._state.value&&(this._state.value="",this._state.canDelete=0===e.length,this._filter())):this._state.value=null!==(e=this._getItemText(this.data.getItem(e)))&&void 0!==e?e:"",this.paint()},C.prototype._changePopupPosition=function(){var e=this;this.config.multiselection&&h.awaitRedraw().then(function(){e._updatePopup()})},C.prototype._updatePopup=function(){var e=this.getRootView().refs.holder.el;this.popup.getContainer().style.width=e.offsetWidth+"px";var t=this.data.getLength()*(this.config.itemHeight||36);"string"==typeof this.config.listHeight&&this.config.listHeight.includes("px")&&(this.config.listHeight=this.config.listHeight.replace("px",""));t=t<this.config.listHeight?t:this.config.listHeight;this.popup.getContainer().style.height=Number(t)+(this.config.selectAllButton&&this.config.multiselection&&this._layout.getCell("select-unselect-all").isVisible()?33:0)+(this._state.creatingState?this._layout.getCell("not-found").height:0)+"px",this.popup.show(e,{mode:"bottom"})},C);function C(e,t){var i=x.call(this,e,r.extend({template:w,listHeight:224,itemHeight:36,disabled:!1,readOnly:!1,newOptions:!1,htmlEnable:!0},t))||this;i.config.itemsCount=i.config.itemsCount||i.config.showItemsCount,i.config.helpMessage=i.config.helpMessage||i.config.help,i.config.cellHeight&&36===i.config.itemHeight&&(i.config.itemHeight=i.config.cellHeight),i.config.labelInline&&(i.config.labelPosition="left"),Array.isArray(i.config.data)?(i.events=new s.EventSystem(i),i.data=new c.DataCollection({}),i.data.parse(i.config.data)):i.config.data?(i.data=i.config.data,i.events=new s.EventSystem(i),i.events.context=i):(i.events=new s.EventSystem(i),i.data=new c.DataCollection({})),i.popup=new g.Popup,i.popup.events.on(g.PopupEvents.afterShow,function(){i.paint()}),i.popup.events.on(g.PopupEvents.afterHide,function(){i.config.multiselection&&(i._state.value=""),i.paint()}),i.popup.events.on(g.PopupEvents.beforeHide,function(e){e&&i._hideOptions()}),(i.config.readonly||i.config.readOnly)&&(i.config.readOnly=i.config.readOnly||i.config.readonly,i._keyListener=new v.KeyListener),i._state={value:"",ignoreNext:!1,canDelete:!1,unselectActive:!1,currentState:b.ComboState.default,creatingState:!1},i._initHandlers(),i._createLayout(),i.config.value&&i._setValue(i.config.value,!0),i._initEvents();t=h.create({render:function(){return i._draw()},hooks:{didRedraw:function(){i.popup.isVisible()&&(i.focus(),i._configurePopup())}}});return i.mount(e,t),i}t.Combobox=o},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(r,"__esModule",{value:!0});var l=t(1),c=t(11),u=t(0),d=t(20),h=t(40),o=t(7),f=t(81),p=t(3),g=t(55),v=t(153);r.MOVE_UP=1,r.MOVE_DOWN=2;var _,i=(_=o.View,i(m,_),m.prototype._didRedraw=function(e){},m.prototype._dblClick=function(e){var t=p.locate(e);t&&(t=this.data.getItem(t).id,this.config.editable&&this.editItem(t),this.events.fire(g.ListEvents.doubleClick,[t,e]))},m.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},m.prototype._dragStart=function(e){var t=this;this._touch.start=!0;var i=[],n=p.locateNode(e,"data-dhx-id"),o=n&&n.getAttribute("data-dhx-id"),n=this.selection.getId();return this.config.multiselection&&n instanceof Array&&(n.map(function(e){e!==o&&t.getRootView().refs[e]&&i.push(t.getRootView().refs[e].el)}),n=a(n)),"string"==typeof n&&(n=[n]),this.config.dragMode&&!this._edited?c.dragManager.onMouseDown(e,n||[o],i):null},m.prototype.disableSelection=function(){this.selection.disable()},m.prototype.enableSelection=function(){this.selection.enable()},m.prototype.editItem=function(e){this._edited=e,this.data.getItem(this._edited)&&this.events.fire(g.ListEvents.beforeEditStart,[e])?(this.paint(),this.events.fire(g.ListEvents.afterEditStart,[e])):this._edited=null},m.prototype.editEnd=function(e,t){var i;this._edited&&(null!==e&&(i=this.data.getItem(t),this.data.update(t,s(s({},i),{value:e})),this._changed=!0),this._edited=null,this.paint())},m.prototype.getFocusItem=function(){return this.data.getItem(this._focus)},m.prototype.setFocus=function(e){this._focus!=e&&this.data.exists(e)&&(this._focus=e,this.showItem(e),this.events.fire(g.ListEvents.focusChange,[this.data.getIndex(this._focus),this._focus]),this.paint())},m.prototype.getFocus=function(){return this._focus},m.prototype.destructor=function(){this.events&&this.events.clear(),this.keyManager&&this.keyManager.destructor(),this.selection&&this.selection.destructor(),this.config=this.events=this.selection=this.keyManager=null,this._handlers=this._focus=this._edited=this._events=this._topOffset=this._visibleHeight=this._touch=null,this.unmount()},m.prototype.showItem=function(e){var t,i,n,o=this.getRootView();o&&o.node&&o.node.el&&void 0!==e&&((t=this.getRootNode())&&(i=this.config.virtual,n=this.data.getIndex(e),o=Math.floor(n/t.children.length)||0,e=t.children[n-t.children.length*o],(i||e)&&(o=i?parseInt(this.config.itemHeight):e.clientHeight,(e=i?n*o:e.offsetTop)>=t.scrollTop+t.clientHeight-o?t.scrollTo(0,e-t.clientHeight+o):e<t.scrollTop&&t.scrollTo(0,e))))},m.prototype._renderItem=function(e,t){var i=this.config.itemHeight;if(e.$empty)return u.el("li",{class:"dhx_list-item",style:{height:i}});var n=this.config.template&&this.config.template(e)||e.html,o=e.id==this._focus;if(e.id==this._edited)return v.getEditor(e,this).toHTML();var r=this.data.getMetaMap(e),o=s(s(s(s({},this._events),{class:"dhx_list-item"+(r&&r.selected?" dhx_list-item--selected":"")+(o?" dhx_list-item--focus":"")+(r&&r.drop&&!this._edited?" dhx_list-item--drophere":"")+(r&&r.drag&&!this._edited?" dhx_list-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_list-item--drag":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,_ref:e.id.toString(),style:{height:i},_key:e.id}),this.getItemAriaAttrs(this,e)),{tabindex:o?0:-1});if(n)return n===e.html||this.config.htmlEnable?(o[".innerHTML"]=n,u.el("li",o)):u.el("li",o,n);e=e.text||e.value;return this.config.htmlEnable?o[".innerHTML"]=e:o.class+=" dhx_list-item--text",this.config.htmlEnable?u.el("li",o):u.el("li",o,e)},m.prototype._renderList=function(){var i=this,e=this._getRange(),t=this.data.getRawData(e[0],e[1]).map(function(e,t){return i._renderItem(e,t)});return this.config.virtual&&(t=a([u.el(".div",{style:{height:e[2]+"px"}})],t,[u.el(".div",{style:{height:e[3]+"px"}})])),u.el("ul.dhx_widget.dhx_list",s(s({style:{"max-height":this.config.height,position:"relative"},tabindex:0,class:(this.config.css||"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),t)},m.prototype.moveFocus=function(e,t){var i,n,o=this.data.getLength();o&&(n=(i=this._focus)?this.data.getIndex(i):-1,t=t||1,e===r.MOVE_DOWN?i=this.data.getId(Math.min(n+t,o-1)):e===r.MOVE_UP&&(i=this.data.getId(Math.max(n-t,0))),this.setFocus(i))},m.prototype._getRange=function(){if(this.config.virtual){var e=this._visibleHeight||parseInt(this.config.height),t=parseInt(this.config.itemHeight),i=this.data.getRawData(0,-1).length,n=i*t,o=this._topOffset,o=Math.max(0,Math.min(o,n-e)),r=Math.floor(o/t),e=Math.min(i-r,Math.floor(e/t)+5);return this._topOffset=o,[r,e+r,r*t,n-t*(e+r)]}return[0,-1,0,0]},m.prototype._getHotkeys=function(){var n=this;return{arrowDown:function(e){n.moveFocus(r.MOVE_DOWN),n._changed&&(n._changed=!1),e.preventDefault()},arrowUp:function(e){n.moveFocus(r.MOVE_UP),n._changed&&(n._changed=!1),e.preventDefault()},escape:function(){n.editEnd(null),n._changed&&(n._changed=!1)},enter:function(e){var t,i;n._changed?n._changed=!1:(i=(t=n.selection.getItem())instanceof Array?null===(i=t[0])||void 0===i?void 0:i.id:null==t?void 0:t.id,n.config.editable&&!n._edited&&(t&&i===n._focus||!t)?n.editItem(n._focus):n.selection.add(n._focus),n.events.fire(g.ListEvents.click,[n._focus,e]))},"shift+enter":function(e){n.selection.add(n._focus,!1,!0),n.events.fire(g.ListEvents.click,[n._focus,e])},"ctrl+enter":function(e){n.selection.add(n._focus,!0,!1),n.events.fire(g.ListEvents.click,[n._focus,e])},"ctrl+a":function(e){n.config.multiselection&&(e.preventDefault(),n.selection.remove(),n.data.map(function(e){return e.id}).forEach(function(e){"ctrlClick"===n.config.multiselection?n.selection.add(e,!0):n.selection.add(e)}))}}},m.prototype._initHotKey=function(){var e,t=this._getHotkeys();for(e in t)this.keyManager.addHotKey(e,t[e]);for(e in this.config.hotkeys)this.keyManager.addHotKey(e,this.config.hotkeys[e])},m.prototype.getItemAriaAttrs=function(e,t){var i,n,o;return s(s({role:"option","aria-selected":t.$selected?"true":"false"},(o=t,(n=e).config.dragMode&&!n._edited?{"aria-grabbed":Boolean(o.$dragtarget&&!n._edited).toString()}:{})),(i=e).config.editable?{"aria-roledescription":i._edited?"Press Enter to stop editing":"Double click to edit content"}:{})},m.prototype._getListAriaAttrs=function(e,t){return{role:"listbox","aria-label":"Listbox "+(e.title||"")+", count of options = "+t+"."+(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},m);function m(e,t){void 0===t&&(t={});var n=this,i=t.itemHeight||(t.virtual?37:null);i&&"number"==typeof i&&(i=i.toString()+"px"),(n=_.call(this,e,l.extend({itemHeight:i,keyNavigation:!0,editable:!1,selection:!0,htmlEnable:!0},t))||this)._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null};t=n.config.data;t instanceof c.DataCollection?(n.data=t,n.events=t.events):(n.data=new c.DataCollection({}),n.events=n.data.events,t&&n.data.parse(t)),n.selection=new f.Selection({disabled:!n.config.selection,multiselection:n.config.multiselection},n.data,n.events),n.config.keyNavigation&&(n.keyManager=new d.KeyManager(function(e,t){return t==n._uid&&(!n._edited||n._edited&&"escape"!==e.key)}),n._initHotKey()),n.events.on(c.DataEvents.change,function(e,t,i){"setPage"===t&&n.showItem(n.data.getId(i[0])),n.paint()}),n.events.on(h.SelectionEvents.afterUnSelect,function(){return n.paint()}),n.events.on(h.SelectionEvents.afterSelect,function(e){e&&n.config.selection&&(n._focus=e),n.paint()}),n.events.on(g.ListEvents.afterEditEnd,n.editEnd.bind(n));t=function(t){return function(e){n.data.setMeta(n.data.getItem(e.target),"drop",t),n.paint()}};n.events.on(c.DragEvents.canDrop,t(!0)),n.events.on(c.DragEvents.cancelDrop,t(!1));t=function(t){return function(e){e.source.map(function(e){return n.data.setMeta(n.data.getItem(e),"drag",t)}),n.paint()}};n.events.on(c.DragEvents.dragStart,t(!0)),n.events.on(c.DragEvents.afterDrag,t(!1)),n._handlers={onmousedown:function(e){n._dragStart(e)},ontouchstart:function(e){n._touch.timer=setTimeout(function(){n._dragStart(e)},n._touch.duration),n._touch.timeStamp?(n._touch.dblDuration>=n._touch.timeStamp-+e.timeStamp.toFixed()&&(e.preventDefault(),n._dblClick(e)),n._touch.timeStamp=null):n._touch.timeStamp=+e.timeStamp.toFixed(),setTimeout(function(){n._touch.timeStamp=null},n._touch.dblDuration)},ontouchmove:function(e){n._touch.start&&e.preventDefault(),n._clearTouchTimer()},ontouchend:function(){n._touch.start=!1,n._clearTouchTimer()},ondragstart:function(){return!(n.config.dragMode&&!n._edited)&&null},oncontextmenu:function(e){var t=null===(t=n.data.getItem(p.locate(e)))||void 0===t?void 0:t.id;t&&n.events.fire(g.ListEvents.itemRightClick,[t,e])},onclick:function(e){var t=null===(t=n.data.getItem(p.locate(e)))||void 0===t?void 0:t.id;t&&(n.selection.add(t,e.ctrlKey||e.metaKey,e.shiftKey),n.config.selection&&(n._focus=t),n.events.fire(g.ListEvents.click,[t,e]),n.paint())},ondblclick:function(e){n._dblClick(e)},onscroll:function(e){n.config.virtual&&(n._topOffset=e.target.scrollTop,n._visibleHeight=e.target.offsetHeight,n.paint())},onmouseover:function(e){var t=null===(t=n.data.getItem(p.locate(e)))||void 0===t?void 0:t.id;t&&t!==p.locate(e.relatedTarget)&&n.events.fire(g.ListEvents.itemMouseOver,[t,e])}};t=n.config.eventHandlers;if(t)for(var o=0,r=Object.entries(t);o<r.length;o++){var s=r[o],a=s[0],s=s[1];n._handlers[a]=p.eventHandler(function(e){return p.locate(e)},s,n._handlers[a])}n.config.dragMode&&c.dragManager.setItem(n._uid,n),n._topOffset=n._visibleHeight=0;t=u.create({render:function(){return n._renderList()},hooks:{didMount:function(e){n.config.virtual&&(n._visibleHeight=e.node.el.offsetHeight)},didRedraw:function(e){return n._didRedraw(e)}}});return n.mount(e,t),n}r.List=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(40),o=i(11),i=(r.prototype.enable=function(){this.config.disabled=!1},r.prototype.disable=function(){this.remove(),this.config.disabled=!0},r.prototype.getId=function(){return this.config.multiselection?this._selected:this._selected[0]},r.prototype.getItem=function(){var t=this;return this.config.multiselection?this._selected.map(function(e){return t._data.getItem(e)}):this._selected.length?this._data.getItem(this._selected[0]):null},r.prototype.contains=function(e){return e?this._selected.includes(e):0<this._selected.length},r.prototype.remove=function(e){var t=this;e?this._unselectItem(e):(this._selected.forEach(function(e){return t._unselectItem(e)}),this._selected=[])},r.prototype.add=function(e,t,i,n){var o,r=this;this.config.disabled||(void 0!==e?(o=this.config.multiselection,i&&this._selected.length&&o?this._addMulti(e,n):this._addSingle(e,o&&("ctrlClick"!==o||t),n)):this._data.serialize().filter(function(e){e=e.id;return!r._selected.includes(e)}).forEach(function(e){e=e.id;r._addMulti(e,n)}))},r.prototype.destructor=function(){var t=this;this._selected.forEach(function(e){return t._unselectItem(e,!0)})},r.prototype._addMulti=function(e,t){var i=this._selected[this._selected.length-1],n=this._data.getIndex(i),o=this._data.getIndex(e);for(o<n&&(n=(e=[o,n])[0],o=e[1]);n<=o;n++){var r=this._data.getId(n);this._selectItem(r,t)}},r.prototype._addSingle=function(t,e,i){var n=this;e||this._selected.forEach(function(e){e!=t&&n._unselectItem(e)}),e&&this._selected.includes(t)?this._unselectItem(t,i):this._selectItem(t,i)},r.prototype._selectItem=function(e,t){var i=this._data.getItem(e);i&&!this._data.getMeta(i,"selected")&&(t||this.events.fire(n.SelectionEvents.beforeSelect,[e]))&&(this._selected.push(e),this._data.setMeta(i,"selected",!0),t||this.events.fire(n.SelectionEvents.afterSelect,[e]))},r.prototype._unselectItem=function(t,e){(e||this.events.fire(n.SelectionEvents.beforeUnSelect,[t]))&&(this._selected=this._selected.filter(function(e){return e!==t}),this._data.setMeta(this._data.getItem(t),"selected",!1),e||this.events.fire(n.SelectionEvents.afterUnSelect,[t]))},r);function r(e,t,i){var n=this;this.config=e,this.events=i,this._data=t,this._selected=[],this._data.events.on(o.DataEvents.removeAll,function(){n._selected=[]}),"string"==typeof this.config.multiselection&&(["click","ctrlClick"].includes(this.config.multiselection)||(this.config.multiselection=!1)),this._data.events.on(o.DataEvents.beforeRemove,function(e){var t;n._nextSelection=null,1===n._selected.length&&(t=n._data.getIndex(e.id),1<(e=n._data.getLength())&&(t=e==t-1?t-1:t+1,n._nextSelection=n._data.getId(t)))}),this._data.events.on(o.DataEvents.afterRemove,function(e){e=n._selected.indexOf(e.id);-1!==e&&n._selected.splice(e,1),n._nextSelection&&(n.add(n._nextSelection),n._nextSelection=null)})}t.Selection=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={notFound:"Not Found",selectAll:"Select All",unselectAll:"Unselect All",selectedItems:"selected items",createItem:"Create"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(82);t.selectAllView=function(){return n.el(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.selectAll)},t.unselectAllView=function(){return n.el(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.unselectAll)},t.emptyListView=function(e){return n.el("ul.dhx_list",[n.el("li.dhx_list-item.dhx_combobox-options__item"+(e?".dhx_combobox-options__action-create-option":""),{},e?o.default.createItem+' "'+e+'"':o.default.notFound)])},t.emptyListHeight=function(e,t){var i=document.createElement("canvas").getContext("2d",{alpha:!1});return i.font="normal 14px Roboto",e=e?o.default.createItem+' "'+e+'"':o.default.notFound,13+20*Math.ceil(i.measureText(e).width/(t-16))}},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ComboboxEvents||(t.ComboboxEvents={})).change="change",n.focus="focus",n.blur="blur",n.keydown="keydown",n.input="input",n.beforeOpen="beforeOpen",n.afterOpen="afterOpen",n.beforeClose="beforeClose",n.afterClose="afterClose",n.open="open",n.close="close",(t=t.ComboState||(t.ComboState={}))[t.default=0]="default",t[t.error=1]="error",t[t.success=2]="success"},function(e,t,i){"use strict";var y=this&&this.__assign||function(){return(y=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var w=i(0),x=i(3),C=i(28),E=i(86),S=i(21);t.getFixedColsHeader=function(e,t){if("number"==typeof e.leftSplit){for(var i=0,n=0;n<e.leftSplit;n++)e.columns[n].hidden&&i++;if(i!==e.leftSplit){for(var o=e.columns.slice(0,e.leftSplit-i),r=0,s=0,a=o;s<a.length;s++)r+=a[s].$width;o=0<=e.leftSplit&&E.getFixedRows(y(y({},e),{currentColumns:o,$positions:y(y({},e.$positions),{xStart:0,xEnd:e.leftSplit}),scroll:{top:0,left:0},columns:o}),y(y({},t),{name:"header",position:"top",shifts:{x:0,y:0}})),t=y(y({},t),{name:"header",position:"top"});return o&&w.el(".dhx_"+t.name+"-fixed-cols",y({onwheel:S.scrollFixedColsAndRows,style:{position:"absolute",top:0,left:0,maxWidth:r,overflow:"hidden"}},{role:"rowgroup","aria-rowcount":o.length}),o.body)}}},t.getFixedCols=function(e,t){var i=e.leftSplit,n=e.$totalWidth,o=e.columns,r=e.$totalHeight,s=e.headerHeight,a=e.footerHeight,l=e.$positions,c=e.scroll,u=e.data;if("number"==typeof i){for(var d=0,h=0;h<i;h++)o[h].hidden&&d++;if(d!==i){var f=n<=t.wrapper.width?0:x.getScrollbarWidth(),p=r+s+a,g=p>t.gridBodyHeight?e.$footer?p-f:t.gridBodyHeight:p<t.gridBodyHeight-f?p:e.$footer?t.gridBodyHeight:t.gridBodyHeight-f,v=o.slice(0,i-d);e.fixedColumnsWidth=S.getTotalWidth(v);var _=C.getCells(y(y({},e),{columns:v,$renderFrom:"fixedCols",$positions:y(y({},l),{xStart:0,xEnd:i})})),n=t.sticky,a=y(y({},t),{name:"footer",position:"bottom"}),p=0<=i&&E.getRows(y(y({},e),{currentColumns:v,$positions:y(y({},l),{xStart:0,xEnd:i})}),y(y({},t),{name:"footer",position:"bottom"})),m=0;p&&p.forEach(function(e){return m+=e.attrs.style.height});v=function(e){return{role:"rowgroup","aria-rowcount":e}},a=n?p&&w.el(".dhx_"+a.name+"-fixed-cols",y({onwheel:S.scrollFixedColsAndRows,style:{position:"absolute",top:g<t.gridBodyHeight?g-m:null,left:0,bottom:g>=t.gridBodyHeight?0+(n?f:0)+"px":null}},v(p.length)),p):null,p=l,l=C.getSpans(y(y({},e),{$renderFrom:"fixedCols"}),!0);return[w.el(".dhx_grid-fixed-cols-wrap",y({style:{height:g>=t.gridBodyHeight?(n?t.gridBodyHeight:t.gridBodyHeight+s)-f:g,paddingTop:s,overflow:"hidden",width:e.fixedColumnsWidth}},{role:"presentation","aria-label":"Fixed column"}),[w.el(".dhx_grid-fixed-cols",y(y({onwheel:S.scrollFixedColsAndRows,style:{top:-c.top+s-1+"px",paddingTop:t.shifts.y,height:r,position:"absolute"},_flags:w.KEYED_LIST},C.getHandlers(p.yStart,p.xStart,e)),v(u.length)),b(_,[l&&w.el("span.dhx_span-spans",{role:"presentation"},[l])])),w.el(".dhx_frozen-cols-border",{role:"presentation"})]),e.$footer?a:null]}}}},function(e,t,i){"use strict";var x=this&&this.__assign||function(){return(x=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var C=i(0),p=i(3),_=i(37),E=i(21),n=i(10),g=i(28),v=i(85),S=2;function o(e,t,i,n){i&&(i.toLocaleLowerCase().includes("touch")?t._events:t.events).fire(i,[e,n])}function I(e,t,i){return{onclick:[o,e,i,n.GridEvents[t+"CellClick"]],onmouseover:[o,e,i,n.GridEvents[t+"CellMouseOver"]],onmousedown:[o,e,i,n.GridEvents[t+"CellMouseDown"]],ontouchstart:[o,e,i,n.GridEvents[t+"CellMouseDown"]],ondblclick:[o,e,i,n.GridEvents[t+"CellDblClick"]],oncontextmenu:[o,e,i,n.GridEvents[t+"CellRightClick"]],ontouchmove:[o,e,i,n.GridSystemEvents[t+"CellTouchMove"]],ontouchend:[o,e,i,n.GridSystemEvents[t+"CelltouchEnd"]]}}function k(e,t,i,n,o,r){void 0===o&&(o="");var s=t.type?"dhx_"+t.type+"-cell":"dhx_string-cell",e=i.content[e.content]&&i.content[e.content].toHtml(t,i),a={};return i.columns.forEach(function(e){var t=!!i.content[e[n][r].content];a[e.id]=t&&i.content[e[n][r].content].toHtml(e,i)||e[n][r].text}),C.el("."+s,{style:{class:o.trim(),padding:0}},[e&&("string"==typeof e||"number"==typeof e?C.el("div",{class:"dhx_grid-footer-cell-text",role:"presentation",".innerHTML":t.template&&"string"==typeof e?t.template(e,a,t):e}):e)])}function a(p,e){if(!p.data||!p.columns)return[];var t,g,v=p.$positions,_=e.name,m=p.currentColumns,y=p[_+"RowHeight"]||40,b=(t=_,e=(e=m).map(function(e){return e[t]||[{}]}),E.transpose(e)),w=1;return b.map(function(e,f){return C.el(".dhx_"+_+"-row",x({style:{height:y}},{role:"row","aria-rowindex":f+1}),e.map(function(n,e){var t=n.css||"",i=m[e],o=v.xStart+e+1,r="dxi dxi-sort-variant dhx_grid-sort-icon",s="none";p.sortBy&&""+i.id===p.sortBy&&!n.content&&(r+=" dhx_grid-sort-icon--"+(c=p.sortDir||"asc"),t+=" dhx_grid-"+_+"-cell--sorted ",s="asc"===c?"ascending":"descending");var a=E.isSortable(p,i)&&n.text&&"footer"!==_&&!1!==n.headerSort;a&&(t+=" dhx_grid-header-cell--sortable");var l=0===e?"dhx_first-column-cell":"",c=e===m.length-1?"dhx_last-column-cell":"";n.content||(n.align?t+=" dhx_grid-header-cell--align_"+n.align+" ":t+=" dhx_grid-header-cell--"+("number"===i.type||"percent"===i.type||"date"===i.type?"align_right":"align_left")+" "),t+=l+" "+c;c=(void 0!==i.resizable?i:p).resizable;c&&(c=C.el("div",{class:"dhx_resizer_grip_wrap","aria-hidden":"true"},[C.el("div",{class:"dhx_resizer_grip",dhx_resized:i.id,style:{height:100*b.length+"%"}},[C.el("div",{class:"dhx_resizer_grip_line"})])]),(h=i.header&&(null===(u=i.header[0])||void 0===u?void 0:u.colspan))&&(g=h,w=1),g&&w!==g&&(0===f&&(c=null),w++),"footer"===_&&(c=null)),n.align&&(t+=" dhx_align-"+n.align);var u=function(e,t,i){t={"aria-colindex":t};return"footer"===e||n.content?t.role="gridcell":(t.role="columnheader",t["aria-sort"]=i),t};if(n.content)return C.el(".dhx_grid-"+_+"-cell.dhx_grid-custom-content-cell",x(x({class:t.trim(),"data-dhx-id":i.id,_key:e,style:{width:i.$width,height:"footer"===_?y+S/2+"px":y+"px"}},I(i,_,p)),u(_,o,s)),[k(n,i,p,_,"",f),c||null]);var d,h="dhx_grid-header-cell-text_content";return p.autoHeight&&(h+=" dhx_grid-header-cell-text_content-auto-height"),C.el(".dhx_grid-"+_+"-cell",x(x({class:t.trim(),"data-dhx-id":i.id,_key:e,style:{width:i.$width,height:"footer"===_?y+S/2+"px":y+"px"}},I(i,_,p)),u(_,o,s)),[C.el("div.dhx_grid-header-cell-text",{role:"presentation"},[C.el("span",x(x({class:h},(d=n.text,a?{role:"button","aria-label":"Sort by "+d}:{})),{".innerHTML":n.text})),c||null]),a&&C.el("div",{class:r,"aria-hidden":"true"})])}))})}function l(d,h){var f=d.columns,e=E.transpose(f.map(function(e){return e[h.name]||[]})),p=d[h.name+"RowHeight"]||40,g=h.name,v=0;return e.map(function(e,u){return v=0,C.el(".dhx_span-row",{style:{top:p*u+"px",height:p},class:"dhx_header-row","aria-hidden":"true"},e.map(function(e,t){var i=f[t];v+=i.hidden?0:i.$width;var n=0===t?"dhx_first-column-cell":"",o=t===f.length-1||(e.colspan||0)+(t-1)>=f.length-1?"dhx_last-column-cell":"",r=p;e.rowspan&&(r=r*e.rowspan-1);var s=E.isSortable(d,i)&&e.rowspan&&e.text&&"footer"!==h.name,a="dxi dxi-sort-variant dhx_grid-sort-icon";d.sortBy&&""+i.id===d.sortBy&&!e.content&&(a+=" dhx_grid-sort-icon--"+(d.sortDir||"asc"));var l=i.align?"dhx_align-"+i.align:"number"!==i.type&&"percent"!==i.type&&"date"!==i.type||e.colspan?"dhx_align-left":"dhx_align-right",c="dhx_grid-header-cell "+n+" "+o+" "+(e.rowspan?"dhx_span-cell__rowspan":"")+" "+(e.align?"dhx_align-"+e.align:l)+" "+(e.css||"");s&&(c+=" dhx_grid-header-cell--sortable"),e.content||(e.align?c+=" dhx_grid-header-cell--align_"+e.align+" ":c+=" dhx_grid-header-cell--"+("number"===i.type||"percent"===i.type||"date"===i.type?"align_right":"align_left")+" ");n=null;e.content&&((n=k(e,i,d,g,c,u)).attrs.style=x(x({},n.attrs.style),{width:"100%",borderRight:"0"}));o="";0<v-i.$width&&(o="1px solid #e4e4e4");l="dhx_grid-header-cell-text_content";return d.autoHeight&&(l+=" dhx_grid-header-cell-text_content-auto-height"),e.colspan||e.rowspan?C.el(".dhx_span-cell",x({style:{width:_.getWidth(f,e.colspan,t),height:"footer"===g?r+S/2:r,left:v-i.$width,borderLeft:o,top:p*u},class:c.trim(),"data-dhx-id":i.id},I(i,g,d)),[n||e.rowspan?C.el("div.dhx_grid-header-cell-text",{role:"presentation"},[C.el("span",{class:l,".innerHTML":e.text})]):C.el("span",{class:l,".innerHTML":e.text}),s&&C.el("div",{class:a})]):null}).filter(function(e){return e}))})}function m(e){return{role:"rowgroup","aria-rowcount":e}}t.getRows=a,t.getFixedSpans=l,t.getFixedRows=function(e,t){var i=a(e,t),n=l(e,t),o=null;"footer"!==t.name||t.sticky||(o=0<=e.leftSplit&&a(x(x({},e),{currentColumns:e.columns.slice(0,e.leftSplit),$positions:x(x({},e.$positions),{xStart:0,xEnd:e.leftSplit})}),t));var r,s=((s={position:"sticky"})[t.position]=0,s);return t.sticky||(s.left=-e.scroll.left,r=-e.scroll.left,s.position="relative"),C.el(".dhx_"+t.name+"-wrapper",{class:t.sticky?"":"dhx_compatible-"+t.name,style:x(x({},s),{left:t.sticky?r:0,height:"footer"===t.name?e[t.name+"Height"]+S/2:e[t.name+"Height"],width:t.sticky?e.$totalWidth:t.wrapper.width-S}),role:"presentation"},[C.el(".dhx_grid-"+t.name+(e.leftSplit?".dhx_grid_fixed_left":""),{style:{height:"footer"===t.name?e[t.name+"Height"]+S/2:e[t.name+"Height"],left:r,paddingLeft:t.shifts.x,width:e.$totalWidth},role:"presentation"},[C.el(".dhx_"+t.name+"-rows",x({},m(f(i).length)),f(i)),C.el(".dhx_"+t.name+"-spans",{style:{marginLeft:-t.shifts.x},class:"dhx_"+t.name+"-rows",role:"presentation"},n),o&&C.el(".dhx_"+t.name+"-fixed-cols",{style:{position:"absolute",top:0,left:e.scroll.left+"px",height:"100%"}},o)]),C.el("div",{style:{width:e.$totalWidth},role:"presentation"})])},t.getFixedDataRows=function(e,t){if("number"==typeof e.topSplit){var i=e.$totalWidth,n=e.topSplit,o=e.$positions,r=e.data,s=e.$totalHeight,a=e.width,l=r.slice(0,n),c="fixedRows",u=g.getCells(x(x({},e),{data:l,$renderFrom:c,$positions:x(x({},o),{yStart:0,yEnd:n})})),d=l.reduce(function(e,t){return e+t.$height},0),h=g.getSpans(x(x({},e),{$renderFrom:c,data:r}),!0),n=v.getFixedCols(x(x({},e),{headerHeight:0,data:l,$renderFrom:c,scroll:x(x({},e.scroll),{top:-1}),$positions:x(x({},o),{yStart:0,yEnd:n}),$totalHeight:d}),x(x({},t),{shifts:x(x({},t.shifts),{y:0})}))||[];return[C.el(".dhx_grid-fixed-data-rows-wrap",{style:{top:e.headerHeight,overflow:"hidden",height:d>t.wrapper.height?t.wrapper.height:d,width:i<a?i:s>=t.gridBodyHeight?a-p.getScrollbarWidth()-2:a-2}},f([C.el(".dhx_grid-fixed-cols",x(x({onwheel:E.scrollFixedColsAndRows,style:{left:-e.scroll.left+"px",paddingLeft:t.shifts.x,position:"absolute",width:i},_flags:C.KEYED_LIST},g.getHandlers(0,o.xStart,e)),m(r.length)),f(u,[h&&C.el(".dhx_span-spans",{role:"presentation"},[h])]))],n))]}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(1),l=i(0),c=i(3),u=i(17),d=i(22),o=(s=d.Navbar,o(h,s),h.prototype.getState=function(e){if(!a.isDefined(e)||this.data.getItem(e)){var t,i={};for(t in this.data.eachChild(this.data.getRoot(),function(e){e.twoState&&!e.group?i[e.id]=e.active:"input"!==e.type&&"selectButton"!==e.type&&"datePicker"!==e.type||(i[e.id]=e.value)},!1),this._groups)this._groups[t].active&&(i[t]=this._groups[t].active);return e?i[e]:i}},h.prototype.setState=function(n){var o,e,r=this;for(e in n)!function(t){if(r._groups&&r._groups[t])r._groups[t].active&&(r.data.update(r._groups[t].active,{active:!1}),r._groups[t].active=n[t],r.data.update(n[t],{active:!0}));else{var e=r.data.getItem(t);switch(e.type){case"input":r.data.update(t,{value:n[t]});break;case"selectButton":var i=null===(o=e.items)||void 0===o?void 0:o.find(function(e){return e.value===n[t]});r.data.update(t,{value:n[t],icon:null==i?void 0:i.icon});break;default:r.data.update(t,{active:n[t]})}}}(e)},h.prototype._customHandlers=function(){var i=this;return{input:function(e){var t=c.locate(e);i.data.update(t,{value:e.target.value})},tooltip:function(e){var t=c.locateNode(e);t&&(e=t.getAttribute("data-dhx-id"),null!=(e=i.data.getItem(e))&&e.tooltip&&u.tooltip(e.tooltip,{node:t,position:u.Position.bottom}))}}},h.prototype._getFactory=function(){return d.createFactory({widget:this,defaultType:"navItem",allowedTypes:["button","imageButton","selectButton","navItem","menuItem","separator","spacer","title","input","customHTML","datePicker","customHTMLButton"],widgetName:"toolbar"})},h.prototype._draw=function(e){var i=this,t=this.data.getLength()?this.data.reduce(function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}},0)+24:null;return l.el("nav.dhx_widget.dhx_toolbar",{style:{height:t},class:this.config.css||""},[l.el("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},{role:"toolbar","aria-label":e||""}),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",function(e){var t;9!==e.which||(t=c.locateNode(document.activeElement))&&(e=t.getAttribute("data-dhx-id"),null!=(e=i.data.getItem(e))&&e.tooltip&&u.tooltip(e.tooltip,{node:t,position:u.Position.bottom,force:!0}))},!0)}}}),this.data.map(function(e){return i._factory(e)},this.data.getRoot(),!1))])},h.prototype._getMode=function(e,t){return e.id===t?"bottom":"right"},h.prototype._close=function(e){this._activePosition=null,this._currentRoot=null,s.prototype._close.call(this,e)},h.prototype._setRoot=function(e){this.data.getParent(e)===this.data.getRoot()&&(this._currentRoot=e)},h);function h(e,t){var i=s.call(this,e,a.extend({navigationType:"click"},t))||this;i._currentRoot=null;return i.mount(e,l.create({render:function(){return i._draw(e)}})),i}t.Toolbar=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(1),n=i(0),o=i(4),r=i(20),c=i(18),s=i(14),a=i(30),u=i(222),f=i(44),d=i(223),h=i(22),i=(p.prototype.paint=function(){this._layout.paint()},p.prototype.isFullScreen=function(){return this._fullScreen},p.prototype.setFullScreen=function(){this._fullScreen||(this._fullScreen=!0,this.setSize(window.innerWidth,window.innerHeight),this.setPosition(window.pageXOffset,window.pageYOffset))},p.prototype.unsetFullScreen=function(){this._fullScreen&&(this._fullScreen=!1,this.setSize(this._oldSizes.width,this._oldSizes.height),this.setPosition(this._oldPosition.left,this._oldPosition.top))},p.prototype.setSize=function(e,t){this._oldSizes={width:this._popup.offsetWidth,height:this._popup.offsetHeight};var i={width:this._oldSizes.width,height:this._oldSizes.height};l.isDefined(e)&&(this.config.width=i.width=e),l.isDefined(t)&&(this.config.height=i.height=t),this._popup.style.width=i.width+"px",this._popup.style.height=i.height+"px",this.events.fire(f.WindowEvents.resize,[i,this._oldSizes,{left:!0,top:!0,bottom:!0,right:!0}])},p.prototype.getSize=function(){return{width:this._popup.offsetWidth,height:this._popup.offsetHeight}},p.prototype.setPosition=function(e,t){this._oldPosition={left:this._popup.offsetLeft,top:this._popup.offsetTop};var i={left:this._oldPosition.left,top:this._oldPosition.top};l.isDefined(e)&&(this.config.left=i.left=e),l.isDefined(t)&&(this.config.top=i.top=t),this._popup.style.left=i.left+"px",this._popup.style.top=i.top+"px",this.events.fire(f.WindowEvents.resize,[i,this._oldPosition,{left:!0,top:!0,bottom:!0,right:!0}])},p.prototype.getPosition=function(){return{left:this._popup.offsetLeft,top:this._popup.offsetTop}},p.prototype.show=function(e,t){if(void 0===e&&(e=this.config.left),void 0===t&&(t=this.config.top),this.events.fire(f.WindowEvents.beforeShow,[{left:e,top:t}])){this.isVisible()&&this.hide(),d.default.setActive(this._uid),this._popup.className+=" dhx_popup dhx_widget"+(this.config.modal?" dhx_popup--window_modal":" dhx_popup--window")+(this.config.css?" "+this.config.css:""),this._popup.style.position=this.config.modal?"fixed":"absolute",this._popup.setAttribute("data-dhx-widget-id",this._uid);var i=this._getContainerParams(),n=i.containerInnerWidth,o=i.containerInnerHeight,r=i.containerXOffset,s=i.containerYOffset,a=this.config.width="number"==typeof this.config.width&&this.config.width||"number"==typeof this.config.minWidth&&this.config.minWidth||n/2,i=this.config.height="number"==typeof this.config.height&&this.config.height||"number"==typeof this.config.minHeight&&this.config.minHeight||o/2;if(this.config.left=e=l.isDefined(e)?e:(n-a)/(this.config.modal?2:2+r),this.config.top=t=l.isDefined(t)?t:(o-i)/(this.config.modal?2:2+s),this._isActive)return this._popup.style.left=e+"px",void(this._popup.style.top=t+"px");this.config.viewportOverflow&&d.default.openFreeWindow(this.config.node),this.config.modal&&this._blockScreen(),this._popup.style.width=a+"px",this._popup.style.height=i+"px",this._popup.style.left=e+"px",this._popup.style.top=t+"px",this.config.node.appendChild(this._popup),this._popup.focus(),this._isActive=!0,this.events.fire(f.WindowEvents.afterShow,[{left:e,top:t}]),c.focusManager.setFocusId(this._uid)}},p.prototype.hide=function(){this._hide()},p.prototype._hide=function(e){this._isActive&&this.events.fire(f.WindowEvents.beforeHide,[{left:this.config.left,top:this.config.top},e])&&(this.config.viewportOverflow&&d.default.closeFreeWindow(this.config.node),this._blocker&&(this.config.node.removeChild(this._blocker),this.config.closable&&this._keyManager.removeHotKey(null,this),this._blocker=null),this.config.node.removeChild(this._popup),this._isActive=!1,this.events.fire(f.WindowEvents.afterHide,[{left:this.config.left,top:this.config.top},e]))},p.prototype.isVisible=function(){return this._isActive},p.prototype.getWidget=function(){return this._layout.getCell("content").getWidget()},p.prototype.getContainer=function(){return this.getRootView().data._container},p.prototype.attach=function(e,t){this._layout.getCell("content").attach(e,t)},p.prototype.attachHTML=function(e){this._layout.getCell("content").attachHTML(e)},p.prototype.getRootView=function(){return this._layout.getRootView()},p.prototype.destructor=function(){this._isActive&&this.hide(),this.header&&this.header.destructor(),this.footer&&this.footer.destructor(),this.events&&this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._layout&&this._layout.destructor(),this.config=this.header=this.footer=this.events=null,this._popup=this._uid=this._handlers=this._isActive=this._keyManager=this._fullScreen=this._oldSizes=this._oldPosition=null},p.prototype.fullScreen=function(){this.setFullScreen()},p.prototype._initHandlers=function(){var i=this;this._handlers={headerDblClick:function(e){return i.events.fire(f.WindowEvents.headerDoubleClick,[e])},move:function(e){3!==e.which&&(e.preventDefault(),u.detectDrag(e).then(function(e){e&&i._startDrag(e.x,e.y)}))},resize:{".dhx_window-resizer":function(t){3!==t.which&&(t.preventDefault(),d.default.setActive(i._uid),u.detectDrag(t).then(function(e){e&&((e=t.target.classList).contains("dhx_window-resizer--left")?i._startResize({left:!0}):e.contains("dhx_window-resizer--right")?i._startResize({right:!0}):e.contains("dhx_window-resizer--top")?i._startResize({top:!0}):e.contains("dhx_window-resizer--bottom")?i._startResize({bottom:!0}):e.contains("dhx_window-resizer--bottom_left")?i._startResize({left:!0,bottom:!0}):e.contains("dhx_window-resizer--bottom_right")?i._startResize({bottom:!0,right:!0}):e.contains("dhx_window-resizer--top_left")?i._startResize({top:!0,left:!0}):e.contains("dhx_window-resizer--top_right")&&i._startResize({top:!0,right:!0}))}))}},setActive:function(){d.default.setActive(i._uid)}}},p.prototype._initUI=function(){var i=this,e=[],t=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;t&&e.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),e.push({id:"content",css:t?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&e.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&e.push({id:"resizers",height:"content",css:"resizers"});var n,e=this._layout=new s.Layout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:e,on:{mousedown:this._handlers.setActive},id:this._uid});t&&(n=this.header=new a.Toolbar,this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),n.events.on(h.NavigationBarEvents.click,function(e,t){"close"===e&&i._hide(t)})),e.getCell("header").attach(n)),this.config.footer&&(n=this.footer=new a.Toolbar,e.getCell("footer").attach(n)),this.config.resizable&&e.getCell("resizers").attach(function(){return i._drawResizers()})},p.prototype._drawResizers=function(){return n.el(".dhx-resizers",{onmousedown:this._handlers.resize},[n.el(".dhx_window-resizer.dhx_window-resizer--left",{_ref:"left"}),n.el(".dhx_window-resizer.dhx_window-resizer--right",{_ref:"right"}),n.el(".dhx_window-resizer.dhx_window-resizer--bottom",{_ref:"bottom"}),n.el(".dhx_window-resizer.dhx_window-resizer--top",{_ref:"top"}),n.el(".dhx_window-resizer.dhx_window-resizer--bottom_right",{_ref:"bottomRight"}),n.el(".dhx_window-resizer.dhx_window-resizer--bottom_left",{_ref:"bottomLeft"}),n.el(".dhx_window-resizer.dhx_window-resizer--top_right",{_ref:"topRight"}),n.el(".dhx_window-resizer.dhx_window-resizer--top_left",{_ref:"topLeft"})])},p.prototype._startDrag=function(e,t){var a=this;this.config.node.classList.add("dhx_window--stop_selection");function i(e){var t,i,n,o={left:a._popup.offsetLeft,top:a._popup.offsetTop},r=e.pageX-l,s=e.pageY-c;a.config.viewportOverflow||(t=(n=a._getContainerParams()).containerXOffset,i=n.containerYOffset,e=n.containerInnerWidth,n=n.containerInnerHeight,r<t?r=t:t+e-u<r&&(r=t+e-u),s<i?s=i:i+n-d<s&&(s=i+n-d)),a.config.left=r,a.config.top=s,a._popup.style.left=r+"px",a._popup.style.top=s+"px",s={left:r,top:s},a.events.fire(f.WindowEvents.move,[s,o,{left:!0,top:!0,bottom:!0,right:!0}])}var l=e-this._popup.offsetLeft,c=t-this._popup.offsetTop,u=this._popup.offsetWidth,d=this._popup.offsetHeight,n=function(){document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",i),a.config.node.classList.remove("dhx_window--stop_selection")};document.addEventListener("mouseup",n),document.addEventListener("mousemove",i)},p.prototype._startResize=function(r){var e,t,s=this,a=100|this.config.minWidth,l=100|this.config.minHeight,c=this._popup.offsetLeft,u=this._popup.offsetTop,d=this._popup.offsetWidth,h=this._popup.offsetHeight,i=this.getRootView().refs;switch(!0){case r.bottom&&r.left:t="dhx_window-body-pointer--bottom_left",e=i.bottomLeft;break;case r.bottom&&r.right:t="dhx_window-body-pointer--bottom_right",e=i.bottomLeft;break;case r.top&&r.left:t="dhx_window-body-pointer--top_left",e=i.bottomLeft;break;case r.top&&r.right:t="dhx_window-body-pointer--top-right",e=i.right;break;case r.top:t="dhx_window-body-pointer--top",e=i.bottomLeft;break;case r.bottom:t="dhx_window-body-pointer--bottom",e=i.bottomLeft;break;case r.left:t="dhx_window-body-pointer--left",e=i.bottomLeft;break;case r.right:t="dhx_window-body-pointer--right",e=i.right}e.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(t);function n(e){var t=(o=s._getContainerParams()).containerInnerWidth,i=o.containerInnerHeight,n=o.containerXOffset,o=o.containerYOffset,e={width:s._notInNode()?e.pageX-c:e.pageX-s.config.node.offsetLeft-c,height:s._notInNode()?e.pageY-u:e.pageY-s.config.node.offsetTop-u,left:s._notInNode()?e.pageX:e.pageX-s.config.node.offsetLeft,top:s._notInNode()?e.pageY:e.pageY-s.config.node.offsetTop};r.right&&(e.width<a?e.width=a:e.width>n+t-c&&(e.width=n+t-c),s._popup.style.width=e.width+"px"),r.bottom&&(e.height<l?e.height=l:e.height>o+i-u&&(e.height=o+i-u),s._popup.style.height=e.height+"px"),r.left&&(c+d-e.left<a&&(e.left=c+d-a),e.width=c+d-e.left,s.config.left=e.left,s._popup.style.left=e.left+"px",s._popup.style.width=e.width+"px"),r.top&&(e.top<o?e.top=o:u+h-e.top<l&&(e.top=u+h-l),e.height=u+h-e.top,s.config.top=e.top,s._popup.style.top=e.top+"px",s._popup.style.height=e.height+"px"),s.config.width=s._popup.offsetWidth,s.config.height=s._popup.offsetHeight,s.events.fire(f.WindowEvents.resize,[e,{left:c,top:u,height:h,width:d},r])}var o=function(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",n),s.config.node.classList.remove("dhx_window--stop_selection"),s.config.node.classList.remove(t),e.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",o),document.addEventListener("mousemove",n)},p.prototype._blockScreen=function(){var n=this,e=document.createElement("div");e.className="dhx_window__overlay",this.config.node.appendChild(e),this._blocker=e,this.config.closable&&(e.addEventListener("click",function(e){return n._hide(e)}),this._keyManager.addHotKey("escape",function(e){var t=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window_modal")),i=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window")),i=t.concat(i);1!==i.length?(i.sort(function(e,t){return+window.getComputedStyle(t).zIndex-+window.getComputedStyle(e).zIndex}),i[i.length-1]===n._popup&&n._hide(e)):n._hide(e)}))},p.prototype._notInNode=function(){return this.config.node===document.body||this.config.modal},p.prototype._getContainerParams=function(){var e=this._notInNode();return{containerInnerWidth:e?window.innerWidth:this.config.node.offsetWidth,containerInnerHeight:e?window.innerHeight:this.config.node.offsetHeight,containerXOffset:e?window.pageXOffset:this.config.node.scrollLeft,containerYOffset:e?window.pageYOffset:this.config.node.scrollTop}},p);function p(e){var i=this;this.config=l.extend({movable:!1,resizable:!1,closable:e.modal},e),this.config.node&&"string"==typeof this.config.node?this.config.node=document.getElementById(this.config.node):this.config.node||(this.config.node=document.body),this._uid=l.uid(),this.events=new o.EventSystem(this);e=this._popup=document.createElement("div");e.tabIndex=1,e.setAttribute("role","dialog"),e.setAttribute("aria-modal",""+(this.config.modal||!1)),this.config.modal||d.default.add(this._uid,this._popup),this._fullScreen=!1,this._isActive=!1,this._keyManager=new r.KeyManager(function(e,t){return t===i._uid}),this._initHandlers(),this._initUI(),this.config.html&&this.attachHTML(this.config.html)}t.Window=i},function(e,d,h){"use strict";(function(e){var n,t=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=this&&this.__rest||function(e,t){var i={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i},E=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(d,"__esModule",{value:!0});var o,r=h(4),s=h(7),a=h(14),S=h(1),I=h(90),k=h(91),M=h(58),P=h(92),O=h(46),D=h(93),F=h(94),A=h(95),V=h(96),R=h(97),T=h(98),l=h(9),H=h(99),L=h(104),j=h(105),N=h(106),$=h(6),c=h(0),t=(o=s.View,t(u,o),u.prototype.paint=function(){o.prototype.paint.call(this),this.layout.paint()},u.prototype.send=function(n,o,r){var s=this;if(void 0===o&&(o="POST"),this.events.fire($.FormEvents.beforeSend))return new e(function(e,t){var i=new XMLHttpRequest;switch(i.onload=function(){200<=i.status&&i.status<300?e(i.response||i.responseText):t({status:i.status,statusText:i.statusText})},i.onloadend=function(){i.readyState===XMLHttpRequest.DONE&&200===i.status&&s.events.fire($.FormEvents.afterSend)},i.onerror=function(){t({status:i.status,statusText:i.statusText})},"GET"===o&&(n+="?"+encodeURIComponent(JSON.stringify(s.getValue()))),i.open(o,n),r||i.setRequestHeader("Content-Type","application/json"),o){case"POST":s._send(),i.send(r?s.getValue(!0):JSON.stringify(s.getValue()));break;case"DELETE":case"PUT":i.send(r?s.getValue(!0):JSON.stringify(s.getValue()));break;case"GET":default:i.send()}})},u.prototype.clear=function(e){switch(e){case $.ClearMethod.value:this._clear();break;case $.ClearMethod.validation:this._clearValidate();break;default:this._clear(),this._clearValidate()}this.paint()},u.prototype.setValue=function(e){for(var t in e)for(var i in this._attachments)"function"==typeof this._attachments[i].setValue&&this._attachments[i].config.name===t&&this._attachments[i].setValue(e[t])},u.prototype.getValue=function(e){if(e){var t,n=new FormData,o=this;for(t in this._state)!function(i){Array.isArray(o._state[i])?o._state[i].forEach(function(e,t){return n.append(i+"["+t+"]",e)}):n.append(i,o._state[i])}(t);return n}return i({},this._state)},u.prototype.getItem=function(e){for(var t in this._attachments)if(t==e)return this._attachments[t]},u.prototype.validate=function(e){for(var t in void 0===e&&(e=!1),this._isValid=!0,this._attachments)"function"==typeof this._attachments[t].validate&&l.isVerify(this._attachments[t].config)&&!this._attachments[t].validate(e)&&(this._isValid=!1,e||this.events.fire($.FormEvents.validationFail,[t,this._attachments[t]]));return this._isValid},u.prototype.setProperties=function(e,t){if("string"==typeof e&&t&&!S.isEmptyObj(t))for(var i in this._attachments)"function"==typeof this._attachments[i].setProperties&&i===e&&this._attachments[i].setProperties(t);if("object"==typeof e&&!S.isEmptyObj(e))for(var i in this._attachments)"function"!=typeof this._attachments[i].setProperties||S.isEmptyObj(e[i])||this._attachments[i].setProperties(e[i])},u.prototype.getProperties=function(e){if(e)for(var t in this._attachments)if("function"==typeof this._attachments[t].getProperties&&t===e)return this._attachments[t].getProperties();var i={};for(t in this._attachments)"function"==typeof this._attachments[t].getProperties&&(i[t]=this._attachments[t].getProperties());return i},u.prototype.show=function(){if(this.config.hidden||Object.values(this._attachments).some(function(e){return!e.config.hidden}))for(var e in this._formContainerShow(),this._attachments)"function"==typeof this._attachments[e].show&&this._attachments[e].show()},u.prototype.hide=function(e){if(!this.config.hidden||e)for(var t in this._formContainerHide(),this._attachments)"function"==typeof this._attachments[t].hide&&this._attachments[t].hide(e)},u.prototype.setFocus=function(e){for(var t in this._attachments){var i=this._attachments[t];"radiogroup"!==i.config.type&&"checkboxgroup"!==i.config.type||i.focus(e),i.config.name===e&&i.focus()}},u.prototype.blur=function(e){for(var t in e||this.forEach(function(e){"function"==typeof e.blur&&e.blur()}),this._attachments){var i=this._attachments[t];"radiogroup"!==i.config.type&&"checkboxgroup"!==i.config.type||i.blur(e),i.config.name===e&&i.blur()}},u.prototype.isVisible=function(e){if(!e)return!this.config.hidden;for(var t in this._attachments)if(t===e)return!this._attachments[t].config.hidden},u.prototype.disable=function(){for(var e in this.config.disabled=!0,this._attachments)"function"==typeof this._attachments[e].disable&&this._attachments[e].disable()},u.prototype.enable=function(){for(var e in this.config.disabled=!1,this._attachments)"function"==typeof this._attachments[e].enable&&this._attachments[e].enable()},u.prototype.isDisabled=function(e){if(!e)return this.config.disabled;for(var t in this._attachments)if(t===e)return this._attachments[t].config.disabled},u.prototype.forEach=function(e){for(var t=Object.values(this._attachments),i=0;i<t.length;i++)e.call(this,t[i],i,t)},u.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this._attachments=this._state=this._uid=this.container=this.events=this._isValid=null,this.unmount()},u.prototype.getRootView=function(){return this.layout.getRootView()},u.prototype._addLayoutItem=function(e){var i=this,t=e.id=e.id||S.uid(),n=e.name=e.name||t.toString();e.type=e.type&&e.type.toLowerCase();var o=e.width,r=e.height,s=e.css,t=e.padding,a=C(e,["css","padding"]),l=s?s+" dhx_form-element":"dhx_form-element",s=!("spacer"===e.type||void 0===e.type);switch(s&&!o&&(o="content"),s&&!r&&(r="content"),a.type){case"button":a.full&&(l+=" dhx_button--full-gravity");var c=this._attachments[n]=new k.Button(null,e);c.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),c.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),c.events.on($.ItemEvent.click,function(e){e.preventDefault(),i.events.fire($.FormEvents.click,[n,e]),i.events.fire($.FormEvents.buttonClick,[n,e]),c.config.submit&&i.validate()&&c.config.url&&i.send(c.config.url)}),c.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),c.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),c.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),c.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),c.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),c.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),c.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"datepicker":var u=this._attachments[n]=new I.DatePicker(null,e);this._state[n]=u.getValue("Date"===a.valueFormat),u.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),u.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=u.getValue("Date"===a.valueFormat),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),u.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),u.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),u.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),u.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),u.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),u.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),u.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),u.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),u.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),u.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"checkbox":var d=this._attachments[n]=new M.Checkbox(null,e);this._state[n]=d.getValue(),d.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),d.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=d.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),d.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),d.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),d.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),d.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),d.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),d.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),d.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),d.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),d.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),d.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"checkboxgroup":var h=this._attachments[n]=new P.CheckboxGroup(null,e);this._state[n]=h.getValue(),h.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),h.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=h.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),h.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),h.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),h.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),h.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),h.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),h.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),h.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),h.events.on($.ItemEvent.focus,function(e,t){i.events.fire($.FormEvents.focus,[n,e,t])}),h.events.on($.ItemEvent.blur,function(e,t){i.events.fire($.FormEvents.blur,[n,e,t])}),h.events.on($.ItemEvent.keydown,function(e,t){i.events.fire($.FormEvents.keydown,[e,n,t])}),h.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),h.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),h.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])});break;case"combo":var f=this._attachments[n]=new R.Combo(null,e);this._state[n]=f.getValue(),f.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),f.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=f.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),f.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),f.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),f.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),f.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),f.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),f.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),f.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),f.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),f.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),f.events.on($.ItemEvent.keydown,function(e,t){i.events.fire($.FormEvents.keydown,[e,n,t])});break;case"input":var p=this._attachments[n]=new O.Input(null,e);this._state[n]=p.getValue(),p.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),p.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=p.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),p.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),p.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),p.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),p.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),p.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),p.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),p.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),p.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),p.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),p.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"radiogroup":var g=this._attachments[n]=new D.RadioGroup(null,e);this._state[n]=g.getValue(),g.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),g.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=g.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),g.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),g.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),g.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),g.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),g.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),g.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),g.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),g.events.on($.ItemEvent.focus,function(e,t){i.events.fire($.FormEvents.focus,[n,e,t])}),g.events.on($.ItemEvent.blur,function(e,t){i.events.fire($.FormEvents.blur,[n,e,t])}),g.events.on($.ItemEvent.keydown,function(e,t){i.events.fire($.FormEvents.keydown,[e,n,t])});break;case"select":var v=this._attachments[n]=new F.Select(null,e);this._state[n]=v.getValue(),v.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),v.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=v.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),v.events.on($.ItemEvent.changeOptions,function(e){i.layout.getCell(n).config.options=E(e)}),v.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),v.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),v.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),v.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),v.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),v.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),v.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),v.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),v.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),v.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"simplevault":a.$vaultHeight=r;var _=this._attachments[n]=new H.SimpleVault(null,e);this._state[n]=_.getValue(),_.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),_.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=_.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),_.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),_.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),_.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),_.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),_.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),_.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),_.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])});break;case"slider":var m=this._attachments[n]=new T.SliderForm(null,e);this._state[n]=m.getValue(),m.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),m.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),m.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),m.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),m.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),m.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),m.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),m.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"textarea":var y=this._attachments[n]=new A.Textarea(null,e);this._state[n]=y.getValue(),y.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),y.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=y.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),y.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),y.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),y.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),y.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),y.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),y.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),y.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),y.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),y.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),y.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"text":"content"===o&&(l+=" dhx_form-element--fit-content");var b=this._attachments[n]=new V.Text(null,e);this._state[n]=b.getValue(),b.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),b.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=b.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),b.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),b.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),b.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),b.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),b.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),b.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),b.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])});break;case"timepicker":var w=this._attachments[n]=new L.TimePicker(null,e);this._state[n]=a.value&&w.getValue("timeObject"===a.valueFormat)||"",w.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),w.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=w.getValue("timeObject"===a.valueFormat),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),w.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),w.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),w.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),w.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),w.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),w.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),w.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),w.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),w.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),w.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])}),w.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),w.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),w.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])});break;case"colorpicker":var x=this._attachments[n]=new j.ColorPicker(null,e);this._state[n]=x.getValue(),x.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),x.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=x.getValue(),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),x.events.on($.ItemEvent.change,function(e){i._state[n]=e,i.events.fire($.FormEvents.change,[n,e])}),x.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),x.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),x.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),x.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])}),x.events.on($.ItemEvent.beforeValidate,function(e){return i.events.fire($.FormEvents.beforeValidate,[n,e])}),x.events.on($.ItemEvent.afterValidate,function(e,t){i.events.fire($.FormEvents.afterValidate,[n,e,t])}),x.events.on($.ItemEvent.focus,function(e){i.events.fire($.FormEvents.focus,[n,e])}),x.events.on($.ItemEvent.blur,function(e){i.events.fire($.FormEvents.blur,[n,e])}),x.events.on($.ItemEvent.keydown,function(e){i.events.fire($.FormEvents.keydown,[e,n])});break;case"spacer":default:m=this._attachments[n]=new N.Spacer(null,e);m.events.on($.ItemEvent.beforeChangeProperties,function(e){return i.events.fire($.FormEvents.beforeChangeProperties,[n,e])}),m.events.on($.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i.events.fire($.FormEvents.afterChangeProperties,[n,e]),i.paint()}),m.events.on($.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire($.FormEvents.beforeHide,[n,e])}),m.events.on($.ItemEvent.beforeShow,function(e){return i.events.fire($.FormEvents.beforeShow,[n,e])}),m.events.on($.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire($.FormEvents.afterHide,[n,e])}),m.events.on($.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire($.FormEvents.afterShow,[n,e])})}t={id:n,width:o,height:r,padding:t,css:l};return"gravity"in e&&(t.gravity=e.gravity),t},u.prototype._changeProps=function(e,t){var i,n=["width","height","css","padding"];for(i in t)n.includes(i)&&(this.layout.getCell(e).config[i]=t[i])},u.prototype._addLayoutItems=function(e){var i=this;return e.map(function(e){if(l.isBlock(e)){var t={width:"content",height:"content"};return i._createLayoutConfig(e,t),t}return i._addLayoutItem(e)})},u.prototype._checkLayoutConfig=function(e,t){return S.isDefined(e.css)&&(t.css=e.css),S.isDefined(e.title)&&(t.header=e.title),S.isDefined(e.padding)&&(t.padding=e.padding),S.isDefined(e.gravity)&&(t.gravity=e.gravity),S.isDefined(e.width)&&(t.width=e.width),S.isDefined(e.height)&&(t.height=e.height),S.isDefined(e.align)&&(t.align=e.align),t},u.prototype._createLayoutConfig=function(e,t){t=this._checkLayoutConfig(e,t),S.isDefined(e.rows)?t.rows=this._addLayoutItems(e.rows):S.isDefined(e.cols)&&(t.cols=this._addLayoutItems(e.cols))},u.prototype._initUI=function(e){var t=this._attachments={},i={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,i);var n,o=this.layout=new a.Layout(e,i);for(n in t)o.getCell(n).attach(t[n])},u.prototype._initHandlers=function(){var e=this;this.events.on($.FormEvents.afterShow,function(){e._formContainerShow()}),this.events.on($.FormEvents.afterHide,function(){Object.values(e._attachments).some(function(e){return!e.config.hidden})||e._formContainerHide()})},u.prototype._clear=function(){for(var e in this._state={},this._attachments){var t=this._attachments[e].config.name;"function"==typeof this._attachments[e].clear&&(this._attachments[e].clear(),t?this._state[t]=this._attachments[e].getValue():this._state[e]=this._attachments[e].getValue())}},u.prototype._clearValidate=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].clearValidate&&this._attachments[e].clearValidate()},u.prototype._formContainerShow=function(){this.config.hidden=!1,this.getRootView().node&&(this.getRootView().node.el.style.display="flex")},u.prototype._formContainerHide=function(){this.config.hidden=!0,this.getRootView().node&&(this.getRootView().node.el.style.display="none")},u.prototype._send=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].send&&this._attachments[e].send()},u);function u(e,t){var i=o.call(this,null,S.extend({disabled:!1,hidden:!1},t))||this;return i._isValid=!0,i._state={},i.events=new r.EventSystem(i),i.container=e,i._initUI(e),i.config.hidden&&i.hide(!0),i.config.disabled&&i.disable(),i.events.on($.FormEvents.afterShow,function(){i._formContainerShow()}),i.events.on($.FormEvents.afterHide,function(){Object.values(i._attachments).some(function(e){return!e.config.hidden})||i._formContainerHide()}),i.events.on($.FormEvents.change,function(){return i.paint()}),c.awaitRedraw().then(function(){var e=i.layout.getRootNode();e&&(e.setAttribute("role","form"),i.config.title&&e.setAttribute("aria-label",i.config.title))}),i}d.Form=t}).call(this,h(15))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(38),l=i(16),c=i(4),d=i(0),u=i(1),h=i(19),f=i(8),p=i(6),g=i(9),v=i(20),o=(s=h.Label,o(_,s),_.prototype.destructor=function(){this.events&&this.events.clear(),this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.events=this._uid=this._propsCalendar=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},_.prototype.setProperties=function(e){if(e&&!u.isEmptyObj(e)&&this.events.fire(p.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsCalendar.includes(t)&&(this.calendar.config[t]=e[t]));this.events.fire(p.ItemEvent.afterChangeProperties,[this.getProperties()]),this.calendar.paint(),this.paint()}},_.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},_.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(p.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(p.ItemEvent.afterShow,[t]))},_.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(p.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(p.ItemEvent.afterHide,[i,e]))},_.prototype.isVisible=function(){return!this.config.hidden},_.prototype.disable=function(){this.config.disabled=!0,this.paint()},_.prototype.enable=function(){this.config.disabled=!1,this.paint()},_.prototype.isDisabled=function(){return this.config.disabled},_.prototype.validate=function(e,t){void 0===e&&(e=!1);var i=void 0===t?this.getValue():t,t="Date"===this.config.valueFormat?i instanceof Date:l.stringToDate(i,this.calendar.config.dateFormat,!0);if(e||this.events.fire(p.ItemEvent.beforeValidate,[i]))return this._isValid=this.config.validation?this.config.validation(i):!!t,e||this.events.fire(p.ItemEvent.afterValidate,[i,this._isValid]),this._isValid},_.prototype.clearValidate=function(){this.config.$validationStatus=p.ValidationStatus.pre,this.paint()},_.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&(this.calendar.setValue(e),g.isVerify(this.config)&&this.validate())},_.prototype.getValue=function(e){var t=this.config,i=t.value,t=t.valueFormat;return(i instanceof Date||!e||""===i)&&(i instanceof Date||"Date"!==t||""===i)?i||"":l.stringToDate(i,this.calendar.config.dateFormat)||""},_.prototype.focus=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},_.prototype.blur=function(){var e=this;d.awaitRedraw().then(function(){e._popup.hide(),e.getRootView().refs.input.el.blur()})},_.prototype.clear=function(){""!==this.config.value&&(this.config.value="",this.calendar.clear(),this.events.fire(p.ItemEvent.change,[this.getValue()]))},_.prototype.getWidget=function(){return this.calendar},_.prototype._initView=function(e){var t,i=this;if(u.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",mode:"calendar",weekStart:"sunday",weekNumbers:!1,timePicker:!1,dateFormat:"%d/%m/%y",timeFormat:24,thisMonthOnly:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new f.Popup,this.calendar=new a.Calendar(null,g.widgetConfig(e)),this._popup.attach(this.calendar),this.config.hidden&&d.awaitRedraw().then(function(){i.hide(!0)})},_.prototype._initHandlers=function(){var n=this;this.calendar.events.on(a.CalendarEvents.change,function(){var e=n.calendar.getValue("Date"===n.config.valueFormat);n.config.value!==e&&(n.config.value=e,n.events.fire(p.ItemEvent.change,[e]),n._popup.hide(),n.paint())}),this.events.on(p.ItemEvent.afterValidate,function(){n.config.$validationStatus=n._isValid?p.ValidationStatus.success:p.ValidationStatus.error,n.paint()}),this.events.on(p.ItemEvent.blur,function(){n._popupIsFocus=!1,n.paint()}),this._popup.events.on(f.PopupEvents.afterHide,function(){document.activeElement!==n.getRootView().refs.input.el&&n.events.fire(p.ItemEvent.blur,[n.getValue()]),n.paint()}),document.addEventListener("keydown",function(e){var t,i=document.activeElement;(null===(t=null===(t=null===(t=n.getRootView())||void 0===t?void 0:t.refs)||void 0===t?void 0:t.input)||void 0===t?void 0:t.el)!==i&&!n._popup.isVisible()||n.events.fire(p.ItemEvent.keydown,[e])}),document.addEventListener("mousedown",function(){n._popup.getContainer()!==document.activeElement&&(n._popupIsFocus=!1)})},_.prototype._getHandlers=function(){var t=this;return{onblur:function(){t._popup.isVisible()||t.events.fire(p.ItemEvent.blur,[t.getValue()]),t.paint()},onfocus:function(){var e;t._popup.isVisible()||(e=t.getRootView().refs.input.el,t._popup.show(e),t.events.fire(p.ItemEvent.focus,[t.getValue()]),t.paint())},oninput:function(e){e=e.target.value;t.events.fire(p.ItemEvent.input,[e])},onchange:function(e){e=e.target.value;t.config.editable&&l.stringToDate(e,t.calendar.config.dateFormat,!0)?t.setValue(e):(""===e&&t.clear(),g.isVerify(t.config)&&t.validate(),t.paint())}}},_.prototype._initHotkeys=function(){var e,i=this,t={"shift+tab":function(){i._applyTab()},tab:function(){i._applyTab()},escape:function(){i._popup.isVisible()&&i.getRootView().refs.input.el.focus(),i._popup.hide()},enter:function(e){e.preventDefault(),i._popup.isVisible()||(e=i.getRootView().refs.input.el,i._popup.show(e))},arrowRight:function(e){var t=i._popup.getContainer();i._popup.isVisible()&&!i._popupIsFocus&&(e.preventDefault(),t.focus(),i._popupIsFocus=!0)}};for(e in t)this._keyManager.addHotKey(e,t[e])},_.prototype._draw=function(){var e=this.config,t=e.icon,i=e.required,n=e.disabled,o=e.placeholder,r=e.name,s=e.id,a=e.editable,l=e.label,c=e.helpMessage,e=this.config.value instanceof Date?this.calendar.getValue():this.config.value,u=this._popup.isVisible()||(null===(u=null===(u=null===(u=this.getRootView())||void 0===u?void 0:u.refs)||void 0===u?void 0:u.input)||void 0===u?void 0:u.el)===document.activeElement;return d.el("div.dhx_form-group",{class:g.getFormItemCss(this.config,g.isVerify(this.config),u)},[this._drawLabel(),d.el(".dhx_input__wrapper",[d.el("div.dhx_input__container",{},[d.el(".dhx_input__icon",{class:t||"dxi dxi-calendar-today"}),d.el("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":r||s,_key:this._uid,_ref:"input",value:e,type:"text",required:i,disabled:n,class:u&&"dhx_input--focus",placeholder:o||"",name:r||"",id:s||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,autocomplete:"off",readOnly:!a,"aria-label":l||(a?"type or":"")+" select date","aria-describedby":c?"dhx_label__help_"+(s||this._uid):null})]),g.getValidationMessage(this.config)&&d.el("span.dhx_input__caption",{},g.getValidationMessage(this.config))])])},_.prototype._applyTab=function(){var e;document.activeElement===(null===(e=null===(e=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.content)||void 0===e?void 0:e.el)||this._popupIsFocus||this._popup.hide()},_);function _(e,t){var i=s.call(this,null,t)||this;i.events=new c.EventSystem,i._isValid=!0,i._popupIsFocus=!1,i._propsItem=["required","validation","valueFormat","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],i._propsCalendar=["mode","mark","disabledDates","weekStart","weekNumbers","timePicker","dateFormat","timeFormat","thisMonthOnly"],i._props=r(g.baseProps,i._propsItem,i._propsCalendar),i._keyManager=new v.KeyManager(function(){var e,t=document.activeElement;return(null===(e=null===(e=null===(e=i.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===t||i._popup.isVisible()}),i._initView(t),i._initHandlers(),i._initHotkeys();return i.mount(e,d.create({render:function(){return i._draw()}})),i}t.DatePicker=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,p=i(0),l=i(7),c=i(6),u=i(4),d=i(1),h=i(9),o=(a=l.View,o(f,a),f.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this._propsItem=this._props=this.events=this._handlers=this._uid=null,this.unmount()},f.prototype.setProperties=function(e){if(e&&!d.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.config.text=this.config.text||this.config.value,this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},f.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},f.prototype.show=function(){var e=this.config,t=e.text;e.hidden&&this.events.fire(c.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[t]))},f.prototype.hide=function(e){var t=this.config,i=t.text;t.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[i,e]))},f.prototype.isVisible=function(){return!this.config.hidden},f.prototype.disable=function(){this.config.disabled=!0,this.paint()},f.prototype.enable=function(){this.config.disabled=!1,this.paint()},f.prototype.isDisabled=function(){return this.config.disabled},f.prototype.focus=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.button.el.focus()})},f.prototype.blur=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.button.el.blur()})},f.prototype._draw=function(){var e=this.config,t=e.color,i=e.size,n=e.view,o=e.full,r=e.loading,s=e.circle,a=e.icon,l=e.text,c=e.disabled,u=e.submit,d=e.id,h=e.name,f={danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[t]||" dhx_button--color_primary",e={small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[i]||" dhx_button--size_medium",t={flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[n]||" dhx_button--view_flat",i=o?" dhx_button--width_full":"",n=s?" dhx_button--circle":"",o=r?" dhx_button--loading":"",s=a&&!l?" dhx_button--icon":"";return p.el("button",{disabled:c,id:d,"data-dhx-id":h||d,onclick:this._handlers.onclick,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,type:u?"submit":"button",class:"dhx_button"+f+e+t+i+n+o+s,_ref:"button"},[a&&p.el("span.dhx_button__icon",{class:a}),l&&p.el("span.dhx_button__text",l),r&&p.el("span.dhx_button__loading",[p.el("span.dhx_button__loading-icon.dxi.dxi-loading")])])},f);function f(e,t){var i=a.call(this,e,r({disabled:!1,hidden:!1,submit:!1,full:!1,circle:!1,loading:!1,view:"flat",size:"medium",color:"primary",width:"content",height:"content",url:"",text:"",icon:""},t))||this;i._propsItem=["submit","url","text","icon","view","size","color","full","circle","loading"],i._props=s(h.baseProps,i._propsItem),i.config.text=i.config.text||i.config.value||"",i.events=new u.EventSystem,i._handlers={onclick:function(e){return i.events.fire(c.ItemEvent.click,[e])},onblur:function(){return i.events.fire(c.ItemEvent.blur,[i.config.text])},onfocus:function(){return i.events.fire(c.ItemEvent.focus,[i.config.text])},onkeydown:function(e){return i.events.fire(c.ItemEvent.keydown,[e])}},i.config.hidden&&p.awaitRedraw().then(function(){i.hide(!0)});return i.mount(e,p.create({render:function(){return i._draw()}})),i}t.Button=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,l=i(0),c=i(14),u=i(4),d=i(58),h=i(19),f=i(6),p=i(1),g=i(9),v=i(8),o=(a=h.Label,o(_,a),_.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._isValid=this._buttons=null,a.prototype._destructor.call(this),this.unmount()},_.prototype.setProperties=function(t,e){if(void 0!==t&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof t&&!p.isEmptyObj(t)){for(var i in t)this._props.includes(i)&&(this.config[i]=t[i]);t.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}var n;"string"!=typeof t||!e||p.isEmptyObj(e)||(n=this._buttons.find(function(e){return e.config.id===t}))&&n.setProperties(e,!0),this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},_.prototype.getProperties=function(t){if(void 0!==t)return this._buttons.find(function(e){return e.config.id===t}).getProperties();var e,i={};for(e in this.config)this._props.includes(e)&&(i[e]=this.config[e]);return i},_.prototype.getValue=function(t){if(void 0===t){var i={};return this._buttons.forEach(function(e){i[e.config.id]=e.getValue()}),i}var e=this._buttons.find(function(e){return e.config.id===t});if(t&&e)return e.getValue()},_.prototype.setValue=function(e){if(void 0!==e&&!p.isEmptyObj(e)){for(var n=!1,o=this,t=0,i=Object.entries(e);t<i.length;t++){var r=i[t];!function(t,e){var i=o._buttons.find(function(e){return e.config.id===t});i&&(i.setValue(!!e,!0),n=!0)}(r[0],r[1])}n&&(this.events.fire(f.ItemEvent.change,[this.getValue()]),g.isVerify(this.config)&&this.validate())}},_.prototype.isChecked=function(t){if(void 0===t){var i={};return this._buttons.forEach(function(e){i[e.config.id]=e.isChecked()}),i}var e=this._buttons.find(function(e){return e.config.id===t});if(t&&e)return e.isChecked()},_.prototype.focus=function(t){var i=this;l.awaitRedraw().then(function(){if(i._buttons.length){if(!t)return i._buttons[0].focus();var e=i._buttons.find(function(e){return e.config.id===t});e&&e.focus()}})},_.prototype.blur=function(){var e=this;l.awaitRedraw().then(function(){e._buttons.length&&e._buttons.forEach(function(e){e.blur()})})},_.prototype.show=function(){this.config.hidden&&this.events.fire(f.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[this.getValue()]))},_.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[this.getValue(),e]))},_.prototype.isVisible=function(){return!this.config.hidden},_.prototype.disable=function(){this.config.disabled=!0,this.paint()},_.prototype.enable=function(){this.config.disabled=!1,this._buttons.length&&this._buttons.forEach(function(e){e.enable()}),this.paint()},_.prototype.isDisabled=function(){return this.config.disabled},_.prototype.clear=function(){this._buttons.some(function(e){return e.isChecked()})&&(this._buttons.forEach(function(e){e.clear(!0)}),this.events.fire(f.ItemEvent.change,[this.getValue()]))},_.prototype.validate=function(e){var t=this;if(void 0===e&&(e=!1),e||this.events.fire(f.ItemEvent.beforeValidate,[this.getValue()]))return this.config.required&&(this._isValid=this._buttons.some(function(e){return e.config.$required&&!!e.config.checked})),e||(this._buttons.forEach(function(e){e.config.$validationStatus=t._isValid?f.ValidationStatus.success:f.ValidationStatus.error}),this.config.$validationStatus=this._isValid?f.ValidationStatus.success:f.ValidationStatus.error,this.events.fire(f.ItemEvent.afterValidate,[this.getValue(),this._isValid])),this._isValid},_.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this._buttons.forEach(function(e){e.clearValidate()}),this.paint()},_.prototype._initView=function(i){var e,n=this;if(p.isEmptyObj(i)||!i.options||p.isEmptyObj(i.options))throw new Error("Check the configuration is correct");for(e in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach(function(e){e.destructor()}),this._buttons=[]),this.config={type:i.type,id:i.id,name:i.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},i)"id"!==e&&"type"!==e&&"name"!==e&&(this.config[e]=i[e]);this.config.helpMessage&&(this._helper=new v.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage));var t=this.config.options.rows||this.config.options.cols;t.forEach(function(e){e.id=e.id||p.uid(),e.$group=!0}),this.layout=new c.Layout(null,this.config.options),t.forEach(function(e){var t=new d.Checkbox(null,r(r({},e),{disabled:i.disabled,name:i.name,$required:i.required}));n._buttons.push(t),n.layout.getCell(e.id).attach(t),t.events.on(f.ItemEvent.change,function(){n.events.fire(f.ItemEvent.change,[n.getValue()]),g.isVerify(n.config)&&n.validate()}),t.events.on(f.ItemEvent.focus,function(e,t){n.events.fire(f.ItemEvent.focus,[n.getValue(),t])}),t.events.on(f.ItemEvent.blur,function(e,t){n.events.fire(f.ItemEvent.blur,[n.getValue(),t])}),t.events.on(f.ItemEvent.keydown,function(e,t){n.events.fire(f.ItemEvent.keydown,[e,t])})}),this.config.value&&this.setValue(this.config.value),this.clearValidate(),this.config.hidden&&l.awaitRedraw().then(function(){n.hide(!0)})},_.prototype._initHandlers=function(){var e=this;this.events.on(f.ItemEvent.change,function(){e.config.value=e.getValue(),e.paint()}),this.events.on(f.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?f.ValidationStatus.success:f.ValidationStatus.error,e.paint()})},_.prototype._draw=function(){var e=this.config.hidden?" dhx_form-group--hidden":"",t=this.config,i=t.label,n=t.labelWidth,o=t.helpMessage,r=t.required,s=t.name,t=t.id;return l.el("fieldset.dhx_form-group-fieldset",{},[l.el("div.dhx_form-group.dhx_form-group--checkbox-group",{class:g.getFormItemCss(this.config,g.isVerify(this.config))+e,"data-dhx-id":s||t,role:"radiogroup"},[i||n||o||r?this._drawLabel():null,l.el("div.dhx_checkbox-group--container",{},[this.layout&&l.inject(this.layout.getRootView()),r&&g.getValidationMessage(this.config)&&l.el("span.dhx_input__caption",g.getValidationMessage(this.config))])])])},_);function _(e,t){var i=a.call(this,null,t)||this;i.events=new u.EventSystem,i._buttons=[],i._isValid=!0,i._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],i._props=s(g.baseProps,i._propsItem),i._initView(t),i._initHandlers();return i.mount(e,l.create({render:function(){return i._draw()}})),i}t.CheckboxGroup=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,l=i(0),c=i(1),u=i(14),d=i(8),h=i(4),f=i(229),p=i(9),g=i(19),v=i(6),o=(a=g.Label,o(_,a),_.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._isValid=this._buttons=null,a.prototype._destructor.call(this),this.unmount()},_.prototype.setProperties=function(t,e){if(void 0!==t&&this.events.fire(v.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof t&&!c.isEmptyObj(t)){for(var i in t)this._props.includes(i)&&(this.config[i]=t[i]);t.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}var n;"string"!=typeof t||!e||c.isEmptyObj(e)||(n=this._buttons.find(function(e){return e.config.id===t}))&&n.setProperties(e),this.events.fire(v.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},_.prototype.getProperties=function(t){if(void 0!==t)return this._buttons.find(function(e){return e.config.id===t}).getProperties();var e,i={};for(e in this.config)this._props.includes(e)&&(i[e]=this.config[e]);return i},_.prototype.getValue=function(){var t=this;return this._buttons.forEach(function(e){e.getValue()&&(t.config.value=e.getValue()||"")}),this.config.value||""},_.prototype.setValue=function(e){e!==this.config.value&&(this._setValue(e),this.events.fire(v.ItemEvent.change,[e]),p.isVerify(this.config)&&this.validate())},_.prototype.focus=function(t){var i=this;l.awaitRedraw().then(function(){if(i._buttons.length){if(!t)return i._buttons[0].focus();var e=i._buttons.find(function(e){return e.config.id===t});return e?e.focus():void 0}})},_.prototype.blur=function(){var e=this;l.awaitRedraw().then(function(){e._buttons.length&&e._buttons.forEach(function(e){return e.blur()})})},_.prototype.show=function(){this.config.hidden&&this.events.fire(v.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(v.ItemEvent.afterShow,[this.getValue()]))},_.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(v.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(v.ItemEvent.afterHide,[this.getValue(),e]))},_.prototype.isVisible=function(){return!this.config.hidden},_.prototype.disable=function(){this.config.disabled=!0,this.paint()},_.prototype.enable=function(){this.config.disabled=!1,this._buttons.length&&this._buttons.forEach(function(e){e.enable()}),this.paint()},_.prototype.isDisabled=function(){return this.config.disabled},_.prototype.clear=function(){""!==this.config.value&&(this._buttons.forEach(function(e){e.clear()}),this.config.value="",this.events.fire(v.ItemEvent.change,[this.config.value]))},_.prototype.validate=function(e){var t=this;if(void 0===e&&(e=!1),e||this.events.fire(v.ItemEvent.beforeValidate,[this.getValue()]))return this.config.required&&(this._isValid=this._buttons.some(function(e){return t.config.required&&!!e.config.checked})),e||(this._buttons.forEach(function(e){e.config.$validationStatus=t._isValid?v.ValidationStatus.success:v.ValidationStatus.error}),this.config.$validationStatus=this._isValid?v.ValidationStatus.success:v.ValidationStatus.error,this.events.fire(v.ItemEvent.afterValidate,[this.getValue(),this._isValid])),this._isValid},_.prototype.clearValidate=function(){this.config.$validationStatus=v.ValidationStatus.pre,this._buttons.map(function(e){e.clearValidate()}),this.paint()},_.prototype._initView=function(i){var e,n=this;if(c.isEmptyObj(i)||!i.options||c.isEmptyObj(i.options))throw new Error("Check the configuration is correct");for(e in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach(function(e){e.destructor()}),this._buttons=[]),this.config={type:i.type,id:i.id,name:i.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},i)"id"!==e&&"type"!==e&&"name"!==e&&(this.config[e]=i[e]);this.config.hidden&&l.awaitRedraw().then(function(){n.hide(!0)});var t=this.config.options.rows||this.config.options.cols;t.map(function(e){e.id=e.id||c.uid()}),this.layout=new u.Layout(null,this.config.options),t.map(function(e){var t=new f.RadioButton(null,r(r({},e),{$disabled:i.disabled,$name:i.name,$required:i.required}));n._buttons.push(t),n.layout.getCell(e.id).attach(t),t.events.on(f.RadioButtonEvents.change,function(){n._buttons.map(function(e){e.config.id!==t.config.id&&e.setValue(!1)}),n.events.fire(v.ItemEvent.change,[n.getValue()]),p.isVerify(n.config)&&n.validate()}),t.events.on(f.RadioButtonEvents.focus,function(e,t){n.events.fire(v.ItemEvent.focus,[e,t])}),t.events.on(f.RadioButtonEvents.blur,function(e,t){n.events.fire(v.ItemEvent.blur,[e,t])}),t.events.on(f.RadioButtonEvents.keydown,function(e,t){n.events.fire(v.ItemEvent.keydown,[e,t])})})},_.prototype._initHandlers=function(){var e=this;this.events.on(v.ItemEvent.change,function(){e.config.value=e.getValue(),e.paint()}),this.events.on(v.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?v.ValidationStatus.success:v.ValidationStatus.error,e.paint()})},_.prototype._draw=function(){var e=this.config,t=e.label,i=e.labelWidth,n=e.helpMessage,o=e.required,r=e.hidden,s=e.name,e=e.id,r=r?" dhx_form-group--hidden":"";return l.el("fieldset.dhx_form-group-fieldset",{},[l.el("div.dhx_form-group.dhx_form-group--radio-group",{class:p.getFormItemCss(this.config,p.isVerify(this.config))+r,"data-dhx-id":s||e},[t||i||n||o?[this._drawLabel()]:null,l.el("div.dhx_radio-group--container",{},[this.layout&&l.inject(this.layout.getRootView()),o&&p.getValidationMessage(this.config)&&l.el("span.dhx_input__caption",p.getValidationMessage(this.config))])])])},_.prototype._setValue=function(t){void 0!==t&&-1!==this._buttons.findIndex(function(e){return e.config.value===t})&&this._buttons.forEach(function(e){t===e.config.value?e.setValue(!0):e.setValue(!1)})},_);function _(e,t){var i=a.call(this,null,t)||this;i.events=new h.EventSystem,i._buttons=[],i._isValid=!0,i._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],i._props=s(p.baseProps,i._propsItem),i._initView(t),i._initHandlers(),i.config.value&&i._setValue(i.config.value),i.clearValidate(),i.config.helpMessage&&(i._helper=new d.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),i._helper.attachHTML(i.config.helpMessage));return i.mount(e,l.create({render:function(){return i._draw()}})),i}t.RadioGroup=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,u=i(0),a=i(1),l=i(19),d=i(9),c=i(4),h=i(6),o=(s=l.Label,o(f,s),f.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},f.prototype.setProperties=function(e){if(e&&!a.isEmptyObj(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},f.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},f.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},f.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},f.prototype.isVisible=function(){return!this.config.hidden},f.prototype.disable=function(){this.config.disabled=!0,this.paint()},f.prototype.enable=function(){this.config.disabled=!1,this.paint()},f.prototype.isDisabled=function(){return this.config.disabled},f.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.config,i=t.value,t=t.validation;if(e||this.events.fire(h.ItemEvent.beforeValidate,[i]))return this._isValid=t?this.config.validation(i):void 0!==i&&!!String(i).length,e||this.events.fire(h.ItemEvent.afterValidate,[i,this._isValid]),this._isValid},f.prototype.clearValidate=function(){this.config.$validationStatus=h.ValidationStatus.pre,this.paint()},f.prototype.clear=function(){this.config.value!==this.config.options[0].value&&(this.config.value=this.config.options[0].value,this.events.fire(h.ItemEvent.change,[this.getValue()]))},f.prototype.setValue=function(t){void 0!==t&&t!==this.config.value&&-1!==this.config.options.findIndex(function(e){return e.value===t})&&(this.config.value=t,this.events.fire(h.ItemEvent.change,[t]),d.isVerify(this.config)&&this.validate())},f.prototype.focus=function(){var e=this;u.awaitRedraw().then(function(){e.getRootView().refs.select.el.focus()})},f.prototype.blur=function(){var e=this;u.awaitRedraw().then(function(){e.getRootView().refs.select.el.blur()})},f.prototype.getValue=function(){return this.config.value},f.prototype.setOptions=function(e){if(!e||!e.length)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");this._checkOptions(e),this.config.options=r(e),this.config.value=this.config.options[0].value,this.events.fire(h.ItemEvent.changeOptions,[r(e)]),this.paint()},f.prototype.getOptions=function(){return this.config.options},f.prototype._initView=function(e){var t,i=this;if(a.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this._checkOptions(e.options),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,icon:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",options:e.options,value:e.options[0].value},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&u.awaitRedraw().then(function(){i.hide(!0)}),this.paint()},f.prototype._initHandlers=function(){var e=this;this.events.on(h.ItemEvent.afterValidate,function(){e.config.$validationStatus=e._isValid?h.ValidationStatus.success:h.ValidationStatus.error,e.paint()}),this.events.on(h.ItemEvent.changeOptions,function(){e.events.fire(h.ItemEvent.change,[e.getValue()]),d.isVerify(e.config)&&e.validate()}),this.events.on(h.ItemEvent.change,function(){return e.paint()})},f.prototype._getHandlers=function(){var i=this;return{onchange:function(t){var e=i.config.options.map(function(e){return e.value}).find(function(e){return e==t.target.value});i.config.value=e,i.events.fire(h.ItemEvent.change,[e]),d.isVerify(i.config)&&i.validate()},onblur:function(){i._uid&&(i.events.fire(h.ItemEvent.blur,[i.getValue()]),i.paint())},onfocus:function(){i.events.fire(h.ItemEvent.focus,[i.getValue()]),i.paint()}}},f.prototype._draw=function(){var e=this.config,t=e.id,i=e.options,n=e.icon,o=e.value,r=e.label,s=e.labelWidth,a=e.helpMessage,l=e.required,c=e.name,e=(null===(e=null===(e=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.select)||void 0===e?void 0:e.el)===document.activeElement;return u.el(".dhx_form-group",{class:d.getFormItemCss(this.config,d.isVerify(this.config),e)},[(r||s||a)&&this._drawLabel(),u.el(".dhx_input__wrapper",{},[u.el("div.dhx_input__container",{},[u.el(".dhx_input__icon",{class:n||"dxi dxi-menu-down"}),u.el("select.dhx_select.dhx_input",{id:t,"data-dhx-id":c||t,tabindex:0,class:e&&"dhx_input--focus",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,_ref:"select",required:l},i.length&&i.map(function(e){return u.el("option",{value:e.value,disabled:e.disabled,selected:o===e.value},e.content)}))]),d.getValidationMessage(this.config)&&u.el("span.dhx_input__caption",d.getValidationMessage(this.config))])])},f.prototype._checkOptions=function(e){if(0===e.length)throw new Error("Property options* cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");e.forEach(function(e){if(!e.hasOwnProperty("value")||!e.hasOwnProperty("content"))throw new Error("The object must contain two required properties value and content, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect")})},f);function f(e,t){var i=s.call(this,null,t)||this;return i.events=new c.EventSystem,i._isValid=!0,i._propsItem=["required","validation","icon","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],i._props=r(d.baseProps,i._propsItem),i._initView(t),i._initHandlers(),i}t.Select=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,p=i(0),g=i(9),a=i(46),l=i(6),v=i(1),o=(s=a.Input,o(c,s),c.prototype.setValue=function(e){void 0!==e&&this.config.value!==e&&(this.config.value=e,this.events.fire(l.ItemEvent.change,[this.getValue()]),g.isVerify(this.config)&&this.validate())},c.prototype.getValue=function(){var e;return String(null!==(e=this.config.value)&&void 0!==e?e:"")},c.prototype.focus=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.textarea.el.focus()})},c.prototype.blur=function(){var e=this;p.awaitRedraw().then(function(){e.getRootView().refs.textarea.el.blur()})},c.prototype.setProperties=function(e){if(e&&!v.isEmptyObj(e)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},c.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},c.prototype._initView=function(e){var t,i=this;if(v.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,validation:void 0,placeholder:"",readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&p.awaitRedraw().then(function(){i.hide(!0)}),this.paint()},c.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.disabled,o=e.name,r=e.placeholder,s=e.required,a=e.resizable,l=e.readOnly,c=e.maxlength,u=e.minlength,d=e.label,h=e.helpMessage,f=e.height,e=(null===(e=null===(e=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.textarea)||void 0===e?void 0:e.el)===document.activeElement;return p.el("div.dhx_form-group.dhx_form-group--textarea",{class:g.getFormItemCss(this.config,g.isVerify(this.config),e)},[this._drawLabel(),p.el(".dhx_input__wrapper",[p.el("textarea.dhx_input.dhx_input--textarea",{type:"text",id:t,"data-dhx-id":o||t,placeholder:r||"",value:v.isDefined(i)?i:"",name:o||"",disabled:n,required:s,readOnly:l,maxlength:c,minlength:u,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,_hooks:{didInsert:function(e){"content"===f&&((e=e.el).style.height=e.scrollHeight+"px")}},style:{resize:a?"both":"none"},_ref:"textarea","aria-label":d||(l?i:"")+" type text","aria-describedby":h?"dhx_label__help_"+(t||this._uid):null}),g.getValidationMessage(this.config)&&p.el("span.dhx_input__caption",{},g.getValidationMessage(this.config))])])},c);function c(){var e=null!==s&&s.apply(this,arguments)||this;return e._propsItem=["required","validation","placeholder","readOnly","maxlength","minlength","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],e._props=r(g.baseProps,e._propsItem),e}t.Textarea=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(1),c=i(9),u=i(46),d=i(6),o=(s=u.Input,o(h,s),h.prototype.setProperties=function(e){if(e&&!l.isEmptyObj(e)&&this.events.fire(d.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(d.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},h.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},h.prototype._initView=function(e){var t,i=this;if(l.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",inputType:"text",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&a.awaitRedraw().then(function(){i.hide(!0)}),this.paint()},h.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.name,o=e.inputType,r=e.label,e=(null!=i?i:"").toString().length;return a.el("div.dhx_form-group.dhx_form-group--textinput",{class:c.getFormItemCss(this.config)},[this._drawLabel(),a.el(".dhx_input__wrapper",[a.el("input.dhx_input.dhx_input--textinput",{type:["text","number","password"].includes(o)?o:"text",readOnly:!0,id:t,"data-dhx-id":n||t,value:null!=i?i:"",name:n,_ref:"input",tabindex:-1,role:"presentation","aria-label":r||i,size:20<e?e:20,onkeydown:this._handlers.onkeydown})])])},h);function h(){var e=null!==s&&s.apply(this,arguments)||this;return e._propsItem=["inputType","label","labelWidth","labelPosition","hiddenLabel","helpMessage"],e._props=r(c.baseProps,e._propsItem),e}t.Text=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(1),c=i(9),u=i(39),d=i(4),h=i(19),f=i(6),o=(s=h.Label,o(p,s),p.prototype.destructor=function(){this.events&&this.events.clear(),this.combobox&&this.combobox.destructor(),this.events=this._uid=this._propsCombo=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},p.prototype.setProperties=function(i){var n=this;a.awaitRedraw().then(function(){if(i&&!l.isEmptyObj(i)&&n.events.fire(f.ItemEvent.beforeChangeProperties,[n.getProperties()])){for(var e in i)n._props.includes(e)&&(n.config[e]=i[e]);var t=[];n.getWidget().data.forEach(function(e){return t.push(e)}),n.config.data=t,n._initView(n.config),n._initHandlers(),n.events.fire(f.ItemEvent.afterChangeProperties,[n.getProperties()]),n.combobox.paint(),n.paint()}})},p.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},p.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},p.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[i,e]))},p.prototype.isVisible=function(){return!this.config.hidden},p.prototype.disable=function(){this.config.disabled=!0,this.combobox.disable(),this.paint()},p.prototype.enable=function(){this.config.disabled=!1,this.combobox.enable(),this.paint()},p.prototype.isDisabled=function(){return!!this.config.disabled},p.prototype.clear=function(){this.config.value&&(this.config.value="",this.combobox.clear())},p.prototype.getValue=function(){return this.config.multiselection?this.combobox.getValue(!0)||[]:this.combobox.getValue()||""},p.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&e&&this.combobox.setValue(e)},p.prototype.validate=function(e,t){var i=this;void 0===e&&(e=!1);var n=void 0===t?this.getValue():t;return!(!e&&!this.events.fire(f.ItemEvent.beforeValidate,[n]))&&(t=Array.isArray(n)?n.map(function(e){return i._getItemText(e)}):this._getItemText(n)||"",this._isValid=this.config.validation?this.config.validation(n,t):this._exsistData(n),e||(this.config.$validationStatus=this._isValid?f.ValidationStatus.success:f.ValidationStatus.error,this.config.required&&this._validationStatus(),this.events.fire(f.ItemEvent.afterValidate,[n,this._isValid])),this._isValid)},p.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this._validationStatus(),this.paint()},p.prototype.getWidget=function(){return this.combobox},p.prototype.focus=function(){var e=this;a.awaitRedraw().then(function(){e.combobox.focus()})},p.prototype.blur=function(){var e=this;a.awaitRedraw().then(function(){e.combobox.blur()})},p.prototype._initView=function(e){var t=this;if(l.isEmptyObj(e))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",readOnly:!1,multiselection:!1,selectAllButton:!1,itemHeight:32,virtual:!1,listHeight:224,required:!1,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"};var i,n={};for(i in e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i],"validation"!==i&&(n[i]=e[i]));this.combobox=new u.Combobox(null,n),this.config.hidden&&a.awaitRedraw().then(function(){t.hide(!0)}),this.paint()},p.prototype._initHandlers=function(){var i=this;this.combobox.events.on(u.ComboboxEvents.change,function(){var e=i.config.value=i.getValue();i.events.fire(f.ItemEvent.change,[e]),c.isVerify(i.config)&&i.validate(),i.paint()}),this.combobox.events.on(u.ComboboxEvents.focus,function(){i.events.fire(f.ItemEvent.focus,[i.getValue()]),i.paint()}),this.combobox.events.on(u.ComboboxEvents.blur,function(){i.events.fire(f.ItemEvent.blur,[i.getValue()]),i.paint()}),this.combobox.events.on(u.ComboboxEvents.keydown,function(e,t){"Enter"===e.code&&e.preventDefault(),i.events.fire(f.ItemEvent.keydown,[e,t])}),this.events.on(f.ItemEvent.afterValidate,function(){i.config.$validationStatus=i._isValid?f.ValidationStatus.success:f.ValidationStatus.error,i.paint()})},p.prototype._validationStatus=function(){var e;if(!(this.combobox.popup.isVisible()||(null===(e=null===(e=null===(e=this.combobox.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===document.activeElement))switch(this.config.$validationStatus){case f.ValidationStatus.success:return this.combobox.config.css=(this.config.css||"")+"dhx_form-group--state_success";case f.ValidationStatus.error:return this.combobox.config.css=(this.config.css||"")+"dhx_form-group--state_error";case f.ValidationStatus.pre:default:return this.combobox.config.css=this.config.css||""}return this.combobox.config.css=this.config.css||""},p.prototype._getRootView=function(){return this.combobox.getRootView()},p.prototype._draw=function(){var e=this.config,t=e.labelWidth,i=e.labelPosition,n=e.name,e=e.id;return a.el(".dhx_form-group",{"data-dhx-id":n||e},[a.inject(this._getRootView()),a.el("div",{style:{"margin-left":t&&"left"===i?"calc("+t+" + 16px)":""},class:this._validationStatus()},[a.el("span.dhx_input__caption",c.getValidationMessage(this.config))])])},p.prototype._exsistData=function(e){var t=this;return!!l.isDefined(e)&&(e instanceof Array?!!e.length&&e.every(function(e){return t.combobox.data.exists(e)}):this.combobox.data.exists(e))},p.prototype._getItemText=function(e){return null===(e=this.combobox.data.getItem(e))||void 0===e?void 0:e.value},p);function p(e,t){var i=s.call(this,null,t)||this;return i.events=new d.EventSystem,i._isValid=!0,i._propsItem=["required","validation","placeholder","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","readonly","readOnly"],i._propsCombo=["template","filter","multiselection","selectAllButton","itemsCount","itemHeight","virtual","listHeight"],i._props=r(c.baseProps,i._propsItem,i._propsCombo),i._initView(t),i._initHandlers(),i}t.Combo=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,l=i(0),c=i(1),u=i(74),d=i(4),h=i(19),f=i(6),p=i(9),o=(a=h.Label,o(g,a),g.prototype.destructor=function(){this.events&&this.events.clear(),this.slider&&this.slider.destructor(),this.events=this._uid=this._propsSlider=this._propsItem=this._props=null,a.prototype._destructor.call(this),this.unmount()},g.prototype.setProperties=function(e){if(e&&!c.isEmptyObj(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this._initView(this.config),this._initHandlers(),this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.slider.paint(),this.paint()}},g.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},g.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},g.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[i,e]))},g.prototype.isVisible=function(){return!this.config.hidden},g.prototype.disable=function(){this.config.disabled=!0,this.slider.disable(),this.paint()},g.prototype.enable=function(){this.config.disabled=!1,this.slider.enable(),this.paint()},g.prototype.isDisabled=function(){return this.config.disabled},g.prototype.clear=function(){var e=this.config,t=e.value,e=e.min;t[0]!==e&&this.slider.setValue(e)},g.prototype.getValue=function(){return this.slider.getValue()},g.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&this.slider.setValue(e)},g.prototype.getWidget=function(){return this.slider},g.prototype.focus=function(e){var t=this;l.awaitRedraw().then(function(){t.slider.focus(e)})},g.prototype.blur=function(){var e=this;l.awaitRedraw().then(function(){e.slider.blur()})},g.prototype._initView=function(e){var t=this;if(c.isEmptyObj(e))throw new Error("Check the configuration is correct");this.slider&&this.slider.destructor();var i,n={type:e.type,id:e.id,name:e.name,mode:"horizontal",min:0,max:100,step:1,range:!1,inverse:!1,tooltip:!0,disabled:!1,hidden:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"};for(i in e)"id"!==i&&"type"!==i&&"name"!==i&&(n[i]=e[i]);this.config=r({type:this.config.type},n),this.slider=new u.Slider(null,n),this.config.disabled&&this.slider.disable(),this.config.value=this.slider.getValue(),this.config.hidden&&l.awaitRedraw().then(function(){t.hide(!0)})},g.prototype._initHandlers=function(){var t=this;this.slider.events.on(u.SliderEvents.change,function(){var e;t._uid&&(e=t.config.value=t.slider.getValue(),t.events.fire(f.ItemEvent.change,[e]),t.paint())}),this.slider.events.on(u.SliderEvents.focus,function(){t.events.fire(f.ItemEvent.focus,[t.getValue()])}),this.slider.events.on(u.SliderEvents.blur,function(){t.events.fire(f.ItemEvent.blur,[t.getValue()])}),this.slider.events.on(u.SliderEvents.keydown,function(e){t.events.fire(f.ItemEvent.keydown,[e])})},g.prototype._getRootView=function(){return this.slider.paint(),this.slider.getRootView()},g.prototype._drawSlider=function(){var e=this.config,t=e.name,e=e.id;return l.el("div.dhx_form-group",{"data-dhx-id":t||e},[l.inject(this._getRootView())])},g);function g(e,t){var i=a.call(this,null,t)||this;i.events=new d.EventSystem,i._propsItem=["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],i._propsSlider=["min","max","step","mode","range","inverse","tooltip","tick","tickTemplate","majorTick"],i._props=s(p.baseProps,i._propsItem,i._propsSlider),i._initView(t),i._initHandlers();return i.mount(e,l.create({render:function(){return i._drawSlider()}})),i}t.SliderForm=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,l=i(0),c=i(4),u=i(3),d=i(7),h=i(1),f=i(11),p=i(230),g=i(8),v=i(9),_=i(239),m=i(6),o=(a=d.View,o(y,a),y.prototype.destructor=function(){this.events&&this.events.clear(),this._helper&&this._helper.destructor(),this.config=this.events=this._uid=this._helper=this._handlers=this._uploader=this.data=null,this._propsItem=this._propsSimpleVault=this._props=this._isValid=this._dragover=this._dragoverTimeout=null,this.unmount()},y.prototype.setProperties=function(e){if(e&&!h.isEmptyObj(e)&&this.events.fire(m.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsSimpleVault.includes(t)&&(this._uploader.config[t]=e[t]));this.events.fire(m.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},y.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},y.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(m.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(m.ItemEvent.afterShow,[t]))},y.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(m.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(m.ItemEvent.afterHide,[i,e]))},y.prototype.isVisible=function(){return!this.config.hidden},y.prototype.disable=function(){this.config.disabled=!0,this.paint()},y.prototype.enable=function(){this.config.disabled=!1,this.paint()},y.prototype.isDisabled=function(){return this.config.disabled},y.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.config,i=t.required,t=t.value;if(e||this.events.fire(m.ItemEvent.beforeValidate,[t]))return this._isValid=!i||0<this.data.getLength(),e||this.events.fire(m.ItemEvent.afterValidate,[t,this._isValid]),this._isValid},y.prototype.clearValidate=function(){this.config.$validationStatus=m.ValidationStatus.pre,this.paint()},y.prototype.clear=function(){0!==this.getValue().length&&(this.data.removeAll(),this.paint())},y.prototype.getValue=function(){return this.data.serialize()},y.prototype.selectFile=function(){this._uploader.selectFile()},y.prototype.send=function(e){v.isVerify(this.config)&&!this.validate(!0)||this._uploader.send(e)},y.prototype.setValue=function(e){e.length&&(this.data.parse(e),v.isVerify(this.config)&&this.validate())},y.prototype._initView=function(e){var t,i=this;if(h.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.config={type:e.type,id:e.id,name:e.name,fieldName:e.fieldName||e.name||e.id,disabled:!1,hidden:!1,singleRequest:!1,target:"",value:[],label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.config.hidden&&l.awaitRedraw().then(function(){i.hide(!0)}),this.config.value.length&&this.setValue(this.config.value),this.paint()},y.prototype._initHandlers=function(){var n=this;this.data.events.on(m.ItemEvent.change,function(e,t){var i=n.config.value=n.getValue();n.events.fire(m.ItemEvent.change,[i]),t&&v.isVerify(n.config)&&n.validate(),n.paint()}),this.events.on(m.ItemEvent.afterValidate,function(){n.config.$validationStatus=n._isValid?m.ValidationStatus.success:m.ValidationStatus.error,n.paint()}),this._uploader.events.on("beforeUploadFile",function(e){return n.events.fire(m.ItemEvent.beforeUploadFile,[e,n.config.value])}),this._uploader.events.on("uploadBegin",function(e){n.events.fire(m.ItemEvent.uploadBegin,[e,n.config.value])}),this._uploader.events.on("uploadComplete",function(e){n.events.fire(m.ItemEvent.uploadComplete,[e,n.config.value])}),this._uploader.events.on("uploadFail",function(e){n.events.fire(m.ItemEvent.uploadFail,[e,n.config.value])}),this._uploader.events.on("uploadFile",function(e,t){n.events.fire(m.ItemEvent.uploadFile,[e,n.config.value,t])}),this._uploader.events.on("uploadProgress",function(e){n.events.fire(m.ItemEvent.uploadProgress,[e,n.config.value])})},y.prototype._draw=function(){var t=this;this.config.helpMessage&&(this._helper||(this._helper=new g.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var e=this.data.getLength()?l.el("ul.dhx_simplevault__files.dhx_simplevault-files",{class:this.config.$vaultHeight?"":"dhx_simplevault-files__fixed"},this.data.map(function(e){return l.el("li.dhx_simplevault-files__item",[l.el("span.dhx_simplevault-files__item-name",e.file&&e.file.name||e.name),l.el(".dhx_button.dhx_simplevault-files__delete.dhx_button--icon.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"data-dhx-id":e.id,onclick:t._handlers.remove},[l.el("span.dxi.dxi-delete-forever")])])})):null,i=this.config,n=i.id,o=i.helpMessage,r=i.disabled,s=i.required,a=i.label,i=u.getLabelStyle(this.config);return l.el(".dhx_form-group.dhx_form-group--simplevault",{class:v.getFormItemCss(this.config,v.isVerify(this.config))},[i&&l.el("legend.dhx_label",{class:o?"dhx_label--with-help":"",style:i.style,onclick:this._handlers.add,"aria-label":a||"select files"},o?[(i.label||s)&&l.el("span.dhx_label__holder",i.label),l.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper})]:i.label),l.el(".dhx_input__wrapper",{id:this._uid},[l.el("div",{_hooks:{didInsert:function(e){t._uploader.linkDropArea(e.el)}},ondragover:this._handlers.ondragover,class:"dhx_simplevault"+(this._dragover?" dhx_simplevault--on-drag":"")},[l.el("div.dhx_simplevault-loader",[l.el("span.dhx_simplevault__icon.dxi.dxi-vault")]),l.el(".dhx_simplevault__drop-area",[l.el("input.dhx_simplevault__input",{type:"file",id:n,disabled:r}),l.el("span.dhx_simplevault__icon.dxi.dxi-vault"),l.el("span.dhx_simplevault__title",[l.el("span",_.default.simpleVaultText),l.el("br"),l.el("label.dhx_simplevault__label",{onclick:this._handlers.add,for:n}," "+_.default.simpleVaultLabel)])]),e]),v.getValidationMessage(this.config)&&l.el("span.dhx_input__caption",{},v.getValidationMessage(this.config))])])},y);function y(e,t){var o=a.call(this,e,t)||this;o._isValid=!0,o._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],o._propsSimpleVault=["target","singleRequest","fieldName","params"],o._props=s(v.baseProps,o._propsItem,o._propsSimpleVault),o.events=new c.EventSystem(o),o.data=new f.DataCollection,o._uploader=new p.Uploader(r(r({},t),{autosend:!1,fieldName:t.fieldName||t.name||t.id}),o.data,o.data.events),o._initView(t),o._initHandlers(),o._handlers={add:function(e){o.config.disabled||(e.preventDefault(),o._uploader.selectFile())},remove:function(e){o.config.disabled||(e=u.locate(e))&&o.data.remove(e)},ondragover:function(e){for(var t=0,i=e.dataTransfer.types;t<i.length;t++){var n=i[t];if("Files"!==n&&"application/x-moz-file"!==n)return}o._dragoverTimeout?clearTimeout(o._dragoverTimeout):o.paint(),o._dragover=!0,o._dragoverTimeout=setTimeout(function(){o._dragover=!1,o._dragoverTimeout=null,o.paint()},150)},showHelper:function(e){e.stopPropagation(),e.preventDefault(),o._helper.show(e.target,{mode:"left"===o.config.labelPosition?"bottom":"right"})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),o._helper.hide()}};return o.mount(e,l.create({render:function(){return o._draw()}})),o}t.SimpleVault=o},function(e,i,a){"use strict";(function(r){Object.defineProperty(i,"__esModule",{value:!0});var n=a(1),o=a(3),s=a(11),c=a(35),e=(t.prototype.selectFile=function(){this._fileInput.click()},t.prototype.linkDropArea=function(e){function t(e){return e.preventDefault()}var i=this,n=o.toNode(e),e=function(e){e.preventDefault(),i.parseFiles(e.dataTransfer)};n.addEventListener("dragover",t),n.addEventListener("drop",e),this._dropAreas.set(n,{dragover:t,drop:e})},t.prototype.unlinkDropArea=function(e){var i=this;e?(e=o.toNode(e),this._unlinkDropArea(e),this._dropAreas.delete(e)):(this._dropAreas.forEach(function(e,t){i._unlinkDropArea(t)}),this._dropAreas.clear())},t.prototype.parseFiles=function(e){if(e.items&&e.items[0]&&e.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(e.items);else{for(var t=e.files,i=0;i<t.length;i++)this._addFile(t[i]);this.config.autosend&&this.send()}},t.prototype.send=function(e){var t=this;if(!this._uploadInfo||!this.isActive){var i=this.data.findAll(function(e){return e.status===c.FileStatus.queue||e.status===c.FileStatus.failed}).filter(function(e){return t.events.fire(c.UploaderEvents.beforeUploadFile,[e])});if(i.length)if(this.isActive=!0,this._uploadInfo={files:i,count:i.length,size:i.reduce(function(e,t){return e+t.file.size},0)},this.events.fire(c.UploaderEvents.uploadBegin,[i]),this.events.fire(c.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(i,e);else for(var n=0,o=i;n<o.length;n++){var r=o[n];this._xhrSend([r],e)}}},t.prototype.abort=function(e){if(e){e=this.data.getItem(e);e&&e.request&&4!==e.request.readyState&&e.request.abort()}else if(this._uploadInfo&&this._uploadInfo.files)for(var t=0,i=this._uploadInfo.files;t<i.length;t++){var n=i[t];this.abort(n.id)}},t.prototype._unlinkDropArea=function(e){var t,i=this._dropAreas.get(e);i&&(t=i.dragover,i=i.drop,e.removeEventListener("dragover",t),e.removeEventListener("drop",i))},t.prototype._initEvents=function(){var i=this;this._fileInput.addEventListener("change",function(){for(var e=i._fileInput.files,t=0;t<e.length;t++)i._addFile(e[t]);i.config.autosend&&i.send(),i._fileInput.value=null})},t.prototype._xhrSend=function(a,e){for(var l=this,e=this._createFormData(a,e),r=new XMLHttpRequest,t=this.config.headerParams,i=0,n=a;i<n.length;i++){var o=n[i];this.data.update(o.id,{request:r,status:c.FileStatus.inprogress,progress:0})}if(r.open("POST",this.config.target),t)for(var s in t)r.setRequestHeader(s,t[s]);r.upload.onprogress=function(e){for(var t=0,i=a;t<i.length;t++){var n=i[t];l.data.update(n.id,{progress:e.loaded/e.total,status:c.FileStatus.inprogress})}var o=l._uploadInfo.files.reduce(function(e,t){return e+t.size*t.progress},0)||0,r=l._uploadInfo.size,s=o/l._uploadInfo.size*100||0;l.events.fire(c.UploaderEvents.uploadProgress,[s,o,r])},r.onloadend=function(){l._uploadInfo.count=l.config.singleRequest?0:l._uploadInfo.count-1;for(var e=200===r.status?c.FileStatus.uploaded:c.FileStatus.failed,t=200===r.status&&r.response?JSON.parse(r.response):null,i=0,n=a;i<n.length;i++){var o=n[i];l.data.update(o.id,{status:e}),e===c.FileStatus.uploaded?(l.config.updateFromResponse&&t&&(l.config.singleRequest&&t[o.id]?l.data.update(o.id,t[o.id]):l.config.singleRequest||l.data.update(o.id,t)),l.events.fire(c.UploaderEvents.uploadFile,[o,t])):l.events.fire(c.UploaderEvents.uploadFail,[o])}0===l._uploadInfo.count&&(l.isActive=!1,l.events.fire(c.UploaderEvents.uploadComplete,[l._uploadInfo.files]))},r.send(e)},t.prototype._parseAsWebkitEntry=function(e){for(var t=this,i=[],n=0;n<e.length;n++){var o=e[n].webkitGetAsEntry();i.push(this._traverseFileTree(o))}r.all(i).then(function(){t.config.autosend&&t.send()})},t.prototype._createFormData=function(e,t){var i=this.config.fieldName,n=new FormData,o=this.config.params;if(t)for(var r in t)n.append(r,t[r]);if(o)for(var r in o)n.append(r,o[r]);for(var s=1<e.length?"[]":"",a=0,l=e;a<l.length;a++){var c=l[a];n.append(i+s,c.file,c.file.name),n.append(i+"_fullname"+s,c.path+c.file.name);c="object"==typeof c.id?c.id:c.id.toString();n.append(i+"_id"+s,c)}return n},t.prototype._addFile=function(e,t){void 0===t&&(t="");t={id:n.uid(),file:e,progress:0,status:c.FileStatus.queue,src:null,path:t};this.data.add(t)},t.prototype._traverseFileTree=function(e){var n=this;return new r(function(r){var s=0,a=function(e,t){var i,o;e.isFile?(s++,e.file(function(e){s--,n._addFile(e,t),0===s&&r()})):e.isDirectory&&(i=e.createReader(),i=i,o=t+e.name+"/",s++,i.readEntries(function(e){s--;for(var t=0,i=e;t<i.length;t++){var n=i[t];a(n,o)}0===s&&r()}))};a(e,"")})},t);function t(e,t,i){void 0===e&&(e={}),this.config=n.extend({autosend:!0,updateFromResponse:!0,fieldName:"file"},e),this.data=t||new s.DataCollection,this.events=i||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}i.Uploader=e}).call(this,a(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(47),o=["byte","kilobyte","megabyte","gigabyte"];t.getBasis=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e<1024?e+" "+n.default[o[t]]:this.getBasis(Math.round(e/1024),t+1)};var r;function s(e){return{extension:e.name.split(".").pop()||"none",mime:e.file?e.file.type:""}}function a(e,t){switch(e){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return r.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return r.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return r.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return r.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return r.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return r.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return r.presentation;case"html":case"htm":case"eml":return r.web;case"exe":return r.application;case"dmg":return r.apple;case"pdf":case"ps":case"eps":return r.pdf;case"psd":return r.psd;case"txt":case"djvu":case"nfo":case"xml":return r.text;default:switch(t.split("/")[0]){case"image":return r.image;case"audio":return r.audio;case"video":return r.video;default:return r.other}}}t.truncateWord=function(e,t){if(void 0===t&&(t=13),e.length<=t)return e;var i,n=e.lastIndexOf(".");return(-1===n?(i=e.substr(e.length-4),e.substr(0,t-7)):(n=n-3,i=e.substr(n),e.substr(0,t-(e.length-n))))+"..."+i},t.calculateCover=function(e){var t,i,n,o=e.width,r=e.height,o=1<(e=o/r)?(t=i=r,n=(o-i)/2,0):e<1?(n=0,(r-(t=i=o))/2):(i=t=o,n=0);return{sx:n,sy:o,sWidth:i,sHeight:t,dx:0,dy:0}},(i=r=t.FileType||(t.FileType={})).image="image",i.video="video",i.archive="archive",i.table="table",i.document="document",i.presentation="presentation",i.application="application",i.web="web",i.apple="apple",i.pdf="pdf",i.psd="psd",i.audio="audio",i.other="other",i.text="text",t.getFileType=a,t.getFileClassName=function(e){var t=s(e),e=t.mime;return a(t=t.extension,e)+" extension-"+t},t.isImage=function(e){var t=s(e),e=t.mime;return a(t.extension,e)===r.image},t.removeItem=function(e,t){e.exists(t)&&(e.update(t,{$toRemove:!0}),setTimeout(function(){e.update(t,{$toRemove:!1},!0),e.remove(t)},200))}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=this&&this.__assign||function(){return(d=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(1),h=i(0),a=i(29),f=i(236),o=(r=a.List,o(l,r),l.prototype.showItem=function(e){var t,i,n,o=this.getRootView();o&&o.node&&o.node.el&&void 0!==e&&((t=this.getRootNode())&&(i=this.config.virtual,n=this.data.getIndex(e),o=Math.floor(n/this.config.itemsInRow),e=Math.ceil(o/t.children.length)||0,e=t.children[o-t.children.length*e],(i||e)&&(e=e.children[n%this.config.itemsInRow],n=parseInt(this.config.gap.toString().replace("px",""),null),e.offsetTop>=t.clientHeight+t.scrollTop-e.clientHeight?t.scrollTop=e.offsetTop-t.clientHeight+e.clientHeight+n:e.offsetTop<t.scrollTop-n&&(t.scrollTop=e.offsetTop-n))))},l.prototype._didRedraw=function(e){var t=e.node.el,i=t.scrollHeight>t.offsetHeight,t=e.node.attrs.class.replace(" dhx_dataview--has-scroll",""),t=i?t+" dhx_dataview--has-scroll":t;e.node.patch({class:t})},l.prototype._renderItem=function(e,t){function i(e){return parseFloat(e)}var n=this.config,o=n.itemsInRow,r=n.gap,s=n.template,a=n.itemHeight,l=s?s(e):e.htmlContent,c=e.id==this._focus,u=(t+1)%this.config.itemsInRow==0;if(e.id==this._edited)return f.getEditor(e,this).toHTML(u);n=e.id.toString(),t=this.data.getMetaMap(e);return h.el("div",d(d({class:"dhx_dataview-item"+(t&&t.selected?" dhx_dataview-item--selected":"")+(c?" dhx_dataview-item--focus":"")+(t&&t.drop&&!this._edited?" dhx_dataview-item--drophere":"")+(t&&t.drag&&!this._edited?" dhx_dataview-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_dataview-item--drag":"")+(i(r)?" dhx_dataview-item--with-gap":"")+(e.css?" "+e.css:"")+(u?" dhx_dataview-item--last-item-in-row":""),style:{width:"calc("+100/o+"% - "+i(r)+" * "+(o-1)/o+"px)","margin-right":u?"":r,height:s?null:a},_key:n,"data-dhx-id":n,_ref:n},this.getDataViewItemAriaAttrs(this,e)),{tabindex:c?0:-1}),l?[h.el(".dhx_dataview-item__inner-html",{".innerHTML":l,role:"presentation"})]:e.value||e.text||e.value)},l.prototype._renderList=function(){var n=this,e=this.data.getRawData(0,-1),t=this.config,o=t.itemsInRow,i=t.css,r=t.gap,s=0,e=e.reduce(function(e,t,i){return 0===s&&e.push([]),e[e.length-1].push(n._renderItem(t,i)),s=(s+1)%o,e},[]);return h.el("",d(d(d(d({},this._handlers),{"data-dhx-widget-id":this._uid,class:(i||"")+" dhx_widget dhx_dataview"+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),style:{height:this.config.height}}),this.getDataViewAriaAttrs(this.config,this.data.getLength(),e.length,o)),{tabindex:0}),e.map(function(e,t){return h.el(".dhx_dataview-row",{style:{margin:r},"aria-label":"Row "+(t+1)},e)}))},l.prototype._getHotkeys=function(){var t=this,e=r.prototype._getHotkeys.call(this);return e.arrowUp=function(e){t.moveFocus(a.MOVE_UP,t.config.itemsInRow),t._changed&&(t._changed=!1),e.preventDefault()},e.arrowDown=function(e){t.moveFocus(a.MOVE_DOWN,t.config.itemsInRow),t._changed&&(t._changed=!1),e.preventDefault()},e.arrowLeft=function(e){t.moveFocus(a.MOVE_UP),t._changed&&(t._changed=!1),e.preventDefault()},e.arrowRight=function(e){t.moveFocus(a.MOVE_DOWN),t._changed&&(t._changed=!1),e.preventDefault()},e},l.prototype.getDataViewItemAriaAttrs=function(e,t){var i,n,o;return d(d({role:"option","aria-selected":t.$selected?"true":"false"},(o=t,(n=e).config.dragMode&&!n._edited?{"aria-grabbed":Boolean(o.$dragtarget&&!n._edited).toString()}:{})),(i=e).config.editable?{"aria-roledescription":i._edited?"Press Enter to stop editing":"Double click to edit content"}:{})},l.prototype.getDataViewAriaAttrs=function(e,t,i,n){return{role:"listbox","aria-label":"Dataview, "+t+" options on "+i+" rows, "+n+" options per row."+(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},l);function l(e,t){return void 0===t&&(t={}),r.call(this,e,s.extend({itemsInRow:1,gap:"0px"},t))||this}t.DataView=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t=t.DataViewEvents||(t.DataViewEvents={})).click="click",t.doubleClick="doubleclick",t.focusChange="focuschange",t.beforeEditStart="beforeEditStart",t.afterEditStart="afterEditStart",t.beforeEditEnd="beforeEditEnd",t.afterEditEnd="afterEditEnd",t.itemRightClick="itemRightClick",t.itemMouseOver="itemMouseOver",t.contextmenu="contextmenu"},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(53),u=i(0),l=i(1),c=i(19),d=i(8),h=i(4),f=i(6),p=i(9),g=i(20),o=(s=c.Label,o(v,s),v.prototype.destructor=function(){this.events&&this.events.clear(),this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.events=this._uid=this._propsItem=this._propsTimepicker=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},v.prototype.setProperties=function(t){var i=this;u.awaitRedraw().then(function(){if(t&&!l.isEmptyObj(t)&&i.events.fire(f.ItemEvent.beforeChangeProperties,[i.getProperties()])){for(var e in t)i._props.includes(e)&&(i.config[e]=t[e]);i._initView(i.config),i._initHandlers(),i.events.fire(f.ItemEvent.afterChangeProperties,[i.getProperties()]),i.paint()}})},v.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},v.prototype.show=function(){this.config.hidden&&this.events.fire(f.ItemEvent.beforeShow,[this.getValue("timeObject"===this.config.valueFormat)])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[this.getValue("timeObject"===this.config.valueFormat)]))},v.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[this.getValue("timeObject"===this.config.valueFormat),e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[this.getValue("timeObject"===this.config.valueFormat),e]))},v.prototype.isVisible=function(){return!this.config.hidden},v.prototype.disable=function(){this.config.disabled=!0,this.paint()},v.prototype.enable=function(){this.config.disabled=!1,this.paint()},v.prototype.isDisabled=function(){return this.config.disabled},v.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue("timeObject"===this.config.valueFormat):t;if(e||this.events.fire(f.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?this.config.validation(t):p.isTimeFormat(this.getValue(),this.config.timeFormat),e||this.events.fire(f.ItemEvent.afterValidate,[t,this._isValid]),this._isValid},v.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this.paint()},v.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&(this.timepicker.setValue(e),this.config.controls&&(this.config.value=this.timepicker.getValue(),this.events.fire(f.ItemEvent.change,[this.getValue("timeObject"===this.config.valueFormat)]),p.isVerify(this.config)&&this.validate(),this.paint()))},v.prototype.getValue=function(e){return e?this.timepicker.getValue(e):this.config.value||""},v.prototype.focus=function(){var e=this;u.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},v.prototype.blur=function(){var e=this;u.awaitRedraw().then(function(){e._popup.hide(),e.getRootView().refs.input.el.blur()})},v.prototype.clear=function(){""!==this.config.value&&this._clear()},v.prototype.getWidget=function(){return this.timepicker},v.prototype._initView=function(e){var t,i=this;if(l.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,timeFormat:24,controls:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new d.Popup,this.timepicker=new a.Timepicker(null,p.widgetConfig(e)),this._popup.attach(this.timepicker),this.config.hasOwnProperty("value")&&(this.config.value=this.timepicker.getValue()),this.config.hidden&&u.awaitRedraw().then(function(){i.hide(!0)})},v.prototype._initHandlers=function(){var n=this;this.events.on(f.ItemEvent.afterValidate,function(){n.config.$validationStatus=n._isValid?f.ValidationStatus.success:f.ValidationStatus.error,n.paint()}),this.config.controls?(this.timepicker.events.on(a.TimepickerEvents.afterClose,function(){n._popup.hide()}),this.timepicker.events.on(a.TimepickerEvents.afterApply,function(){n._afterApply()}),this._popup.events.on(d.PopupEvents.afterHide,function(){n.config.value&&n.config.value!==n.timepicker.getValue()?n.timepicker.setValue(n.config.value):""!==n.config.value&&void 0!==n.config.value||n._clear(!0)})):this.timepicker.events.on(a.TimepickerEvents.change,function(){n.config.value=n.timepicker.getValue(),n.events.fire(f.ItemEvent.change,[n.getValue("timeObject"===n.config.valueFormat)]),n.paint()}),this._popup.events.on(d.PopupEvents.afterHide,function(){document.activeElement!==n.getRootView().refs.input.el&&n.events.fire(f.ItemEvent.blur,[n.getValue()]),n.paint()}),this.events.on(f.ItemEvent.input,function(e){var t=12===n.config.timeFormat?7:5;e.length>=t&&p.isTimeFormat(e,n.config.timeFormat)?n.timepicker.setValue(e):""!==e||n.config.controls||n.clear()}),this.events.on(f.ItemEvent.afterChangeProperties,function(){n.config.value=n.timepicker.getValue(),n.paint()}),this.events.on(f.ItemEvent.blur,function(){n._popupIsFocus=!1,n.paint()}),document.addEventListener("keydown",function(e){var t,i=document.activeElement;(null===(t=null===(t=null===(t=n.getRootView())||void 0===t?void 0:t.refs)||void 0===t?void 0:t.input)||void 0===t?void 0:t.el)!==i&&!n._popup.isVisible()||n.events.fire(f.ItemEvent.keydown,[e])}),document.addEventListener("mousedown",function(){n._popup.getContainer()!==document.activeElement&&(n._popupIsFocus=!1)})},v.prototype._getHandlers=function(){var t=this;return{onfocus:function(){var e;t._popup.isVisible()||(e=t.getRootView().refs.input.el,t._popup.show(e),t.events.fire(f.ItemEvent.focus,[t.getValue()]),t.paint())},onblur:function(){t._popup.isVisible()||t.events.fire(f.ItemEvent.blur,[t.getValue()]),t.paint()},oninput:function(e){e=e.target.value;t.events.fire(f.ItemEvent.input,[e])}}},v.prototype._initHotkeys=function(){var e,i=this,t={"shift+tab":function(){i._applyTab()},tab:function(){i._applyTab()},escape:function(){i._popup.isVisible()&&i.getRootView().refs.input.el.focus(),i._popup.hide()},enter:function(e){e.preventDefault();e=i.getRootView().refs.input.el;i._popup.isVisible()?i._popupIsFocus&&i.config.controls||(i.config.value&&""===e.value?i.clear():e.value!==i.config.value&&(i.config.value=i.timepicker.getValue(),i.events.fire(f.ItemEvent.change,[i.getValue("timeObject"===i.config.valueFormat)])),p.isVerify(i.config)&&i.validate(),i._popup.hide()):i._popup.show(e)},arrowRight:function(e){var t=i._popup.getContainer();i._popup.isVisible()&&!i._popupIsFocus&&(e.preventDefault(),t.focus(),i._popupIsFocus=!0)}};for(e in t)this._keyManager.addHotKey(e,t[e])},v.prototype._draw=function(){var e=this.config,t=e.value,i=e.required,n=e.disabled,o=e.placeholder,r=e.name,s=e.id,a=e.editable,l=e.label,e=e.helpMessage,c=this._popup.isVisible()||(null===(c=null===(c=null===(c=this.getRootView())||void 0===c?void 0:c.refs)||void 0===c?void 0:c.input)||void 0===c?void 0:c.el)===document.activeElement;return u.el("div.dhx_form-group",{class:p.getFormItemCss(this.config,p.isVerify(this.config),c)},[this._drawLabel(),u.el(".dhx_input__wrapper",[u.el("div.dhx_input__container",{},[u.el(".dhx_input__icon.dxi.dxi-clock-outline"),u.el("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":r||s,_key:this._uid,_ref:"input",value:t,type:"text",required:i,disabled:n,class:c&&"dhx_input--focus",placeholder:o||"",name:r||"",id:s||this._uid,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,oninput:this._handlers.oninput,autocomplete:"off",readOnly:!a,"aria-label":l||(a?"type or":"")+" select date","aria-describedby":e?"dhx_label__help_"+(s||this._uid):null})]),p.getValidationMessage(this.config)&&u.el("span.dhx_input__caption",{},p.getValidationMessage(this.config))])])},v.prototype._clear=function(e){this.timepicker.clear(),this.config.value="",e||this.events.fire(f.ItemEvent.change,[this.config.value])},v.prototype._afterApply=function(){var e=this.getRootView().refs.input.el.value;this.config.value&&""===e?this.clear():(this.config.value=this.timepicker.getValue(),this.events.fire(f.ItemEvent.change,[this.getValue("timeObject"===this.config.valueFormat)])),p.isVerify(this.config)&&this.validate(),this._popup.hide(),this.paint()},v.prototype._applyTab=function(){var e;document.activeElement===(null===(e=null===(e=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.content)||void 0===e?void 0:e.el)||this._popupIsFocus||this._popup.hide()},v);function v(e,t){var i=s.call(this,null,t)||this;i.events=new h.EventSystem,i._isValid=!0,i._popupIsFocus=!1,i._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],i._propsTimepicker=["timeFormat","controls","valueFormat"],i._props=r(p.baseProps,i._propsItem,i._propsTimepicker),i._keyManager=new g.KeyManager(function(){var e,t=document.activeElement;return(null===(e=null===(e=null===(e=i.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===t||i._popup.isVisible()}),i._initView(t),i._initHandlers(),i._initHotkeys();return i.mount(e,u.create({render:function(){return i._draw()}})),i}t.TimePicker=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(63),l=i(4),d=i(0),c=i(1),u=i(19),h=i(8),f=i(6),p=i(9),g=i(20),o=(s=u.Label,o(v,s),v.prototype.destructor=function(){this.events&&this.events.clear(),this._popup&&this._popup.destructor(),this.colorpicker&&this.colorpicker.destructor(),this.events=this._uid=this._propsColorpicker=this._propsItem=this._props=this._isValid=null,s.prototype._destructor.call(this),this.unmount()},v.prototype.setProperties=function(e){if(e&&!c.isEmptyObj(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsColorpicker.includes(t)&&(this.colorpicker.config[t]=e[t]));this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.colorpicker.paint(),this.paint()}},v.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},v.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},v.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[i,e]))},v.prototype.isVisible=function(){return!this.config.hidden},v.prototype.disable=function(){this.config.disabled=!0,this.paint()},v.prototype.enable=function(){this.config.disabled=!1,this.paint()},v.prototype.isDisabled=function(){return this.config.disabled},v.prototype.validate=function(e,t){void 0===e&&(e=!1);t=void 0===t?this.getValue():t;if(e||this.events.fire(f.ItemEvent.beforeValidate,[t]))return this._isValid=this.config.validation?this.config.validation(t):a.isHex(t),e||this.events.fire(f.ItemEvent.afterValidate,[t,this._isValid]),this._isValid},v.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this.paint()},v.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&(this.colorpicker.setValue(e),p.isVerify(this.config)&&this.validate())},v.prototype.getValue=function(){return this.config.value||""},v.prototype.clear=function(){""!==this.config.value&&(this.config.value="",this.colorpicker.clear())},v.prototype.getWidget=function(){return this.colorpicker},v.prototype.focus=function(){var e=this;d.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},v.prototype.blur=function(){var e=this;d.awaitRedraw().then(function(){e._popup.hide(),e.getRootView().refs.input.el.blur()})},v.prototype._initView=function(e){var t,i=this;if(c.isEmptyObj(e))throw new Error("Check the configuration is correct");for(t in this.colorpicker&&this.colorpicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:a.palette,mode:"palette",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new h.Popup,this.colorpicker=new a.Colorpicker(null,p.widgetConfig(e)),this._popup.attach(this.colorpicker),this.config.hidden&&d.awaitRedraw().then(function(){i.hide(!0)})},v.prototype._initHandlers=function(){var n=this;this.colorpicker.events.on(a.ColorpickerEvents.change,function(){var e=n.config.value=n.colorpicker.getValue();n.events.fire(f.ItemEvent.change,[e]),n._popup.hide(),n.paint()}),this.events.on(f.ItemEvent.afterValidate,function(){n.config.$validationStatus=n._isValid?f.ValidationStatus.success:f.ValidationStatus.error,n.paint()}),this._popup.events.on(h.PopupEvents.afterHide,function(){document.activeElement!==n.getRootView().refs.input.el&&n.events.fire(f.ItemEvent.blur,[n.getValue()]),n.paint()}),this.events.on(f.ItemEvent.blur,function(){n._popupIsFocus=!1,n.paint()}),document.addEventListener("keydown",function(e){var t,i=document.activeElement;(null===(t=null===(t=null===(t=n.getRootView())||void 0===t?void 0:t.refs)||void 0===t?void 0:t.input)||void 0===t?void 0:t.el)!==i&&!n._popup.isVisible()||n.events.fire(f.ItemEvent.keydown,[e])}),document.addEventListener("mousedown",function(){n._popup.getContainer()!==document.activeElement&&(n._popupIsFocus=!1)})},v.prototype._getHandlers=function(){var t=this;return{onblur:function(){t._popup.isVisible()||t.events.fire(f.ItemEvent.blur,[t.getValue()]),t.paint()},onfocus:function(){var e;t._popup.isVisible()||(""!==t.config.value&&t.clearValidate(),e=t.getRootView().refs.input.el,t._popup.show(e),t.events.fire(f.ItemEvent.focus,[t.getValue()]),t.paint())},oninput:function(e){e=e.target.value;t.events.fire(f.ItemEvent.input,[e])},onchange:function(e){e=e.target.value;t.config.editable&&a.isHex(e)?t.setValue(e):(""===e&&t.clear(),p.isVerify(t.config)&&t.validate(),t.paint())}}},v.prototype._initHotkeys=function(){var e,i=this,t={"shift+tab":function(){i._applyTab()},tab:function(){i._applyTab()},escape:function(){i._popup.isVisible()&&i.getRootView().refs.input.el.focus(),i._popup.hide()},enter:function(e){e.preventDefault(),i._popup.isVisible()||(e=i.getRootView().refs.input.el,i._popup.show(e))},arrowRight:function(e){var t=i._popup.getContainer();i._popup.isVisible()&&!i._popupIsFocus&&(e.preventDefault(),t.focus(),i._popupIsFocus=!0)},onkeydown:function(e){"Tab"===e.key&&i._popup.hide()}};for(e in t)this._keyManager.addHotKey(e,t[e])},v.prototype._draw=function(){var e=this.config,t=e.required,i=e.value,n=e.icon,o=e.disabled,r=e.placeholder,s=e.name,a=e.id,l=e.editable,c=e.label,e=e.helpMessage,u=this._popup.isVisible()||(null===(u=null===(u=null===(u=this.getRootView())||void 0===u?void 0:u.refs)||void 0===u?void 0:u.input)||void 0===u?void 0:u.el)===document.activeElement;return d.el("div.dhx_form-group",{class:p.getFormItemCss(this.config,p.isVerify(this.config),u)},[this._drawLabel(),d.el(".dhx_input__wrapper",[d.el("div.dhx_input__container",{},[d.el(".dhx_input__icon",{class:n||"dxi dxi-eyedropper-variant"+(i?" dhx_input__icon--color-selected":""),style:{"background-color":i||"transparent"}}),d.el("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":s||a,_key:this._uid,_ref:"input",value:i,type:"text",required:t,disabled:o,class:u&&"dhx_input--focus",placeholder:r||"",name:s||"",id:a||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,autocomplete:"off",readOnly:!l,"aria-label":c||(l?"type or":"")+" select color","aria-describedby":e?"dhx_label__help_"+(a||this._uid):null})]),p.getValidationMessage(this.config)&&d.el("span.dhx_input__caption",{},p.getValidationMessage(this.config))])])},v.prototype._applyTab=function(){var e;document.activeElement===(null===(e=null===(e=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.content)||void 0===e?void 0:e.el)||this._popupIsFocus||this._popup.hide()},v);function v(e,t){var i=s.call(this,null,t)||this;i.events=new l.EventSystem,i._isValid=!0,i._popupIsFocus=!1,i._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],i._propsColorpicker=["mode","grayShades","customColors","palette"],i._props=r(p.baseProps,i._propsItem,i._propsColorpicker),i._keyManager=new g.KeyManager(function(){var e,t=document.activeElement;return(null===(e=null===(e=null===(e=i.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.input)||void 0===e?void 0:e.el)===t||i._popup.isVisible()}),i._initView(t),i._initHandlers(),i._initHotkeys();return i.mount(e,d.create({render:function(){return i._draw()}})),i}t.ColorPicker=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(7),c=i(6),u=i(4),d=i(1),h=i(9),o=(s=l.View,o(f,s),f.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=null,this.unmount()},f.prototype.setProperties=function(e){if(e&&!d.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)h.baseProps.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},f.prototype.getProperties=function(){for(var e={},t=0,i=h.baseProps;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},f.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[void 0])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[void 0]))},f.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[void 0,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[void 0,e]))},f.prototype.isVisible=function(){return!this.config.hidden},f.prototype._draw=function(){return a.el("div")},f);function f(e,t){var i=s.call(this,e,r({disabled:!1,hidden:!1,width:"content",height:"content"},t))||this;i.events=new u.EventSystem,i.config.hidden&&a.awaitRedraw().then(function(){i.hide(!0)});return i.mount(e,a.create({render:function(){return i._draw()}})),i}t.Spacer=o},function(e,t,i){i(108),i(109),i(110),i(111),i(112),i(113),e.exports=i(115)},function(e,t){Object.values=Object.values||function(t){var e=Object.prototype.toString.call(t);if(null==t)throw new TypeError("Cannot convert undefined or null to object");if(~["[object String]","[object Object]","[object Array]","[object Function]"].indexOf(e)){if(Object.keys)return Object.keys(t).map(function(e){return t[e]});var i,n=[];for(i in t)t.hasOwnProperty(i)&&n.push(t[i]);return n}return[]},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=0;o<t.length;o++){var r=t[o];if(null!=r)for(var s=Object.keys(Object(r)),a=0,l=s.length;a<l;a++){var c=s[a],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(n[c]=r[c])}}return n}})},function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0==n)return!1;var o,r,t=0|t,s=Math.max(0<=t?t:n-Math.abs(t),0);for(;s<n;){if((o=i[s])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=t[o];if(e.call(n,r,o,t))return r;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(t=i[r],e.call(o,t,r,i))return r;return-1})},function(e,t){String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var i=this.toString();(void 0===t||t>i.length)&&(t=i.length),t-=e.length;e=i.indexOf(e,t);return-1!==e&&e===t}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))})},function(e,t){var i,n,o,r;Element&&!Element.prototype.matches&&((i=Element.prototype).matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector),"classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var i=this;return{contains:function(e){return-1!==i.className.baseVal.split(" ").indexOf(e)},add:function(e){return i.setAttribute("class",i.getAttribute("class")+" "+e)},remove:function(e){var t=i.getAttribute("class").replace(new RegExp("(\\s|^)".concat(e,"(\\s|$)"),"g"),"$2");i.classList.contains(e)&&i.setAttribute("class",t)},toggle:function(e){this.contains(e)?this.remove(e):this.add(e)}}},configurable:!0}),Object.entries||(n=Function.bind.call(Function.call,Array.prototype.reduce),o=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),r=Function.bind.call(Function.call,Array.prototype.concat),Object.entries=function(i){return n(Object.keys(i),function(e,t){return r(e,"string"==typeof t&&o(i,t)?[[t,i[t]]]:[])},[])}),Event.prototype.composedPath||(Event.prototype.composedPath=function(){if(this.path)return this.path;var e=this.target;for(this.path=[];null!==e.parentNode;)this.path.push(e),e=e.parentNode;return this.path.push(document,window),this.path})},function(e,t){Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:0<e?1:-1}},function(e,t,i){"use strict";i.r(t);var o=i(59),t=i(114),n=["webix.io/dev/dhtmlx","#F7F7F7 !important","getComputedStyle","dhtmlxcode.com","2px","addEventListener","#","2EgbXce","pointer","","dhtmlx.ru","504337pthhTP",'return /" + this + "/',"includes","_blank","add","absolute !important","constructor","webixcode.com","231853STHwyq","apply","appendChild","31iwZayI","body","260px","white !important","#","hostname","2% !important","61732zNhSbA","^([^ ]+( +[^ ]+)+)+[^ ]}","1lggIzH","35679POqtVE","getPropertyValue",":after","createElement","502361plHciD","170726SUluIe","14px !important","382682wqwowv","click"];function r(e,t){return(r=function(e,t){return n[e-=291]})(e,t)}!function(t){for(var e=r;;)try{if(310702===parseInt(e(293))+-parseInt(e(310))+-parseInt(e(303))+-parseInt(e(311))*parseInt(e(322))+-parseInt(e(326))+parseInt(e(313))*parseInt(e(305))+parseInt(e(306))*parseInt(e(296)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(n),function(){var n,e=r,i=(n=!0,function(t,i){var e=n?function(){if(i){var e=i[r(294)](t,arguments);return i=null,e}}:function(){};return n=!1,e})(this,function(){var t=function(){var e=r;return!t[e(291)](e(327))()[e(291)](e(304)).test(i)};return t()});i(),location.hostname.includes(e(321))||location.hostname[e(328)](e(325))||location.hostname[e(328)](e(318))||location[e(301)].includes(e(292))||location[e(301)][e(328)](e(315))||(window.onload=function(){var n;function i(){var t=r;(n=document[t(309)]("div"))[t(320)](t(314),function(){var e=t;document[e(297)].removeChild(n),window.open(e(300),e(329))});var e=new o.CssManager,i=e[t(330)]({display:t(324),background:t(316),color:t(299),padding:"0",position:t(331),maxWidth:t(298),top:t(0),right:t(302),fontSize:t(312),boxShadow:"0 1px 6px rgba(0,0,0,.1), 0 10px 20px rgba(0,0,0,.1)",cursor:t(323),borderRadius:t(319),fontFamily:"Roboto",zIndex:2500});e[t(330)]({content:'"" !important',fontSize:t(312),background:t(316),color:t(299)},i+t(308)),n.classList.add(i),document[t(297)][t(295)](n)}setInterval(function(){var e=r,t=window[e(317)](n,e(308));t&&t[e(307)]("content")&&"none"!==t[e(307)]("content")||i()},6e4),i()})}()},function(e,t,i){},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=t(59);o.css=i.cssManager;var n=t(12);t(116);var r=t(17);o.message=r.message;r=window.dhx=window.dhx||{};o.i18n=r.i18n||{},o.i18n.setLocale=function(e,t){var i,n=o.i18n[e];for(i in t)n[i]=t[i]},o.i18n.spreadsheet=o.i18n.spreadsheet||n.default,r.css=r.css||i.cssManager;t=t(123);o.Spreadsheet=t.Spreadsheet},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),s=i(3),a=i(48),l=new WeakMap,c=new Map;function u(e,t){var i=document.createElement("div");return i.setAttribute("data-position",t),i.className="dhx_message-container dhx_message-container--"+t+(e===document.body?" dhx_message-container--in-body":""),i}function d(e,t){t&&clearTimeout(l.get(e));var i=e.parentNode,n=i.getAttribute("data-position"),o=i.parentNode,t=c.get(o);t&&(!(t=t[n])||-1!==(t=(n=t.stack).indexOf(e))&&(i.removeChild(e),n.splice(t,1),0===n.length&&o.removeChild(i)))}t.message=function(e){"string"==typeof e&&(e={text:e}),e.position=e.position||a.MessageContainerPosition.topRight;var t=document.createElement("div");t.className="dhx_widget dhx_message "+(e.css||""),t.setAttribute("role","alert"),(o=e.text&&r.uid())&&t.setAttribute("aria-describedby",o),e.html?t.innerHTML=e.html:(t.innerHTML='<span class="dhx_message__text" id='+o+"></span>\n\t\t"+(e.icon?'<span class="dhx_message__icon dxi '+e.icon+'"></span>':""),t.querySelector("#"+o).textContent=e.text);var i=e.node?s.toNode(e.node):document.body;"static"===getComputedStyle(i).position&&(i.style.position="relative"),(o=c.get(i))?o[e.position]||(o[e.position]={stack:[],container:u(i,e.position)}):c.set(i,((n={})[e.position]={stack:[],container:u(i,e.position)},n));var n=(o=c.get(i)[e.position]).stack,o=o.container;0===n.length&&i.appendChild(o),n.push(t),o.appendChild(t),e.expire&&(e=setTimeout(function(){return d(t)},e.expire),l.set(t,e)),t.onclick=function(){return d(t,!0)}}},function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var t=o(60),i=o(61),c=o(1);n.alert=function(s){var a=s.buttons&&s.buttons[0]?s.buttons[0]:t.default.apply,l=i.blockScreen(s.blockerCss);return new e(function(t){var e="dhx_alert__"+c.uid()+"_content",i="dhx_alert__"+c.uid()+"_header",n=document.createElement("div");n.setAttribute("role","alert"),n.setAttribute("aria-modal","true"),s.text&&n.setAttribute("aria-describedby",e),s.header&&n.setAttribute("aria-labelledby",i),n.className="dhx_widget dhx_alert "+(s.css||"");var o=function(e){"Escape"!==e.key&&"Esc"!==e.key||(r(e),t(!1))};function r(e){e.preventDefault(),l(),document.body.removeChild(n),document.removeEventListener("keydown",o)}n.innerHTML="\n\t\t\t"+(s.header?"<div id="+i+' class="dhx_alert__header"> '+(!1!==s.htmlEnable?s.header:"")+" </div>":"")+"\n\t\t\t"+(s.text?"<div id="+e+' class="dhx_alert__content">'+(!1!==s.htmlEnable?s.text:"")+"</div>":"")+'\n\t\t\t<div class="dhx_alert__footer '+(s.buttonsAlignment?"dhx_alert__footer--"+s.buttonsAlignment:"")+'">\n\t\t\t\t<button type="button" aria-label="confirm" class="dhx_alert__apply-button dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">'+a+"</button>\n\t\t\t</div>",!1===s.htmlEnable&&(s.header&&(n.querySelector("#"+i).textContent=s.header),s.text&&(n.querySelector("#"+e).textContent=s.text)),document.body.appendChild(n),n.querySelector(".dhx_alert__apply-button").focus(),n.querySelector("button").addEventListener("click",function(e){r(e),t(!0)}),document.addEventListener("keydown",o)})}}).call(this,o(15))},function(e,o,r){(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}o.setTimeout=function(){return new n(i.call(setTimeout,t,arguments),clearTimeout)},o.setInterval=function(){return new n(i.call(setInterval,t,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(t,this._id)},o.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},o.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},o._unrefActive=o.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(120),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(49))},function(e,t,i){(function(e,p){!function(i,n){"use strict";var o,r,s,a,l,c,t,u,e;function d(e){delete r[e]}function h(e){if(s)setTimeout(h,0,e);else{var t=r[e];if(t){s=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{d(e),s=!1}}}}function f(e){e.source===i&&"string"==typeof e.data&&0===e.data.indexOf(u)&&h(+e.data.slice(u.length))}i.setImmediate||(o=1,s=!(r={}),a=i.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(i))&&e.setTimeout?e:i,l="[object process]"==={}.toString.call(i.process)?function(e){p.nextTick(function(){h(e)})}:function(){if(i.postMessage&&!i.importScripts){var e=!0,t=i.onmessage;return i.onmessage=function(){e=!1},i.postMessage("","*"),i.onmessage=t,e}}()?(u="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",f,!1):i.attachEvent("onmessage",f),function(e){i.postMessage(u+e,"*")}):i.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){t.port2.postMessage(e)}):a&&"onreadystatechange"in a.createElement("script")?(c=a.documentElement,function(e){var t=a.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t)}):function(e){setTimeout(h,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];return e={callback:e,args:t},r[o]=e,l(o),o++},e.clearImmediate=d)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(49),i(121))},function(e,t){var i,n,e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var a,l=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new f(e,t)),1!==l.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var t=o(60),i=o(61),h=o(1);n.confirm=function(l){l.buttonsAlignment=l.buttonsAlignment||"right";var c=l.buttons&&l.buttons[1]?l.buttons[1]:t.default.apply,u=l.buttons&&l.buttons[0]?l.buttons[0]:t.default.reject,d=i.blockScreen("dhx_alert__overlay-confirm "+(l.blockerCss||""));return new e(function(t){var i=document.createElement("div");i.setAttribute("role","alertdialog"),i.setAttribute("aria-modal","true");var n,e=l.header&&h.uid(),o=l.header&&h.uid();o&&i.setAttribute("aria-describedby",o),e&&i.setAttribute("aria-labelledby",e);function r(e){d(),i.removeEventListener("click",s),document.removeEventListener("keydown",a),document.body.removeChild(i),t(e)}var s=function(e){"BUTTON"===e.target.tagName&&r(e.target.classList.contains("dhx_alert__confirm-aply"))},a=function(e){"Escape"===e.key||"Esc"===e.key?(i.querySelector(".dhx_alert__confirm-aply").focus(),r(e.target.classList.contains("dhx_alert__confirm-reject"))):"Tab"===e.key&&("aply"===n?(n="reject",i.querySelector(".dhx_alert__confirm-reject").focus()):(n="aply",i.querySelector(".dhx_alert__confirm-aply").focus()),e.preventDefault())};i.className="dhx_widget dhx_alert dhx_alert--confirm"+(l.css?" "+l.css:""),i.innerHTML="\n\t\t"+(l.header?'<div class="dhx_alert__header" id='+e+"> "+(!1!==l.htmlEnable?l.header:"")+" </div>":"")+"\n\t\t"+(l.text?'<div class="dhx_alert__content" id='+o+">"+(!1!==l.htmlEnable?l.text:"")+"</div>":"")+'\n\t\t\t<div class="dhx_alert__footer '+(l.buttonsAlignment?"dhx_alert__footer--"+l.buttonsAlignment:"")+'">\n\t\t\t\t<button type="button" aria-label="reject" class="dhx_alert__confirm-reject dhx_button dhx_button--view_link dhx_button--color_primary dhx_button--size_medium">'+u+'</button>\n\t\t\t\t<button type="button"  aria-label="aply"class="dhx_alert__confirm-aply dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">'+c+"</button>\n\t\t\t</div>",!1===l.htmlEnable&&(l.header&&(i.querySelector("#"+e).textContent=l.header),l.text&&(i.querySelector("#"+o).textContent=l.text)),document.body.appendChild(i),n="aply",i.querySelector(".dhx_alert__confirm-aply").focus(),i.addEventListener("click",s),document.addEventListener("keydown",a)})}}).call(this,o(15))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),x=this&&this.__assign||function(){return(x=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(63),E=i(0),a=i(4),y=i(3),l=i(7),m=i(11),c=i(36),u=i(14),d=i(30),h=i(179),f=i(42),p=i(208),g=i(209),v=i(210),_=i(211),S=i(26),b=i(213),w=i(214),I=i(13),k=i(2),M=i(56),P=i(43),O=i(215),D=i(12),F=i(216),A=i(217),V=i(5),R=i(8),T=i(22),H=i(1),L=i(218),j=i(219),N=i(220),$=i(221),z=i(34),B=i(44),W=i(45),G=i(225),U=i(18),q=i(27),Y=i(16),X=i(226),K=i(227),J=i(228),Z=i(243),Q=i(17),ee=i(244),te=i(245),ie=i(246),ne=i(28),o=(r=l.View,o(oe,r),oe.prototype.destructor=function(){var e;this.unmount(),this._layout.unmount(),this.contextMenu.destructor(),this.menu.destructor(),this.toolbar.destructor(),this._editLine.destructor(),this._tabbar.destructor(),null!==(e=this._searchForm)&&void 0!==e&&e.destructor(),null!==(e=this._linkForm)&&void 0!==e&&e.destructor()},oe.prototype.paint=function(){this.config.rowsCount===this._sizes.rowsCount&&this.config.colsCount===this._sizes.colsCount||this._generateGridStruct(),this._layout.paint(),this._grid.paint()},oe.prototype.load=function(e,t){var i=this;if("xlsx"===t||"json"===t&&!e){if(!k.isWasmSupported())throw new Error("WebAssembly is not supported by your browser");return this._xlsxProxy=this._xlsxProxy||new N.FileProxy(this),this._xlsxProxy.load(t,e).then(function(e){i.parse(e,t)})}return m.toProxy(e).load().then(function(e){i.parse(e,t)})},oe.prototype.parse=function(e,t){var u=this;"csv"===t&&(t=new w.CustomCsvDriver(this._grid)),"xlsx"===t&&(t=new j.XlsxDriver),this._sheets.forEach(function(e){"add-sheet"!==e.id&&(u._dataStore.removePage(e.value),u._sheets.remove(e.id))}),e=m.toDataDriver(t||"json").toJsonArray(e,this._grid),this._grid.config.columns.map(function(e){e.$cellCss={}});var i={sheets:[]},n=this.config,o=n.multiSheets,t=(n.formats,n.autoFormat,n.leftSplit),d=void 0===t?-1:t,n=n.topSplit,h=void 0===n?-1:n;if("sheets"in e)for(var r=0;r<(o?e.sheets.length:1);r++)(p=e.sheets[r]).name=p.name||this._generateNewSheetName(),i.sheets.push(p);else"data"in e&&i.sheets.push({data:e.data,name:this._activeSheetName.name});if("styles"in e){var s,a=e.styles;for(s in a){var l=a[s];dhx.css.add(x(x({},k.convertStyles(l)),{"white-space":"nowrap"}),s)}dhx.css.update()}Array.isArray(e)&&i.sheets.push({data:e,name:this._generateNewSheetName()});for(var c=0,f=i.sheets;c<f.length;c++){var p=f[c];this._dataStore.addPage(p.name),this._sheets.add({value:p.name,id:p.id})}for(var g=this,v=0,_=i.sheets;v<_.length;v++)!function(e){for(var i=g._dataStore.getPage(e.name),t=C(e.data),n=[];t.length;)n.push(t.splice(0,1e3));n.forEach(function(e,t){t?setTimeout(function(){return u._parseCells(e,i)},100):u._parseCells(e,i)});for(var o=g._grid.config.rowHeight,r=e.cols||g._grid.config.columns.slice(1).map(function(e){return{width:e.width}}),s=e.rows||g._grid.data.map(function(){return{height:o}}),a=i.getSize(),l=a[0],c=a[1];s.length<l;)s.push({height:o});for(;r.length<c;)r.push({width:120});e=e.merged||[];(h||d)&&e&&(e=(e=e.filter(function(e){return k.checkSpan(e,d,h,u._grid)})).map(function(e){var t=e.to,i=t.row,t=t.column;return x(x({},e),{to:{row:l<i?u._grid.data.getLength()-1:i,column:c<t?(null===(i=u._grid.config.columns)||void 0===i?void 0:i.length)-2:t}})})),i.setMeta({cols:r,rows:s,merged:e})}(p=_[v]);this._grid.data.events.fire(m.DataEvents.change),this._changeSheet(this._sheets.getId(this.config.multiSheets&&!this.config.readonly?1:0)),this._grid.paint(),this.config&&!this.config.readonly&&this.selection.setSelectedCell("A1")},oe.prototype._parseCells=function(e,l){for(var t=this.config,i=t.formats,c=void 0===i?[]:i,u=t.autoFormat,d=this,n=0,o=e;n<o.length;n++)!function(t){var e=k.getCellIds(t.cell.toUpperCase(),d._grid),i=e.row,n=e.col,o=t.value?I.getCleanValue(t.value):"",r=I.isNumeric(o),s=void 0,a=void 0,e=t.css||"";o.startsWith("http")&&o.split(" ").length;a=("General"===t.format?c.find(function(e){return"common"===e.id}):c.find(function(e){return e.id===t.format||e.mask===t.format}))||c.find(function(e){return e.mask===I.detectCellFormat(t.value)});t.format=a.mask,s=r&&"@"!==(null==a?void 0:a.mask)?u&&a.mask.includes("%")?t.value==o?parseFloat(o).toFixed(4):+(parseFloat(o)/100).toFixed(4):+o:t.value;o=a.id;"date"!==o&&"time"!==o||!s||(s=I.isNumeric(s)?+s:s instanceof Date?q.getExcelDateFromJs(s):q.getExcelDateFromString(s,a)),t.css instanceof Array&&(t.css=t.css.join(" ")),l.setValue(i,n,s,"@"===a.mask?1:0);s=k.doesContainUrl(s),s=s?{href:s}:null;l.setCell(i,n,{format:a,css:t.css,editor:t.editor,link:s})}(o[n])},oe.prototype.serialize=function(){var _=this,m={},y=[];return this._sheets.forEach(function(e){if("add-sheet"!==e.id){for(var t=e.value,i=_._dataStore.getPage(t),n=i.getMeta(),o=n.cols,r=void 0===o?[]:o,s=n.rows,e=void 0===s?[]:s,o=n.merged,s=void 0===o?[]:o,n=_._activePage.getSize(),o=n[0],n=n[1],i=i.serialize(!0),a={name:t,data:[],cols:r.slice(0,n),rows:e.slice(0,o).map(function(e){return{height:e.height}}),merged:s},l=0,c=i;l<c.length;l++){var u,d,h,f,p=c[l],g=k.getCellNameById(_._grid,(p[0]+1).toString(),(p[1]+1).toString()),v=p[2];v&&(u=v.value,d=v.css,h=v.format,f=v.editor,p={cell:g},d&&(p.css=d,m[p.css]=dhx.css.get(p.css)),f&&(p.editor=f),void 0!==h&&(v=I.getFormat(I.getDefaultFormatsMap()[h.mask]),p.format=(null==v?void 0:v.id)||h.id),!u&&"number"!=typeof u||(p.value=u),g&&(p.value||"number"==typeof p.value||d||f)&&a.data.push(p))}y.push(a)}}),{sheets:y,styles:m,formats:this.config.formats}},oe.prototype.setValue=function(e,t){var i,n;e&&(this._checkForMissedCells(e),this.events.fire(V.SpreadsheetEvents.beforeValueChange,[e,t])&&(i=(n=this._parseCell(e)).page,n=n.cleanCell,i&&(e=n.toUpperCase(),n=k.getCellIds(n,this._grid),this._callAction({row:n.row,col:n.col,cell:e,val:t,action:V.Actions.setCellValue,groupAction:V.Actions.groupAction,dataStore:this._dataStore,page:i}),this._grid.paint())))},oe.prototype.getValue=function(e){var t=this;if(e){var i=this._parseCell(e),n=i.page,i=i.cleanCell;if(n){if(e=i.toUpperCase(),k.isRangeId(e)){var o=[];return this.eachCell(function(e){e=k.getCellIds(e,t._grid);o.push(n.getValue(e.row,e.col))},e),o}e=k.getCellIds(e,this._grid);return n.getValue(e.row,e.col)}}},oe.prototype.getCellIndex=function(e){return k.getCellIds(e,this._grid)},oe.prototype.getFormula=function(e){var t=this,i=this._parseCell(e),n=i.page,i=i.cleanCell;if(n){if(e=i.toUpperCase(),k.isRangeId(e)){var o=[];return this.eachCell(function(e){o.push(t._getMath(e,n)||"")},e),o}e=this._getMath(e,n);return e?e.source:""}},oe.prototype.getSheets=function(){var t=[];return this._sheets.forEach(function(e){"add-sheet"!==e.id&&t.push({name:e.value,id:e.id})}),t},oe.prototype._getMath=function(e,t){if(void 0===t&&(t=this._activePage),e){var i=k.getCellIds(e,this._grid),e=i.row,i=i.col,t=z.toId(e,i,t.getID());return this._math.getMath(t)||null}},oe.prototype.eachCell=function(e,t){t=t||this.selection.getSelectedCell();for(var i=0,n=k.getCellsArray(t,this._grid);i<n.length;i++){var o=n[i],r=k.getCellIds(o,this._grid),s=r.row,r=r.col;e(o,this._activePage.getValue(s,r))}},oe.prototype.getStyle=function(e){var s=this;if(e){var t=this._parseCell(e),a=t.page,t=t.cleanCell;if(a){if(e=t.toUpperCase(),k.isRangeId(e)){var l=[];return this.eachCell(function(e){var t=k.getCellInfo(e,a,s._grid),e=[];t.css&&(e="string"==typeof t.css?t.css.split(" "):[t.css]);for(var i={},n=0,o=e;n<o.length;n++)var r=o[n],i=x(x({},i),dhx.css.get(r));l.push(i)},e),l}t=k.getCellInfo(e,this._activePage,this._grid),e=[];t.css&&(e="string"==typeof t.css?t.css.split(" "):[t.css]);for(var i={},n=0,o=e;n<o.length;n++)var r=o[n],i=x(x({},i),dhx.css.get(r));return i}}},oe.prototype.setStyle=function(e,t){var i,n;e&&t&&this.events.fire(V.SpreadsheetEvents.beforeStyleChange,[e,t])&&(i=(n=k.getCellIds(e,this._grid)).row,n=n.col,Object.keys(t).length?this._callAction({val:t,row:i,col:n,cell:e,action:V.Actions.setCellStyle,groupAction:V.Actions.groupAction}):this._callAction({row:i,col:n,cell:e,action:V.Actions.removeCellStyles,groupAction:V.Actions.groupAction,dataStore:this._dataStore}))},oe.prototype.setFilter=function(e,t){e&&k.isRangeId(e)&&e.includes(",")||this._callAction({val:t,cell:null!=e?e:"A1",action:V.Actions.filter})},oe.prototype.getFilter=function(e){e=this._getSheet(e)||this.getActiveSheet(),e=this._dataStore.getPage(e.name);if(e)return e.getMeta().filter},oe.prototype.getFormat=function(e){var t=this;if(e){var i=this._parseCell(e),n=i.page,i=i.cleanCell;if(n){if(e=i.toUpperCase(),k.isRangeId(e)){var o=[];return this.eachCell(function(e){o.push((null===(e=k.getCellInfo(e,n,t._grid).format)||void 0===e?void 0:e.id)||"common")},e),o}e=null===(e=k.getCellInfo(e,n,this._grid).format)||void 0===e?void 0:e.mask;return I.getDefaultFormatsMap()[e]||e}}},oe.prototype.setFormat=function(e,t){var i,n;e&&(i=(n=this._parseCell(e)).page,n=n.cleanCell,i&&(e=n.toUpperCase(),this._callAction({val:t,cell:e,action:V.Actions.setCellFormat,groupAction:V.Actions.groupAction,dataStore:this._dataStore,page:i})))},oe.prototype.clearSheet=function(e){e=this._getSheet(e)||this.getActiveSheet();this.events.fire(V.SpreadsheetEvents.beforeSheetClear,[e])&&(this._callAction({val:e.name,action:V.Actions.clearSheet,groupAction:V.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(V.SpreadsheetEvents.afterSheetClear,[e]))},oe.prototype.clear=function(){this.events.fire(V.SpreadsheetEvents.beforeClear,[])&&(this._callAction({action:V.Actions.clear,groupAction:V.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(V.SpreadsheetEvents.afterClear,[]))},oe.prototype.isLocked=function(e){var t=this;if(e){var i=this._parseCell(e),n=i.page,i=i.cleanCell;if(n){if(e=i.toUpperCase(),"start"in k.getCellIds(e,this._grid)){var o=!1;return this.eachCell(function(e){o||(e=k.getCellInfo(e,n,t._grid).locked,o=e)},e),o}return!!k.getCellInfo(e,n,this._grid).locked}}},oe.prototype.lock=function(e){var t,i;e&&(t=(i=this._parseCell(e)).page,i=i.cleanCell,t&&(e=i.toUpperCase(),i=k.getCellIds(e,this._grid),this._callAction({row:i.row,col:i.col,val:!0,cell:e,action:V.Actions.lockCell,groupAction:V.Actions.groupAction,dataStore:this._dataStore,page:t}),this._grid.paint()))},oe.prototype.unlock=function(e){var t,i;e&&(t=(i=this._parseCell(e)).page,i=i.cleanCell,t&&(e=i.toUpperCase(),i=k.getCellIds(e,this._grid),this._callAction({row:i.row,col:i.col,val:!1,cell:e,action:V.Actions.lockCell,groupAction:V.Actions.groupAction,dataStore:this._dataStore,page:t}),this._grid.paint()))},oe.prototype.addRow=function(e){this.events.fire(V.SpreadsheetEvents.beforeRowAdd,[e])&&(k.isRangeId(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:V.Actions.addRow,groupAction:V.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(V.SpreadsheetEvents.afterRowAdd,[e]))},oe.prototype.deleteRow=function(e){var t;this.events.fire(V.SpreadsheetEvents.beforeRowDelete,[e])&&(t=k.getCellIds(e,this._grid),this._callAction({row:t.row,col:t.col,cell:e,action:V.Actions.deleteRow,groupAction:V.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(V.SpreadsheetEvents.afterRowDelete,[e]))},oe.prototype.addColumn=function(e){this.events.fire(V.SpreadsheetEvents.beforeColumnAdd,[e])&&(k.isRangeId(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:V.Actions.addColumn,groupAction:V.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(V.SpreadsheetEvents.afterColumnAdd,[e]))},oe.prototype.deleteColumn=function(e){this.events.fire(V.SpreadsheetEvents.beforeColumnDelete,[e])&&(this._callAction({cell:e,action:V.Actions.deleteColumn,groupAction:V.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(V.SpreadsheetEvents.afterColumnDelete,[e]))},oe.prototype.undo=function(){this._actionsManager.undo()},oe.prototype.redo=function(){this._actionsManager.redo()},oe.prototype.startEdit=function(e,t){if(!this.config.readonly&&!this._range.mode){if(this._editMode)return this._editLine.setValueAtRedactor(t);var i=this.selection.getFocusedCell();if(e=e||i,e=e.toUpperCase(),this._checkForMissedCells(e),this.events.fire(V.SpreadsheetEvents.beforeEditStart,[e,t])&&!this.isLocked(e)){i!==e&&(this.endEdit(!0),this.selection.setSelectedCell(e));var n=k.getCellInfo(e,this._activePage,this._grid),o=n.edited,i=n.link;if(this.selection.getSelectedCell()||this.selection.setSelectedCell(e),i)return this._showLinkPopup(e);o||(i=(n=k.getCellIds(e,this._grid)).row,o=n.col,n=z.toId(i,o,this._activePage.getID()),(n=this._math.getMath(n))&&(t="="+n.source),this._activePage.setCell(i,o,{edited:!0,nextValue:t,editorValue:t}),t&&this._editLine.setValue(t),this.events.fire(V.SpreadsheetEvents.afterEditStart,[e,t]))}}},oe.prototype.endEdit=function(e){var t,i,n=this.selection.getFocusedCell(),o=k.getCellInfo(n,this._activePage,this._grid),r=o.edited,s=o.nextValue,a=o.format,o=o.value;r&&this.events.fire(V.SpreadsheetEvents.beforeEditEnd,[n,s])&&(s&&this._activePage.setMeta({inserted:!0}),e||void 0===s||("time"===(null==a?void 0:a.id)&&I.isNumeric(o)&&(t=q.timeStringToJS(s))instanceof Date&&((i=q.excelDateToJSDate(o)).setHours(t.getHours(),t.getMinutes(),t.getSeconds()),s=q.getExcelDateFromJs(i)),"date"===(null==a?void 0:a.id)&&I.isNumeric(o)&&Y.stringToDate(s,this.config.dateFormat,!0)&&(t=Y.stringToDate(s,this.config.dateFormat),i=q.excelDateToJSDate(o),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),s=q.getExcelDateFromJs(t)),this.setValue(n,s)),t=(i=k.getCellIds(n,this._grid)).row,i=i.col,this._activePage.setCell(t,i,{nextValue:void 0,edited:!1}),this._editLine.blur(),this.events.fire(V.SpreadsheetEvents.afterEditEnd,[n,s]))},oe.prototype.addSheet=function(e){if(this.config.multiSheets){var t=(t=e)||this._generateNewSheetName();if(this.events.fire(V.SpreadsheetEvents.beforeSheetAdd,[t]))return this._callAction({val:t,action:V.Actions.addSheet,groupAction:V.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:this._tabbar.getSelected()[0]}),this._sheets.find(function(e){return e.value===t}).id}},oe.prototype.removeSheet=function(e){e=this._getSheet(e);!e||!this.config.multiSheets||this.config.multiSheets&&2===this._sheets.getLength()||this.events.fire(V.SpreadsheetEvents.beforeSheetRemove,[e])&&(this._callAction({action:V.Actions.deleteSheet,groupAction:V.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:e.id,val:e.name}),this.events.fire(V.SpreadsheetEvents.afterSheetRemove,[e]))},oe.prototype.getActiveSheet=function(){return this._activeSheetName},oe.prototype.setActiveSheet=function(e){this.endEdit(),this._changeSheet(e)},oe.prototype.setValidation=function(e,t){var i=this._parseCell(e),n=i.page,i=i.cleanCell;n&&(e=i.toUpperCase(),this._callAction({val:k.isRangeId(e)?[t]:t,cell:e,action:V.Actions.setValidation,groupAction:V.Actions.groupAction,dataStore:this._dataStore,page:n}))},oe.prototype.search=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=!1),this._searchForm||(this._searchForm=new Z.SearchForm(this));var n=this._activePage,o=this._getSheet(i);if(H.isDefined(i)){if(!o)return;n=this._dataStore.getPage(o.name)}return this._activePage!==n&&o&&t&&this._changeSheet(o.id),t&&this._searchForm.show(n),this._searchForm.search(e,n)},oe.prototype.hideSearch=function(){var e;null!==(e=this._searchForm)&&void 0!==e&&e.hide()},oe.prototype.insertLink=function(e,t){e&&this._callAction({val:t,cell:e,action:V.Actions.insertLink,dataStore:this._dataStore,page:this._activePage})},oe.prototype.fitColumn=function(e){this._callAction({cell:e,action:V.Actions.fitColumn,dataStore:this._dataStore,page:this._activePage})},oe.prototype.sortCells=function(e,t){void 0===t&&(t=1),this._callAction({action:V.Actions.sortCells,groupAction:V.Actions.sortCells,dataStore:this._dataStore,cell:e,dir:t,page:this._activePage})},oe.prototype.mergeCells=function(e,t){void 0===t&&(t=!1),this._spanControl.doAction(e,t)},oe.prototype._showLinkPopup=function(e){e&&!this._contextMenuVisible&&this._linkForm.show(e,k.getCellInfo(e,this._activePage,this._grid))},oe.prototype._showFilter=function(e,t){t.stopPropagation();var i=this._activePage.getMeta().filter;this._filterForm.show(e,t,i,this._activePage)},oe.prototype._checkValidation=function(e){var t=k.getCellInfo(e,this._activePage,this._grid),i=t.editor,n=t.value;if(!i)return!0;var o,r=i.options;return"string"==typeof r&&(e=(o=k.getCellIds(r,this._grid)).start,t=o.end,i=o.row,o=o.col,r=i?[this._activePage.getValue(i,o)]:this._activePage.getRange(e.row,e.col,t.row,t.col)),"number"!=typeof n&&!n||r.includes(n)},oe.prototype._renameSheet=function(e,t){var i=this._sheets.getItem(e);i&&t&&i.prevValue!==t&&this.events.fire(V.SpreadsheetEvents.beforeSheetRename,[{name:i.value,id:i.id},t])&&(this._callAction({val:t,action:V.Actions.renameSheet,groupAction:V.Actions.groupAction,dataStore:this._dataStore,sheets:this._sheets,prev:e}),this.events.fire(V.SpreadsheetEvents.afterSheetRename,[{name:i.value,id:i.id}]))},oe.prototype._getSheet=function(t){return this.getSheets().find(function(e){return e.id===t})},oe.prototype._changeSheet=function(e){var t,i,n,o,r,s,a=this,l=this._sheets.getItem(e);l&&this.events.fire(V.SpreadsheetEvents.beforeSheetChange,[this._activeSheetName])&&(t=this._activePage,r=this._grid.getScrollState(),t&&t.setMeta({scroll:r}),i=this._activeSheetName?this._activeSheetName.name:null,n=this._editLine.isCellExpected("A1",!1,this._range.inline&&this._range.editor||null),o=this.selection&&this.selection.getFocusedCell(),(r=k.getCellInfo(o,this._activePage,this._grid))&&r.edited&&!n&&this.endEdit(),this._activePage=this._dataStore.getPage(l.value),this._activeSheetName={name:l.value,id:e},this._tabbar.select(e),l=this._activePage.getMeta()&&this._activePage.getMeta(),this._activePage&&!l.toolbarId&&this._activePage.setMeta({toolbarId:e}),n&&!this._editMode||n&&this._editMode.page!==this._activePage?(this._activePage.setMeta({selectedCells:null,focusedCell:null}),this._editMode=this._editMode||{page:t,cell:o,pageName:i}):n&&this._editMode&&this._editMode.page===this._activePage?(s=this._editLine.getValue(),this._editMode=null,this._editLine.setValue(s),E.awaitRedraw().then(function(){a._editLine.focus(),a.events.fire(V.SpreadsheetEvents.editLineInput,[s]),a._editLine.setCursor(n)})):(this._editLine.setCellMath(),this._editMode=null),(null==t?void 0:t.getMeta().filter)!==l.filter&&this._filterForm.applyFilter(this._activePage),this.events.fire(V.SpreadsheetEvents.afterSheetChange,[this._activeSheetName]),this._grid.paint(),E.awaitRedraw().then(function(){a._updateGridSizes(),a._updateGridState(),a.selection.getSelectedCell()||a._editMode||a.selection.setSelectedCell("A1"),U.focusManager.setFocusId(a._uid)}))},oe.prototype._callAction=function(e){var t={dataStore:this._dataStore,page:this._activePage,cell:this.selection.getFocusedCell()};if(e&&!this.config.readonly)if(Array.isArray(e))this._actionsManager.execute(e);else{var i=this._activePage;if(null!=(o=e.cell)&&o.includes("!")){var n=o.split("!"),o=n[1];if(!(i=this._dataStore.getPage(n[0])))return}(e=x(x({},e),{cell:o,page:i})).dataStore=this._dataStore,k.isRangeId(e.cell)&&e.groupAction?this._actionsManager.execute(e.groupAction,x(x({},t),e)):this._actionsManager.execute(e.action,x(x({},t),e))}},oe.prototype._initLayout=function(){this._grid=new c.Grid(null,{rowHeight:32,headerRowHeight:32,headerSort:!1,tooltip:!1,leftSplit:1+(this.config.leftSplit||0),topSplit:this.config.topSplit||0}),this.menu=new h.Menu(null,{navigationType:"click"}),this.menu.data.parse(g.getMenuStruct(this.config)),this.toolbar=new d.Toolbar;var e=v.getToolbarStruct(this.config.toolbarBlocks,this.config);this.toolbar.data.parse(e),this.contextMenu=new h.ContextMenu,this.contextMenu.data.parse(p.getContextMenuStruct()),this.sheetContextMenu=new h.ContextMenu,this.sheetContextMenu.data.parse(p.getSheetsContextMenuStruct(this.config.multiSheets)),this._tabbar=new d.Toolbar(null,{css:"dhx-sheets-toolbar"}),this._sheets=this._tabbar.data,this._sheets.parse([{value:"sheet1"}]),this._dataStore=$.initMathStore(this._sheets),this._math=this._dataStore.getStore(),this._editLine=new _.EditLine(null,{events:this.events,grid:this._grid,store:this._activePage,spreadsheet:this,math:this._math}),this.config.multiSheets&&!this.config.readonly&&this._sheets.add({icon:"dxi dxi-plus",id:"add-sheet"},0);var t=this._layout=new u.Layout(null,{height:"100%",rows:[{id:"menu",css:"menu_wrapper",height:"content"},{id:"toolbar",css:"toolbar_wrapper",height:"content"},{id:"editLine",css:"editLine_wrapper",height:"content"},{id:"grid",css:"dhx-spreadsheet-grid dhx_layout-cell--gravity"},{id:"tabbar",css:"sheetbar_wrapper",height:"content"}]});t.getCell("menu").attach(this.menu,this),t.getCell("toolbar").attach(this.toolbar,this),t.getCell("grid").attach(this._grid,this),t.getCell("editLine").attach(this._editLine,this),t.getCell("tabbar").attach(this._tabbar,this);var i=this.config.multiSheets&&!this.config.readonly?1:0;this._dataStore.getPage(this._sheets.getItem(this._sheets.getId(i)).value).setMeta({leftSplit:this.config.leftSplit}),this._changeSheet(this._sheets.getId(i)),this.config.editLine&&!this.config.readonly||t.getCell("editLine").hide(),this.config.menu&&!this.config.readonly||t.getCell("menu").hide(),!this.config.readonly&&e&&e.length||t.getCell("toolbar").hide(),this.config.multiSheets||t.getCell("tabbar").hide()},oe.prototype._generateGridStruct=function(){for(var _=this,e=this.serialize(),t=this.config,i=t.rowsCount,n=t.colsCount,o=[],r=1;r<=i;r++){for(var s={id:""+r,$index:r},a=1;a<=n;a++)s[a]="";o.push(s)}function m(e){var i=e.el;_._range.editor=i,_._range.inline=1,i.focus(),i.setSelectionRange(i.value.length,i.value.length),_._range.cursor=i.value.length,i.addEventListener("blur",function(e){var t;_._range.cursor=i.selectionStart,t=e,requestAnimationFrame(function(){w&&setTimeout(function(){_._restoreFocus(t)})})}),i.addEventListener("focus",function(){_._range.inline=1}),w=!0}function y(e,t){w&&_.events.fire(V.SpreadsheetEvents.cellInput,[e,t.target.value])}var b,l=[{id:"$index",width:40,header:[{text:""}],htmlEnable:!0,editable:!1,align:"right",template:function(e,t){return S.getIndexRowCell(t.$index)}}],w=!1;this.events.on(V.SpreadsheetEvents.gridRedraw,function(){b=null});for(var c=function(e,t,i){b=b||_.selection.getFocusedCell();var n=i.$letter+t.$index,o=k.getCellIds(n,_._grid),r=_._activePage.getCell(o.row,o.col)||{},s=_._activePage.getMeta().filter,i=!1,t=!1;s&&(u=s.cell,c=s.rules,a=(l=k.getCellIds(u,_._grid)).start,l=l.end,a.row===o.row&&o.col>=a.col&&o.col<=l.col&&(h=k.getCellNameById(_._grid,a.row+1,l.col+1),i=!0,t=!(!(f=c[k.getCellsArray(u.split(":")[0]+":"+h,_._grid).indexOf(n)]||{}).condition&&!f.exclude)));var a=r.locked,l=r.edited,c=r.nextValue,u=r.editor,d=r.css,h=r.format,f=r.link,o=_._activePage.getValue(o.row,o.col,"@"===(null==h?void 0:h.mask)),o=l&&H.isDefined(c)?c:o;if(b&&l){var l=null==h?void 0:h.id;"date"!==l||_._editors.date||(_._editors.date=new A.DateEditor(_.endEdit.bind(_),_.config.dateFormat,_.events)),"time"!==l||_._editors.time||(_._editors.time=new K.TimeEditor(_.endEdit.bind(_),_.config.timeFormat,_.events)),"select"===(null==u?void 0:u.type)&&(_._editors.select||(_._editors.select=new X.SelectEditor(_.endEdit.bind(_),_.events)),p=u.options,_._editors.select.setValue("string"==typeof p?_.getValue(p.replace(/=|\$/g,"")):p));var p={oninput:[y,n],_hooks:{didInsert:m.bind(_),didRemove:function(){_._range.editor=null,w=!1}.bind(_)},class:d,_key:"selection_input","data-dhx-id":"cell_input",value:null==c?h?I.getFormattedValue(o,h):o:c};return _._editors[l]?_._editors[l].toHTML(x(x({},p),{format:h})):"select"===(null===(l=r.editor)||void 0===l?void 0:l.type)?_._editors.select.toHTML(p):E.el("input.dhx_cell_input",p)}var g,v=[],p=!u||_._checkValidation(n);return f&&!f.text?(g=f.href,(""+o).split(" ").forEach(function(e){e===g?(v.push(E.el("span",{class:d||""},[g])),v.push(" ")):v.push(e+" ")})):f?(u=f.text,f=f.href,f=u||f,v.push(E.el("span.dhx_spreadsheet_link",{class:d},[h?I.getFormattedValue(f,h):f]))):v.push(h?I.getFormattedValue(o,h):o),E.el(".dhx_spreadsheet_cell",{class:d},C([a&&E.el(".dhx_lock_icon.dxi.dxi-key")],v,["select"===(null===(r=r.editor)||void 0===r?void 0:r.type)?[E.el(".dxi.dxi-menu-down.dhx_spreadsheet_cell_icon.drop-down",{onclick:function(){return _.startEdit(n)}}),E.el(".dhx_spreadsheet_cell-placeholder")]:null,i&&[E.el(".dxi.dxi-filter-variant.dhx_spreadsheet_cell_icon.filter"+(t?"-filtered":""),{onclick:function(e){return _._showFilter(n,e)},ondblclick:function(e){return _._showFilter(n,e)}}),E.el(".dhx_spreadsheet_cell-placeholder")],!p&&E.el(".dhx_spreadsheet_cell-not_valid")]))},r=1;r<=n;r++){var u=k.getLetterFromNumber(r);l.push({id:""+r,width:120,$letter:u,type:"string",header:[{text:S.getHeaderCell(u,r),align:"center"}],htmlEnable:!0,template:c})}this._grid.setColumns(l),this._grid.data.parse(o),this.parse(e),this._sizes.rowsCount=this.config.rowsCount,this._sizes.colsCount=this.config.colsCount},oe.prototype._checkForMissedCells=function(e){e.includes("!")&&(e=e.split("!")[1]);e=k.isRangeId(e)?k.getRangeIndexes(e,this._grid).end:k.getCellIndex(e,this._grid);(e.row>this.config.rowsCount||e.col>this.config.colsCount)&&(this.config.rowsCount=Math.max(this.config.rowsCount,e.row+1),this.config.colsCount=Math.max(this.config.colsCount,e.col),this._generateGridStruct())},oe.prototype._generateNewSheetName=function(){var e=this._sheets.findAll(function(e){return e.value&&e.value.startsWith("sheet")});return e.length?(e=e.map(function(e){return+e.value.split("sheet")[1]}).filter(function(e){return!!e}),"sheet"+(Math.max.apply(Math,e)+1)):"sheet1"},oe.prototype._updateGridSizes=function(){for(var n=this,e=this._activePage.getSize(),t=e[0],i=e[1],o=this._grid.config.columns,r=this._grid.data.getLength(),e=this.config,s=e.rowsCount,a=e.colsCount,e=this._activePage.getMeta(),l=e.cols,c=e.rows,u=this._grid.config.rowHeight;c.length<t||c.length<s;)c.push({height:u});if(c.length>r){for(var d=[],h=r;h<c.length;h++){for(var f={id:""+(h+1),$index:h+1},p=1;p<=i;p++)f[p]="";this._grid.data.exists(f.id)||d.push(f)}d.length&&(_=this._grid.data.serialize().map(function(e,t){return x(x({},e),{$index:t+1})}),this._grid.data.parse(C(_,d)))}for(;l.length<i||l.length<a;)l.push({width:120});if(l.length>o.length-1){for(var g=o[o.length-1],h=o.length-1;h<l.length;h++){var v=k.getLetterFromNumber(o.length);o.push({id:""+o.length,width:120,$letter:v,type:"string",header:[{text:S.getHeaderCell(v,o.length),align:"center"}],htmlEnable:!0,template:g.template})}this._grid.setColumns(o)}if(l.length<o.length-1)for(;l.length!==o.length-1;)o.pop();if(c.length<r)for(;c.length!==this._grid.data.getLength();)this._grid.data.remove(this._grid.data.getLength());var _=o[0],r=o.slice(1);r.forEach(function(e,t){e.width=(l[t]||e).width}),this._grid.setColumns(C([_],r)),this._grid.data.forEach(function(e,t){var i=c[t].height;e.height!==i&&n._grid.data.update(e.id,{height:i},!0),t===n._grid.data.getLength()-1&&n._grid.data.events.fire(m.DataEvents.change,[e.id,"update",e])})},oe.prototype._updateGridState=function(){var o=this;this._grid.config.spans=[];var e=this._activePage.getMeta(),t=e.scroll,i=void 0===t?{x:0,y:0}:t,n=e.cols,r=e.rows,s=e.merged,a=void 0===s?[]:s,t=this._grid.config.columns,e=t[0],s=t.slice(1),t=i.x,i=i.y;this._grid.scroll(t,i),s.forEach(function(e,t){e.width=(n[t]||e).width}),this._grid.setColumns(C([e],s)),this._grid.data.forEach(function(e,t){r[t]&&(t=r[t].height,e.height!==t&&o._grid.data.update(e.id,{height:t}))}),this._grid.config.spans=a.map(function(e){var t=e.from,i=e.to,n=t.row,e=t.column,t=+i.row-+n+1,i=+i.column-+e+1;return ne.normalizeSpan({row:+n+1,column:+e+1,rowspan:1<t?t:void 0,colspan:1<i?i:void 0},x({},o._grid.config))}),this.selection._removeHeadersCss(),this.selection._setHeadersCss()},oe.prototype._updateToolbar=function(e){e===this.selection.getFocusedCell()&&P.updateToolbar(this.toolbar,this.menu,this._activePage,this._grid)},oe.prototype._setEventsHandlers=function(){var r=this;this.events.on(V.SpreadsheetEvents.editLineInput,function(e){U.focusManager.setFocusId(r._uid);var t=r.selection.getFocusedCell();r.events.fire(V.SpreadsheetEvents.cellInput,[t,e])}),this.events.on(V.SpreadsheetEvents.editLineFocus,function(){var e=r.selection.getFocusedCell();r.startEdit(e),r._range.inline=0,requestAnimationFrame(function(){r._editLine.focus()})}),this.events.on(V.SpreadsheetEvents.cellInput,function(e,t){var i;r.isLocked(e)||(e=(i=k.getCellIds(e,r._grid)).row,i=i.col,r._activePage.setCell(e,i,{nextValue:t}),r._grid.paint())}),this._grid.events.on(c.GridEvents.cellMouseDown,function(){r.contextMenu._close(),r.sheetContextMenu._close()}),this._grid.events.on(c.GridEvents.scroll,function(){r._linkForm.hideInfo()}),this.events.on(V.SpreadsheetEvents.afterPopupHide,function(){U.focusManager.setFocusId(r._uid)}),this.events.on(V.SpreadsheetEvents.afterAction,function(e,t){switch(e){case V.Actions.resizeRow:var i=r._grid.data.map(function(e){return{height:e.$height||r._grid.config.rowHeight,changedByUser:e.changedByUser}});r._activePage.setMeta({rows:i});break;case V.Actions.resizeCol:i=r._grid.config.columns.slice(1).map(function(e){return{width:e.width}});r._activePage.setMeta({cols:i});break;case V.Actions.insertLink:r.selection.setFocusedCell(r.selection.getFocusedCell());break;case V.Actions.filter:case V.Actions.merge:case V.Actions.unmerge:r._updateToolbar(r.selection.getFocusedCell())}E.awaitRedraw().then(function(){r.selection.setSelectedCell(r.selection.getSelectedCell())})}),this.events.on(V.SpreadsheetEvents.beforeAction,function(e,t){switch(e){case V.Actions.sortCells:return r._spanControl.checkBeforeAction(t.cell,r._activePage,D.default.sort);case V.Actions.filter:return r._spanControl.checkBeforeAction(t.cell,r._activePage,D.default.filter);default:return!0}}),this.events.on(V.SpreadsheetEvents.beforeSelectionSet,function(e){var t=r._range;if(t.mode)return!0;e=r._editLine.isCellExpected(e,!1,t.inline&&t.editor||null);return 0<e?(t.cursor=e,t.cell=r.selection.getFocusedCell(),t.mode=1,!0):!r.config.readonly&&(r._linkForm.hide(),r._linkForm.hideInfo(),void(r._editMode||r.endEdit()))}),this.events.on(V.SpreadsheetEvents.afterSelectionSet,function(t){var e=r._range;!e.mode&&r._editMode&&r._editLine.setCellMath(),1===e.mode&&(e.mode=2,r._editMode||r.selection.setSelectedCell(e.cell),e.mode=0,e.cursor=r._editLine.isCellExpected(t,!0,e.inline?e.editor:null,e.cell),e.cell=""),r._grid.paint();var i=k.getCellIds(t,r._grid),n=i.row,e=i.col,o=r._activePage.getCell(n,e)||{},i=o.link;null!=i&&i.href&&E.awaitRedraw().then(function(){var e;r._contextMenuVisible||null!==(e=r._linkForm)&&void 0!==e&&e.isVisible()||r._linkForm.showInfo(t,o)}),r._checkValidation(t)||k.isRangeId(t)||(e=(n=k.getCellIds(t,r._grid)).row,i=n.col,i=null===(n=r.getRootNode())||void 0===n?void 0:n.querySelector('[aria-rowindex = "'+(e+1)+'"].dhx_grid-row [aria-colindex = "'+(i+2)+'"]'),new Q.tooltip("Invalid value",{node:i,position:Q.Position.right,force:!0,margin:2,css:"dhx_spreadsheet-invalid-tooltip"}))}),this.events.on(V.SpreadsheetEvents.afterFocusSet,function(e){var t,i;r._range.mode||r._editMode||(t=(i=k.getCellIds(e,r._grid)).row,i=i.col,i=r._activePage.getValue(t,i,!0),I.isNumeric(i)||i||(i=""),e=k.getCellInfo(e,r._activePage,r._grid),P.updateToolbar(r.toolbar,r.menu,r._activePage,r._grid),r._editLine.setValue(I.getFormattedValue(i,e.format)),e&&e.locked&&r._editLine.lock(),r._grid.paint())}),this.events.on(V.SpreadsheetEvents.afterStyleChange,function(e){r._updateToolbar(e)}),this.events.on(V.SpreadsheetEvents.afterFormatChange,function(e){r._updateToolbar(e)}),this.events.on(V.SpreadsheetEvents.afterEditStart,function(){r._grid.paint()}),this.events.on(V.SpreadsheetEvents.afterEditEnd,function(e){r._grid.paint();var e=k.getCellInfo(e,r._activePage,r._grid).format;null!==(e=r._editors[null==e?void 0:e.id])&&void 0!==e&&e.hidePopup()}),this._tabbar.events.on(T.NavigationBarEvents.click,function(e){"add-sheet"===e?r.addSheet():r._changeSheet(e)}),this.sheetContextMenu.events.on(T.NavigationBarEvents.click,function(e){var i;"delete"===e?r.removeSheet(r._focusedSheet):(i=r._tabbar.data.getItem(r._focusedSheet),r._tabbar.data.update(i.id,{type:"input"}),E.awaitRedraw().then(function(){var t=r._tabbar.getRootNode().querySelector("input");t.focus(),t.onkeyup=function(e){"Enter"===e.key&&t.blur(),"Escape"===e.key&&r._sheets.update(i.id,{type:"navItem",value:i.prevValue})}}))}),this.sheetContextMenu.events.on(T.NavigationBarEvents.afterHide,function(){r._focusedSheet=null}),this._tabbar.events.on(T.NavigationBarEvents.inputFocus,function(e){var t=r._sheets.getItem(e);r._sheets.update(e,{prevValue:t.value})}),this._tabbar.events.on(T.NavigationBarEvents.inputBlur,function(e){var t=r._sheets.getItem(e),i=t.value;if(r._sheets.find(function(e){return e.value===i&&e.id!==t.id})){r._getErrorWindow();var n=D.default.renameSheetAlert.split("$name"),o=n[0],n=n[1];return r._errorAlert.attachHTML("<p>"+o+"<b>"+i+"</b>"+n+"</p>"),r._errorAlert.show(),r._errorAlert.footer.events.on(T.NavigationBarEvents.click,function(){return r._errorAlert.hide()}),r._errorAlert.events.on(B.WindowEvents.afterHide,function(){r._sheets.update(t.id,{value:t.prevValue}),r._tabbar.getRootNode().querySelector("input").focus()}),!1}r._sheets.update(e,{type:"navItem",value:t.prevValue}),r._renameSheet(e,i)}),this.toolbar.events.on(T.NavigationBarEvents.click,function(e,t){"format"!==e&&"valign"!==e&&"halign"!==e&&"multiline"!==e&&(r.endEdit(),r._handleAction(e,t))}),this.contextMenu.events.on(T.NavigationBarEvents.click,function(e,t){r.endEdit(),r._handleAction(e,t)}),this.contextMenu.events.on(T.NavigationBarEvents.afterHide,function(){r._contextMenuVisible=!1,r.contextMenu.hide("fit-col"),r.contextMenu.show("link")}),this._grid.events.on(c.GridEvents.headerCellMouseDown,function(e,t){t.target.className.includes("dhx_header_icon")&&(r.contextMenu.show("fit-col"),r.contextMenu.hide("link"),r.contextMenu.showAt(t))}),this.menu.events.on(T.NavigationBarEvents.click,function(e,t){"format"!==e&&"valign"!==e&&"halign"!==e&&(r.endEdit(),r._handleAction(e,t))}),this._colorpicker.events.on(s.ColorpickerEvents.change,function(e){r._colorpickerPopup.hide();var t=r.selection.getSelectedCell();r._silencedColorChange||r.setStyle(t,((t={})[r._colorpickerTarget]=e,t)),r._silencedColorChange=!1,requestAnimationFrame(function(){U.focusManager.setFocusId(r._uid),r._activeInput&&(r._activeInput.focus(),r._activeInput=null)})}),this.events.on(V.SpreadsheetEvents.editLineBlur,function(e,t){r._restoreFocus(t)}),this.events.on(V.SpreadsheetEvents.groupFill,function(e,t){r._fillCells(e,t)})},oe.prototype._getErrorWindow=function(){return this._errorAlert||(this._errorAlert=new W.Window({footer:!0,modal:!0,closable:!0,width:350,height:240,title:D.default.alertTitle}),this._errorAlert.footer.data.parse([{type:"button",view:"flat",size:"medium",color:"primary",value:D.default.ok,id:"ok"}])),this._errorAlert},oe.prototype._handleAction=function(t,e){var i,n=this.selection.getSelectedCell(),o=this.selection.getFocusedCell(),r="";-1!==H.findIndex(this.config.formats,function(e){return e.id===t})&&(r=t,t="format");var s,a="",l="",c="";switch((""+t).includes("align")&&(s=(""+t).split("-"),t=s[0],a=s[1]),(""+t).endsWith("sort")&&(s=(""+t).split("-"),t=s[1],l=s[0]),(""+t).includes("multiline")&&(s=(""+t).split("-"),t=s[0],c=s[1]),t){case"undo":this._actionsManager.undo();break;case"redo":this._actionsManager.redo();break;case"color":case"background":this._colorpickerTarget=t;var u=k.getCellInfo(n,this._activePage,this._grid),u=k.getStylesObject(u.css)[t]||{background:"#FFFFFF",color:"#4C4C4C"}[t];this._silencedColorChange=!0,this._colorpicker.setValue("white"===u?"#FFFFFF":H.rgbToHex(u));u=y.locateNode(e,"data-dhx-id");this._colorpickerPopup.show(u);break;case"halign":this.setStyle(n,{"text-align":a});break;case"valign":this.setStyle(n,{"vertical-align":a});break;case"multiline":this.setStyle(n,{multiline:c});break;case"font-weight-bold":case"font-style-italic":case"text-decoration-line-through":case"text-decoration-underline":if(!n)return;for(var d=t.includes("line-through")?["text-decoration","line-through"]:t.split("-"),h=d.pop(),f=d.join("-"),p=0,g=n.split(",");p<g.length;p++){var v=g[p],h=P.getToggledValue(this._activePage,v,f,h,this._grid);this.setStyle(v,x(x({},this.getStyle(v)),((i={})[f]=h,i)))}break;case"clear-value":this.setValue(n,"");break;case"clear-styles":this.setStyle(n,{});break;case"clear-all":if(!n)return;this._callAction([{cell:n,action:V.Actions.setCellStyle,groupAction:k.isRangeId(n)?V.Actions.groupAction:null,val:"",dataStore:this._dataStore,page:this._activePage},{cell:n,action:V.Actions.setCellValue,groupAction:k.isRangeId(n)?V.Actions.groupAction:null,val:"",page:this._activePage,dataStore:this._dataStore},{cell:n,action:V.Actions.setValidation,groupAction:k.isRangeId(n)?V.Actions.groupAction:null,val:null,page:this._activePage,dataStore:this._dataStore}]);break;case"lock":if(!n)return;for(var _=0,m=n.split(",");_<m.length;_++){v=m[_];this.isLocked(v)?this.unlock(v):this.lock(v)}break;case"remove-row":this.deleteRow(o);break;case"add-row":this.addRow(o);break;case"remove-col":this.deleteColumn(o);break;case"add-col":this.addColumn(o);break;case"fit-col":this.fitColumn(n.split(":")[0]);break;case"help":window.open("https://docs.dhtmlx.com/spreadsheet/user_guide.html");break;case"format":this.setFormat(n,r),this.paint();break;case"export-xlsx":this.export.xlsx();break;case"import-xlsx":this.load("","xlsx");break;case"validation":this._validationForm||(this._validationForm=new J.ValidationForm(this.events,this.setValidation.bind(this),this._grid)),this._validationForm.show(n,k.getCellInfo(n,this._activePage,this._grid));break;case"sort":this.sortCells(n,"asc"===l?1:-1);break;case"search":this.search("",!0);break;case"link":this._contextMenuVisible=!1,this._showLinkPopup(o);break;case"filter":d=this._activePage.getMeta().filter;this.setFilter(n,d?null:[]);break;case"merge":this.mergeCells(n,this.toolbar.data.getItem("merge").active)}},oe.prototype._parseCell=function(e){var t=this._activePage,i=e;return e.includes("!")&&(i=(e=e.split("!"))[1],t=this._dataStore.getPage(e[0])),{cleanCell:i,page:t}},oe.prototype._fillCells=function(e,t){var i,p=this,n=[e],g=[t];k.isRangeId(e)&&(i=M.getCellsDiff(e.split(":")[1],t.split(":")[1],this._grid).isLargerByX?"row":"col",n=k.getRangeMatrix(e,this._grid,i).map(function(e){return 1<e.length?e[0]+":"+e[e.length-1]:e[0]}),g=k.getRangeMatrix(t,this._grid,i).map(function(e){return 1<e.length?e[0]+":"+e[e.length-1]:e[0]}));var v=this._activePage.getMeta().merged,_=[],m=[],n=n.reduce(function(i,e,t){var n,o,r,s,a,l=g[t];if(k.isRangeId(e)?(a=[],p.eachCell(function(e){var t,i=k.getCellIds(e,p._grid),n=i.row,o=i.col;null!==(t=p._grid)&&void 0!==t&&t.isRowHidden(n+1)||(i=x({},p._activePage.getCell(n,o)),t=p._activePage.getValue(n,o,!0),i.value=!H.isDefined(t)||k.doesContainUrl(t)?"":t,(t=k.isCellSpaned(e,v,p._grid))&&t.from.row===n&&t.from.column===o&&(i.span=k.isCellSpaned(e,v,p._grid)),a.push(i))},e)):(d=e,n=k.getCellIds(d,p._grid),o=x({},p._activePage.getCell(n.row,n.col)),r=p._activePage.getValue(n.row,n.col,!0),o.value=q.getExcelDateFromString(r,o.format)||"",t=null===(s=o.format)||void 0===s?void 0:s.id,s=k.isCellSpaned(d,v,p._grid),a="date"===t||"time"===t||s?[o]:k.doesContainUrl(r)?"":r,s&&s.from.row===n.row&&s.from.column===n.col&&(o.span=k.isCellSpaned(d,v,p._grid))),Array.isArray(a)){if(e===l)return i;var c=M.getAutoFilledCells(a,e,l,p._math,p._grid),l=c.cells;a=c.value,_.push.apply(_,c.spans)}var u,d=p.getStyle(e),c=p.getFormat(e),h=[],f=[];return p.eachCell(function(e){var t=k.getCellInfo(e,p._activePage,p._grid),e=t.editor,t=t.link;h.push(null==e?void 0:e.options),f.push(t||null)},e),p.eachCell(function(e){m.push({cell:e,action:V.Actions.unmerge,groupAction:V.Actions.unmerge,page:p._activePage})},l),i.push({cell:l,action:V.Actions.setCellFormat,groupAction:k.isRangeId(l)?V.Actions.groupAction:null,val:c,page:p._activePage},{cell:l,action:V.Actions.setCellStyle,groupAction:k.isRangeId(l)?V.Actions.groupAction:null,val:d,page:p._activePage,replace:!0},{cell:l,action:V.Actions.setValidation,groupAction:V.Actions.groupAction,val:h,page:p._activePage}),"string"==typeof a&&a.startsWith("=")?(u=k.getCellIds(e,p._grid),p.eachCell(function(e){var t=k.getCellIds(e,p._grid),t=p._math.transposeMath(a,t.row-u.row,t.col-u.col);i.push({cell:e,action:V.Actions.setCellValue,groupAction:null,val:t,page:p._activePage})},l)):i.push({cell:l,action:V.Actions.setCellValue,groupAction:k.isRangeId(l)?V.Actions.groupAction:null,val:a,page:p._activePage}),i.push({cell:l,action:V.Actions.insertLink,groupAction:V.Actions.groupAction,val:f,page:p._activePage}),i},[]),o=[];_.forEach(function(e){o.push({cell:e,action:V.Actions.merge,groupAction:V.Actions.merge,page:p._activePage,$autofill:!0})}),this._callAction(C(m,n,o))},oe.prototype._restoreFocus=function(e){var t,i=this,n=this._editLine.getRootView().node,o=n&&n.el,r=this._range.cell||this.selection.getFocusedCell(),n=k.getCellIds(r,this._grid).col<=this.config.leftSplit;if(!r||k.getCellInfo(r,this._activePage,this._grid).edited&&!n){n=U.focusManager.getFocusId();if(n!==this._uid&&n!==this._grid._uid&&null!==(t=this._editLine._suggest)&&void 0!==t&&t.isVisible()&&n!==(null===(t=this._editLine._suggest._list)||void 0===t?void 0:t._uid)&&n!==this._tabbar._uid)return this._colorpickerTarget?void(this._activeInput=e.target):void this.endEdit();var s,n=e.target,e=e.relatedTarget;o&&o.contains(e)||o&&o.contains(n)&&e&&"cell_input"===e.getAttribute("data-dhx-id")||"cell_input"===(null==e?void 0:e.getAttribute("data-dhx-id"))&&"cell_input"===n.getAttribute("data-dhx-id")||((s=n).focus(),setTimeout(function(){var e=i._range.cursor||s.value.length;s.selectionStart>e&&s.setSelectionRange(e,e)},100))}},oe.prototype._initHotkeys=function(){var i=this;if(!this.config.readonly){this.keyManager=new O.KeyManager(function(e,t){return t===i._uid||t===i._grid._uid||t===i.toolbar._uid});var e,t=G.getKeysHandlers(this,this._grid,this._buffer,this._editLine);for(e in t)this.keyManager.addHotKey(e,t[e]);for(e in this.config.hotkeys)this.keyManager.addHotKey(e,this.config.hotkeys[e])}},oe.prototype._render=function(){return E.el(".dhx_widget.dhx-spreadsheet",{dhx_widget_id:this._uid,_key:this._uid},[E.inject(this._layout.getRootView())])},oe);function oe(e,t){var o=r.call(this,e,t)||this;o.container=null===e?e:y.toNode(e),o._sizes={rowsCount:1e3,colsCount:200},o._editors={},o.config=k.extendConfig({rowsCount:{validate:function(e){return 0<=e},default:1e3},colsCount:{validate:function(e){return 0<=e},default:26},menu:{validate:function(e){return"boolean"==typeof e},default:!1},editLine:{validate:function(e){return"boolean"==typeof e},default:!0},readonly:{validate:function(e){return"boolean"==typeof e},default:!1},autoFormat:{validate:function(e){return"boolean"==typeof e},default:!0},importModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/excel2json/1.1/worker.js"},exportModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/json2excel/1.0/worker.js"},multiSheets:{validate:function(e){return"boolean"==typeof e},default:!0},dateFormat:{validate:function(e){return"string"==typeof e},default:"%d/%m/%Y"},timeFormat:{validate:function(e){return"number"==typeof e},default:12},formats:{validate:function(e){return e instanceof Array},default:[]}},o.config),o._range={cell:"",mode:0,cursor:0,editor:null,inline:0},o.events=new a.EventSystem,I.initFormat(o,o.config.dateFormat,o.config.timeFormat),o._initLayout(),o._colorpicker=new s.Colorpicker(null),o._colorpickerPopup=new R.Popup,o._colorpickerPopup.attach(o._colorpicker),o._linkForm=new ee.LinkForm(o._grid,o.insertLink.bind(o),o.events),o._setEventsHandlers(),o._actionsManager=new f.ActionsManager({spreadsheet:o,editLine:o._editLine,grid:o._grid,dataStore:o._dataStore,events:o.events}),o._buffer=new b.BufferManager(o,o._grid,o._callAction,o._activePage,o._dataStore),dhx.css.add({textDecoration:"underline",color:"#163FA2"},"dhx_spreadsheet_link"),o.selection=new F.Selection(o,o._grid,o._buffer,o._activePage);var i=o._grid.getRootView();i.hooks=i.hooks||{},i.hooks.didMount=function(e){o._updateGridSizes();var t=o.selection.getFocusedCell(),t=o.getValue(t);o._editLine.setValue(t),o.config.readonly||e.node.el.addEventListener("contextmenu",function(e){o.contextMenu.data.update("lock",{value:o.isLocked(o.selection.getSelectedCell())?D.default.unlockCell:D.default.lockCell}),o._contextMenuVisible=!0,o.contextMenu.showAt(e),e.preventDefault()}),o.container=o._layout.getRootView().node.el,i.hooks.didRedraw=function(e){o.events.fire(V.SpreadsheetEvents.gridRedraw,[e])}},o._initHotkeys();t=o._tabbar.getRootView();t.hooks=t.hooks||{};function n(e){e.node.el.addEventListener("contextmenu",function(e){o.endEdit();var t,i,n=y.locate(e);n&&"add-sheet"!==n&&!o.config.readonly&&(t=o._sheets.getLength(),i=o.sheetContextMenu.data,o.config.multiSheets&&2===t?i.update("delete",{disabled:!0}):o.config.multiSheets&&2<t&&i.getItem("delete").disabled&&i.update("delete",{disabled:!1}),o.sheetContextMenu.showAt(e.target,"right"),o._focusedSheet=n,e.preventDefault())})}t.hooks.didMount=function(e){e.node&&e.node.el&&e.node.el.addEventListener("dblclick",function(e){var t=y.locate(e);t&&"add-sheet"!==t&&!o.config.readonly&&(e.preventDefault(),o._focusedSheet=t,o.sheetContextMenu.events.fire(T.NavigationBarEvents.click,["rename",e]),E.awaitRedraw().then(function(){U.focusManager.setFocusId(null)}))}),n(e)},t.hooks.didRedraw=n,o._generateGridStruct(),o.export=new L.Exporter(o,o._grid);t=E.create({render:function(){return o._render()}});return o.mount(e,t),U.focusManager.setFocusId(o._uid),o._spanControl=new ie.Merge(o._callAction.bind(o),o.config,o._grid,o.isLocked.bind(o)),o._filterForm=new te.FilterForm(o._grid,o.setFilter.bind(o)),o}t.Spreadsheet=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(4),c=i(3),u=i(7),d=i(1),h=i(50),f=i(64),p=i(51),g=i(65),v=i(62),_=i(17),m=i(126),y=i(127),b=i(20),w=i(18),x=i(1),o=(s=u.View,o(C,s),C.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._selected=this._handlers=this._pickerState=this._inputTimeout=null,this.unmount()},C.prototype.clear=function(){this._selected="",this.events.fire(g.ColorpickerEvents.change,[this._selected]),this.paint()},C.prototype.setValue=function(e){!this._focusColor(e)&&w.focusManager.getFocusId()!==this._uid||(this.paint(),this.events.fire(g.ColorpickerEvents.change,[this._selected]),this.events.fire(g.ColorpickerEvents.colorChange,[this._selected]))},C.prototype.setFocus=function(e){this._focusColor(e)&&this.paint()},C.prototype.getValue=function(){return this._selected||""},C.prototype.getCustomColors=function(){return this.config.customColors},C.prototype.setCustomColors=function(e){this.config.customColors=e.map(function(e){return e.toUpperCase()}),this.paint()},C.prototype.setCurrentMode=function(e){"palette"!==e&&"picker"!==e||(this.config.mode=e,this.events.fire(g.ColorpickerEvents.modeChange,[e]),this.events.fire(g.ColorpickerEvents.viewChange,[e]),this.paint())},C.prototype.getCurrentMode=function(){return this.config.mode},C.prototype.getView=function(){return this.getCurrentMode()},C.prototype.setView=function(e){this.setCurrentMode(e)},C.prototype.focusValue=function(e){this.setFocus(e)},C.prototype._setHandlers=function(){var i=this;this._handlers={click:{".dhx_palette__cell":this._onColorClick},mousedown:function(e){i._pickerMove(e)},touchstart:function(e){i._pickerMove(e)},buttonsClick:function(e){i.setCurrentMode("palette"),"cancel"!==e?"apply"!==e||i.config.customColors.includes(i._pickerState.background)||(i.setValue(i._pickerState.background),i.events.fire(g.ColorpickerEvents.apply,[]),i.events.fire(g.ColorpickerEvents.selectClick,[])):i.events.fire(g.ColorpickerEvents.cancelClick,[])},customColorClick:function(){i.setView("picker")},oninput:function(t){i._inputTimeout&&clearTimeout(i._inputTimeout),i._inputTimeout=setTimeout(function(){var e=t.target.value;-1===e.indexOf("#")&&(e="#"+e),i._pickerState.customHex=e,h.isHex(e)&&(i._pickerState.hsv=h.HexToHSV(e),i.paint())},100)},contextmenu:{".dhx_palette__cell":function(e,t){e.preventDefault();t=i.config.customColors.indexOf(t.data.color);-1!==t&&i._removeCustomColor(t),i.paint()}},mouseover:{".dhx_palette__cell":function(e){e.target&&v.tooltip(p.default.rightClickToDelete,{node:e.target,position:_.Position.bottom})},".dhx_colorpicker-custom-colors__picker":function(e){e.target&&v.tooltip(p.default.addNewColor,{node:e.target,position:_.Position.bottom})}}},this.events.on(g.ColorpickerEvents.change,function(){i.paint()}),this.events.on(g.ColorpickerEvents.colorChange,function(){i.paint()})},C.prototype._pickerMove=function(e){var t=c.locate(e);this._pickerState.customHex="","picker_palette"===t?this._setPaletteGrip(e):this._setRangeGrip(e);var i="picker_palette"===t?this._setPaletteGrip:this._setRangeGrip,n=e.targetTouches?"touchmove":"mousemove",e=e.targetTouches?"touchend":"mouseup";document.addEventListener(n,i),document.addEventListener(e,function(){document.removeEventListener(n,i)}),this.paint()},C.prototype._focusColor=function(e){if(void 0===e||e.length<4)return!1;var i=e.toUpperCase();if(!h.isHex(i))return!1;var t=this.config.palette.reduce(function(t,e){return t||(e.forEach(function(e){e.toUpperCase()===i&&(t=!0)}),t)},!1),e=f.grayShades.includes(i);return t||e||((e=this.getCustomColors()).includes(i.toUpperCase())||e.push(i.toUpperCase())),this._selected=i||null,this._pickerState.hsv=h.HexToHSV(i),!0},C.prototype._removeCustomColor=function(e){this.config.customColors.splice(e,1)},C.prototype._getCells=function(e,n){var o=this;return void 0===n&&(n=""),e.reduce(function(e,t){var i=(o._selected||"").toUpperCase()===t.toUpperCase()?"dhx_palette__cell--selected":"";return e.push(a.el(".dhx_palette__cell",{class:i+" "+n,_data:{color:t},style:"background:"+t,tabindex:0})),e},[])},C.prototype._getGrayShades=function(){return a.el(".dhx_palette__row",this._getCells(f.grayShades))},C.prototype._getPalette=function(){var i=this;return this.config.palette.reduce(function(e,t){return e.push(a.el(".dhx_palette__col",i._getCells(t))),e},[])},C.prototype._getContent=function(){var e=!this.config.pickerOnly&&"palette"===this.config.mode?r([this.config.grayShades&&this._getGrayShades()],this._getPalette(),[!this.config.paletteOnly&&a.el(".dhx_colorpicker-custom-colors",{onmouseover:this._handlers.mouseover},[a.el(".dhx_colorpicker-custom-colors__header",[p.default.customColors]),a.el(".dhx_palette--custom.dhx_palette__row",r(this._getCells(this.config.customColors,"dhx_custom-color__cell"),[a.el(".dhx_colorpicker-custom-colors__picker",{class:"dxi dxi-plus",onclick:this._handlers.customColorClick,onmouseover:this._handlers.mouseover,tabindex:0})]))])]):[m.getPicker(this,this._pickerState,this._handlers)];return a.el(".dhx_widget.dhx_colorpicker",{class:this.config.css,style:{width:this.config.width},"data-dhx-widget-id":this._uid},[a.el(".dhx_palette",{onclick:this._handlers.click,oncontextmenu:this._handlers.contextmenu},e)])},C.prototype._initHotKey=function(){var e,t=this,i={enter:function(e){c.locateNodeByClassName(e,"dhx_palette__cell")&&(t._selected=x.rgbToHex(e.target.style.background),t.events.fire(g.ColorpickerEvents.change,[t._selected]),t.events.fire(g.ColorpickerEvents.colorChange,[t._selected])),c.locateNodeByClassName(e,"dhx_colorpicker-custom-colors__picker")&&t.setCurrentMode("picker")}};for(e in i)this._keyManager.addHotKey(e,i[e])},C);function C(e,t){var n=s.call(this,e,t)||this;n._setPaletteGrip=function(e){var t=n.getRootView().refs.picker_palette.el.getBoundingClientRect(),i=(e.targetTouches?e.targetTouches[0]:e).clientX,e=(e.targetTouches?e.targetTouches[0]:e).clientY-t.top,i=i-t.left,e=y.calculatePaletteGrip(t,e,i),i=e.s,e=e.v;n._pickerState.hsv.s=i,n._pickerState.hsv.v=e,n.paint()},n._setRangeGrip=function(e){var t=n.getRootView().refs.hue_range.el.getBoundingClientRect(),e=(e.targetTouches?e.targetTouches[0]:e).clientX-t.left,t=y.calculateRangeGrip(t,e),e=t.h,t=t.rangeLeft;n._pickerState.hsv.h=e,n._pickerState.rangeLeft=t,n.paint()},n._onColorClick=function(e,t){n._selected=t.data.color.toUpperCase(),n.events.fire(g.ColorpickerEvents.change,[n._selected]),n.events.fire(g.ColorpickerEvents.colorChange,[n._selected])},n._container=e,n.config=d.extend({css:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:f.palette,width:"238px",mode:"palette"},n.config),n.config.palette||(n.config.palette=f.palette),n.config.customColors&&(n.config.customColors=n.config.customColors.map(function(e){return e.toUpperCase()})),n._pickerState={hsv:{h:0,s:1,v:1},customHex:""},n.events=new l.EventSystem(n),n._setHandlers(),n._keyManager=new b.KeyManager(function(e,t){return t===n._uid}),n._initHotKey();e=a.create({render:function(){return n._getContent()}});return n.mount(n._container,e),n}t.Colorpicker=o},function(e,t,i){
/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/
e.exports=function(){"use strict";var k=1,l=2,M=3,P=4,O=5,e=typeof window!=="undefined",t,r=(e?window:{}).requestAnimationFrame,c={};function i(){}var p=Array.isArray;function u(e){return e!=null}function s(e){return e!=null&&e.constructor===Object}function o(e,t,i,n){e.splice.apply(e,[i,n].concat(t))}function a(e){var t=typeof e;return t==="string"||t==="number"}function d(e){return typeof e==="function"}function h(e){return typeof e==="object"&&d(e.then)}function f(e){var t=arguments;for(var i=1;i<t.length;i++)for(var n in t[i])e[n]=t[i][n];return e}function g(e,t,i){var n;while(n=t.shift())if(t.length===0)e[n]=i;else e[n]=e=e[n]||{}}function v(e,t){var i=[];for(var n=t;n<e.length;n++)i.push(e[n]);return i}function _(e,t){for(var i in e)if(e[i]!==t[i])return false;return true}function m(e,t){var i=e.length;if(t.length!==i)return false;for(var n=0;n<i;n++)if(e[n]!==t[n])return false;return true}function y(e){if(!r)return e;var t,i,n;function o(){t=0;e.apply(i,n)}return function(){i=this;n=arguments;if(!t)t=r(o)}}function b(e,t,i){return function(){return e.apply(i,t)}}function w(e){var t=e.slice();var i=[];i.push(0);var n;var o;for(var r=0,s=e.length;r<s;++r){var a=i[i.length-1];if(e[a]<e[r]){t[r]=a;i.push(r);continue}n=0;o=i.length-1;while(n<o){var l=(n+o)/2|0;if(e[i[l]]<e[r])n=l+1;else o=l}if(e[r]<e[i[n]]){if(n>0)t[r]=i[n-1];i[n]=r}}n=i.length;o=i[n-1];while(n-- >0){i[n]=o;o=t[o]}return i}function x(e,t){var i=0;var n=t.length-1;var o;var r=n<=2147483647?true:false;if(r)while(i<=n){o=i+n>>1;if(t[o]===e)return o;else if(t[o]<e)i=o+1;else n=o-1}else while(i<=n){o=Math.floor((i+n)/2);if(t[o]===e)return o;else if(t[o]<e)i=o+1;else n=o-1}return i==t.length?null:i}function C(e){return e[0]==="o"&&e[1]==="n"}function E(e){return e[0]==="_"}function S(e){return e==="style"}function I(e){e&&e.el&&e.el.offsetHeight}function D(e){return e.node!=null&&e.node.el!=null}function F(e,t){switch(t){case"value":case"checked":case"selected":return true}return false}function A(e){e=e||c;while(e.vm==null&&e.parent)e=e.parent;return e.vm}function V(){}var n=V.prototype={constructor:V,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:false,_lis:false,idx:null,parent:null};function R(e){var t=new V;t.type=l;t.body=e;return t}var T={},H=/\[(\w+)(?:=(\w+))?\]/g;function L(e){{var t=T[e];if(t==null){var i,n,o,r;T[e]=t={tag:(i=e.match(/^[-\w]+/))?i[0]:"div",id:(n=e.match(/#([-\w]+)/))?n[1]:null,class:(o=e.match(/\.([-\w.]+)/))?o[1].replace(/\./g," "):null,attrs:null};while(r=H.exec(e)){if(t.attrs==null)t.attrs={};t.attrs[r[1]]=r[2]||""}}return t}}var j=1,N=2,$=4,z=8;function B(e,t,i,n){var o=new V;o.type=k;if(u(n))o.flags=n;o.attrs=t;var r=L(e);o.tag=r.tag;if(r.id||r.class||r.attrs){var s=o.attrs||{};if(r.id&&!u(s.id))s.id=r.id;if(r.class){o._class=r.class;s.class=r.class+(u(s.class)?" "+s.class:"")}if(r.attrs)for(var a in r.attrs)if(!u(s[a]))s[a]=r.attrs[a];o.attrs=s}var l=o.attrs;if(u(l)){if(u(l._key))o.key=l._key;if(u(l._ref))o.ref=l._ref;if(u(l._hooks))o.hooks=l._hooks;if(u(l._data))o.data=l._data;if(u(l._flags))o.flags=l._flags;if(!u(o.key))if(u(o.ref))o.key=o.ref;else if(u(l.id))o.key=l.id;else if(u(l.name))o.key=l.name+(l.type==="radio"||l.type==="checkbox"?l.value:"")}if(i!=null)o.body=i;return o}function W(e,t,i){var n=["refs"].concat(t.split("."));g(e,n,i)}function G(e){while(e=e.parent)e.flags|=j}function U(e,t,i,n){if(e.type===O||e.type===P)return;e.parent=t;e.idx=i;e.vm=n;if(e.ref!=null)W(A(e),e.ref,e);var o=e.hooks,r=n&&n.hooks;if(o&&(o.willRemove||o.didRemove)||r&&(r.willUnmount||r.didUnmount))G(e);if(p(e.body))q(e);else;}function q(e){var t=e.body;for(var i=0;i<t.length;i++){var n=t[i];if(n===false||n==null)t.splice(i--,1);else if(p(n))o(t,n,i--,1);else{if(n.type==null)t[i]=n=R(""+n);if(n.type===l)if(n.body==null||n.body==="")t.splice(i--,1);else if(i>0&&t[i-1].type===l){t[i-1].body+=n.body;t.splice(i--,1)}else U(n,e,i,null);else U(n,e,i,null)}}}var Y={animationIterationCount:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridColumn:true,order:true,lineClamp:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function X(e,t){return!isNaN(t)&&!Y[e]?t+"px":t}function K(e,t){var i=(e.attrs||c).style;var n=t?(t.attrs||c).style:null;if(i==null||a(i))e.el.style.cssText=i;else{for(var o in i){var r=i[o];if(n==null||r!=null&&r!==n[o])e.el.style[o]=X(o,r)}if(n)for(var s in n)if(i[s]==null)e.el.style[s]=""}}var J=[];function Z(e,t,i,n,o){if(e!=null){var r=i.hooks[t];if(r)if(t[0]==="d"&&t[1]==="i"&&t[2]==="d")o?I(i.parent)&&r(i,n):J.push([r,i,n]);else return r(i,n)}}function Q(e){if(J.length){I(e.node);var t;while(t=J.shift())t[0](t[1],t[2])}}var ee=e?document:null;function te(e){while(e._node==null)e=e.parentNode;return e._node}function ie(e,t){if(t!=null)return ee.createElementNS(t,e);return ee.createElement(e)}function ne(e){return ee.createTextNode(e)}function oe(e){return ee.createComment(e)}function re(e){return e.nextSibling}function se(e){return e.previousSibling}function ae(e){var t=e.vm;var i=t!=null&&Z(t.hooks,"willUnmount",t,t.data);var n=Z(e.hooks,"willRemove",e);if((e.flags&j)===j&&p(e.body))for(var o=0;o<e.body.length;o++)ae(e.body[o]);return i||n}function le(e,t,i){var n=t._node,o=n.vm;if(p(n.body))if((n.flags&j)===j)for(var r=0;r<n.body.length;r++)le(t,n.body[r].el);else ue(n);delete t._node;e.removeChild(t);Z(n.hooks,"didRemove",n,null,i);if(o!=null){Z(o.hooks,"didUnmount",o,o.data,i);o.node=null}}function ce(e,t){var i=t._node;if(i._dead)return;var n=ae(i);if(n!=null&&h(n)){i._dead=true;n.then(b(le,[e,t,true]))}else le(e,t)}function ue(e){var t=e.body;for(var i=0;i<t.length;i++){var n=t[i];delete n.el._node;if(n.vm!=null)n.vm.node=null;if(p(n.body))ue(n)}}function de(e){var t=e.el;if((e.flags&j)===0){p(e.body)&&ue(e);t.textContent=null}else{var i=t.firstChild;do{var n=re(i);ce(t,i)}while(i=n)}}function he(e,t,i){var n=t._node,o=t.parentNode!=null;var r=t===i||!o?n.vm:null;if(r!=null)Z(r.hooks,"willMount",r,r.data);Z(n.hooks,o?"willReinsert":"willInsert",n);e.insertBefore(t,i);Z(n.hooks,o?"didReinsert":"didInsert",n);if(r!=null)Z(r.hooks,"didMount",r,r.data)}function fe(e,t,i){he(e,t,i?re(i):null)}var pe={};function ge(e){f(pe,e)}function ve(e){var t=this,i=t,n=v(arguments,1).concat(i,i.data);do{var o=t.onemit,o=o?o[e]:null;if(o){o.apply(t,n);break}}while(t=t.parent());if(pe[e])pe[e].apply(t,n)}var _e=i;function me(e){_e=e.onevent||_e;if(e.onemit)ge(e.onemit)}function ye(e,t,i){e[t]=i}function be(e,t,i,n,o){var r=e.apply(o,t.concat([i,n,o,o.data]));o.onevent(i,n,o,o.data,t);_e.call(null,i,n,o,o.data,t);if(r===false){i.preventDefault();i.stopPropagation()}}function we(e){var t=te(e.target);var i=A(t);var n=e.currentTarget._node.attrs["on"+e.type],o,r;if(p(n)){o=n[0];r=n.slice(1);be(o,r,e,t,i)}else for(var s in n)if(e.target.matches(s)){var a=n[s];if(p(a)){o=a[0];r=a.slice(1)}else{o=a;r=[]}be(o,r,e,t,i)}}function xe(e,t,i,n){if(i===n)return;var o=e.el;if(i==null||d(i))ye(o,t,i);else if(n==null)ye(o,t,we)}function Ce(e,t,i){if(t[0]==="."){t=t.substr(1);i=true}if(i)e.el[t]="";else e.el.removeAttribute(t)}function Ee(e,t,i,n,o){var r=e.el;if(i==null)!o&&Ce(e,t,false);else if(e.ns!=null)r.setAttribute(t,i);else if(t==="class")r.className=i;else if(t==="id"||typeof i==="boolean"||n)r[t]=i;else if(t[0]===".")r[t.substr(1)]=i;else r.setAttribute(t,i)}function Se(e,t,i){var n=e.attrs||c;var o=t.attrs||c;if(n===o);else{for(var r in n){var s=n[r];var a=F(e.tag,r);var l=a?e.el[r]:o[r];if(s===l);else if(S(r))K(e,t);else if(E(r));else if(C(r))xe(e,r,s,l);else Ee(e,r,s,a,i)}for(var r in o)!(r in n)&&!E(r)&&Ce(e,r,F(e.tag,r)||C(r))}}function Ie(e,t,i,n){if(e.type===P){t=e.data;i=e.key;n=e.opts;e=e.view}return new Ue(e,t,i,n)}function ke(e){for(var t=0;t<e.body.length;t++){var i=e.body[t];var n=i.type;if(n<=M)he(e.el,Me(i));else if(n===P){var o=Ie(i.view,i.data,i.key,i.opts)._redraw(e,t,false);n=o.node.type;he(e.el,Me(o.node))}else if(n===O){var o=i.vm;o._redraw(e,t);n=o.node.type;he(e.el,o.node.el)}}}function Me(e,t){if(e.el==null)if(e.type===k){e.el=t||ie(e.tag,e.ns);if(e.attrs!=null)Se(e,c,true);if((e.flags&z)===z)e.body.body(e);if(p(e.body))ke(e);else if(e.body!=null&&e.body!=="")e.el.textContent=e.body}else if(e.type===l)e.el=t||ne(e.body);else if(e.type===M)e.el=t||oe(e.body);e.el._node=e;return e.el}function Pe(e,t){return t[e.idx+1]}function Oe(e,t){return t[e.idx-1]}function De(e){return e.parent}window.lisMove=Re;var Fe=1,Ae=2;function Ve(l,c,u,d,h,f,p,g){return function(e,t,i,n,o,r){var s,a;if(n[d]!=null){if((s=n[d]._node)==null){n[d]=l(n[d]);return}if(De(s)!==e){a=l(n[d]);s.vm!=null?s.vm.unmount(true):ce(t,n[d]);n[d]=a;return}}if(n[h]==o)return Ae;else if(n[h].el==null){u(t,Me(n[h]),n[d]);n[h]=c(n[h],i)}else if(n[h].el===n[d]){n[h]=c(n[h],i);n[d]=l(n[d])}else if(!r&&s===n[p]){a=n[d];n[d]=l(a);g(t,a,n[f]);n[f]=a}else{if(r&&n[d]!=null)return Re(l,c,u,d,h,t,i,s,n);return Fe}}}function Re(e,t,i,n,o,r,s,a,l){if(a._lis){i(r,l[o].el,l[n]);l[o]=t(l[o],s)}else{var c=x(a.idx,l.tombs);a._lis=true;var u=e(l[n]);i(r,l[n],c!=null?s[l.tombs[c]].el:c);if(c==null)l.tombs.push(a.idx);else l.tombs.splice(c,0,a.idx);l[n]=u}}var Te=Ve(re,Pe,he,"lftSib","lftNode","rgtSib","rgtNode",fe),He=Ve(se,Oe,fe,"rgtSib","rgtNode","lftSib","lftNode",he);function Le(e,t){var i=t.body,n=e.el,o=e.body,r={lftNode:o[0],rgtNode:o[o.length-1],lftSib:(i[0]||c).el,rgtSib:(i[i.length-1]||c).el};e:while(1){while(1){var s=Te(e,n,o,r,null,false);if(s===Fe)break;if(s===Ae)break e}while(1){var a=He(e,n,o,r,r.lftNode,false);if(a===Fe)break;if(a===Ae)break e}je(e,n,o,r);break}}function je(e,t,i,n){var o=Array.prototype.slice.call(t.childNodes);var r=[];for(var s=0;s<o.length;s++){var a=o[s]._node;if(a.parent===e)r.push(a.idx)}var l=w(r).map(function(e){return r[e]});for(var c=0;c<l.length;c++)i[l[c]]._lis=true;n.tombs=l;while(1){var u=Te(e,t,i,n,null,true);if(u===Ae)break}}function Ne(e){return e.el._node.parent!==e.parent}function $e(e,t,i){return t[i]}function ze(e,t,i){for(;i<t.length;i++){var n=t[i];if(n.vm!=null){if(e.type===P&&n.vm.view===e.view&&n.vm.key===e.key||e.type===O&&n.vm===e.vm)return n}else if(!Ne(n)&&e.tag===n.tag&&e.type===n.type&&e.key===n.key&&(e.flags&~j)===(n.flags&~j))return n}return null}function Be(e,t,i){return t[t._keys[e.key]]}function We(e,t){Z(t.hooks,"willRecycle",t,e);var i=e.el=t.el;var n=t.body;var o=e.body;i._node=e;if(e.type===l&&o!==n){i.nodeValue=o;return}if(e.attrs!=null||t.attrs!=null)Se(e,t,false);var r=p(n);var s=p(o);var a=(e.flags&z)===z;if(r){if(s||a)Ge(e,t);else if(o!==n)if(o!=null)i.textContent=o;else de(t)}else if(s){de(t);ke(e)}else if(o!==n)if(i.firstChild)i.firstChild.nodeValue=o;else i.textContent=o;Z(t.hooks,"didRecycle",t,e)}function Ge(e,t){var i=e.body,n=i.length,o=t.body,r=o.length,s=(e.flags&z)===z,a=(e.flags&N)===N,l=(e.flags&$)===$,c=!a&&e.type===k,u=true,d=l?Be:a||s?$e:ze;if(l){var h={};for(var f=0;f<o.length;f++)h[o[f].key]=f;o._keys=h}if(c&&n===0){de(t);if(s)e.body=[];return}var p,g,v,_=0,m=false,y=0;if(s){var b={key:null};var w=Array(n)}for(var f=0;f<n;f++){if(s){var x=false;var C=null;if(u){if(l)b.key=i.key(f);p=d(b,o,y)}if(p!=null){v=p.idx;C=i.diff(f,p);if(C===true){g=p;g.parent=e;g.idx=f;g._lis=false}else x=true}else x=true;if(x){g=i.tpl(f);U(g,e,f);g._diff=C!=null?C:i.diff(f);if(p!=null)We(g,p)}else;w[f]=g}else{var g=i[f];var E=g.type;if(E<=M){if(p=u&&d(g,o,y)){We(g,p);v=p.idx}}else if(E===P){if(p=u&&d(g,o,y)){v=p.idx;var S=p.vm._update(g.data,e,f)}else var S=Ie(g.view,g.data,g.key,g.opts)._redraw(e,f,false);E=S.node.type}else if(E===O){var I=D(g.vm);var S=g.vm._update(g.data,e,f,I);E=S.node.type}}if(!l&&p!=null){if(v===y){y++;if(y===r&&n>r){p=null;u=false}}else m=true;if(r>100&&m&&++_%10===0)while(y<r&&Ne(o[y]))y++}}if(s)e.body=w;c&&Le(e,t)}function Ue(e,t,i,n){var o=this;o.view=e;o.data=t;o.key=i;if(n){o.opts=n;o.config(n)}var r=s(e)?e:e.call(o,o,t,i,n);if(d(r))o.render=r;else{o.render=r.render;o.config(r)}o._redrawAsync=y(function(e){return o.redraw(true)});o._updateAsync=y(function(e){return o.update(e,true)});o.init&&o.init.call(o,o,o.data,o.key,n)}var qe=Ue.prototype={constructor:Ue,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:i,refs:null,render:null,mount:Ye,unmount:Xe,config:function(e){var t=this;if(e.init)t.init=e.init;if(e.diff)t.diff=e.diff;if(e.onevent)t.onevent=e.onevent;if(e.hooks)t.hooks=f(t.hooks||{},e.hooks);if(e.onemit)t.onemit=f(t.onemit||{},e.onemit)},parent:function(){return A(this.node.parent)},root:function(){var e=this.node;while(e.parent)e=e.parent;return e.vm},redraw:function(e){var t=this;e?t._redraw(null,null,D(t)):t._redrawAsync();return t},update:function(e,t){var i=this;t?i._update(e,null,null,D(i)):i._updateAsync(e);return i},_update:Ze,_redraw:Je,_redrawAsync:null,_updateAsync:null};function Ye(e,t){var i=this;if(t){de({el:e,flags:0});i._redraw(null,null,false);if(e.nodeName.toLowerCase()!==i.node.tag){Me(i.node);he(e.parentNode,i.node.el,e);e.parentNode.removeChild(e)}else he(e.parentNode,Me(i.node,e),e)}else{i._redraw(null,null);if(e)he(e,i.node.el)}if(e)Q(i);return i}function Xe(e){var t=this;var i=t.node;var n=i.el.parentNode;ce(n,i.el);if(!e)Q(t)}function Ke(e,t,i,n){if(i!=null){i.body[n]=t;t.idx=n;t.parent=i;t._lis=false}return e}function Je(e,t,i){var n=e==null;var o=this;var r=o.node&&o.node.el&&o.node.el.parentNode;var s=o.node,a,l;if(o.diff!=null){a=o._diff;o._diff=l=o.diff(o,o.data);if(s!=null){var c=p(a)?m:_;var u=a===l||c(a,l);if(u)return Ke(o,s,e,t)}}r&&Z(o.hooks,"willRedraw",o,o.data);var d=o.render.call(o,o,o.data,a,l);if(d===s)return Ke(o,s,e,t);o.refs=null;if(o.key!=null&&d.key!==o.key)d.key=o.key;o.node=d;if(e){U(d,e,t,o);e.body[t]=d}else if(s&&s.parent){U(d,s.parent,s.idx,o);s.parent.body[s.idx]=d}else U(d,null,null,o);if(i!==false)if(s)if(s.tag!==d.tag||s.key!==d.key){s.vm=d.vm=null;var h=s.el.parentNode;var f=re(s.el);ce(h,s.el);he(h,Me(d),f);s.el=d.el;d.vm=o}else We(d,s);else Me(d);r&&Z(o.hooks,"didRedraw",o,o.data);if(n&&r)Q(o);return o}function Ze(e,t,i,n){var o=this;if(e!=null)if(o.data!==e){Z(o.hooks,"willUpdate",o,e);o.data=e}return o._redraw(t,i,n)}function Qe(e,t,i,n){var o,r;if(i==null)if(s(t))o=t;else r=t;else{o=t;r=i}return B(e,o,r,n)}var et="http://www.w3.org/2000/svg";function tt(e,t,i,n){var o=Qe(e,t,i,n);o.ns=et;return o}function it(e){var t=new V;t.type=M;t.body=e;return t}function nt(e,t,i,n){this.view=e;this.data=t;this.key=i;this.opts=n}function ot(e,t,i,n){return new nt(e,t,i,n)}function rt(e){this.vm=e}function st(e){return new rt(e)}function at(e){var t=new V;t.type=k;t.el=t.key=e;return t}function lt(r,s){var o=r.length;var a={items:r,length:o,key:function(e){return s.key(r[e],e)},diff:function(e,t){var i=s.diff(r[e],e);if(t==null)return i;var n=t._diff;var o=i===n||p(n)?m(i,n):_(i,n);return o||i},tpl:function(e){return s.tpl(r[e],e)},map:function(e){s.tpl=e;return a},body:function(e){var t=Array(o);for(var i=0;i<o;i++){var n=a.tpl(i);n._diff=a.diff(i);t[i]=n;U(n,e,i)}e.body=t}};return a}nt.prototype={constructor:nt,type:P,view:null,data:null,key:null,opts:null},rt.prototype={constructor:rt,type:O,vm:null};var ct={config:me,ViewModel:Ue,VNode:V,createView:Ie,defineElement:Qe,defineSvgElement:tt,defineText:R,defineComment:it,defineView:ot,injectView:st,injectElement:at,lazyList:lt,FIXED_BODY:N,DEEP_REMOVE:j,KEYED_LIST:$,LAZY_LIST:z};function ut(e,t){!function(e,t,i){{var n,o;null!=t.type?null==e.vm&&(U(t,e.parent,e.idx,null),We(e.parent.body[e.idx]=t,e),i&&I(t),Q(A(t))):((n=Object.create(e)).attrs=f({},e.attrs),o=f(e.attrs,t),null!=e._class&&(t=o.class,o.class=null!=t&&""!==t?e._class+" "+t:e._class),Se(e,n),i&&I(e))}}(this,e,t)}function dt(e,t,i){if(null!=t.type)null==e.vm&&(U(t,e.parent,e.idx,null),We(e.parent.body[e.idx]=t,e),i&&I(t),Q(A(t)));else{var n=Object.create(e);(n=Object.create(e)).attrs=f({},e.attrs);var o=f(e.attrs,t),s;null!=e._class&&(t=o.class,o.class=null!=t&&""!==t?e._class+" "+t:e._class),Se(e,n),i&&I(e)}}function ht(e,t){var i=e.body;if(p(i))for(var n=0;n<i.length;n++){var o=i[n];if(o.vm!=null)t.push(o.vm);else ht(o,t)}return t}function ft(e){var t=arguments;var i=t.length;var n,o;if(i>1){var r=1;if(s(t[1])){o=t[1];r=2}if(i===r+1&&(a(t[r])||p(t[r])||o&&(o._flags&z)===z))n=t[r];else n=v(t,r)}return B(e,o,n)}function pt(){var e=ft.apply(null,arguments);return e.ns=et,e}return n.patch=function(e,t){!function(e,t,i){{var n,o;null!=t.type?null==e.vm&&(U(t,e.parent,e.idx,null),We(e.parent.body[e.idx]=t,e),i&&I(t),Q(A(t))):((n=Object.create(e)).attrs=f({},e.attrs),o=f(e.attrs,t),null!=e._class&&(t=o.class,o.class=null!=t&&""!==t?e._class+" "+t:e._class),Se(e,n),i&&I(e))}}(this,e,t)},qe.emit=function(e){var t=this,i=t,n=v(arguments,1).concat(i,i.data);do{var o=t.onemit,o=o?o[e]:null;if(o){o.apply(t,n);break}}while(t=t.parent());pe[e]&&pe[e].apply(t,n)},qe.onemit=null,qe.body=function(){return function e(t,i){var n=t.body;if(p(n))for(var o=0;o<n.length;o++){var r=n[o];null!=r.vm?i.push(r.vm):e(r,i)}return i}(this.node,[])},ct.defineElementSpread=ft,ct.defineSvgElementSpread=function(){var e=ft.apply(null,arguments);return e.ns=et,e},ct}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(50),c=i(0),u=i(51);t.getPicker=function(e,t,i){var n=l.HSVtoRGB(t.hsv);t.background=l.RGBToHex(n);var o=l.RGBToHex(l.HSVtoRGB({h:t.hsv.h,s:1,v:1})),r=e.getRootView(),s=(a=r.refs?r.refs.picker_palette.el.getBoundingClientRect():{height:200,width:218,x:0,y:0}).height-2,n=a.width-2,r=s-t.hsv.v*s-4,s=t.hsv.s*n-4,a=(n=a.width-6)-(360-t.hsv.h)/360*n,n=(l.isHex(t.customHex)?t.customHex:t.background).replace("#","");return c.el(".dhx_colorpicker-picker",{},[c.el(".dhx_colorpicker-picker__palette",{style:{height:132,background:o},onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"picker_palette",_ref:"picker_palette"},[c.el(".dhx_palette_grip",{style:{top:r,left:s},tabindex:0})]),c.el(".dhx_colorpicker-hue-range",{style:{height:16},onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"hue_range",_key:"hue_range",_ref:"hue_range"},[c.el(".dhx_colorpicker-hue-range__grip",{style:{left:a},tabindex:0})]),c.el(".dhx_colorpicker-value",[c.el(".dhx_colorpicker-value__color",{style:{background:t.background}}),c.el(".dhx_colorpicker-value__input__wrapper",[c.el("input",{class:"dhx_colorpicker-value__input",value:n,oninput:i.oninput,maxlength:"7",_key:"hex_input","aria-label":"type color in HEX format"})])]),c.el(".dhx_colorpicker-picker__buttons",[!e.config.pickerOnly&&c.el("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_link dhx_button--color_primary",onclick:[i.buttonsClick,"cancel"]},u.default.cancel),c.el("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_flat dhx_button--color_primary",onclick:[i.buttonsClick,"apply"]},u.default.select)])])},t.calculatePaletteGrip=function(e,t,i){var e=(n=e.refs.picker_palette.el.getBoundingClientRect()).height,n=n.width;t=t<0?0:e<t?e:t,i=i<0?0:n<i?n:i,n=Math.round(i/(n/100)),e=100-Math.round(t/(e/100)),this._pickerState.hsv.s=n/100,this._pickerState.hsv.v=e/100}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePaletteGrip=function(e,t,i){var n=e.height,e=e.width;return t=t<0?0:n<t?n:t,i=i<0?0:e<i?e:i,{s:Math.round(i/(e/100))/100,v:(100-Math.round(t/(n/100)))/100}},t.calculateRangeGrip=function(e,t){return e=e.width,t=t<0?0:e<t?e:t,{h:Math.round(t/e*360),rangeLeft:t}}},function(e,i,n){"use strict";(function(s){var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0});var c=n(24),u=n(23),e=(t.prototype.load=function(e,t){var i=this;if(!e.config||this._parent.events.fire(u.DataEvents.beforeLazyLoad,[]))return this._parent.loadData=e.load().then(function(e){return e?i.parse(e,t):[]}).catch(function(e){i._parent.events.fire(u.DataEvents.loadError,[e])})},t.prototype.parse=function(e,t){var n=this;if(void 0===t&&(t=u.DataDriver.json),"json"!==t||c.hasJsonOrArrayStructure(e)||this._parent.events.fire(u.DataEvents.loadError,["Uncaught SyntaxError: Unexpected end of input"]),!((e=(t=c.toDataDriver(t)).toJsonArray(e))instanceof Array)){var i=e.total_count-1,o=e.from;if(e=e.data,0!==this._parent.getLength())return e.forEach(function(e,t){var i=o+t,t=n._parent.getId(i);t?(i=n._parent.getItem(t))&&i.$empty&&(n._parent.changeId(t,e.id,!0),n._parent.update(e.id,l(l({},e),{$empty:void 0}),!0)):c.dhxWarning("item not found")}),this._parent.events.fire(u.DataEvents.afterLazyLoad,[o,e.length]),this._parent.events.fire(u.DataEvents.change),e;for(var r=[],s=0,a=0;s<=i;s++)o<=s&&s<=o+e.length-1?(r.push(e[a]),a++):r.push({$empty:!0});e=r}return this._parent.getInitialData()&&this._parent.removeAll(),this._parent.$parse(e),e},t.prototype.save=function(o){for(var r=this,e=this._getUniqueOrder(),t=this,i=0,n=e;i<n.length;i++)!function(i){var n,e;i.saving||i.pending?c.dhxWarning("item is saving"):(n=t._findPrevState(i.id))&&n.saving?(e=new s(function(e,t){n.promise.then(function(){i.pending=!1,e(r._setPromise(i,o))}).catch(function(e){r._removeFromOrder(n),r._setPromise(i,o),c.dhxWarning(e),t(e)})}),t._addToChain(e),i.pending=!0):t._setPromise(i,o)}(n[i]);e.length&&this._parent.saveData.then(function(){r._saving=!1})},t.prototype.updateChanges=function(e){this._changes=e},t.prototype._setPromise=function(t,e){var i,n=this;switch(t.status){case"remove":i="delete";break;case"add":i="insert";break;default:i=t.status}return t.promise=e.save(t.obj,i),t.promise.then(function(){n._removeFromOrder(t)}).catch(function(e){t.saving=!1,t.error=!0,c.dhxError(e)}),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},t.prototype._addToChain=function(e){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return e}):this._parent.saveData=e},t.prototype._findPrevState=function(e){for(var t=0,i=this._changes.order;t<i.length;t++){var n=i[t];if(n.id===e)return n}return null},t.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter(function(e){return!c.isEqualObj(e,t)})},t.prototype._getUniqueOrder=function(){return this._changes.order.reduce(function(e,t){var i=e.findIndex(function(e){return e.id===t.id}),n=-1<i?e[i]:null;return n&&!1===n.saving&&"add"===n.status?"remove"===t.status?e.splice(i,1):n.obj=t.obj:n&&!1===n.saving&&"update"===n.status?e.splice(i,1,t):e.push(t),e},[])},t);function t(e,t){this._parent=e,this._changes=t}i.Loader=e}).call(this,n(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(130);o.prototype.toJsonArray=function(e){return this.getRows(e)},o.prototype.toJsonObject=function(e){var t;return"string"==typeof e&&(t=this._fromString(e)),function e(t,i){i=i||{};var n=t.attributes;if(n&&n.length)for(var o=0;o<n.length;o++)i[n[o].name]=n[o].value;for(var r,s=t.childNodes,o=0;o<s.length;o++)1===s[o].nodeType&&(i[r=s[o].tagName]?("function"!=typeof i[r].push&&(i[r]=[i[r]]),i[r].push(e(s[o],{}))):i[r]=e(s[o],{}));return i}(t)},o.prototype.serialize=function(e){return n.jsonToXML(e)},o.prototype.getFields=function(e){return e},o.prototype.getRows=function(e){if("string"==typeof e&&(e=this._fromString(e)),e){e=e.childNodes&&e.childNodes[0]&&e.childNodes[0].childNodes;return e&&e.length?this._getRows(e):null}return[]},o.prototype._getRows=function(e){for(var t=[],i=0;i<e.length;i++)"item"===e[i].tagName&&t.push(this._nodeToJS(e[i]));return t},o.prototype._fromString=function(e){try{return(new DOMParser).parseFromString(e,"text/xml")}catch(e){return null}},o.prototype._nodeToJS=function(e){var t={};if(this._haveAttrs(e))for(var i=e.attributes,n=0;n<i.length;n++){var o=i[n],r=o.name,o=o.value;t[r]=this._toType(o)}if(3===e.nodeType)return t.value=t.value||this._toType(e.textContent),t;var s=e.childNodes;if(s)for(n=0;n<s.length;n++){var a=s[n],l=a.tagName;l&&("items"===l&&a.childNodes?t[l]=this._getRows(a.childNodes):this._haveAttrs(a)?t[l]=this._nodeToJS(a):t[l]=this._toType(a.textContent))}return t},o.prototype._toType=function(e){return"false"===e||"true"===e?"true"===e:e},o.prototype._haveAttrs=function(e){return e.attributes&&e.attributes.length},i=o;function o(){}t.XMLDriver=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=4;function s(e){return" ".repeat(e)}t.jsonToXML=function(e,t){void 0===t&&(t="root");for(var i='<?xml version="1.0" encoding="iso-8859-1"?>\n<'+t+">",n=0;n<e.length;n++)i+="\n"+function t(e,i){void 0===i&&(i=r);var n,o=s(i)+"<item>\n";for(n in e)Array.isArray(e[n])?(o+=s(i+r)+"<"+n+">\n",o+=e[n].map(function(e){return t(e,i+2*r)}).join("\n")+"\n",o+=s(i+r)+"</"+n+">\n"):o+=s(i+r)+("<"+n+">"+e[n])+"</"+n+">\n";return o+=s(i)+"</item>"}(e[n]);return i+"\n</"+t+">"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(24),i=(n.prototype.sort=function(e,t,i){this._createSorter(t),i===t&&(t=null),(i||t)&&this._sort(e,i,t)},n.prototype._createSorter=function(i){var n=this;i&&!i.rule&&(i.rule=function(e,t){e=null!==(e=n._checkVal(i.as,e[i.by]))&&void 0!==e?e:"",t=null!==(t=n._checkVal(i.as,t[i.by]))&&void 0!==t?t:"";return o.naturalCompare(e.toString(),t.toString())})},n.prototype._checkVal=function(e,t){return e?e.call(this,t):t},n.prototype._sort=function(e,n,o){var r=this,s={asc:1,desc:-1};return e.sort(function(e,t){var i=0;return n&&(i=n.rule.call(r,e,t)*(s[n.dir]||s.asc)),0===i&&o&&(i=o.rule.call(r,e,t)*(s[o.dir]||s.asc)),i})},n);function n(){}t.Sort=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var u=i(1),s=i(66),a=i(31),d=i(24),h=i(23);function l(e,t,i,n){void 0!==n&&-1!==n&&e[i]&&e[i][n]?e[i].splice(n,0,t):(e[i]||(e[i]=[]),e[i].push(t))}var c,o=(c=s.DataCollection,o(f,c),f.prototype.add=function(e,i,n){var o=this;if(void 0===i&&(i=-1),void 0===n&&(n=this._root),this.events.fire(h.DataEvents.beforeAdd,[e]))return"object"!=typeof e&&(e={value:e}),e=Array.isArray(e)?e.map(function(e,t){return o._add(e,i,n,t)}):this._add(e,i,n),this._applySmart(),e},f.prototype.getRoot=function(){return this._root},f.prototype.getParent=function(e,t){if(void 0===t&&(t=!1),!this._pull[e])return null;e=this._pull[e].parent;return t?this._pull[e]:e},f.prototype.getItems=function(e){return this._childs&&this._childs[e]?this._childs[e]:[]},f.prototype.getLength=function(e){return void 0===e&&(e=this._root),this._childs[e]?this._childs[e].length:null},f.prototype.removeAll=function(e){if(e){if(this._childs[e])for(var t=0,i=r(this._childs[e]);t<i.length;t++){var n=i[t];this.remove(n.id)}}else{c.prototype.removeAll.call(this);var o=this._root;this._initChilds=null,this._childs=((e={})[o]=[],e)}},f.prototype.getIndex=function(t){var e=this.getParent(t);return e&&this._childs[e]?u.findIndex(this._childs[e],function(e){return e.id===t}):-1},f.prototype.sort=function(e){var t=this;if(e){for(var i in this._childs)this._sort.sort(this._childs[i],e);if(this._initChilds&&Object.keys(this._initChilds).length)for(var i in this._initChilds)this._sort.sort(this._initChilds[i],e)}else this._childs={},this._parse_data(Object.keys(this._pull).map(function(e){return t._pull[e]})),this._filters&&this.filter(this._filters.filters,this._filters.config);this.events.fire(h.DataEvents.change)},f.prototype.filter=function(e,t){var n=this;if(void 0===t&&(t={}),e&&t.add||(this.restoreOrder(),e)){if(this._initOrder||(this._initOrder=this._order),this._initChilds||(this._initChilds=this._childs),t.type=t.type||h.TreeFilterType.all,this._filters={filters:{},config:t},"function"!=typeof e)if(e.by)this._filters.filters[e.by]=e;else for(var i in e)this._filters.filters[i]=e[i];else this._filters.filters=e;var o={};this._recursiveFilter(this._filters.filters,t,this._root,0,o),t&&!t.smartFilter&&(this._filters=null),Object.keys(o).forEach(function(e){for(var t=n.getParent(e),i=n.getItem(e);t;)o[t]||(o[t]=[]),i&&!o[t].find(function(e){return e.id===i.id})&&o[t].push(i),i=n.getItem(t),t=n.getParent(t)}),this._childs=o,this.events.fire(h.DataEvents.change)}},f.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null),this.events.fire(h.DataEvents.change)},f.prototype.copy=function(e,i,n,o){var r=this;return void 0===n&&(n=this),void 0===o&&(o=this._root),e instanceof Array?e.map(function(e,t){return r._copy(e,i,n,o,t)}):this._copy(e,i,n,o)},f.prototype.move=function(e,i,n,o){var r=this;return void 0===n&&(n=this),void 0===o&&(o=this._root),e instanceof Array?e.map(function(e,t){return r._move(e,i,n,o,t)}):this._move(e,i,n,o)},f.prototype.forEach=function(e,t,i){if(void 0===t&&(t=this._root),void 0===i&&(i=1/0),this.haveItems(t)&&!(i<1))for(var n=this._childs[t],o=0;o<n.length;o++)e.call(this,n[o],o,n),this.haveItems(n[o].id)&&this.forEach(e,n[o].id,--i)},f.prototype.eachChild=function(e,t,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=function(){return!0}),this.haveItems(e))for(var o=0;o<this._childs[e].length;o++)t.call(this,this._childs[e][o],o),i&&n(this._childs[e][o])&&this.eachChild(this._childs[e][o].id,t,i,n)},f.prototype.getNearId=function(e){return e},f.prototype.loadItems=function(t,i){var n=this;void 0===i&&(i=h.DataDriver.json);var e=this.config.autoload.toString(),e=e+(e.includes("?")?"&id="+t:"?id="+t);new a.DataProxy(e).load().then(function(e){e=(i=d.toDataDriver(i)).toJsonArray(e),n._parse_data(e,t),n.events.fire(h.DataEvents.change)})},f.prototype.refreshItems=function(e,t){void 0===t&&(t=h.DataDriver.json),this.removeAll(e),this.loadItems(e,t)},f.prototype.eachParent=function(e,t,i){void 0===i&&(i=!1);e=this.getItem(e);e&&(i&&t.call(this,e),e.parent!==this._root&&(i=this.getItem(e.parent),t.call(this,i),this.eachParent(e.parent,t)))},f.prototype.haveItems=function(e){return e in this._childs},f.prototype.canCopy=function(t,e){if(t===e)return!1;var i=!0;return this.eachParent(e,function(e){return e.id===t?i=!1:null}),i},f.prototype.serialize=function(e,t){void 0===e&&(e=h.DataDriver.json);t=this._serialize(this._root,t),e=d.toDataDriver(e);if(e)return e.serialize(t)},f.prototype.getId=function(e,t){if(void 0===t&&(t=this._root),this._childs[t]&&this._childs[t][e])return this._childs[t][e].id},f.prototype.map=function(e,t,i){void 0===t&&(t=this._root),void 0===i&&(i=!0);var n=[];if(!this.haveItems(t))return n;for(var o,r=0;r<this._childs[t].length;r++)n.push(e.call(this,this._childs[t][r],r,this._childs)),i&&(o=this.map(e,this._childs[t][r].id,i),n=n.concat(o));return n},f.prototype.getRawData=function(e,t,i,n,o){return o=o||this._root,this._childs[o]?(o=o===this._root?c.prototype.getRawData.call(this,e,t,this._childs[o]):this._childs[o],2===n?this.flatten(o):o):[]},f.prototype.flatten=function(e){var i=this,n=[];return e.forEach(function(e){n.push(e);var t=i._childs[e.id];t&&e.$opened&&(n=n.concat(i.flatten(t)))}),n},f.prototype._add=function(e,t,i,n){void 0===t&&(t=-1),void 0===i&&(i=this._root),e.parent=e.parent?e.parent.toString():i,0<n&&-1!==t&&(t+=1);t=c.prototype._add.call(this,e,t);if(Array.isArray(e.items))for(var o=0,r=e.items;o<r.length;o++){var s=r[o];this.add(s,-1,e.id)}return t},f.prototype._copy=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;var r=this._childs[e];if(o&&(t=-1===t?-1:t+o),i===this&&!this.canCopy(e,n))return null;o=d.copyWithoutInner(this.getItem(e),{items:!0});if(i.exists(e)&&(o.id=u.uid()),d.isTreeCollection(i)){if(this.exists(e)&&(o.parent=n,i!==this&&n===this._root&&(o.parent=i.getRoot()),i.add(o,t),e=o.id),r)for(var s=0,a=r;s<a.length;s++){var l=a[s].id,c=this.getIndex(l);"string"==typeof e&&this.copy(l,c,i,e)}return e}i.add(o,t)},f.prototype._move=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;if(o&&(t=-1===t?-1:t+o),i!==this){if(!d.isTreeCollection(i))return i.add(d.copyWithoutInner(this.getItem(e)),t),void this.remove(e);var r=this.copy(e,t,i,n);return this.remove(e),r}if(!this.canCopy(e,n))return null;i=this.getParent(e),r=this.getIndex(e),r=this._childs[i].splice(r,1)[0];return r.parent=n,this._childs[i].length||delete this._childs[i],this.haveItems(n)||(this._childs[n]=[]),-1===t?t=this._childs[n].push(r):this._childs[n].splice(t,0,r),this.events.fire(h.DataEvents.change,[e,"update",this.getItem(e)]),e},f.prototype._reset=function(e){if(e)for(var t=0,i=r(this._childs[e]);t<i.length;t++){var n=i[t];this.remove(n.id)}else{c.prototype._reset.call(this);var o=this._root;this._initChilds=null,this._childs=((e={})[o]=[],e)}},f.prototype._removeCore=function(t){var e;this._pull[t]&&(e=this.getParent(t),this._childs[e]=this._childs[e].filter(function(e){return e.id!==t}),e===this._root||this._childs[e].length||delete this._childs[e],this._initChilds&&this._initChilds[e]&&(this._initChilds[e]=this._initChilds[e].filter(function(e){return e.id!==t}),e===this._root||this._initChilds[e].length||delete this._initChilds[e]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==t})),this._fastDeleteChilds(this._childs,t),this._initChilds&&this._fastDeleteChilds(this._initChilds,t))},f.prototype._addToOrder=function(e,t,i){var n=this._childs,o=this._initChilds,r=t.parent;(this._pull[t.id]=t).parent&&this._pull[t.parent]&&this._pull[t.parent].items&&!this._pull[t.parent].items.find(function(e){return e.id===t.id})&&this._pull[t.parent].items.push(t),c.prototype._addToOrder.call(this,e,t,i),l(n,t,r,i),o&&l(o,t,r,i)},f.prototype._parse_data=function(e,t){var i;void 0===t&&(t=this._root);for(var n=this._order.length,o=0,r=e;o<r.length;o++){var s=r[o];this.config.init&&(s=this.config.init(s)),s&&"object"!=typeof s&&(s={value:s}),s.id=null!==(i=s.id)&&void 0!==i?i:u.uid(),s.parent=void 0===s.parent||null===s.parent||s.parent&&s.$items?t:s.parent,this._pull[s.id]&&d.dhxError("Item "+s.id+" already exist"),this._pull[s.id]=s,this._order[n++]=s,this._childs[s.parent]||(this._childs[s.parent]=[]),this._childs[s.parent].push(s),s.items&&s.items instanceof Object&&this._parse_data(s.items,s.id)}},f.prototype._applySmart=function(){this._filters&&this.filter(this._filters.filters,this._filters.config)},f.prototype._fastDeleteChilds=function(e,t){if(this._pull[t]&&delete this._pull[t],e[t]){for(var i=0;i<e[t].length;i++)this._fastDeleteChilds(e,e[t][i].id);delete e[t]}},f.prototype._recursiveFilter=function(o,t,e,i,n){var r=this,s=this._childs[e];if(s){var a,l=function(e){switch(t.type){case h.TreeFilterType.all:return!0;case h.TreeFilterType.level:return i===t.level;case h.TreeFilterType.leafs:return!r.haveItems(e.id)}};a="function"==typeof o?function(e){return l(e)&&o(e)}:function(e){var t,i,n=!0;for(i in o)if(o[i].by&&""!==o[i].match&&(n=o[i].compare?o[i].compare(e[o[i].by],o[i].match,e):-1!==(null===(t=e[o[i].by])||void 0===t?void 0:t.toString().toLocaleLowerCase().indexOf(o[i].match.toString().toLowerCase()))),!n)break;return l(e)&&n},(a=s.filter(a)).length?n[e]=a:e===this._root&&(n[e]=[]);for(var c=0,u=s;c<u.length;c++){var d=u[c];this._recursiveFilter(o,t,d.id,i+1,n)}}},f.prototype._serialize=function(e,n){var o=this;return void 0===e&&(e=this._root),this.map(function(e){var t,i={};for(t in e)"parent"===t||"items"===t||t.startsWith("$")||(i[t]=e[t]);return n&&(i=n(i)),o.haveItems(e.id)&&(i.items=o._serialize(e.id,n)),i},e,!1)},f);function f(e,t){var i=c.call(this,e,t)||this;i._childs={};t=i._root=e&&e.rootId||"_ROOT_"+u.uid();return i._childs=((e={})[t]=[],e),i._initChilds=null,i}t.TreeCollection=o},function(e,t,i){"use strict";var _=this&&this.__assign||function(){return(_=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var h=i(3),m=i(36),f=i(163),p=i(23),y=i(24),b=i(1);var n=(o.prototype.setItem=function(e,t){f.collectionStore.setItem(e,t)},o.prototype.onMouseDown=function(e,t,i){var n,o,r,s;1!==e.which&&!e.targetTouches||(e.targetTouches?(document.addEventListener("touchmove",this._onMouseMove,!1),document.addEventListener("touchend",this._onMouseUp,!1)):(document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp)),o=(n=h.locateNode(e,"data-dhx-id"))&&n.getAttribute("data-dhx-id"),r=h.locate(e,"data-dhx-widget-id"),Array.isArray(t)&&t.includes(o)?(this._transferData.source=a(t),this._itemsForGhost=i):(this._transferData.source=[o],this._itemsForGhost=null),o&&r&&(t=(s=h.getBox(n)).left,i=s.top,s=(e.targetTouches?e.targetTouches[0]:e).pageX,e=(e.targetTouches?e.targetTouches[0]:e).pageY,this._transferData.initXOffset=s-t,this._transferData.initYOffset=e-i,this._transferData.x=s,this._transferData.y=e,this._transferData.componentId=r,this._transferData.start=o,this._transferData.item=n))},o.prototype.isDrag=function(){return this._isDrag},o.prototype.cancelCanDrop=function(e){this._canMove=!1,this._isDrag=!1;var t=this._transferData,i=t.start,n=t.source,o=t.target,t=t.dropComponentId,n={start:i,source:n,target:o},t=f.collectionStore.getItem(t);t&&o&&t.events.fire(p.DragEvents.cancelDrop,[n,e]),this._transferData.dropComponentId=null,this._transferData.target=null},o.prototype._moveGhost=function(e,t){this._transferData.ghost&&(this._transferData.ghost.style.left=e-this._transferData.initXOffset+"px",this._transferData.ghost.style.top=t-this._transferData.initYOffset+"px")},o.prototype._removeGhost=function(){document.body.removeChild(this._transferData.ghost)},o.prototype._onDrop=function(e){var t,i,n,o,r;this._canMove&&(r=(o=this._transferData).start,i=o.source,t=o.target,n=o.dropComponentId,i={start:r,source:i,target:t,dropPosition:o.dropPosition},n=(o=f.collectionStore.getItem(n))&&o.config,o&&"source"!==n.dragMode&&o.events.fire(p.DragEvents.beforeDrop,[i,e])&&(o={id:t,component:o},r={id:r,component:this._transferData.component,newId:null},this._move(r,o),r.newId&&r.component!==o.component&&(i.start=r.newId),o.component.events.fire(p.DragEvents.afterDrop,[i,e]))),this._endDrop(e)},o.prototype._onDragStart=function(e,t,i){var n=f.collectionStore.getItem(t),o=n.config,r=this._transferData,t={start:r.start,source:r.source,target:r.target};if("target"===o.dragMode||n._pregroupData)return null;r=function(e,t,i){void 0===i&&(i=!1);var n=e.getBoundingClientRect(),o=document.createElement("div"),r=e.cloneNode(!0);return r.style.width=n.width+"px",r.style.height=n.height+"px",r.style.maxHeight=n.height+"px",r.style.fontSize=window.getComputedStyle(e.parentElement).fontSize,r.style.opacity="0.8",r.style.fontSize=window.getComputedStyle(e.parentElement).fontSize,i&&t&&t.length||o.appendChild(r),t&&t.length&&t.forEach(function(e,t){e=e.cloneNode(!0);e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.maxHeight=n.height+"px",e.style.top=12*(t+1)-n.height-n.height*t+"px",e.style.left=12*(t+1)+"px",e.style.opacity="0.6",e.style.zIndex=""+(-t-1),o.appendChild(e)}),o.className="dhx_drag-ghost",o}(this._transferData.item,this._itemsForGhost,"column"===o.dragItem||"both"===o.dragItem);return n.events.fire(p.DragEvents.beforeDrag,[t,i,r])&&e?(n.events.fire(p.DragEvents.dragStart,[t,i]),this._isDrag=!0,this._toggleTextSelection(!0),this._transferData.component=n,this._transferData.dragConfig=o,r):null},o.prototype._onDrag=function(e){var t=(e.targetTouches?e.targetTouches[0]:e).clientX,i=(e.targetTouches?e.targetTouches[0]:e).clientY,n=document.elementFromPoint(t,i),o=h.locate(n,"data-dhx-widget-id");if(o){var r=f.collectionStore.getItem(o),s=!!h.locateNodeByClassName(n,"dhx_grid-header")||!!h.locateNodeByClassName(n,"dhx_grid-footer"),a=r&&r.config.columns?r.config:void 0,l=a&&("both"===a.dragItem||"column"===a.dragItem);if(!s||l){var c=h.locate(n,"data-dhx-id"),u=h.locate(n,"data-dhx-root-id");if(!c&&!u)return this.cancelCanDrop(e),this._transferData.dropComponentId=o,this._transferData.target=null,void this._canDrop(e);var d=this._transferData,t=d.dropComponentId,i=d.start,a=d.source,s=d.target,l=d.componentId,n=d.dropPosition;if("complex"===r.config.dropBehaviour){d=function(e){var t=e.clientY;if(!(e=h.locateNode(e)))return null;if(e=e.childNodes[0]){e=e.getBoundingClientRect();return(t-e.top)/e.height}}(e);this._transferData.dropPosition=d<=.25?"top":.75<=d?"bottom":"in"}else if((s===c||!c&&s===u)&&t===o)return;t={id:i,component:this._transferData.component};"source"!==r.config.dragMode&&(t.component.events.fire(p.DragEvents.dragOut,[{start:i,source:a,target:s},e]),o!==l||!y.isTreeCollection(t.component.data)||y.isTreeCollection(t.component.data)&&t.component.data.canCopy(t.id,c)?(this.cancelCanDrop(e),this._transferData.target=c||u,this._transferData.dropComponentId=o,t.component.events.fire(p.DragEvents.dragIn,[{start:i,source:a,target:s,dropPosition:n},e])&&this._canDrop(e)):this.cancelCanDrop(e))}else this._canMove&&this.cancelCanDrop(e)}else this._canMove&&this.cancelCanDrop(e)},o.prototype._move=function(i,t){var n=i.component.data,o=t.component.data,r=0,s=t.id,e=y.isTreeCollection(o)?t.component.config.dropBehaviour:void 0,a=i.component.config.columns?i.component.config:void 0,a=a&&("both"===a.dragItem||"column"===a.dragItem)&&a.columns.map(function(e){return e.id}).filter(function(e){return e===i.id||e===t.id}).length;if(a&&i.component===t.component){if(i.id===t.id)return;var l=(c=(u=i.component).config.columns.map(function(e){return _({},e)})).findIndex(function(e){return e.id===i.id});return-1===(h=c.findIndex(function(e){return e.id===t.id}))?void 0:(c.splice(h,0,c.splice(l,1)[0]),u.setColumns(c),void u.paint())}if(a&&i.component instanceof m.ProGrid&&t.component instanceof m.ProGrid){var c,u=i.component,d=t.component,l=(c=u.config.columns.map(function(e){return _({},e)})).findIndex(function(e){return e.id===i.id}),a=d.config.columns.map(function(e){return _({},e)}),h=a.findIndex(function(e){return e.id===t.id}),f=0<=a.findIndex(function(e){return e.id===i.id})?i.id+"_copy":i.id,p=[];u.data.forEach(function(e){var t;p.push(((t={})[f]=e[i.id],t))}),d.data.forEach(function(e,t){d.data.update(e.id,_(_({},e),p[t]))});l=c.splice(l,1)[0];return l.id=f,a.splice(h,0,l),d.setColumns(a),d.paint(),u.setColumns(c),void u.paint()}var g=t.id===t.component.config.rootParent;switch(e){case"child":break;case"sibling":s=o.getParent(s),r=o.getIndex(t.id)+1;break;case"complex":var v=this._transferData.dropPosition;g?(s=t.id,r=o.getLength()):"top"===v?(s=o.getParent(s),r=o.getIndex(t.id)):"bottom"===v&&(s=o.getParent(s),r=o.getIndex(t.id)+1);break;default:r=t.id?i.component===t.component&&o.getIndex(i.id)<o.getIndex(t.id)?o.getIndex(t.id)-1:(-1<o.getIndex(i.id)&&(i.newId=b.uid()),o.getIndex(t.id)):-1}this._transferData.dragConfig.dragCopy?this._transferData.source instanceof Array&&1<this._transferData.source.length?this._transferData.source.map(function(e){n.copy(e,r,o,s),-1<r&&r++}):n.copy(i.id,r,o,s):this._transferData.source instanceof Array&&1<this._transferData.source.length?this._transferData.source.map(function(e){n.move(e,r,o,s),-1<r&&r++}):n.move(i.id,r,o,s,i.newId)},o.prototype._endDrop=function(e){var t;this._toggleTextSelection(!1),this._transferData.component&&(t={start:(t=this._transferData).start,source:t.source,target:t.target},this._transferData.component.events.fire(p.DragEvents.afterDrag,[t,e])),this.cancelCanDrop(e),this._canMove=!0,this._transferData={},this._transferData.target=null,this._transferData.dropComponentId=null},o.prototype._canDrop=function(e){this._canMove=!0;var t=this._transferData,i={start:t.start,source:t.source,target:t.target,dropPosition:t.dropPosition},t=f.collectionStore.getItem(this._transferData.dropComponentId);t&&this._transferData.target&&t.events.fire(p.DragEvents.canDrop,[i,e])},o.prototype._toggleTextSelection=function(e){e?document.body.classList.add("dhx_no-select"):document.body.classList.remove("dhx_no-select")},o);function o(){var a=this;this._transferData={},this._canMove=!0,this._isDrag=!1,this._onMouseMove=function(e){if(a._transferData.start){var t=(e.targetTouches?e.targetTouches[0]:e).pageX,i=(e.targetTouches?e.targetTouches[0]:e).pageY,n=a._transferData,o=n.x,r=n.y,s=n.start,n=n.componentId;if(!a._transferData.ghost){if(Math.abs(o-t)<3&&Math.abs(r-i)<3)return;n=a._onDragStart(s,n,e);if(!n)return void a._endDrop(e);a._transferData.ghost=n,document.body.appendChild(a._transferData.ghost)}a._moveGhost(t,i),a._onDrag(e)}},this._onMouseUp=function(e){a._transferData.x&&(a._transferData.ghost?(a._removeGhost(),a._onDrop(e)):a._endDrop(e),e.targetTouches?(document.removeEventListener("touchmove",a._onMouseMove),document.removeEventListener("touchend",a._onMouseUp)):(document.removeEventListener("mousemove",a._onMouseMove),document.removeEventListener("mouseup",a._onMouseUp)))}}i=window.dhxHelpers=window.dhxHelpers||{};i.dragManager=i.dragManager||new n,t.dragManager=i.dragManager},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var _=i(21),l=i(11),o=i(1),m=i(16);r.prototype.xlsx=function(e){return this._export(e)},r.prototype.csv=function(e){var t;void 0===e&&(e={}),e=n({asFile:!0,rowDelimiter:"\n",columnDelimiter:",",skipHeader:0},e),t="getRoot"in this._view.data&&e.flat?this.getFlatCSV(e):this._getCSV(e);var i=e.name||"grid_export";return e.asFile&&o.downloadFile(t,i+".csv","text/csv"),t},r.prototype._export=function(e){void 0===e&&(e={});for(var c=this._view.config.columns.filter(function(e){return!e.hidden}),u={},t=_.transpose(c.map(function(e){return e.header.map(function(e){return e.text||" "})})),d=[],h={default:{color:"#000000",background:"#FFFFFF",fontSize:14}},f=[],o={},i=this._view.data.serialize().map(function(n,e){return u[n.id]=e,c.map(function(e,t){var i;return o[e.id]=t,n[e.id]instanceof Date&&(i=e.format||"%M %d %Y","string"==typeof n[e.id]?n[e.id]=m.getFormattedDate(i,m.stringToDate(n[e.id],i)):"object"==typeof n[e.id]&&(n[e.id]=m.getFormattedDate(i,n[e.id]))),n[e.id]||t||!n.$groupName?_.removeHTMLTags(n[e.id]):"^ "+n.$groupName})}),p=[],g=this._view.content,v=this,n=0,r=c;n<r.length;n++)!function(e){var n,t,o,i,r;for(r in e.footer&&(n=e.id,i=t=v._view.data.serialize().reduce(function(e,t){return void 0===t[n]||""===t[n]||isNaN(t[n])||e.push(parseFloat(t[n])),e},[]),"tree"===v._view.config.type&&(i=(o=v._view.data).serialize().reduce(function(e,t){var i;return 0===t.$level&&(void 0===t[n]||""===t[n]||isNaN(t[n])?(i=0,o.eachChild(t.id,function(e){o.haveItems(e.id)||(i+=parseFloat(e[n]))}),e.push(i)):e.push(parseFloat(t[n])||0)),e},[])),e.footer[0].content?(i=g[e.footer[0].content].calculate(t,i),p.push(i.toString())):p.push(e.footer[0].css||e.footer[0].text||" ")),d.push({width:e.width}),e.$cellCss){var s,a=e.$cellCss[r],l=a.split("").reduce(function(e,t){t=(e<<5)-e+t.charCodeAt(0);return Math.abs(t&t)},0).toString();h[l]||(s=document.body,(s=_.getStyleByClass(a,s,"dhx_grid-row",h.default))&&(h[l]=s)),h[l]&&f.push([u[r],c.indexOf(e),l])}}(r[n]);p.length&&i.push(p);var s,i={name:e.name||"data",columns:d,header:t,data:i,styles:{cells:f,css:h}};return e.url&&((s=document.createElement("form")).setAttribute("target","_blank"),s.setAttribute("action",e.url),s.setAttribute("method","POST"),s.style.visibility="hidden",(e=document.createElement("textarea")).setAttribute("name","data"),e.value=JSON.stringify(i),s.appendChild(e),document.body.appendChild(s),s.submit(),setTimeout(function(){s.parentNode.removeChild(s)},100)),i},r.prototype.getFlatCSV=function(o){var t=this._view.data,e=t.getRoot(),r=this._view.config.columns[0],s=t.getMaxLevel(),i="";t.eachChild(e,function(n){var e=function(e,t){for(var i,n=[],o=0;o<=s;o++)e&&e[r.id]?(n[e.$level]=e[r.id],e=(i=t.getParent(e.id,!0))&&i.id?i:null):n[o]="";return n}(n,t).join(o.columnDelimiter);i+=e+Object.keys(n).reduce(function(e,t,i){return"id"===t||"parent"===t||t.startsWith("$")||0===i?e:e+o.columnDelimiter+(null===n[t]?"":n[t])},""),i+=o.rowDelimiter});var e=this._export(o),n=function(e,t){for(var i=0;i<e.length;i++)e[i]=t;return e}(new Array(s+1),""),e=e.header.map(function(e){return e.splice.apply(e,a([0,1],n)),e});return new l.CsvDriver(o).serialize(e,!0)+o.rowDelimiter+i},r.prototype._getCSV=function(e){var t=this._export(e),i=t.header,e=new l.CsvDriver(e);return e.serialize(i,!0)+"\n"+e.serialize(t.data,!0)},i=r;function r(e){this._view=e}t.Exporter=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var C=i(0),E=i(1),o=i(11),r=i(4),h=i(10),f=i(18),i=(n.prototype.setCell=function(t,i,e,n){var o,r,s,a,l,c,u,d=this;void 0===e&&(e=!1),void 0===n&&(n=!1),this._gridId&&f.focusManager.getFocusId()!==this._gridId&&f.focusManager.setFocusId(this._gridId),this.config.disabled||this._grid.config.$editable||!this._multiselection&&this._oldSelectedCell&&this._oldSelectedCell.row.id===(t&&t.id||t)&&this._oldSelectedCell.column.id===(i&&i.id||i)||this._multiselection&&1===this._selectedCells.length&&this._selectedCells[0].row.id===(t&&t.id||t)&&this._selectedCells[0].column.id===(i&&i.id||i)||((!this._multiselection||e||n)&&this._multiselection||this._selectedCells.length&&this._removeCells(),this._multiselection&&"cell"===this._type&&this._selectedCells.find(function(e){return e.row.id===(t&&t.id||t)&&e.column.id===(i&&i.id||i)})?this.removeCell(t&&t.id||t,i&&i.id||i):(l=this._oldSelectedCell||void 0,t=this._grid.data.getItem(t&&t.id||t),o=this._grid.config.columns.filter(function(e){return!e.hidden}),i=i||o[0],(i=this._grid.getColumn(i.id||i))&&t&&(i=i.id?i:this._grid.getColumn(i),this.events.fire(h.GridSelectionEvents.beforeSelect,[t,i])&&(this._selectedCell={row:t,column:i},this.events.fire(h.GridSelectionEvents.afterSelect,[t,i]),this._multiselection&&n&&l?this._oldSelectedCell=l:this._oldSelectedCell=this._selectedCell,this._multiselection?n&&!e&&0<this._selectedCells.length?(r=this._grid.data.getIndex(this._oldSelectedCell.row.id),(s=this._grid.data.getIndex(t.id))<r&&(a=r,r=s,s=a),this._selectedCells=[this._oldSelectedCell],"cell"===this._type?(l=(c=o.map(function(e){return e.id})).indexOf(l.column.id),c=c.indexOf(i.id),-1!==l&&-1!==c&&(c<l&&(a=l,l=c,c=a),u=o.slice(l,c+1),this._grid.data.mapRange(r,s,function(t){u.forEach(function(e){e={row:t,column:e};-1===d._findIndex(e)&&d._selectedCells.push(e)})}))):this._grid.data.mapRange(r,s,function(e){e={row:e,column:i};-1===d._findIndex(e)&&d._selectedCells.push(e)})):e&&!n?-1===(n=this._findIndex())?this._selectedCells.push({row:this._selectedCell.row,column:this._selectedCell.column}):1<this._selectedCells.length&&this._selectedCells.splice(n,1):this._selectedCells=[this._selectedCell]:this._selectedCells=[this._selectedCell],C.awaitRedraw().then(function(){d._grid.paint(),d._setBrowserFocus()})))))},n.prototype.getCell=function(){return this._selectedCell},n.prototype.getCells=function(){return this._selectedCells},n.prototype.toHTML=function(){var n=this;if(!this._isUnselected()){if(this._multiselection){var o=[];return this._selectedCells.forEach(function(e,t,i){o.push(n._toHTML(e.row,e.column,t===i.length-1||"cell"===n._type))}),o}return this._toHTML(this._selectedCell.row,this._selectedCell.column,!0)}},n.prototype.disable=function(){this.removeCell(),this.config.disabled=!0,this._grid.paint()},n.prototype.enable=function(){this.config.disabled=!1,this._grid.paint()},n.prototype.removeCell=function(i,n){var e,o=this;i&&n&&"cell"===this._type?(e=this._selectedCells.find(function(e){var t=e.row,e=e.column;return t.id==i&&e.id==n}))&&this._removeCell(e.row,e.column):i?this._selectedCells.filter(function(e){return e.row.id==i}).forEach(function(e){var t=e.row,e=e.column;o._removeCell(t,e)}):this._removeCells(),C.awaitRedraw().then(function(){o._grid.paint()})},n.prototype._removeCell=function(t,i){var e;t&&i&&t.id&&i.id&&this.events.fire(h.GridSelectionEvents.beforeUnSelect,[t,i])&&(e=this._selectedCells.findIndex(function(e){return e.row.id===t.id&&e.column.id===i.id}),this._selectedCells.splice(e,1),this._selectedCell&&i.id===this._selectedCell.column.id&&t.id===this._selectedCell.row.id&&(this._selectedCell=this._selectedCells[this._selectedCells.length-1]||void 0),this._oldSelectedCell&&this._oldSelectedCell.row.id===t.id&&this._oldSelectedCell.column.id===i.id&&(this._oldSelectedCell=void 0),this.events.fire(h.GridSelectionEvents.afterUnSelect,[t,i]))},n.prototype._removeCells=function(){var t=this;this._selectedCells.forEach(function(e){t._removeCell(e&&e.row,e&&e.column)}),this._selectedCells.length&&this._removeCells()},n.prototype._init=function(){var n=this;this._grid.events.on(h.GridEvents.cellClick,function(e,t,i){n.setCell(e,t,i.ctrlKey||i.metaKey,i.shiftKey)}),this._grid.data.events.on(o.DataEvents.beforeRemove,function(e){var t;e&&n._selectedCell&&n._selectedCell.row&&(t=n._grid.data.getIndex(String(n._selectedCell.row.id)),(e=n._grid.data.getId(t+1))?n.setCell(e):(t=n._grid.data.getId(t-1))&&n.setCell(t),n._grid.paint())})},n.prototype._toHTML=function(t,e,i){void 0===i&&(i=!1);var n=this._grid.data.getRawData(0,-1,null,2);if(-1===E.findIndex(n,function(e){return e.id==t.id}))return null;var o=this._grid.config.leftSplit,r=this._grid.config.topSplit,s=this._grid.config.columns.filter(function(e){return!e.hidden}),a=o?s.slice(0,o):[],l=this._grid.config.topSplit?this._grid.data.getRawData(0,this._grid.config.topSplit):[],c=a.map(function(e){return e.id}),u=l.map(function(e){return e.id}),d=a.reduce(function(e,t){return e+t.$width},0),h=l.reduce(function(e,t){return e+t.$height},0),f=this._grid.getCellRect(t.id,e.id),p=this._grid.getScrollState(),g=f.y,v=u.includes(t.id),_=c.includes(e.id),m=a.length&&d>f.x-p.x,y=l.length&&h>f.y-p.y,b=f.width,w=f.height-1,x=null,n=null,s=m?d+p.x:f.x;m&&(b-=(_?0:d)-(f.x-p.x)),y&&(w-=(v?0:h)-(f.y-p.y)-1,g+=f.height-w),v&&(g=f.y+p.y,null!==(h=this._grid.getSpan(t.id,e.id))&&void 0!==h&&h.rowspan?x=l.splice(this._grid.data.getIndex(t.id)).reduce(function(e,t){return e+t.$height},0):w=r===u.indexOf(t.id)+1?f.height-1:f.height),_&&(s=f.x+p.x,null!==(u=this._grid.getSpan(t.id,e.id))&&void 0!==u&&u.colspan?n=a.splice(null===(u=this._grid.config.columns)||void 0===u?void 0:u.indexOf(e)).reduce(function(e,t){return e+t.$width},0):b=o===c.indexOf(e.id)+1?f.width-1:f.width);e=this._grid.config.$totalWidth,f=null;"row"!==this._type&&"complex"!==this._type||(f=C.el(".dhx_grid-selected-row",{style:{width:a.length?e-p.x:e,height:w,minHeight:x,minWidth:n,display:w<0&&!x?"none":"flex",top:g,left:a.length?p.x:0,position:"absolute"}}));p=null;return"cell"!==this._type&&"complex"!==this._type||!i||(p=C.el(".dhx_grid-selected-cell",{style:{width:b,height:w,top:g,minHeight:x,minWidth:n,left:s,position:"absolute",display:b<0&&!n||w<0&&!x?"none":"flex",borderLeft:m&&!_?"none":null,borderTop:y&&!v?"none":null}})),C.el(".dhx_grid-selection",{style:{zIndex:20}},[f,p])},n.prototype._isUnselected=function(){return!this._selectedCell||!this._selectedCell.row||!this._selectedCell.column||0===this._selectedCells.length},n.prototype._findIndex=function(i){var n=this;void 0===i&&(i=this._selectedCell);var o=-1;return this._selectedCells.some(function(e,t){if("cell"===n._type){if(E.compare(e.row,i.row)&&E.compare(e.column,i.column))return o=t,!0}else if("row"===n._type&&E.compare(e.row,i.row))return o=t,!0}),o},n.prototype._setBrowserFocus=function(){var e,t,i=this._grid.getRootView().data.getRootNode();!i||(e=i.querySelector(".dhx_grid_data"))&&this._selectedCell&&this._selectedCell.row&&this._selectedCell.column&&(t=e.querySelector('[data-dhx-id="'+this._selectedCell.row.id+'"]'),e=this._grid.getSpan(this._selectedCell.row.id,this._selectedCell.column.id),!t||(t=(i=e?i.querySelector(".dhx_span-spans"):null)?i.querySelector('[data-dhx-col-id="'+e.column+'"][data-dhx-id="'+e.row+'"]'):t.querySelector('[data-dhx-col-id="'+this._selectedCell.column.id+'"]'))&&(t.tabIndex=0,t.focus({preventScroll:!0})))},n);function n(e,t,i,n){this._grid=e,this.config=t,this._gridId=n,this._selectedCell=void 0,this._oldSelectedCell=void 0,this._selectedCells=[],this._type=["cell","row","complex"].includes(this._grid.config.selection)?this._grid.config.selection:"complex",this._multiselection=e.config.multiselection&&"complex"!==this._type,this.events=i||new r.EventSystem(this),this._init()}t.Selection=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=i(10),s=i(137),a=i(138),l=i(139),c=i(150),u=i(151),d=i(158),h={cell:{row:null,col:null},editor:null,gridId:null};t.getEditor=function(e,t,i){var n="boolean"===t.type?"checkbox":i.$editable.editorType;if(void 0===n&&(n=i.autoHeight?"textarea":"input"),h.cell.row===e.id&&h.cell.col===t.id&&h.gridId===i.gridId&&i.$editable.editor)return h.editor;switch("checkbox"!==n&&(h={cell:{row:e.id,col:t.id},editor:h.editor,gridId:i.gridId}),o||(o=function(){h={cell:{row:null,col:null},editor:null,gridId:null}},i.events.on(r.GridEvents.afterEditEnd,o)),n){case"input":return h.editor=new s.InputEditor(e,t,i);case"textarea":return h.editor=new d.TextAreaEditor(e,t,i);case"select":return h.editor=new a.SelectEditor(e,t,i);case"datePicker":return h.editor=new l.DateEditor(e,t,i);case"checkbox":return new c.CheckboxEditor(e,t,i);case"multiselect":case"combobox":return h.editor=new u.ComboboxEditor(e,t,i);default:return h.editor=new s.InputEditor(e,t,i)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(10),r=i(1),i=(s.prototype.endEdit=function(e){var t;e||(t=this._input.value),this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),"string"!==this._cell.col.type&&r.isNumeric(t)&&(t=parseFloat(t)),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()},s.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];return this._input&&(e=this._input.value),this._config.$editable.editor=this,n.el("input.dhx_cell-editor.dhx_cell-editor__input",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:e})},s.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onChange:function(){t.endEdit()},didInsert:function(e){e=e.el;(t._input=e).focus(),e.setSelectionRange(0,e.value.length),e.addEventListener("change",t._handlers.onChange),e.addEventListener("blur",t._handlers.onBlur)}}},s);function s(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}t.InputEditor=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(10),i=(r.prototype.endEdit=function(e){var t;e||(t=this._input.value),this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("keydown",this._handlers.onkeydown),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()},r.prototype.toHTML=function(){var e=this._cell.col.options.map(function(e){return"string"==typeof e?{id:""+e,value:e}:e})||[],t=this._cell.row[this._cell.col.id];this._input&&(t=this._input.options[this._input.selectedIndex].value);e=e.map(function(e){return n.el("option",{selected:e.id.toString()===t.toString(),value:e.id},e.value)});return this._config.$editable.editor=this,n.el("select.dhx_cell-editor.dhx_cell-editor__select",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor"},e)},r.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onkeydown:function(e){"Escape"===e.key&&t.endEdit()},didInsert:function(e){e=e.el;(t._input=e).focus(),e.addEventListener("blur",t._handlers.onBlur),e.addEventListener("keydown",t._handlers.onkeydown)}}},r);function r(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}t.SelectEditor=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),s=i(10),o=i(38),a=i(16),l=i(8),i=(n.prototype.endEdit=function(e,t){var i=this;if(this._handlers){var n=this._calendar.config.dateFormat,o=this._cell.row[this._cell.col.id];if(!e){if(o instanceof Date||t)return this._value=this._calendar.getValue(),this._input.value=this._value,void this._popup.hide();a.stringToDate(this._input.value,n,!0)&&(o&&this._input.value.length===o.length||!o)&&(this._value=this._input.value)}this._config.events.fire(s.GridEvents.beforeEditEnd,[this._value,this._cell.row,this._cell.col])?(this._input.removeEventListener("focus",this._handlers.onFocus),this._input.removeEventListener("change",this._handlers.onChange),document.removeEventListener("mousedown",this._handlers.onOuterClick),r.awaitRedraw().then(function(){i._popup.destructor(),i._calendar.destructor()}),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(s.GridEvents.afterEditEnd,[this._value,this._cell.row,this._cell.col])):this._input.focus()}},n.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];return this._config.$editable.editor=this,document.addEventListener("mousedown",this._handlers.onOuterClick),r.el("input.dhx_cell-editor.dhx_cell-editor__input.dhx_cell-editor__datepicker",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:e})},n.prototype._initHandlers=function(){var i=this;this._handlers={onFocus:function(){r.awaitRedraw().then(function(){i._popup.show(i._input,{centering:!0,mode:"bottom"})})},onChange:function(){i.endEdit()},onOuterClick:function(e){var t;e.target instanceof Node&&(t=i._input&&i._input.contains(e.target),e=i._popup&&i._popup.getRootNode()&&i._popup.getRootNode().contains(e.target),t||e||i._popup.hide())},didInsert:function(e){e=e.el;i._input=e,i._input.addEventListener("focus",i._handlers.onFocus),i._input.addEventListener("change",i._handlers.onChange),e.focus(),e.setSelectionRange(e.value.length,e.value.length)}}},n);function n(e,t,i){var n=this;this._config=i,this._cell={row:e,col:t},this._calendar=new o.Calendar(null,{dateFormat:t.format});e=this._cell.row[this._cell.col.id],t=this._calendar.config.dateFormat;(a.stringToDate(e,t,!0)||e instanceof Date)&&(this._calendar.setValue(e),this._value=this._calendar.getValue(),this._cell.row[this._cell.col.id]=this._value),this._popup=new l.Popup,this._popup.attach(this._calendar),this._calendar.events.on(o.CalendarEvents.change,function(){n.endEdit(!1,!0)}),this._popup.events.on(l.PopupEvents.afterHide,function(){n.endEdit()}),this._initHandlers()}t.DateEditor=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=this&&this.__assign||function(){return(y=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(1),w=i(0),a=i(4),l=i(7),c=i(53),u=i(149),x=i(16),d=i(78),h=i(3),o=(r=l.View,o(f,r),f.prototype.setValue=function(e){if(!e||e instanceof Array&&0===e.length)return!1;this._selected=[];var t=e instanceof Array?e[0]:e,i=x.DateHelper.toDateObject(t,this.config.dateFormat),t=x.DateHelper.copy(this._getSelected());return!!this.events.fire(d.CalendarEvents.beforeChange,[i,t,!1])&&(this._setSelected(e),this._timepicker&&(this._timepicker.setValue(i),this._time=this._timepicker.getValue()),this.showDate(this._getSelected()),this.events.fire(d.CalendarEvents.change,[i,t,!1]),this.paint(),!0)},f.prototype.getValue=function(e){var t=this;return void 0===e&&(e=!1),this._selected[0]?this.config.range?e?this._selected.map(function(e){return x.DateHelper.copy(e)}):this._selected.map(function(e){return x.getFormattedDate(t.config.dateFormat,e)}):e?x.DateHelper.copy(this._selected[0]):x.getFormattedDate(this.config.dateFormat,this._selected[0]):""},f.prototype.getCurrentMode=function(){return this._currentViewMode},f.prototype.showDate=function(e,t){e&&(this._currentDate=x.DateHelper.copy(e)),t&&(this._currentViewMode=t),this.paint()},f.prototype.destructor=function(){this._linkedCalendar&&this._unlink(),this._timepicker&&this._timepicker.destructor(),this.events&&this.events.clear(),this.config=this.events=null,this._uid=this._selected=this._currentDate=this._currentViewMode=this._handlers=this._timepicker=this._time=null,this.unmount()},f.prototype.clear=function(){var e=this.getValue(!0);this.config.timePicker&&(this._timepicker.clear(),this._time=this._timepicker.getValue()),this._selected=[],this.showDate(null,this.config.mode),this.events.fire(d.CalendarEvents.change,[this.getValue(!0),e,!1])},f.prototype.link=function(e){var t=this;this._linkedCalendar&&this._unlink(),this._linkedCalendar=e;var i=this.getValue(!0),n=e.getValue(!0),o=i&&x.DateHelper.dayStart(i),r=n&&x.DateHelper.dayStart(n);this.config.$rangeMark&&this._linkedCalendar.config.$rangeMark||(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=function(e){if(o&&r)return o<=e&&e<=r&&function(e){if(x.DateHelper.isSameDay(r,o))return null;var t="dhx_calendar-day--in-range";return x.DateHelper.isSameDay(e,o)&&(t+=" dhx_calendar-day--first-date"),x.DateHelper.isSameDay(e,r)&&(t+=" dhx_calendar-day--last-date"),t}(e)}),this.config.disabledDates&&this._linkedCalendar.config.disabledDates||(this.config.disabledDates=function(e){if(r)return r<e},this._linkedCalendar.config.disabledDates=function(e){if(o)return e<o}),this.config.thisMonthOnly=!0,e.config.thisMonthOnly=!0,this.events.on(d.CalendarEvents.change,function(e){o=e?x.DateHelper.dayStart(e):null,t._linkedCalendar.paint()},"link"),this._linkedCalendar.events.on(d.CalendarEvents.change,function(e){r=e?x.DateHelper.dayStart(e):null,t.paint()},"link"),this._linkedCalendar.paint(),this.paint()},f.prototype._unlink=function(){this._linkedCalendar&&(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=null,this.config.disabledDates=this._linkedCalendar.config.disabledDates=null,this.events.detach(d.CalendarEvents.change,"link"),this._linkedCalendar.events.detach(d.CalendarEvents.change,"link"),this._linkedCalendar.paint(),this._linkedCalendar=null)},f.prototype._setSelected=function(e){var i,n=this,t=e instanceof Array?e[0]:e,t=x.DateHelper.toDateObject(t,this.config.dateFormat);e instanceof Array&&this.config.range?(i=[],e.forEach(function(e,t){t<2&&i.push(x.DateHelper.toDateObject(e,n.config.dateFormat))}),2===i.length&&i[0]<i[1]?i.forEach(function(e){return n._selected.push(e)}):this._selected[0]=i[0]):this._selected[0]=t},f.prototype._getSelected=function(){return this._selected[this._selected.length-1]},f.prototype._draw=function(){switch(this._currentViewMode){case"calendar":return this.events.fire(d.CalendarEvents.modeChange,["calendar"]),this._drawCalendar();case"month":return this.events.fire(d.CalendarEvents.modeChange,["month"]),this._drawMonthSelector();case"year":return this.events.fire(d.CalendarEvents.modeChange,["year"]),this._drawYearSelector();case"timepicker":return this.events.fire(d.CalendarEvents.modeChange,["timepicker"]),this._drawTimepicker()}},f.prototype._initHandlers=function(){function n(e){void 0===e&&(e=!1);var t=0;switch(o._currentViewMode){case"calendar":t=e?-7:7;break;case"month":t=e?-4:4;break;case"year":t=e?-4:4}return t}var o=this,r={Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Left:"ArrowLeft",Esc:"Escape",Spacebar:"Space"};this._handlers={onkeydown:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(e,t){switch(48<=(i=e).which&&i.which<=57||65<=i.which&&i.which<=90?String.fromCharCode(i.which):(i=32===i.which?i.code:i.key,h.isIE()&&r[i]||i)){case"Enter":o._selectDate(e,t);break;case"ArrowLeft":o._moveBrowseFocus(e,t,-1);break;case"ArrowRight":o._moveBrowseFocus(e,t,1);break;case"ArrowUp":o._moveBrowseFocus(e,t,n(!0));break;case"ArrowDown":o._moveBrowseFocus(e,t,n())}var i}},onclick:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(e,t){o._selectDate(e,t)},".dhx_calendar-action__cancel":function(){o.showDate(o._getSelected(),"calendar"),o.events.fire(d.CalendarEvents.cancelClick,[])},".dhx_calendar-action__show-month":function(){return o.showDate(null,"month")},".dhx_calendar-action__show-year":function(){return o.showDate(null,"year")},".dhx_calendar-action__next":function(){var e;switch(o._currentViewMode){case"calendar":e=x.DateHelper.addMonth(o._currentDate,1);break;case"month":e=x.DateHelper.addYear(o._currentDate,1);break;case"year":e=x.DateHelper.addYear(o._currentDate,12)}o.showDate(e)},".dhx_calendar-action__prev":function(){var e;switch(o._currentViewMode){case"calendar":e=x.DateHelper.addMonth(o._currentDate,-1);break;case"month":e=x.DateHelper.addYear(o._currentDate,-1);break;case"year":e=x.DateHelper.addYear(o._currentDate,-12)}o.showDate(e)},".dhx_calendar-action__show-timepicker":function(){o._currentViewMode="timepicker",o.paint()}},onmouseover:{".dhx_calendar-day":function(e,t){o.events.fire(d.CalendarEvents.dateMouseOver,[new Date(t.attrs._date),e]),o.events.fire(d.CalendarEvents.dateHover,[new Date(t.attrs._date),e])}}}},f.prototype._getData=function(r){var e,s=this;switch(this._isSelectedInCurrentRange=!1,this.config.weekStart){case"saturday":e=-1;break;case"monday":e=1;break;default:e=0}for(var t=[],i=6,a=x.DateHelper.weekStart(x.DateHelper.monthStart(r),e);i--;){for(var n=x.DateHelper.getWeekNumber(a),l=0,o=7,c=[],u=function(){var e,t=x.DateHelper.isWeekEnd(a),i=r.getMonth()===a.getMonth(),n=d.config.disabledDates&&d.config.disabledDates(a),o=[];d.config.range&&d._selected[0]&&d._selected[1]&&(e=function(){if(s._selected[0]&&s._selected[1]){var e=x.DateHelper.dayStart(s._selected[0]),t=x.DateHelper.dayStart(s._selected[1]);return e<=a&&a<=t&&(x.DateHelper.isSameDay(s._selected[0],s._selected[1])?null:"dhx_calendar-day--in-range")}},d.config.$rangeMark=e),t&&i&&o.push("dhx_calendar-day--weekend"),i||(d.config.thisMonthOnly?(l++,o.push("dhx_calendar-day--hidden")):o.push("dhx_calendar-day--muffled")),!d.config.mark||(i=d.config.mark(a))&&o.push(i),d.config.$rangeMark&&(e=d.config.$rangeMark(a))&&o.push(e),n&&(t?o.push("dhx_calendar-day--weekend-disabled"):o.push("dhx_calendar-day--disabled")),d._selected.forEach(function(e,t){e&&x.DateHelper.isSameDay(e,a)&&(s._isSelectedInCurrentRange=!0,e="dhx_calendar-day--selected",s.config.range&&(e+=" dhx_calendar-day--selected-"+(0===t?"first ":"last")),o.push(e))}),c.push({date:a,day:a.getDate(),css:o.join(" ")}),a=x.DateHelper.addDay(a)},d=this;o--;)u();t.push({weekNumber:n,days:c,disabledWeekNumber:7===l})}return t},f.prototype._drawCalendar=function(){var e,i=this,t=this._currentDate,n=this.config,o=n.weekStart,r=n.thisMonthOnly,s=n.css,a=n.timePicker,l=n.width;switch(o){case"saturday":e=b([x.locale.daysShort[6]],x.locale.daysShort.slice(0,-1));break;case"monday":e=b(x.locale.daysShort.slice(1),[x.locale.daysShort[0]]);break;default:e=x.locale.daysShort}for(var c,n=e.map(function(e){return w.el(".dhx_calendar-weekday",e)}),o=this._getData(t),u=!0,d=this._getSelected(),h=function(e){var t={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(i._isSelectedInCurrentRange?(e=e.date)&&d&&e.getTime()===d.getTime()&&(t.tabindex=0,t["aria-pressed"]="true"):u&&(t.tabindex=0),u=!1),t},f=[],p=[],g=0,v=o;g<v.length;g++){var _=v[g],m=_.days.map(function(e){return w.el("div.dhx_calendar-day",y({class:e.css,_date:e.date},h(e)),e.day)});!this.config.weekNumbers||_.disabledWeekNumber&&r||p.push(w.el("div",{class:"dhx_calendar-week-number"},_.weekNumber)),f=f.concat(m)}this.config.weekNumbers&&(c=w.el(".dhx_calendar__week-numbers",p));s="dhx_calendar dhx_widget"+(s?" "+s:"")+(a?" dhx_calendar--with_timepicker":"")+(this.config.weekNumbers?" dhx_calendar--with_week-numbers":"");return w.el("div",y({class:s,style:{width:this.config.weekNumbers?parseInt(l.toString())+48+"px":l}},this._handlers),[w.el(".dhx_calendar__wrapper",[this._drawHeader(w.el("button.dhx_calendar-action__show-month.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},x.locale.months[t.getMonth()]+" "+t.getFullYear())),this.config.weekNumbers&&w.el(".dhx_calendar__dates-wrapper",[w.el(".dhx_calendar__weekdays",n),w.el(".dhx_calendar__days",f),c]),!this.config.weekNumbers&&w.el(".dhx_calendar__weekdays",n),!this.config.weekNumbers&&w.el(".dhx_calendar__days",f),a?w.el(".dhx_timepicker__actions",[w.el("button.dhx_calendar__timepicker-button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__show-timepicker",{type:"button"},[w.el("span.dhx_button__icon.dxi.dxi-clock-outline"),w.el("span.dhx_button__text",this._time)])]):null])])},f.prototype._drawMonthSelector=function(){function o(e){return u&&t===e}var e=this._currentDate,t=e.getMonth(),i=this._getSelected()?this._getSelected().getFullYear():null,n=this.config,r=n.css,s=n.timePicker,a=n.weekNumbers,l=n.width,n=n.mode,s="dhx_calendar dhx_widget"+(r?" "+r:"")+(s?" dhx_calendar--with_timepicker":"")+(a?" dhx_calendar--with_week-numbers":""),c=!0,u=i===e.getFullYear();return w.el("div",y({class:s,style:{width:a?parseInt(l.toString())+48+"px":l}},this._handlers),[w.el(".dhx_calendar__wrapper",[this._drawHeader(w.el("button.dhx_calendar-action__show-year.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},e.getFullYear())),w.el(".dhx_calendar__months",x.locale.monthsShort.map(function(e,t){return w.el("div",y(y({class:"dhx_calendar-month"+(o(t)?" dhx_calendar-month--selected":"")},(i=t,n={role:"button",tabindex:-1,"aria-pressed":"false"},e&&(u?o(i)&&(n.tabindex=0,n["aria-pressed"]="true"):c&&(n.tabindex=0),c=!1),n)),{_date:t}),e);var i,n})),"month"!==n?w.el(".dhx_calendar__actions",[w.el("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},x.locale.cancel)]):null])])},f.prototype._drawYearSelector=function(){function n(e){return t._getSelected()&&e===t._getSelected().getFullYear()}var t=this,e=this._currentDate,i=x.DateHelper.getTwelweYears(e),o=this.config,r=o.css,s=o.timePicker,a=o.weekNumbers,e=o.width,o=o.mode,s="dhx_calendar dhx_widget"+(r?" "+r:"")+(s?" dhx_calendar--with_timepicker":"")+(a?" dhx_calendar--with_week-numbers":""),l=!0,c=this._getSelected()&&i.includes(this._getSelected().getFullYear());return w.el("div",y({class:s,style:{width:a?parseInt(e.toString())+48+"px":e}},this._handlers),[w.el(".dhx_calendar__wrapper",[this._drawHeader(w.el("button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},i[0]+"-"+i[i.length-1])),w.el(".dhx_calendar__years",i.map(function(e){return w.el("div",y({class:"dhx_calendar-year"+(n(e)?" dhx_calendar-year--selected":""),_date:e},(i={role:"button",tabindex:-1,"aria-pressed":"false"},(t=e)&&(c?n(t)&&(i.tabindex=0,i["aria-pressed"]="true"):l&&(i.tabindex=0),l=!1),i)),e);var t,i})),"year"!==o&&"month"!==o?w.el(".dhx_calendar__actions",[w.el("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},x.locale.cancel)]):null])])},f.prototype._drawHeader=function(e){return w.el(".dhx_calendar__navigation",[w.el("button.dhx_calendar-navigation__button.dhx_calendar-action__prev"+u.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"prev",type:"button"},[w.el(".dhx_button__icon.dxi.dxi-chevron-left")]),e,w.el("button.dhx_calendar-navigation__button.dhx_calendar-action__next"+u.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"next",type:"button"},[w.el(".dhx_button__icon.dxi.dxi-chevron-right")])])},f.prototype._drawTimepicker=function(){var e=this.config,t=e.css,i=e.weekNumbers,e=e.width;return w.el(".dhx_widget.dhx-calendar",{class:t?" "+t:"",style:{width:i?parseInt(e.toString())+48+"px":e}},[w.inject(this._timepicker.getRootView())])},f.prototype._selectDate=function(e,t){var i=t.attrs._date,n=x.DateHelper.copy(this._getSelected());switch(this._currentViewMode){case"calendar":var o=this.config.timePicker?x.DateHelper.mergeHoursAndMinutes(i,this._getSelected()||this._currentDate):i;if(!this.events.fire(d.CalendarEvents.beforeChange,[o,n,!0]))return;this.config.range&&1===this._selected.length&&this._selected[0]<o?this._selected.push(o):(this._selected=[],this._selected[0]=o),t.el.blur(),this.showDate(this._getSelected()),this.events.fire(d.CalendarEvents.change,[i,n,!0]);break;case"month":if("month"!==this.config.mode)x.DateHelper.setMonth(this._currentDate,i),this.showDate(null,"calendar"),this.events.fire(d.CalendarEvents.monthSelected,[i]);else{var r=x.DateHelper.fromYearAndMonth(this._currentDate.getFullYear()||this._getSelected().getFullYear(),i);if(!this.events.fire(d.CalendarEvents.beforeChange,[r,n,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(d.CalendarEvents.change,[this._getSelected(),n,!0]),this.events.fire(d.CalendarEvents.monthSelected,[i]),this.paint()}break;case"year":if("year"!==this.config.mode)x.DateHelper.setYear(this._currentDate,i),this.showDate(null,"month"),this.events.fire(d.CalendarEvents.yearSelected,[i]);else{r=x.DateHelper.fromYear(i);if(!this.events.fire(d.CalendarEvents.beforeChange,[r,n,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(d.CalendarEvents.change,[this._getSelected(),n,!0]),this.events.fire(d.CalendarEvents.yearSelected,[i]),this.paint()}}},f.prototype._moveBrowseFocus=function(e,t,i){t&&(!(i=t.parent.body[t.idx+i])||(i=i.el)&&(e.target.tabIndex=-1,i.tabIndex=0,i.focus({preventScroll:!0})))},f);function f(e,t){void 0===t&&(t={});var o=r.call(this,e,s.extend({weekStart:"sunday",thisMonthOnly:!1,dateFormat:window&&window.dhx&&window.dhx.dateFormat,width:"250px"},t))||this;switch(o._selected=[],o.events=new a.EventSystem,o.config.disabledDates=o.config.disabledDates||o.config.block,o.config.mode=o.config.mode||o.config.view,o.config.dateFormat||(o.config.timePicker?12===o.config.timeFormat?o.config.dateFormat="%d/%m/%y %h:%i %A":o.config.dateFormat="%d/%m/%y %H:%i":o.config.dateFormat="%d/%m/%y"),o.config.value&&o._setSelected(o.config.value),o.config.date?o._currentDate=x.DateHelper.toDateObject(o.config.date,o.config.dateFormat):o._getSelected()?o._currentDate=x.DateHelper.copy(o._getSelected()):o._currentDate=new Date,o.config.mode){case"month":o._currentViewMode="month";break;case"year":o._currentViewMode="year";break;case"timepicker":o._currentViewMode=o.config.timePicker?"timepicker":"calendar";break;default:o._currentViewMode="calendar"}o._initHandlers(),o.config.timePicker&&(o._timepicker=new c.Timepicker(null,{timeFormat:o.config.timeFormat,controls:!0}),t=o._getSelected()||new Date,o._timepicker.setValue(t),o._time=o._timepicker.getValue(),o._timepicker.events.on(c.TimepickerEvents.afterClose,function(){o._timepicker.setValue(o._time),o.showDate(null,"calendar")}),o._timepicker.events.on(c.TimepickerEvents.afterApply,function(){var e=o._timepicker.getValue(!0),t=e.hour,i=e.minute,n=e.AM,e=o._getSelected(),n=x.DateHelper.withHoursAndMinutes(o._getSelected()||new Date,t,i,n);o.events.fire(d.CalendarEvents.beforeChange,[n,e,!0])&&(o._selected[o._selected.length-1]=n,o.events.fire(d.CalendarEvents.change,[n,e,!0])),o._time=o._timepicker.getValue(),o.showDate(null,"calendar")}));return o.mount(e,w.create({render:function(){return o._draw()}})),o}t.Calendar=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),a=i(0),l=i(4),c=i(7),u=i(14),d=i(74),h=i(147),f=i(148),p=i(77),g=i(3);function v(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}var _,o=(_=c.View,o(m,_),m.prototype.getValue=function(e){12===this.config.timeFormat&&(this._time.hour=this._time.hour%12||12);var t=this._time,i=t.hour,n=t.minute,t=t.AM;if(e){e={hour:i,minute:n};return 12===this.config.timeFormat&&(e.AM=t),e}return(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)+(12===this.config.timeFormat?t?"AM":"PM":"")},m.prototype.setValue=function(e){this._setValue(e),this._hoursSlider.setValue(this._time.hour),this._minutesSlider.setValue(this._time.minute),this._inputsView.paint()},m.prototype.clear=function(){24===this.config.timeFormat?this.setValue("00:00"):this.setValue("12:00AM")},m.prototype.destructor=function(){this._minutesSlider&&this._minutesSlider.destructor(),this._hoursSlider&&this._hoursSlider.destructor(),this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this.events=null,this._handlers=this._time=this._inputsView=this._minutesSlider=this._hoursSlider=null,this.unmount()},m.prototype.getRootView=function(){return this.layout.getRootView()},m.prototype._setValue=function(e){var t,i,n=0,o=0;return"number"==typeof e&&(e=new Date(e)),e instanceof Date?(n=e.getMinutes(),o=e.getHours()):Array.isArray(e)?(o=v(e[0],23),n=v(e[1],59),e[2]&&"pm"===e[2].toLowerCase()&&(t=!0)):"string"==typeof e?(o=v(+(i=e.match(/\d+/g))[0],23),n=v(+i[1],59),e.toLowerCase().includes("pm")&&(t=!0)):"object"==typeof e&&e.hasOwnProperty("hour")&&e.hasOwnProperty("minute")&&(o=e.hour,n=e.minute,t=!e.AM),t&&o<12&&(o+=12),12===this.config.timeFormat&&!f.isTimeCheck(e)&&12<=o&&(t=!0),this._time={hour:o,minute:n,AM:!t}},m.prototype._initUI=function(e){var t=this,i={gravity:!1,css:"dhx_widget dhx_timepicker "+(this.config.css||"")+(this.config.controls?" dhx_timepicker--with-controls":""),rows:[{id:"timepicker",css:"dhx_timepicker__inputs"},{id:"hour-slider",css:"dhx_timepicker__hour"},{id:"minute-slider",css:"dhx_timepicker__minute"}]};this.config.controls&&(i.rows.unshift({id:"close-action",css:"dhx_timepicker__close"}),i.rows.push({id:"save-action",css:"dhx_timepicker__save"}));var n=this.layout=new u.Layout(e,i),o=a.create({render:function(){return t._draw()}}),e=this._inputsView=c.toViewLike(o),i=this._minutesSlider=new d.Slider(null,{min:0,max:59,step:1,tooltip:!1,labelPosition:"top",label:h.default.minutes,value:this.config.value?this._time.minute:0}),o=this._hoursSlider=new d.Slider(null,{min:0,max:23,step:1,tooltip:!1,labelPosition:"top",label:h.default.hours,value:!this.config.value||12===this._time.hour&&this._time.AM?0:this._time.hour});n.getCell("timepicker").attach(e),n.getCell("hour-slider").attach(o),n.getCell("minute-slider").attach(i),this.config.controls&&(n.getCell("save-action").attach(function(){return a.el("button.dhx_timepicker__button-save.dhx_button.dhx_button--view_flat.dhx_button--color_primary.dhx_button--size_small.dhx_button--circle.dhx_button--width_full",{onclick:t._outerHandlers.save,type:"button"},h.default.save)}),n.getCell("close-action").attach(function(){return a.el("button.dhx_timepicker__button-close.dhx_button.dhx_button--view_link.dhx_button--size_medium.dhx_button--view_link.dhx_button--color_secondary.dhx_button--icon.dhx_button--circle",{_ref:"close",onclick:t._outerHandlers.close,type:"button","aria-label":"close timepicker"},[a.el("span.dhx_button__icon.dxi.dxi-close")])}))},m.prototype._initHandlers=function(){function t(e){var t=v(parseInt(e.value,10),59);e.value=t.toString(),n._minutesSlider.setValue(t)}function i(e){var t=v(parseInt(e.value,10),23);e.value=t.toString(),n._hoursSlider.setValue(t)}var n=this;this._handlers={onchange:{".dhx_timepicker-input--hour":function(e){return i(e.target)},".dhx_timepicker-input--minutes":function(e){return t(e.target)}},oninput:{".dhx_timepicker-input--hour":function(e){(g.isSafari()||g.isFirefox())&&i(e.target)},".dhx_timepicker-input--minutes":function(e){(g.isSafari()||g.isFirefox())&&t(e.target)}}},this._outerHandlers={close:function(){n.events.fire(p.TimepickerEvents.beforeClose,[n.getValue("timeObject"===n.config.valueFormat)])&&(n.events.fire(p.TimepickerEvents.afterClose,[n.getValue("timeObject"===n.config.valueFormat)]),n.events.fire(p.TimepickerEvents.close,[]))},save:function(){n.events.fire(p.TimepickerEvents.beforeApply,[n.getValue("timeObject"===n.config.valueFormat)])&&(n.events.fire(p.TimepickerEvents.afterApply,[n.getValue("timeObject"===n.config.valueFormat)]),n.events.fire(p.TimepickerEvents.apply,[n.getValue()]),n.events.fire(p.TimepickerEvents.save,[n._time]))}}},m.prototype._initEvents=function(){var t=this;this._hoursSlider.events.on(d.SliderEvents.change,function(e){e<t._hoursSlider.config.min||e>t._hoursSlider.config.max||(12===t.config.timeFormat?(t._time.AM=e<12,t._time.hour=e%12||12):t._time.hour=e,t.events.fire(p.TimepickerEvents.change,[t.getValue("timeObject"===t.config.valueFormat)]),t._inputsView.paint())}),this._minutesSlider.events.on(d.SliderEvents.change,function(e){e<t._minutesSlider.config.min||e>t._minutesSlider.config.max||(t._time.minute=e,t.events.fire(p.TimepickerEvents.change,[t.getValue("timeObject"===t.config.valueFormat)]),t._inputsView.paint())})},m.prototype._draw=function(){return a.el(".dhx_timepicker-inputs",r({},this._handlers),[a.el("input.dhx_timepicker-input.dhx_timepicker-input--hour",{_key:"hour",_ref:"hour",value:1<this.getValue(!0).hour.toString().length?this.getValue(!0).hour:"0"+this.getValue(!0).hour,"aria-label":"hours"}),a.el("span.dhx_timepicker-delimer",":"),a.el("input.dhx_timepicker-input.dhx_timepicker-input--minutes",{_key:"minute",value:1<this.getValue(!0).minute.toString().length?this.getValue(!0).minute:"0"+this.getValue(!0).minute,"aria-label":"minutes"}),12===this.config.timeFormat?a.el(".dhx_timepicker-ampm",this._time.AM?"AM":"PM"):null])},m);function m(e,t){void 0===t&&(t={});t=_.call(this,e,s.extend({timeFormat:24,controls:!1,valueFormat:"string",actions:!1},t))||this;return t.events=new l.EventSystem(t),t._time={hour:0,minute:0,AM:!0},12===t.config.timeFormat&&(t._time.hour=12),t.config.controls=t.config.controls||t.config.actions,t.config.value&&t._setValue(t.config.value),t._initUI(e),t._initHandlers(),t._initEvents(),t}t.Timepicker=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockRange=function(e,t,i){return void 0===i&&(i=!0),i?{min:e.left+window.pageXOffset,max:t.right+window.pageXOffset}:{min:e.top+window.pageYOffset,max:t.bottom+window.pageYOffset}},t.getMarginSize=function(e,t){return e&&("space"===e.type||"wide"===e.type&&t)?10:0}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(72),a=i(144),o=(r=s.Layout,o(l,r),l.prototype._createCell=function(e){var t=e.rows||e.cols||e.views?(e.parent=this._root,new l(this,e)):new a.ProCell(this,e);return this._root._all[t.id]=t,e.init&&e.init(t,e),t},l);function l(e,t){return r.call(this,e,t)||this}t.ProLayout=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,u=i(1),d=i(0),s=i(32),i=i(73),o=(r=i.Cell,o(a,r),a.prototype._getFirstRootView=function(e){return void 0===e&&(e=this),e.getParent()&&e.getParent().getRootView()?e.getParent().getRootView():this._getFirstRootView(e.getParent())},a.prototype.toVDOM=function(e){if(null===this.config&&(this.config={}),!this.config.hidden){var t,i=this._calculateStyle(),n=u.isDefined(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:this.config.padding+"px"}:"",o=this.config.full||this.config.html?i:c(c({},i),n);this.config.html||(t=this._ui?((l=this._ui.getRootView()).render&&(l=d.inject(l)),l?[this.scrollView.render(l)]:l||null):e?this.scrollView.render([e]):e||null);var i=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?d.el(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),c(c({},this._resizerHandlers),{_ref:"resizer_"+this._uid}),[d.el("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,r={};if(this.config.on)for(var s in this.config.on)r["on"+s]=this.config.on[s];var a="",l=this.config.cols||this.config.rows;if(this.config.type&&l)switch(this.config.type){case"line":a=" dhx_layout-line";break;case"wide":a=" dhx_layout-wide";break;case"space":a=" dhx_layout-space"}e=d.el(".dhx_layout-cell-content",{_key:this._uid+"_html",style:n},[d.el(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})]),e=d.el("div",c(c(((l={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,l),r),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?a:""),style:o}),this.config.full?[d.el("div",{tabindex:this.config.collapsable?"0":"-1",class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&d.el("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&d.el(".dhx_layout-cell-header__image-wrapper",[d.el("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&d.el("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?d.el("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):d.el("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:d.el("div",{style:c(c({},n),{height:"calc(100% - "+(this.config.headerHeight||37)+"px)"}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?a:"")},this.config.html?[d.el("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:t)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?t:[this.config.collapsed?null:this.scrollView&&this.scrollView.config.enable?this.scrollView.render([e],this._uid):e]);return i?[e,i]:e}},a);function a(e,t){var i=r.call(this,e,t)||this;return i.scrollView=new s.ScrollView(function(){return i._getFirstRootView()}),i}t.ProCell=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),c=i(0),s=i(4),a=i(20),u=i(7),d=i(8),h=i(76),f=i(3);function p(e,t,i){return e<t?t:i<e?i:e}var g,o=(g=u.View,o(v,g),v.prototype.disable=function(){this._disabled=!0,this.paint()},v.prototype.enable=function(){this._disabled=!1,this.paint()},v.prototype.isDisabled=function(){return this._disabled},v.prototype.focus=function(e){this.getRootView().refs[e?"extraRunner":"runner"].el.focus()},v.prototype.blur=function(){this.getRootView().refs[this._isExtraActive?"extraRunner":"runner"].el.blur()},v.prototype.getValue=function(){var e,t;return this.config.range?(e=this._getValue(this._currentPosition))<(t=this._getValue(this._extraCurrentPosition))?[e,t]:[t,e]:[this._getValue(this._currentPosition)]},v.prototype.setValue=function(e){var t=this._getValue(this._currentPosition);if(Array.isArray(e)&&1<e.length){var i=this._getValue(this._extraCurrentPosition);this._setValue(e[0],!1),this.events.fire(h.SliderEvents.change,[e[0],t,!1]),this._setValue(e[1],!0),this.events.fire(h.SliderEvents.change,[e[1],i,!0])}else{if(e=parseFloat(e),isNaN(e))throw new Error("Wrong value type, for more info check documentation https://docs.dhtmlx.com/suite/slider__api__slider_setvalue_method.html");this._setValue(e),this.events.fire(h.SliderEvents.change,[e,t,!1])}this.paint()},v.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),this._tooltip=null,this.unmount()},v.prototype._calcSliderPosition=function(){var e=this.getRootView();e&&(e=e.refs.track.el.getBoundingClientRect(),this._offsets={left:e.left+window.pageXOffset,top:e.top+window.pageYOffset},this._length="horizontal"===this.config.mode?e.width:e.height)},v.prototype._initHotkeys=function(){var e,t=this,i={arrowLeft:function(e){e.preventDefault(),t._move(-t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))},arrowRight:function(e){e.preventDefault(),t._move(t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))},arrowUp:function(e){e.preventDefault(),t._move(t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))},arrowDown:function(e){e.preventDefault(),t._move(-t.config.step,e.target.classList.contains("dhx_slider__thumb--extra"))}};for(e in i)this._keyManager.addHotKey(e,i[e])},v.prototype._move=function(e,t){this.config.inverse&&(e=-e);var i=this.config,n=i.max,o=i.min,r=t?this._getValue(this._extraCurrentPosition):this._getValue(this._currentPosition),i=r+e;this._setValue(r+e,t),(n<i||i<o)&&(i=r),this.events.fire(h.SliderEvents.change,[i,r,t]),this.paint()},v.prototype._initStartPosition=function(){var e,t,i=this.config,n=i.max,o=i.min,r=i.range,i=(e=this.config.value,t=this.config.min,i=this.config.max,(e=void 0===e?[]:Array.isArray(e)?e:"string"==typeof e?e.split(",").map(function(e){return parseInt(e,10)}):[e])[0]=void 0===e[0]?t:p(e[0],t,i),e[1]=void 0===e[1]?i:p(e[1],t,i),e),e=i[0],i=i[1];this._currentPosition=(e-o)/(n-o)*100,r&&(this._extraCurrentPosition=(n-i)/(n-o)*100),this._currentPosition=(e-o)/(n-o)*100,r&&(this._extraCurrentPosition=(i-o)/(n-o)*100),this._isInverse()&&(this._currentPosition=100-this._currentPosition,r&&(this._extraCurrentPosition=100-this._extraCurrentPosition))},v.prototype._getValue=function(e){this._isInverse()&&(e=100-e);var t=this.config,i=t.min,n=t.max,t=t.step;if(100===e)return n;if(0===e)return i;e=e*(n-i)/100,n=e%t,t=t/2<=n?t:0;return+(Number(i)+Number(e)-n+t).toFixed(5)},v.prototype._setValue=function(e,t){void 0===t&&(t=!1);var i=this.config,n=i.max,i=i.min;if(n<e||e<i)return!1;i=(e-i)/(n-i)*100,i=this._isInverse()?100-i:i;t?this._extraCurrentPosition=i:this._currentPosition=i},v.prototype._initHandlers=function(){function t(e){if(e.targetTouches||e.preventDefault(),e=((e.targetTouches?e.targetTouches[0]:e)[n._axis]-n._getBegining())/n._length*100,n._findNewDirection){if(Math.abs(n._currentPosition-e)<1)return;e>n._currentPosition?n._possibleRange=[n._currentPosition,100]:n._possibleRange=[0,n._currentPosition],n._findNewDirection=null}n._inSide(e)&&n._updatePosition(e,n._isExtraActive),n.paint()}function i(e){var t,i;n._disabled||3===e.which||(n.events.fire(h.SliderEvents.mousedown,[e]),n._isMouseMoving=!0,t=e.target.classList.contains("dhx_slider__thumb--extra")?(n._isExtraActive=!0,n._extraCurrentPosition):(n._isExtraActive=!1,n._currentPosition),n._findNewDirection=null,n.config.range?(e=(i=n._currentPosition>n._extraCurrentPosition?[n._currentPosition,n._extraCurrentPosition]:[n._extraCurrentPosition,n._currentPosition])[0],i=i[1],n._currentPosition===n._extraCurrentPosition?(n._findNewDirection=t,n._possibleRange=[0,100]):n._possibleRange=t<e?[0,e]:[i,100]):n._possibleRange=[0,100])}var n=this,o=function(e){n.events.fire(h.SliderEvents.mouseup,[e]),setTimeout(function(){n._isMouseMoving=!1,n.paint()},4),e.targetTouches?(document.removeEventListener("touchend",o),document.removeEventListener("touchmove",t)):(document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",t))};this.config.helpMessage&&(this._helper=new d.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.show(e.target)},onmousedown:function(e){i(e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",o)},ontouchstart:function(e){n._setTooltip(e),n._mouseIn=!1,i(e),document.addEventListener("touchmove",t),document.addEventListener("touchend",o),n.paint()},ontouchend:function(e){n._setTooltip(e),n._mouseIn=!1,n.paint()},onlabelClick:function(){n.getRootView().refs.runner.el.focus()},onclick:function(e){var t;n._disabled||n._isMouseMoving||3===e.which||(t=(e[n._axis]-n._getBegining())/n._length*100,e=n.getRootView().refs,!n.config.range||Math.abs(n._currentPosition-t)<Math.abs(n._extraCurrentPosition-t)?(n._updatePosition(t,!1),e.runner.el.focus()):(n._updatePosition(t,!0),e.extraRunner.el.focus()),n.paint())},onmouseover:function(e){n._setTooltip(e),n._mouseIn=!0,n.paint()},onmouseout:function(e){n._setTooltip(e),n._mouseIn=!1,n.paint()},onfocus:function(e){n._setTooltip(e),n._focusIn=!0,n.events.fire(h.SliderEvents.focus,[]),n.paint()},onblur:function(e){n._setTooltip(e),n._focusIn=!1,n.events.fire(h.SliderEvents.blur,[]),n.paint()},onkeydown:function(e){n.events.fire(h.SliderEvents.keydown,[e])}}},v.prototype._getBegining=function(){return"horizontal"===this.config.mode?this._offsets.left-window.pageXOffset:this._offsets.top-window.pageYOffset},v.prototype._inSide=function(e){var t=this._possibleRange;return e<t[0]?(this._updatePosition(t[0],this._isExtraActive),!1):!(e>t[1])||(this._updatePosition(t[1],this._isExtraActive),!1)},v.prototype._updatePosition=function(e,t){void 0===t&&(t=!1),100<e&&(e=100),e<0&&(e=0);var i=this.config,n=i.max,o=i.min,i=t?this._extraCurrentPosition:this._currentPosition,i=this._getValue(i),e=this._getValue(e);i!==e&&(o=(e-o)/(n-o)*100,o=this._isInverse()?100-o:o,t?this._extraCurrentPosition=o:this._currentPosition=o,this.events.fire(h.SliderEvents.change,[e,i,t]))},v.prototype._getRunnerStyle=function(e){void 0===e&&(e=!1);var t="horizontal"===this.config.mode?"left":"top",i=e?this._extraCurrentPosition:this._currentPosition;return(e={})[t]=i+"%",e},v.prototype._isInverse=function(){return this.config.inverse&&"horizontal"===this.config.mode||!this.config.inverse&&"vertical"===this.config.mode},v.prototype._getRunnerCss=function(e){return void 0===e&&(e=!1),"dhx_slider__thumb"+(e?" dhx_slider__thumb--extra":"")+(this._isMouseMoving&&(e&&this._isExtraActive||!e&&!this._isExtraActive)?" dhx_slider__thumb--active":"")+(this._disabled?" dhx_slider__thumb--disabled":"")+(this._isNullable(e?this._extraCurrentPosition:this._currentPosition)&&!this.config.range?" dhx_slider__thumb--nullable":"")},v.prototype._draw=function(){var e=this.config,t=e.labelPosition,i=e.mode,n=e.hiddenLabel,o=e.tick,r=e.majorTick,s=e.css,a=e.helpMessage,e=f.getLabelStyle(l(l({},this.config),{required:!1}));return!this._tooltip||this._mouseIn&&this._focusIn&&this._isMouseMoving||document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),c.el("div",{class:"dhx_slider dhx_slider--mode_"+i+("left"===t?" dhx_slider--label-inline":"")+(n?" dhx_slider--label_sr":"")+(o?" dhx_slider--ticks":"")+(r?" dhx_slider--major-ticks":"")+(s?" "+s:"")+(this._disabled?" dhx_slider--disabled":"")},[e?c.el("label.dhx_label.dhx_slider__label",{style:e.style,class:a?"dhx_label--with-help":"",onclick:this._handlers.onlabelClick},a?[e.label&&c.el("span.dhx_label__holder",e.label),c.el("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper})]:e.label):null,this._drawSlider()])},v.prototype._drawSlider=function(){return c.el(".dhx_widget.dhx_slider__track-holder",{"data-dhx-widget-id":this._uid},[c.el(".dhx_slider__track",{_ref:"track",onmouseover:this._handlers.onmouseover,onmouseout:this._handlers.onmouseout,onclick:this._handlers.onclick},[this._getDetector(),c.el("div",{_ref:"runner",class:this._getRunnerCss(),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(),tabindex:0}),this.config.tooltip&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip():null,this.config.tooltip&&this.config.range&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip(!0):null,this.config.range?c.el("div",{_ref:"extraRunner",class:this._getRunnerCss(!0),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(!0),tabindex:0}):null]),this.config.tick?this._drawTicks():null])},v.prototype._getDetector=function(){var e;if(this._disabled)return c.el(".dhx_slider__range");var t="horizontal"===this.config.mode?"left":"top",i="horizontal"===this.config.mode?"width":"height";if(this.config.range){var n=this._currentPosition>this._extraCurrentPosition?[this._currentPosition,this._extraCurrentPosition]:[this._extraCurrentPosition,this._currentPosition],o=n[0],r=n[1];return c.el(".dhx_slider__range",{style:((n={})[t]=r+"%",n[i]=o-r+"%",n)})}return this._isInverse()?c.el(".dhx_slider__range",{style:((e={})[t]=this._currentPosition+"%",e[i]=100-this._currentPosition+"%",e)}):c.el(".dhx_slider__range",{style:((e={})[t]=0,e[i]=this._currentPosition+"%",e)})},v.prototype._drawTooltip=function(e){var t,i,n;void 0===e&&(e=!1),"none"!==this._activeTooltip&&this.getRootView()&&(t="extraTooltip"===this._activeTooltip?this._extraCurrentPosition:this._currentPosition,i="horizontal"===this.config.mode?"left":"top",n="",(e&&this._isExtraActive||!e&&!this._isExtraActive)&&(n+=" dhx_slider__thumb-label--active"),this._tooltip||(this._tooltip=document.createElement("div")),e=("tooltip"===this._activeTooltip?this.getRootView().refs.runner:this.getRootView().refs.extraRunner).el.getBoundingClientRect(),this._tooltip.className="dhx_slider__thumb-label"+n,this._tooltip.style.left=e.x+("left"==i?6:-30)+window.pageXOffset+"px",this._tooltip.style.top=e.y+("left"==i?-30:6)+window.pageYOffset+"px",this._tooltip.innerText=this._getValue(t).toString(),document.body.appendChild(this._tooltip))},v.prototype._getTicks=function(){for(var e=this.config,t=e.max,i=e.min,n=e.step,o=e.tick,r=e.majorTick,s=t-i,a=n*o/s,l=[],c=0,u=0;c<1;){var d=+(Number(i)+c*s).toFixed(5),h=u%r==0;l.push({position:(this._isInverse()?100*(1-c):100*c)+"%",isMultiple:h,label:h&&"function"==typeof this.config.tickTemplate?this.config.tickTemplate(d):null}),c+=a,u++}return l.push({position:(this._isInverse()?0:100)+"%",isMultiple:!0,label:"function"==typeof this.config.tickTemplate?this.config.tickTemplate(t):null}),l},v.prototype._drawTicks=function(){var i="horizontal"===this.config.mode?"left":"top";return c.el(".dhx_slider__ticks-holder",this._getTicks().map(function(e){var t;return c.el("div",{class:"dhx_slider__tick"+(e.isMultiple?" dhx_slider__tick--major":""),style:((t={})[i]=e.position,t)},void 0!==e.label?[c.el(".dhx_slider__tick-label",e.label)]:null)}))},v.prototype._isNullable=function(e){return this._isInverse()?100===e:0===e},v.prototype._setTooltip=function(e){e.target.classList.contains("dhx_slider__thumb--extra")?this._activeTooltip="extraTooltip":e.target.classList.contains("dhx_slider__thumb")?this._activeTooltip="tooltip":this._activeTooltip="none"},v);function v(e,t){var i=g.call(this,e,r.extend({mode:"horizontal",min:0,max:100,step:1,tooltip:!0},t))||this;i._disabled=!1,i.config.helpMessage=i.config.helpMessage||i.config.help,void 0!==i.config.thumbLabel&&(i.config.tooltip=i.config.thumbLabel),i.config.labelInline&&(i.config.labelPosition="left"),i.events=new s.EventSystem(i),i._axis="horizontal"===i.config.mode?"clientX":"clientY",i._initStartPosition(),i._keyManager=new a.KeyManager(function(){var e;return document.activeElement===(null===(e=null===(e=i.getRootView().refs)||void 0===e?void 0:e[i._isExtraActive?"extraRunner":"runner"])||void 0===e?void 0:e.el)}),i._initHotkeys();t=c.create({render:function(){return i._draw()},hooks:{didMount:function(){return i._calcSliderPosition()},didRedraw:function(){return i._calcSliderPosition()}}});return i._initHandlers(),i.mount(e,t),i}t.Slider=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,a=i(1),l=i(0),c=i(4),u=i(3),d=i(7),h=i(75),o=(r=d.View,o(f,r),f.prototype.show=function(e,t,i){var n=this;void 0===t&&(t={}),this.events.fire(h.PopupEvents.beforeShow,[e])&&(e=u.toNode(e),this._isActive?this._setPopupSize(e,t):(i&&this.attach(i),this._popup.style.left="0",this._popup.style.top="0",l.awaitRedraw().then(function(){n._setPopupSize(e,t),n._popup.style.position="fixed",document.body.appendChild(n._popup),n._isActive=!0}).then(function(){n._popup.style.position="absolute",n.events.fire(h.PopupEvents.afterShow,[e]),n._outerClickDestructor=n._detectOuterClick(e)})))},f.prototype.hide=function(){this._hide(!1,null)},f.prototype.isVisible=function(){return this._isActive},f.prototype.attach=function(e,t){return this._html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof d.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui},f.prototype.attachHTML=function(e){this._html=e,this.paint()},f.prototype.getWidget=function(){return this._ui},f.prototype.getContainer=function(){return this.getRootView().refs.content.el},f.prototype.toVDOM=function(){var e;return this._html?e=l.el(".dhx_popup__inner-html-content",{".innerHTML":this._html}):(e=this._ui?this._ui.getRootView():null)&&e.render&&(e=l.inject(e)),l.el("div",{class:"dhx_popup-content",tabindex:0,onclick:this._clickEvent,_key:this._uid,_ref:"content"},[e])},f.prototype.destructor=function(){this.hide(),this._outerClickDestructor&&this._outerClickDestructor(),this._popup=null},f.prototype._setPopupSize=function(e,t,i){var n=this;void 0===i&&(i=3);var o=this._popup.getBoundingClientRect(),r=o.width,o=o.height;if(this._timeout&&(clearTimeout(this._timeout),this._timeout=null),!i||0!==r&&0!==o){r=u.fitPosition(e,s(s({centering:!0,mode:"bottom"},t),{width:r,height:o})),o=r.left,r=r.top;if(this._popup.style.left=o,this._popup.style.top=r,t.indent&&0!==t.indent)switch(t.mode){case"top":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"bottom":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px";break;case"left":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"right":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px";break;default:this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px"}}else this._timeout=setTimeout(function(){n._isActive&&(n._setPopupSize(e,t,i-1),n._timeout=null)})},f.prototype._detectOuterClick=function(n){var o=this,r=!1,s=new WeakMap,a=function(e){var t=e.target,i=document.querySelectorAll(".dhx_popup");for(r?i.forEach(function(e){return s.has(e)||s.set(e,o._popup)}):(r=Boolean(i.length))&&i.forEach(function(e){return s.set(e,!0)});t;){if(t===n||t===o._popup||s.get(t)===o._popup)return;t=t.parentNode}o._hide(!0,e)&&document.removeEventListener("mousedown",a)};return document.addEventListener("mousedown",a),function(){return document.removeEventListener("mousedown",a)}},f.prototype._hide=function(e,t){if(this._isActive)return!!this.events.fire(h.PopupEvents.beforeHide,[e,t])&&(document.body.removeChild(this._popup),this._isActive=!1,this._outerClickDestructor&&(this._outerClickDestructor(),this._outerClickDestructor=null),this.events.fire(h.PopupEvents.afterHide,[t]),!0)},f);function f(e){void 0===e&&(e={});var t=r.call(this,null,a.extend({},e))||this,i=t._popup=document.createElement("div");return i.className="dhx_widget dhx_popup"+(t.config.css?" "+t.config.css:""),i.style.position="absolute",i.setAttribute("role","dialog"),i.setAttribute("aria-modal","true"),i.setAttribute("aria-live","polite"),t.mount(i,l.create({render:function(){return t.toVDOM()}})),t._clickEvent=function(e){return t.events.fire(h.PopupEvents.click,[e])},t.events=e.events||new c.EventSystem(t),t._isActive=!1,t}t.Popup=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={hours:"Hours",minutes:"Minutes",save:"Save"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeCheck=function(e){return/(^12:[0-5][0-9]?AM$)/i.test(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkButtonClasses=".dhx_button.dhx_button--view_link.dhx_button--icon.dhx_button--size_medium.dhx_button--color_secondary"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(0),r=i(10),i=(s.prototype.endEdit=function(){var e=this._checked;this._config.events.fire(r.GridEvents.beforeEditEnd,[e,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(r.GridEvents.afterEditEnd,[e,this._cell.row,this._cell.col])):this._input.checked=!e},s.prototype.toHTML=function(){void 0===this._checked&&(this._checked=this._cell.row[this._cell.col.id]);var e=n.uid();return o.el("div.dhx_checkbox.dhx_cell-editor__checkbox",[o.el("label",{style:{display:"none"},for:e},this._checked||"false"),o.el("input.dhx_checkbox__input",{type:"checkbox",_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",checked:this._checked,id:e,style:{userSelect:"none"}}),o.el("span.dhx_checkbox__visual-input")])},s.prototype._initHandlers=function(){var t=this;this._handlers={onClick:function(){var e=!t._input.checked;t._config.events.fire(r.GridEvents.beforeEditStart,[t._cell.row,t._cell.col,"checkbox"])?(t._checked=e,t._config.events.fire(r.GridEvents.afterEditStart,[t._cell.row,t._cell.col,"checkbox"]),t.endEdit()):t._input.checked=!e},didInsert:function(e){t._checkbox=e.el.parentNode.lastChild,t._input=e.el.parentNode.querySelector("input"),e.el.parentNode.addEventListener("click",t._handlers.onClick)}}},s);function s(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}t.CheckboxEditor=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=i(10),s=i(39),a=i(18),i=(l.prototype.endEdit=function(e){var t,i=this;e||(t=this._input.getValue(),t="multiselect"===this._cell.col.editorType?t.split(",").join(", "):t),this._config.events.fire(r.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.popup.hide(),document.removeEventListener("mousedown",this._handlers.onOuterClick),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),a.focusManager.setFocusId(this._config.gridId),null!=t&&t.toString().split(", ").forEach(function(t){var e=i._cell.col.options.find(function(e){return"string"==typeof e?e===t:e.id.toString()===t});t&&!e&&i._cell.col.options.push(i._input.data.getItem(t))}),this._config.events.fire(r.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()},l.prototype.toHTML=function(){var t=this,e=this._cell.col.options.map(function(e){return"string"==typeof e?{id:""+e,value:e}:e})||[];return this._input||(this._input=new s.Combobox(null,n({itemHeight:37,css:"dhx_cell-editor__combobox",multiselection:"multiselect"===this._cell.col.editorType},this._cell.col.editorConfig)),this._input.data.parse(e),e=this._cell.row[this._cell.col.id],e="multiselect"===this._cell.col.editorType?((null==e?void 0:e.toString())||"").split(", "):e,this._input.setValue(e),this._input.events.on("keydown",this._handlers.onkeydown)),document.addEventListener("mousedown",this._handlers.onOuterClick),this._config.$editable.editor=this,o.awaitRedraw().then(function(){var e=t._input.getRootView().refs.holder.el;t._input.popup.getContainer().style.width=e.offsetWidth+"px",t._input.popup.show(e)}),a.focusManager.setFocusId(this._input._uid),o.inject(this._input.getRootView())},l.prototype._initHandlers=function(){var i=this;this._handlers={onOuterClick:function(e){var t;e.target instanceof Node&&(t=i._input&&i._input.getRootNode()&&i._input.getRootNode().contains(e.target),e=i._input.popup&&i._input.popup.getRootNode()&&i._input.popup.getRootNode().contains(e.target),t||e||i.endEdit())},onkeydown:function(e){"Escape"!==e.key&&"Tab"!==e.key||i.endEdit()}}},l);function l(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}t.ComboboxEditor=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CODES={BACKSPACE:8,ENTER:13,ESC:27,DOWN_ARROW:40,UP_ARROW:38,LEFT_ARROW:37,RIGHT_ARROW:39}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(154);t.getEditor=function(e,t){return new n.InputEditor(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(55),i=(r.prototype.endEdit=function(){var e;this._input&&(e=this._input.value,this._list.events.fire(o.ListEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._list.events.fire(o.ListEvents.afterEditEnd,[e,this._item.id])):this._input.focus())},r.prototype.toHTML=function(){this._mode=!0;var e=this._config.itemHeight;return n.el(".dhx_input__wrapper",{role:"presentation"},[n.el("div.dhx_input__container",{role:"presentation"},[n.el("input.dhx_input",{class:this._item.css?" "+this._item.css:"",style:{height:e,width:"100%",padding:"8px 12px"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},r.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onChange:function(){t.endEdit()},onKeyDown:function(e){"Enter"===e.key&&t._item.value===t._input.value&&t.endEdit(),"Escape"===e.key&&(t._input.value=t._item.value,t.endEdit())},didInsert:function(e){e=e.el;(t._input=e).focus(),e.value=t._item.value,e.setSelectionRange(0,e.value.length),e.addEventListener("change",t._handlers.onChange),e.addEventListener("blur",t._handlers.onBlur),e.addEventListener("keydown",t._handlers.onKeyDown)}}},r);function r(e,t){var i=this;this._list=t,this._config=t.config,this._item=e,this._list.events.on(o.ListEvents.focusChange,function(e,t){i._mode&&t!==i._item.id&&i.endEdit()}),this._initHandlers()}t.InputEditor=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,l=i(0),c=i(32),i=i(80),o=(a=i.List,o(u,a),u.prototype.destructor=function(){a.prototype.destructor.call(this),this.scrollView=null},u.prototype.showItem=function(e){var t,i,n,o=this.getRootView();o&&o.node&&o.node.el&&void 0!==e&&((t=this.getRootNode())&&(i=this.config.virtual,n=this.data.getIndex(e),o=Math.floor(n/t.children.length)||0,e=t.children[n-t.children.length*o],(i||e)&&(o=i?parseInt(this.config.itemHeight):e.clientHeight,(e=i?n*o:e.offsetTop)>=t.scrollTop+t.clientHeight-o?t.scrollTo(0,e-t.clientHeight+o):e<t.scrollTop&&t.scrollTo(0,e))))},u.prototype._renderList=function(){var i=this,e=this._getRange(),t=this.data.getRawData(e[0],e[1]).map(function(e,t){return i._renderItem(e,t)});this.config.virtual&&(t=s([l.el(".div",{style:{height:e[2]+"px"}})],t,[l.el(".div",{style:{height:e[3]+"px"}})]));var n=this.scrollView&&this.scrollView.config.enable,e=(this.config.css||"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(n?" dhx_list--scroll-view":"");return l.el("ul.dhx_widget.dhx_list",r(r({style:{"max-height":this.config.height,position:"relative"},class:e,"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),n?[].concat(this.scrollView.render(t)):t)},u);function u(e,t){var i=a.call(this,e,t)||this;return i.scrollView=new c.ScrollView(function(){return i.getRootView()}),i.paint(),i}t.ProList=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.startNewListen=function(e){this._isActive=!0,this._sequence="",this._currentAction=e},o.prototype.endListen=function(){this._currentAction=null,this.reset(),this._isActive=!1},o.prototype.reset=function(){this._sequence=""},o.prototype._change=function(){this._currentAction(this._sequence),this._addClearTimeout()},o.prototype._addClearTimeout=function(){var e=this;this._clearTimeout&&clearTimeout(this._clearTimeout),this._clearTimeout=setTimeout(function(){e.reset(),e._clearTimeout=null},2e3)},o);function o(){var t=this;this._sequence="",document.addEventListener("keydown",function(e){t._isActive&&("Backspace"===(e=e.key)&&0<t._sequence.length&&(t._sequence=t._sequence.slice(0,t._sequence.length-1),t._change()),e.length<2&&(t._sequence+=e,t._change()))})}t.KeyListener=n},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(79),a=i(29),l=i(14),c=i(83),o=(r=s.Combobox,o(u,r),u.prototype._createLayout=function(){var e=this.list=new a.ProList(null,{template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!1,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),t=this._layout=new l.ProLayout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});t.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&t.getCell("select-unselect-all").attach(c.selectAllView)},u);function u(e,t){return r.call(this,e,t)||this}t.ProCombobox=o},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(10),o=i(1),a=i(25),i=(l.prototype.endEdit=function(e){var t;e||(t=this._editor.value),this._config.events.fire(s.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._editor.removeEventListener("blur",this._handlers.onBlur),this._editor.removeEventListener("change",this._handlers.onChange),this._editor.removeEventListener("input",this._handlers.onInput),"string"!==this._cell.col.type&&o.isNumeric(t)&&(t=parseFloat(t)),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(s.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._editor.focus()},l.prototype.toHTML=function(){var e=this._cell.row[this._cell.col.id];this._editor&&(e=this._editor.value);var t=void 0!==(this._config.$editable.editor=this)._cell.row.height||this._cell.col.htmlEnable?"dhx_cell-editor dhx_cell-editor__textarea_constant-height":"dhx_cell-editor dhx_cell-editor__textarea";return n.el("textarea",{_hooks:{didInsert:this._handlers.didInsert},_ref:"textarea",_key:"cell_editor","data-dhx-id":"cell_editor",value:e,class:t,style:{width:this._width}})},l.prototype._initHandlers=function(){var o=this;this._handlers={onBlur:function(){o.endEdit()},onChange:function(){o.endEdit()},onInput:function(e){if(void 0===o._cell.row.height&&!o._cell.col.htmlEnable){var t=o._getCurrentHeight(o._editor.value,{width:o._cell.col.$width-2,maxHeight:o._config.rowHeight});o._cell.row[o._cell.col.id]=o._editor.value;var i=a.getCalculatedRowHeight(a.getMaxRowHeight(o._cell.row,o._config.columns)),n=a.getCalculatedRowHeight(a.getMaxRowHeight(((n={})[o._cell.col.id]=o._cell.row[o._cell.col.id],n),o._config.columns));if(o._minHeight=i===n?o._config.rowHeight:i,t>=o._minHeight&&t!==o._prevHeight){if(!o._config.events.fire(s.GridEvents.beforeRowResize,[o._cell.row,e,t]))return;o._config.events.fire(s.GridEvents.afterRowResize,[o._cell.row,e,t])}o._prevHeight=t}},didInsert:function(e){o._editor=e.el,o._editor.focus(),o._editor.setSelectionRange(0,o._editor.value.length),o._editor.addEventListener("change",o._handlers.onChange),o._editor.addEventListener("blur",o._handlers.onBlur),o._editor.addEventListener("input",o._handlers.onInput)}}},l.prototype._getCurrentHeight=function(e,t){t=r({width:100,maxHeight:40,lineHeight:20},t);var i=document.createElement("textarea");i.className="dhx_cell-editor dhx_cell-editor__textarea",i.value=e,i.style.width=t.width+"px",i.style.lineHeight=t.lineHeight+"px",i.style.maxHeight=t.maxHeight+"px",i.style.boxSizing="border-box",document.body.appendChild(i);var n=this._getElementHeight(i),o=i.value.split("\n").length,e=Math.round(n/t.lineHeight),n=n<t.maxHeight?t.maxHeight:n;return document.body.removeChild(i),1===o&&o===e?t.maxHeight:n},l.prototype._getElementHeight=function(e){return e.scrollHeight},l);function l(e,t,i){this._config=i,this._cell={row:e,col:t},this._width=this._cell.col.$width;t=0;this._config.firstColId===this._cell.col.id&&this._cell.row.hasOwnProperty("$level")&&(t=a.getTreeCellWidthOffset(this._cell.row)),this._width-=t-4,this._initHandlers()}t.TextAreaEditor=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(39),c=i(11),u=i(10),d=i(25),h=i(3),o=i(1);function r(t,i,n,o,r){function e(){var e=(h.isIE()||h.isSafari()?r.target:r.path?r.path[0]:r.explicitOriginalTarget).value;o.value[i]=e,t.fire(u.GridEvents.filterChange,[e,i,n])}"selectFilter"!==n?(s&&clearTimeout(s),s=setTimeout(e,500)):e()}function n(e,n,t,i){if(e&&n&&t){var o=e.id,e=i?i(o,n.data):n.data.reduce(function(e,t){return void 0===t[o]||""===t[o]||isNaN(t[o])||e.push(parseFloat(t[o])),e},[]),i=e;return"tree"===n.type&&(i=n.data.reduce(function(e,t){var i;return 0===t.$level&&(void 0===t[o]||""===t[o]||isNaN(t[o])?(i=0,n.datacollection.eachChild(t.id,function(e){n.datacollection.haveItems(e.id)||(i+=parseFloat(e[o]))}),e.push(i)):e.push(parseFloat(t[o])||0)),e},[])),t(e,i)}}t.getContent=function(){function s(i){var e=i.$uniqueData;return"combobox"!==i.editorType&&"select"!==i.editorType&&"multiselect"!==i.editorType||!i.options||(e=e.map(function(t){var e=i.options.find(function(e){return"string"==typeof e?t===e:t===e.id});return e&&"string"!=typeof e?e.value:t})),"string"!==i.type?Array.from(new Set(e.map(function(e){return d.toFormat(e,i.type,i.format)}))):e}var i=this;return{inputFilter:{element:{},toHtml:function(e,t){var i=o.uid(),n=e.id.toString();return this.element[n]=a.el("div.dhx_grid-filter__label.dxi.dxi-magnify",{"aria-label":"Type to search",_ref:e.id+"_filter"},[a.el("label",{style:{display:"none"},"aria-label":"Type to search",for:i},"Type to search"),a.el("input",{type:"text",class:"dhx_input dhx_grid-filter",oninput:[r,t.events,e.id,"inputFilter",this],_key:e.id,id:i,value:this.value[e.id]||""})]),this.element[n]},match:function(e){for(var t=e.val,i=e.match,e=e.col,e=d.toFormat(t,e.type,e.format),n="",o=0;o<i.length;o++){var r=i.charCodeAt(o);n+=32<r&&r<48||63===r||90<r&&r<95||124===r?"\\"+i[o]:i[o]}return new RegExp(""+n,"i").test(e)},value:{}},selectFilter:{element:{},toHtml:function(t,e){var i=this,n=t.id.toString(),o=s(t);return this.element[n]=a.el("label.dhx_grid-filter__label.dxi.dxi-menu-down",{_ref:t.id+"_filter"},[a.el("select.dxi.dxi-menu-down",{type:"text",class:"dhx_input dhx_grid-filter dhx_grid-filter--select",onchange:[r,e.events,t.id,"selectFilter",this],_key:t.id},[a.el("option",{value:""},""),o.map(function(e){return""!==(e=null!=e?e:"")&&a.el("option",{value:e,selected:i.value[t.id]===e.toString()},e)})])]),this.element[n]},match:function(e){var t=e.val,i=e.match,e=e.col,e=d.toFormat(t,e.type,e.format);return!i||(e||"boolean"==typeof e)&&e.toString()==i},value:{}},comboFilter:{element:{},toHtml:function(i,n){var e,t,o,r=i.id.toString();return!this.element[r]&&n.events?(e=s(i),t=i.header.filter(function(e){return void 0!==e.filterConfig})[0],(o=t&&t.filterConfig?new l.Combobox(null,Object.assign({},t.filterConfig)):new l.Combobox(null,{})).data.parse(e.map(function(e){return{value:e}})),n.events.on(c.DataEvents.load,function(){o.data.parse(i.$uniqueData.map(function(e){return{value:e}}))}),(this.element[r]=o).events.on("change",function(e){var t;e&&(t=void 0,(Array.isArray(e)?e.find(function(e){return o.data.getItem(e)}):o.data.getItem(e))?(t=o.config.multiselection?o.list.selection.getItem().map(function(e){if(e&&o.data.getItem(e.id))return e.value}):o.list.selection.getItem().value,n.events.fire(u.GridEvents.filterChange,[t,r,"comboFilter"])):n.events.fire(u.GridEvents.filterChange,["",r,"comboFilter"]))}),n.events.on(c.DataEvents.change,function(e,t){"add"!==t&&"update"!==t&&"remove"!==t||(t=s(i),o.data.parse(t.map(function(e){return{value:e}})),o.events.fire(l.ComboboxEvents.change,[o.list.selection.getItem()]))}),n.events.on(c.DataEvents.removeAll,function(){o.data.parse(i.$uniqueData.map(function(e){return{value:e}})),o.events.fire(l.ComboboxEvents.change,[o.list.selection.getItem()])}),o.popup.events.on("afterHide",function(){o.list.selection.getItem()&&(!o.config.multiselection||o.list.selection.getItem().length)||(o.clear(),n.events.fire(u.GridEvents.filterChange,["",r,"comboFilter"]))})):o=this.element[i.id]||new l.Combobox(null,{}),a.inject(o.getRootView())},match:function(e){var t=e.val,i=e.match,n=void 0===i?"":i,i=e.multi,o=void 0!==i&&i,e=e.col,r=d.toFormat(t,e.type,e.format);if(Array.isArray(n)){for(var s=void 0,a=0;a<n.length;a++)if("break"===function(t){if(s=o?!!r.split(", ").find(function(e){return e===n[t]}):n[t]===r)return"break"}(a))break;return!n||!n.length||s}return""===n||r===n},destroy:function(){if(i.content&&i.content.comboFilter.element){var e,t=i.content.comboFilter.element;for(e in t)t[e].destructor(),delete t[e]}},value:{}},sum:{calculate:function(e,t){return t.reduce(function(e,t){return e+(parseFloat(t)||0)},0)},toHtml:function(e,t){t=n(e,t,this.calculate);return e.format||"percent"===e.type?d.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},avg:{calculate:function(e,t){return e.length?t.reduce(function(e,t){return e+t},0)/e.length:null},toHtml:function(e,t){t=n(e,t,this.calculate);return e.format||"percent"===e.type?d.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},min:{calculate:function(e){return e.length?Math.min.apply(Math,e):null},toHtml:function(e,t){t=n(e,t,this.calculate);return e.format||"percent"===e.type?d.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},max:{calculate:function(e){return e.length?Math.max.apply(Math,e):null},toHtml:function(e,t){t=n(e,t,this.calculate);return e.format||"percent"===e.type?d.toFormat(t,e.type,e.format):t?t.toFixed(3):null}},count:{calculate:function(e,t){return t.length},validate:function(i,e){return e.reduce(function(e,t){return void 0!==t[i]&&""!==t[i]&&(isNaN(t)?e.push(1):e.push(t)),e},[])},toHtml:function(e,t){return n(e,t,this.calculate,this.validate)}}}}},function(e,t,i){"use strict";var h=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var f=i(1),p=i(10),g=i(3);t.startResize=function(a,l,e,t){e.targetTouches&&e.preventDefault();var c=(e.targetTouches?e.targetTouches[0]:e).clientX,u=a.config.columns.filter(function(e){return!e.hidden}),d=0;function i(e){var t,i,n=f.findIndex(u,function(e){return e.id===l}),o=(e.targetTouches?e.targetTouches[0]:e).clientX,r=o-a.getRootNode().getBoundingClientRect().left,s=a.config.$totalHeight>a.config.height?g.getScrollbarWidth():0;a.config.leftSplit===n+1&&r>=a.config.width-s-2||(d=d||u[n].$width,t=u[n].minWidth||40,r=u[n].maxWidth,s=o-c,o=h(u),s=d+s,r&&r<=s||s<=t?(s<=t&&(i=t),r<=s&&(i=r)):i=s,o[n].$width=i,o[n].$fixed=!0,a.events.fire(p.GridEvents.resize,[u[n],e]),a.paint())}a.config.$resizing=l;var n=function(){e.targetTouches?(document.removeEventListener("touchmove",i),document.removeEventListener("touchend",n)):(document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",n)),t()};e.targetTouches?(document.addEventListener("touchmove",i),document.addEventListener("touchend",n)):(document.addEventListener("mousemove",i),document.addEventListener("mouseup",n)),a.paint()}},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(10),u=i(3),a=i(21);function l(e,t,i,n,o,r,s){var a,l,c;void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===s&&(s=!1),t.config.$editable||!t.config.selection||u.locateNodeByClassName(e,"dhx_grid-header-cell")||(e&&e.preventDefault(),a=t.selection.getCell(),e=t.config.columns.filter(function(e){return!e.hidden}),t.data.filter(function(e){return!e.hidden}),a&&("vertical"===i?o?(l=1===n?t.data.getItem(t.data.getId(t.data.getLength()-1)):t.data.getItem(t.data.getId(0)),t.selection.setCell(l.id,a.column.id,r,s),t.scrollTo(l.id.toString(),a.column.id.toString())):0<=(c=t.data.getIndex(a.row.id.toString()))+n&&c+n<t.data.getLength()&&(l=t.data.getItem(t.data.getId(c+n)),t.selection.setCell(l.id,a.column.id,r,s),t.scrollTo(l.id.toString(),a.column.id.toString())):o?(l=1===n?e[e.length-1]:e[0],t.selection.setCell(a.row.id,l.id,r,s),t.scrollTo(a.row.id.toString(),l.id.toString())):0<=(c=e.indexOf(a.column))+n&&c+n<e.length&&(t.selection.setCell(a.row.id,e[c+n].id,r,s),t.scrollTo(a.row.id.toString(),e[c+n].id.toString()))))}t.selectionMove=l,t.getKeysHandlers=function(o){var e,n="cell"===o.config.selection||"complex"===o.config.selection||!0===o.config.selection,t={};if(o.getRootView()){var i=null===(e=null===(e=null===(e=o.getRootView())||void 0===e?void 0:e.refs)||void 0===e?void 0:e.grid_body)||void 0===e?void 0:e.el;if(!i)return;t={pageUp:function(e){e.preventDefault(),i.scrollTop-=i.clientHeight},pageDown:function(e){e.preventDefault(),i.scrollTop+=i.clientHeight},home:function(e){e.preventDefault(),i.scrollTop=0},end:function(e){e.preventDefault(),i.scrollTop+=i.scrollHeight}}}return r({enter:function(e){var t,i=u.locateNodeByClassName(e,"dhx_grid-header-cell");i&&(t=i.getAttribute("data-dhx-id"),i=e.target.getAttribute("dhx_resized"),!t||(e=o.getColumn(t))&&a.isSortable(o.config,e)&&!i&&o.events.fire(s.GridEvents.afterSort,[t])),n?(t=o.selection.getCell())&&(!1!==t.column.editable&&o.config.editable||t.column.editable)&&(o.config.$editable?o.editEnd():"boolean"!==t.column.type?o.editCell(t.row.id,t.column.id,t.column.editorType):o.events.fire(s.GridEvents.afterEditEnd,[!t.row[t.column.id],t.row,t.column])):o.config.$editable&&o.editEnd()},space:function(e){var t,i=o.selection.getCell();n&&(null!==(t=null==i?void 0:i.column.editable)&&void 0!==t?t:o.config.editable)&&!o.config.$editable&&i&&"boolean"===i.column.type&&(e.preventDefault(),o.events.fire(s.GridEvents.afterEditEnd,[!i.row[i.column.id],i.row,i.column]))},escape:function(){o.config.$editable&&o.editEnd(!0)},tab:function(e){var t,i,n;o.config.selection&&!u.locateNodeByClassName(e,"dhx_grid-header-cell")&&(o.config.$editable&&o.editEnd(),n=o.selection.getCell(),t=o.config.columns.filter(function(e){return!e.hidden}),n&&(0<=(i=t.indexOf(n.column)+1)&&i<t.length?(e&&e.preventDefault(),o.selection.setCell(n.row.id,t[i].id),o.scrollTo(n.row.id.toString(),t[i].id.toString())):0<=i&&((n=o.data.getIndex(n.row.id.toString())+1)<o.data.getLength()&&(e&&e.preventDefault(),o.selection.setCell(o.data.getId(n),t[0].id),o.scrollTo(o.data.getId(n).toString(),t[0].id.toString())))))},"shift+tab":function(e){var t,i,n;o.config.selection&&!u.locateNodeByClassName(e,"dhx_grid-header-cell")&&(o.config.$editable&&o.editEnd(),n=o.selection.getCell(),t=o.config.columns.filter(function(e){return!e.hidden}),n&&(0<=(i=t.indexOf(n.column)-1)&&i<t.length?(e&&e.preventDefault(),o.selection.setCell(n.row.id,t[i].id),o.scrollTo(n.row.id.toString(),t[i].id.toString())):i<o.data.getLength()&&(0<=(n=o.data.getIndex(n.row.id.toString())-1)&&(e&&e.preventDefault(),o.selection.setCell(o.data.getId(n),t[t.length-1].id),o.scrollTo(o.data.getId(n).toString(),t[t.length-1].id.toString())))))},arrowUp:function(e){l(e,o,"vertical",-1)},"ctrl+arrowUp":function(e){l(e,o,"vertical",-1,!0)},"shift+arrowUp":function(e){o.config.multiselection&&l(e,o,"vertical",-1,!1,!1,!0)},"ctrl+shift+arrowUp":function(e){o.config.multiselection&&l(e,o,"vertical",-1,!0,!1,!0)},arrowDown:function(e){l(e,o,"vertical",1)},"ctrl+arrowDown":function(e){l(e,o,"vertical",1,!0)},"shift+arrowDown":function(e){o.config.multiselection&&l(e,o,"vertical",1,!1,!1,!0)},"ctrl+shift+arrowDown":function(e){o.config.multiselection&&l(e,o,"vertical",1,!0,!1,!0)},arrowRight:function(e){l(e,o,"horizontal",1)},"ctrl+arrowRight":function(e){l(e,o,"horizontal",1,!0)},"shift+arrowRight":function(e){o.config.multiselection&&l(e,o,"horizontal",1,!1,!1,!0)},"ctrl+shift+arrowRight":function(e){o.config.multiselection&&l(e,o,"horizontal",1,!0,!1,!0)},arrowLeft:function(e){l(e,o,"horizontal",-1)},"ctrl+arrowLeft":function(e){l(e,o,"horizontal",-1,!0)},"shift+arrowLeft":function(e){o.config.multiselection&&l(e,o,"horizontal",-1,!1,!1,!0)},"ctrl+shift+arrowLeft":function(e){o.config.multiselection&&l(e,o,"horizontal",-1,!0,!1,!0)}},t)}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(70),l=i(10),f=i(11),c=i(3),u=i(25),p=i(71),d=i(0),h=i(32),o=(s=a.Grid,o(g,s),g.prototype._createView=function(){var i=this;return d.create({render:function(e,t){return p.proRender(e,t,i._htmlEvents,i.selection,i._uid)}},this)},g.prototype._setEventHandlers=function(){var r=this;s.prototype._setEventHandlers.call(this),this.events.on(l.GridEvents.headerCellMouseDown,function(e,t){var i=c.locateNodeByClassName(t,"dhx_header-row"),i=i&&i.getAttribute("aria-rowindex");null!==(i=e.header[Number(i)-1])&&void 0!==i&&i.content||(t.targetTouches?r._touch.timer=setTimeout(function(){r._dragStartColumn(t,e)},r._touch.duration):r._dragStartColumn(t,e))}),this._events.on(l.GridSystemEvents.headerCellTouchMove,function(e,t){r._touch.start&&t.preventDefault(),r._clearTouchTimer()}),this._events.on(l.GridSystemEvents.headerCellTouchEnd,function(){r._touch.start=!1,r._clearTouchTimer()}),this.events.on(l.GridEvents.resize,function(){r._parseColumns(),r._checkFilters()}),this.events.on(l.GridEvents.afterResizeEnd,function(){r.config.autoHeight&&(r.config.data=r.data.map(function(e){var t=u.getMaxRowHeight(e,r.config.columns);return e.$height=u.getCalculatedRowHeight(t,{rowHeight:r.config.rowHeight,padding:8}),e}))}),this.events.on(l.GridEvents.afterRowResize,function(e,t,i){var n=r.data.getItem(e.id),o=n.id,e=n.height,n=n.$height;e&&e!==n&&r.data.update(o,{height:i}),r.data.update(o,{$height:i},!0),r.config.data=r.data.map(function(e){return e}),r.paint()}),this.events.on(l.GridEvents.scroll,function(){r._lazyLoad()}),this.events.on(f.DataEvents.dataRequest,function(e,t){var i=r.data.dataProxy;i&&i.config&&r._prepareDataFromTo(r.data,e,t)})},g.prototype._prepareData=function(e){var t,i=this;return this._adjustColumns(),(Array.isArray(e)||f.isTreeCollection(e)?e:0!==(t=e.getInitialData()||[]).length?t:e.getRawData(0,e.getLength())).map(function(e){var t;return i.config.autoHeight&&void 0===e.height?(t=u.getMaxRowHeight(e,i.config.columns),e.$height=u.getCalculatedRowHeight(t,{rowHeight:i.config.rowHeight,padding:8})||i.config.rowHeight):e.$height=e.height||i.config.rowHeight,e})},g.prototype._prepareDataFromTo=function(e,t,i){var n=this;return e.mapRange(t,i,function(e){var t=u.getMaxRowHeight(e,n.config.columns);return e.$height=u.getCalculatedRowHeight(t,{rowHeight:n.config.rowHeight,padding:8})||n.config.rowHeight,e})},g.prototype._lazyLoad=function(){var i=this,e=this.data.dataProxy;if(e&&e.config){var t,n=this.data.getRawData(0,-1,null,2),o=p.getRenderConfig(this,n,{width:this.config.width,height:this.config.height}),r=e.config.limit,s=r,a=o.currentRows,l=a[0],c=a[a.length-1],u=this.data.getIndex(c.id),n=function(e){for(var t=1;t<a.length;t++)if("firstFilledRow"===e&&!a[t].$empty&&a[t-1].$empty||"firstEmptyRow"===e&&a[t].$empty&&!a[t-1].$empty)return i.data.getIndex(a[t].id)};if(l.$empty)if(c.$empty)t=this.data.getIndex(l.id);else{var d=n("firstFilledRow"),o=d-s;o<0&&(o=0);for(var h=o;h<d;h++)if(this.data.getItem(this.data.getId(h)).$empty){s=d-(t=h);break}}else c.$empty?t=n("firstEmptyRow"):(t=null!==(c=n("firstEmptyRow"))&&void 0!==c?c:this.data.getIndex(l.id),s=(null!==(n=n("firstFilledRow"))&&void 0!==n?n:u)-t);!this.data.isDataLoaded(t,u)&&this.data.events.fire(f.DataEvents.beforeLazyLoad,[])&&(e.updateUrl(null,{from:t,limit:s}),e.config.limit=r,this.data.load(e).then(function(){i.config.autoHeight&&i._prepareDataFromTo(i.data,t,u)}))}},g.prototype._getColumnGhost=function(e){var t=this._container||c.toNode(this._uid),i=t.querySelector(".dhx_header-row"),n=i.querySelector('.dhx_grid-header-cell[data-dhx-id="'+e.id+'"]'),n=Array.from(i.childNodes).indexOf(n)+1,e=t.querySelectorAll('.dhx_grid-header-cell[data-dhx-id="'+e.id+'"]:not(.dhx_span-cell)'),n=t.querySelectorAll(".dhx_grid_data .dhx_grid-cell:nth-child("+n+")"),o=document.createElement("div");return e.forEach(function(e){return o.appendChild(e.cloneNode(!0))}),n.forEach(function(e){return o.appendChild(e.cloneNode(!0))}),o},g.prototype._dragStartColumn=function(e,t){function i(e){return e.classList.contains("dhx_grid-custom-content-cell")}var n=e.target;i(n.parentElement)||i(n.parentElement.parentElement)||!(t.draggable||"column"===this.config.dragItem&&!1!==t.draggable||"both"===this.config.dragItem&&!1!==t.draggable)||c.locateNodeByClassName(e,"dhx_resizer_grip_wrap")||(e.targetTouches&&(this._touch.start=!0),f.dragManager.onMouseDown(e,[t.id],[this._getColumnGhost(t)]))},g);function g(e,t){var i=s.call(this,e,r({autoHeight:!1},t))||this;return i.scrollView=new h.ScrollView(function(){return i.getRootView()},{scrollHandler:function(e){return i.events.fire(l.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])}}),i}t.ProGrid=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.setItem=function(e,t){this._store[e]=t},o.prototype.getItem=function(e){return this._store[e]||null},o);function o(){this._store={}}var r=window.dhxHelpers=window.dhxHelpers||{};r.collectionStore=r.collectionStore||new n,t.collectionStore=r.collectionStore},function(e,l,c){"use strict";(function(e){var n,t=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0});var o,i=c(31),r=c(1),s=c(52),t=(o=i.DataProxy,t(a,o),a.prototype.load=function(){var i=this;return new e(function(e,t){i._timeout?(clearTimeout(i._timeout),i._timeout=setTimeout(function(){s.ajax.get(i.url,{responseType:"text"}).then(e).catch(t),i._cooling=!0},i.config.delay),i._cooling&&(e(null),i._cooling=!1)):(s.ajax.get(i.url,{responseType:"text"}).then(e).catch(t),i._cooling=!0,i._timeout=setTimeout(function(){}))})},a);function a(e,t){var i=o.call(this,e)||this;return i.config=r.extend({from:0,limit:50,delay:50,prepare:0},t),i.updateUrl(e,{from:i.config.from,limit:i.config.limit}),i}l.LazyDataProxy=t}).call(this,c(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(4),n=i(40),r=i(23),i=(s.prototype.getId=function(){return this._selected},s.prototype.getItem=function(){return this._selected?this._data.getItem(this._selected):null},s.prototype.remove=function(e){return!(e=e||this._selected)||!!this.events.fire(n.SelectionEvents.beforeUnSelect,[e])&&(this._data.update(e,{$selected:!1},!0),this._selected=null,this.events.fire(n.SelectionEvents.afterUnSelect,[e]),!0)},s.prototype.add=function(e){this._selected!==e&&!this.config.disabled&&this._data.exists(e)&&(this.remove(),this._addSingle(e))},s.prototype.enable=function(){this.config.disabled=!1},s.prototype.disable=function(){this.remove(),this.config.disabled=!0},s.prototype._addSingle=function(e){this.events.fire(n.SelectionEvents.beforeSelect,[e])&&(this._selected=e,this._data.update(e,{$selected:!0},!0),this.events.fire(n.SelectionEvents.afterSelect,[e]))},s);function s(e,t,i){var n=this;this.events=i||new o.EventSystem(this),this._data=t,this.config=e,this._data.events.on(r.DataEvents.removeAll,function(){n._selected=null}),this._data.events.on(r.DataEvents.change,function(){var e;!n._selected||(e=n._data.getNearId(n._selected))!==n._selected&&(n._selected=null,e&&n.add(e))})}t.Selection=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),d=i(0),a=i(4),h=i(3),l=i(20),s=i(7),c=i(11),f=i(41);var p,o=(p=s.View,o(g,p),g.prototype.paint=function(){p.prototype.paint.call(this),this._isContextMenu&&!this._vpopups&&this._init(),this._vpopups&&this._vpopups.redraw()},g.prototype.disable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!0):this.data.forEach(function(e){e=e.id;return t._setProp(e,"disabled",!0)})},g.prototype.enable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!1):this.data.forEach(function(e){e=e.id;return t._setProp(e,"disabled",!1)})},g.prototype.isDisabled=function(e){e=this.data.getItem(e);if(e)return e.disabled||!1},g.prototype.show=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!1):this.data.forEach(function(e){e=e.id;return t._setProp(e,"hidden",!1)})},g.prototype.hide=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!0):this.data.forEach(function(e){e=e.id;return t._setProp(e,"hidden",!0)})},g.prototype.destructor=function(){this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._vpopups&&this._vpopups.node&&this._vpopups.unmount(),this.unmount()},g.prototype.select=function(e,t){var i=this;if(void 0===t&&(t=!0),!e)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com");t&&this.unselect(),this.data.update(e,{active:!0}),this.data.eachParent(e,function(e){i.data.update(e.id,{active:!0})})},g.prototype.unselect=function(e){var t=this;e?(this.data.update(e,{active:!1}),this.data.eachChild(e,function(e){t.data.update(e.id,{active:!1})})):this.data.forEach(function(e){t.data.update(e.id,{active:!1})})},g.prototype.isSelected=function(e){if(e&&this.data.getItem(e))return!!this.data.getItem(e).active},g.prototype.getSelected=function(){var t=[];return this.data.forEach(function(e){e.active&&t.push(e.id)}),t},g.prototype._customHandlers=function(){return{}},g.prototype._close=function(e){var t=this;this._popupActive&&this.events.fire(f.NavigationBarEvents.beforeHide,[this._activeMenu,e])&&(this._activeParents&&this._activeParents.forEach(function(e){return t.data.exists(e)&&t.data.update(e,{$activeParent:!1})}),"click"===this.config.navigationType&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._popupActive=!1,this._activeMenu=null,this._vpopups.node&&this._vpopups.unmount(),this._vpopups=null,this.events.fire(f.NavigationBarEvents.afterHide,[e]),this.paint())},g.prototype._init=function(){var t=this;this._vpopups=d.create({render:function(){return d.el("div",{"data-dhx-widget-id":t._uid,class:(t._isContextMenu?" dhx_context-menu":"")+" "+(t.config.css?t.config.css.split(" ").map(function(e){return t._isContextMenu?e:e+"--popup-menu"}).join(" "):""),onmousemove:t._handlers.onmousemove,onmouseleave:t._handlers.onmouseleave,onclick:t._handlers.onclick,onmousedown:t._handlers.onmousedown},t._drawPopups())}}),this._vpopups.mount(document.body)},g.prototype._initHandlers=function(){var a=this;this._isActive="click"!==this.config.navigationType,this._handlers=u({onmousemove:function(e){var t,i;!a._isActive||(i=h.locateNode(e))&&(t=i.getAttribute("data-dhx-id"),a._activeMenu!==t&&(a.data.haveItems(t)&&(a._vpopups||a._init(),i=h.getRealPosition(i),a.data.update(t,{$position:i},!1)),a._activeItemChange(t,e)))},onmouseleave:function(e){var t,i;"click"!==a.config.navigationType&&(a._popupActive?(i=h.locateNode(e,"data-dhx-id","relatedTarget"))?(t=i.getAttribute("data-dhx-id"),a.data.getItem(t)||(a._close(e),a._activeItemChange(null,e)),a.data.haveItems(t)&&(a._vpopups||a._init(),i=h.getRealPosition(i),a.data.update(t,{$position:i},!1),a._activeItemChange(t,e))):(a._close(e),a._activeItemChange(null,e)):a._activeItemChange(null,e))},onclick:function(e){var t=h.locateNode(e);if(t){var i=t.getAttribute("data-dhx-id");if(!a.isDisabled(i)){var n=a.data.getItem(i);if(null==n||!n.multiClick)if(a.data.haveItems(i))a._vpopups||a._init(),i!==a._currentRoot&&(a._isActive||(a._isActive=!0),a._setRoot(i),t=h.getRealPosition(t),a.data.update(i,{$position:t},!1),a._activeItemChange(i,e),a.events.fire(f.NavigationBarEvents.click,[i,e]));else switch(null==n?void 0:n.type){case"input":case"title":break;case"menuItem":case"selectButton":a._onMenuItemClick(i,e);break;case"imageButton":case"button":case"customButton":case"customHTML":case"navItem":n.twoState&&a.data.update(n.id,{active:!n.active}),a.events.fire(f.NavigationBarEvents.click,[i,e]),a._close(e);break;default:a._close(e)}}}},onmousedown:function(e){var t,i,n,o,r,s=h.locateNode(e);s&&(t=s.getAttribute("data-dhx-id"),null!=(s=a.data.getItem(t))&&s.multiClick&&(i=365,r=function(){clearTimeout(n),document.removeEventListener("mouseup",r)},(o=function(){a.events.fire(f.NavigationBarEvents.click,[t,e]),50<i&&(i-=55),n=setTimeout(o,i)})(),document.addEventListener("mouseup",r)))}},this._customHandlers())},g.prototype._initEvents=function(){var n=this,e=null;this.data.events.on(f.DataEvents.change,function(){n.paint(),e&&clearTimeout(e),e=setTimeout(function(){var i={};n.data.eachChild(n.data.getRoot(),function(e){var t;e.group&&(e.twoState=!0,(t=i)[(e=e).group]?(e.active&&(t[e.group].active=e.id),t[e.group].elements.push(e.id)):t[e.group]={active:e.active?e.id:null,elements:[e.id]})},!0),n._groups=i,n._resetHotkeys(),e=null,n.paint()},100)}),this.events.on(f.NavigationBarEvents.click,function(e){var t=n.data.getItem(e),e=n.data.getItem(null==t?void 0:t.parent);e&&"selectButton"===e.type&&n.data.update(t.parent,{value:t.value,icon:t.icon}),null!=t&&t.group&&((e=n._groups[t.group]).active&&n.data.update(e.active,{active:!1}),e.active=t.id,n.data.update(t.id,{active:!0}))}),this.events.on(f.NavigationBarEvents.inputChange,function(e,t){n.data.update(e,{value:t})}),this._customInitEvents()},g.prototype._getMode=function(e,t,i){return void 0===i&&(i=!1),e.parent===t?"bottom":"right"},g.prototype._drawMenuItems=function(e,t){var i=this;return void 0===t&&(t=!0),this.data.map(function(e){return i._factory(e,t)},e,!1)},g.prototype._setRoot=function(e){},g.prototype._getParents=function(e,t){var i=[],n=!1,o=this.data.getItem(e),o=o&&o.disabled;return this.data.eachParent(e,function(e){e.id===t?(i.push(e.id),n=!0):n||i.push(e.id)},!o),this._isContextMenu&&this._activePosition&&i.push(t),i},g.prototype._listenOuterClick=function(){this._documentHaveListener||(document.addEventListener("mousedown",this._documentClick,!0),this._documentHaveListener=!0)},g.prototype._customInitEvents=function(){},g.prototype._drawPopups=function(){var a=this,e=this._activeMenu;if(!this._isContextMenu&&!e)return null;var t=this.getRootNode(),t=t&&t.offsetParent&&t.offsetParent.offsetParent,l=null;t&&t.classList.contains("dhx_popup--window")&&t.classList.contains("dhx_popup--window_active")&&(l=2147483647);var c=this._currentRoot;if(this._isContextMenu&&!this._activePosition)return null;e=this._getParents(e,c);return(this._activeParents=e).forEach(function(e){return a.data.exists(e)&&a.data.update(e,{$activeParent:!0},!1)}),e.map(function(r){if(!a.data.haveItems(r))return null;var s=a.data.getItem(r)||a._rootItem;return a._popupActive=!0,d.el("ul",u({class:"dhx_widget dhx_menu"+(a.config.menuCss?" "+a.config.menuCss:""),_key:r,_hooks:{didInsert:function(e){var t=e.el.getBoundingClientRect(),i=t.width,n=t.height,o=a._isContextMenu&&a._activePosition&&r===c?a._activePosition:s.$position,t=a._getMode(s,c,o===a._activePosition),n=h.calculatePosition(o,{mode:t,auto:!0,width:i,height:n});s.$style=u(u({},n),{zIndex:a._activePosition&&a._activePosition.zIndex||l}),e.patch({style:s.$style})},didRecycle:function(e,t){var i,n;a._isContextMenu&&a._activePosition&&r===c&&(i=(n=t.el.getBoundingClientRect()).width,n=n.height,n=h.calculatePosition(a._activePosition,{mode:a._getMode(s,c,!0),width:i,height:n}),s.$style=u(u({},n),{zIndex:a._activePosition.zIndex||l}),t.patch({style:s.$style}))}},tabindex:0,style:s.$style||{position:"absolute"}},{role:"menu","aria-labeledby":s.id,"aria-live":"polite"}),a._drawMenuItems(r))}).reverse()},g.prototype._onMenuItemClick=function(e,t){var i=this.data.getItem(e);i.disabled||(i.twoState&&this.data.update(i.id,{active:!i.active}),this.events.fire(f.NavigationBarEvents.click,[e,t]),this._close(t))},g.prototype._activeItemChange=function(e,t){var i,n=this;this._activeParents&&(i=this._getParents(e,this._currentRoot),this._activeParents.forEach(function(e){n.data.exists(e)&&!i.includes(e)&&n.data.update(e,{$activeParent:!1},!1)})),e&&!this._documentHaveListener&&this._listenOuterClick(),e&&this.data.haveItems(e)?(this._activeMenu===e&&this._popupActive||this.events.fire(f.NavigationBarEvents.openMenu,[e]),clearTimeout(this._currentTimeout),this.paint()):(clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout(function(){return n.paint()},400)),this._activeMenu=e},g.prototype._resetHotkeys=function(){var t=this;this._keyManager.removeHotKey(null,this),this.data.map(function(e){e.hotkey&&t._keyManager.addHotKey(e.hotkey,function(){return t._onMenuItemClick(e.id,null)})})},g.prototype._setProp=function(e,t,i){var n=this;Array.isArray(e)?e.forEach(function(e){return n.data.update(e,((e={})[t]=i,e))}):this.data.update(e,((e={})[t]=i,e))},g);function g(e,t){var s=p.call(this,e,t)||this;return s._isContextMenu=!1,s._documentHaveListener=!1,s.config=r.extend({rootId:"string"==typeof e&&e||s._uid},t),s._rootItem={},!Array.isArray(s.config.data)&&s.config.data&&s.config.data.events?(s.data=s.config.data,s.events=s.data.events,s.events.context=s):(s.events=new a.EventSystem(s),s.data=new c.TreeCollection({rootId:s.config.rootId},s.events)),s._documentClick=function(e){var t,i,n,o,r;s._documentHaveListener&&(t=h.locateNode(e),i=s.data.getRoot(),n=t&&t.getAttribute("data-dhx-id"),o=s.data.getParent(n),r="ontouchstart"in window||navigator.msMaxTouchPoints,document.removeEventListener("mousedown",s._documentClick),s._documentHaveListener=!1,((!r||t)&&s._isContextMenu||i!==o&&o&&s.data.getItem(n))&&o&&s.data.getItem(n)||s._close(e))},s._currentRoot=s.data.getRoot(),s._factory=s._getFactory(),s._initHandlers(),s._keyManager=new l.KeyManager(function(e,t){return t===s._uid}),s._initEvents(),Array.isArray(s.config.data)&&s.data.parse(s.config.data),s}t.Navbar=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=i(168),h=i(169),f=i(170),p=i(171),g=i(172),v=i(173),_=i(174),m=i(175),y=i(176),b=i(177),w=i(33);t.createFactory=function(e){for(var n=e.defaultType,t=e.allowedTypes,o=e.widgetName,e=e.widget,r=new Set,i=0,s=t;i<s.length;i++){var a=s[i];r.add(a)}var l=e.config,c=e.events,u=e.data;return function(e,t){if(e.hidden)return null;if(!(e.type&&"button"!==e.type&&"navItem"!==e.type&&"menuItem"!==e.type||e.value||e.icon||e.html))return null;e.type=e.type||n,r&&!r.has(e.type)&&(e.type=n),"imageButton"===e.type&&"ribbon"!==o&&(e.active=!1),t&&"spacer"!==e.type&&"separator"!==e.type&&"customHTML"!==e.type&&(e.type="menuItem"),u.haveItems(e.id)&&function(e,t,i){switch(e){case"sidebar":case"context-menu":t.$openIcon="right";break;case"toolbar":t.parent===i.getRoot()?t.$openIcon="right":t.$openIcon="bottom";break;case"menu":t.parent!==this.data.getRoot()&&(t.$openIcon="right");break;case"ribbon":var n=i.getItem(t.parent);n&&"block"!==t.type&&("block"===n.type?t.$openIcon="bottom":t.$openIcon="right")}}(o,e,u),"toolbar"===o&&e.items&&e.items.forEach(function(e){e.type||(e.type="menuItem")});var i="customHTML"!==e.type&&function(e,t,i,n){switch(e.type){case"navItem":case"selectButton":return h.navItem(e,i,n.collapsed);case"button":return d.button(e,i);case"title":return y.title(e,i);case"separator":return _.separator(e,i);case"spacer":return m.spacer(e,i);case"input":return g.input(e,t,i);case"imageButton":return p.imageButton(e,i);case"menuItem":return v.menuItem(e,i,n.asMenuItem);case"customHTMLButton":return f.customHTMLButton(e,i,n.asMenuItem);case"datePicker":return b.datePicker(e,t,i);case"block":default:throw new Error("unknown item type "+e.type)}}(e,c,o,{asMenuItem:t,collapsed:"sidebar"!==o||l.collapsed});return w.navbarComponentMixin(o,e,t,i)}}},function(e,t,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),l=i(33);t.button=function(e,t){var i,n,o=e.icon&&!e.value,r=o?" dhx_navbar-count--absolute":" dhx_navbar-count--button-inline";return a.el("button.dhx_button",s({class:l.getNavbarButtonCSS(e,t),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},(n=(i=e).active||i.$activeParent,t={"aria-disabled":i.disabled?"true":"false","aria-label":i.value||i.tooltip||i.id||" "+(i.count||"")},i.items&&(t.id=i.id,t["aria-haspopup"]="menu",n&&(t["aria-expanded"]="true")),t)),[e.icon?l.getIcon(e.icon,"button"):null,e.html?a.el("div.dhx_button__text",{".innerHTML":e.html}):e.value&&a.el("span.dhx_button__text",e.value),0<e.count&&l.getCount(e,r,o),e.value&&e.$openIcon?a.el("span.dhx_button__icon.dhx_button__icon--menu.dxi.dxi-menu-right",{"aria-hidden":"true"}):null,e.loading&&a.el("span.dhx_button__loading",{"aria-hidden":"true"},[a.el("span.dhx_button__loading-icon.dxi.dxi-loading")])])}},function(e,t,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),l=i(33);t.navItem=function(e,t,i){var n,o,r,t=" dhx_"+t+"-button";return a.el("button",s({class:"dhx_button"+t+(e.active||e.$activeParent?t+"--active":"")+(e.disabled?t+"--disabled":"")+(e.$openIcon?t+"--select":"")+(e.circle?t+"--circle":"")+(e.size?" "+t+"--"+e.size:"")+(!e.value&&e.icon?t+"--icon":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},(o={"aria-disabled":(n=e).disabled?"true":"false","aria-label":n.value||" "},r=n.active||n.$activeParent,"selectButton"===n.type||n.items?(o.id=n.id,o["aria-haspopup"]="menu",r&&(o["aria-expanded"]="true")):((n.twoState||r)&&(o["aria-pressed"]=r?"true":"false"),!n.value&&n.icon&&n.tooltip&&(o["aria-label"]=n.tooltip+" "+(n.count||""))),o)),[e.icon&&a.el("span",{class:e.icon+t+"__icon","aria-hidden":"true"}),e.html&&a.el("div",{class:t.trim()+"__html",".innerHTML":e.html}),!e.html&&e.value&&a.el("span",{class:t.trim()+"__text"},e.value),0<e.count&&l.getCount(e,t+"__count",i),e.$openIcon&&a.el("span.dxi.dxi-menu-right",{class:t+"__caret","aria-hidden":"true"})])}},function(e,t,i){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0);t.customHTMLButton=function(e,t,i){var n,i=i?" dhx_button dhx_menu-button":" dhx_button dhx_nav-menu-button";return r.el("button",o({class:"dhx_custom-button"+i+(e.$activeParent?i+"--active":""),"data-dhx-id":e.id,type:"button",".innerHTML":e.html},(i={"aria-disabled":(n=e).disabled?"true":"false"},(n.twoState||n.active||n.$activeParent)&&(i["aria-pressed"]=n.active||n.$activeParent?"true":"false"),i)),e.html?"":e.value)}},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),a=i(33);t.imageButton=function(e,t){var i,n,o="dhx_"+t+"-button-image",t="ribbon"===t;return s.el("button.dhx_button",r({class:o+(e.size?" "+o+"--"+e.size:"")+(!e.value&&e.src?" "+o+"--icon":"")+(t&&e.$openIcon?" "+o+"--select":"")+(e.active?" "+o+"--active":""),"data-dhx-id":e.id,type:"button"},(n={"aria-disabled":(i=e).disabled?"true":"false"},(i.twoState||i.active)&&(n["aria-pressed"]=i.active?"true":"false"),!i.value&&i.src&&i.tooltip&&(n["aria-label"]=i.tooltip+" "+(i.count||"")),n)),[t&&e.value&&e.$openIcon&&s.el("span.dxi.dxi-menu-right",{class:o+"__caret","aria-hidden":"true"}),e.html?s.el("div",{class:o+"__text",".innerHTML":e.html}):e.value&&s.el("span",{class:o+"__text"},e.value),e.src&&s.el("span",{class:o+"__image",style:{backgroundImage:"url("+e.src+")"},role:"presentation"}),0<e.count&&a.getCount(e,o+"__count",!0)])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(41);function r(e,t){e.fire(o.NavigationBarEvents.inputBlur,[t])}function s(e,t){e.fire(o.NavigationBarEvents.inputFocus,[t])}function a(e,t,i){e.fire(o.NavigationBarEvents.inputChange,[t,i.target.value])}t.input=function(t,i,e){return n.el(".dhx_form-group.dhx_form-group--no-message-holder"+(t.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_"+e+"__input",{style:{width:t.width||"200px"},role:"presentation"},[t.label&&n.el("label.dhx_label",{for:t.id,style:{maxWidth:t.hiddenLabel?null:"100%"}},t.label),n.el(".dhx_input__wrapper",{role:"presentation"},[n.el("input.dhx_input",{id:t.id,placeholder:t.placeholder,class:t.icon?"dhx_input--icon-padding":"",autocomplete:t.autocomplete?"on":"off",value:t.value,disabled:t.disabled,onblur:[r,i,t.id],onfocus:[s,i,t.id],oninput:[a,i,t.id],"data-dhx-id":t.id,_hooks:{didInsert:function(e){i&&i.fire(o.NavigationBarEvents.inputCreated,[t.id,e.el])}},_key:t.id,"aria-label":t.label||t.helpMessage||"type "+(t.placeholder?"text like "+t.placeholder:"text")}),t.icon?n.el(".dhx_input__icon",{class:t.icon,"aria-hidden":"true"}):null])])}},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),a=i(33);t.menuItem=function(e,t,i){var n,o=i?" dhx_menu-button":" dhx_nav-menu-button";return s.el("button",r({class:"dhx_button"+o+(e.disabled?o+"--disabled":"")+(e.active||e.$activeParent?o+"--active":""),disabled:e.disabled,"data-dhx-id":e.id,type:"button"},(o={role:"menuitem","aria-disabled":(n=e).disabled?"true":"false"},n.items&&(o["aria-haspopup"]="true"),o)),i?[e.icon||e.value||e.html?s.el("span.dhx_menu-button__block.dhx_menu-button__block--left",[e.icon&&s.el("span.dhx_menu-button__icon",{class:e.icon}),e.html?s.el("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&s.el("span.dhx_menu-button__text",e.value)]):null,0<e.count||e.hotkey||e.items?s.el("span.dhx_menu-button__block.dhx_menu-button__block--right",[0<e.count&&a.getCount(e," dhx_menu-button__count",!1),e.hotkey&&s.el("span.dhx_menu-button__hotkey",e.hotkey),e.items&&s.el("span.dhx_menu-button__caret.dxi.dxi-menu-right")]):null]:[e.icon&&s.el("span.dhx_menu-button__icon",{class:e.icon}),e.html?s.el("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&s.el("span.dhx_nav-menu-button__text",e.value)])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.separator=function(e,t){return null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spacer=function(e,t){return null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);t.title=function(e,t){return n.el("span",{class:"dhx_navbar-title dhx_navbar-title--"+t,"data-dhx-id":e.id,".innerHTML":e.html,"aria-label":e.value||""},e.html?null:e.value)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),s=i(38),a=i(8),l=i(41);function c(e,t){e.fire(l.NavigationBarEvents.inputBlur,[t])}function u(e,t,i,n){r.awaitRedraw().then(function(){return i.show(n.target)}),e.fire(l.NavigationBarEvents.inputFocus,[t])}t.datePicker=function(t,i,e){var n=new a.Popup,o=new s.Calendar(null,{dateFormat:t.dateFormat||"%d/%m/%y",value:t.value,css:"dhx_widget--bordered"});return n.attach(o),o.events.on("change",function(){n.hide(),i.fire(l.NavigationBarEvents.inputChange,[t.id,o.getValue()])}),r.el(".dhx_form-group.dhx_form-group--no-message-holder"+(t.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_"+e+"__input",{style:{width:t.width||"200px"},role:"presentation"},[t.label&&r.el("label.dhx_label",{for:t.id,style:{maxWidth:t.hiddenLabel?null:"100%"}},t.label),r.el(".dhx_input__wrapper",{role:"presentation"},[r.el("input.dhx_input",{id:t.id,placeholder:t.placeholder,class:t.icon?"dhx_input--icon-padding":"",value:o.getValue(),disabled:t.disabled,onblur:[c,i,t.id],onfocus:[u,i,t.id,n],"data-dhx-id":t.id,readOnly:!0,_hooks:{didInsert:function(e){i&&i.fire(l.NavigationBarEvents.inputCreated,[t.id,e.el])}},_key:t.id,"aria-label":t.label||t.helpMessage||"type "+(t.placeholder?"text like "+t.placeholder:"text")}),t.icon?r.el(".dhx_input__icon",{class:t.icon,"aria-hidden":"true"}):null])])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(87),l=i(32),c=i(0),u=i(3),d=i(17),o=(s=a.Toolbar,o(h,s),h.prototype._draw=function(e){var i=this,t=this.data.getLength()?this.data.reduce(function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}},0)+24:null,e=[c.el("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},{role:"toolbar","aria-label":e||""}),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",function(e){var t;9!==e.which||(t=u.locateNode(document.activeElement))&&(e=t.getAttribute("data-dhx-id"),null!=(e=i.data.getItem(e))&&e.tooltip&&d.tooltip(e.tooltip,{node:t,position:d.Position.bottom,force:!0}))},!0)}}}),this.data.map(function(e){return i._factory(e)},this.data.getRoot(),!1))];return c.el("nav.dhx_widget.dhx_toolbar",{style:{height:t},class:this.config.css||""},this.scrollView&&this.scrollView.config.enable?[].concat(this.scrollView.render(e)):e)},h);function h(e,t){var i=s.call(this,e,t)||this;return i.scrollView=new l.ScrollView(function(){return i.getRootView()}),i}t.ProToolbar=o},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(180)),n(t(181))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(3),a=i(17),l=i(22),o=(r=l.Navbar,o(c,r),c.prototype.showAt=function(e,t){void 0===t&&(t="bottom"),e instanceof MouseEvent?(this._close(e),this._changeActivePosition({left:window.pageXOffset+e.x+1,right:window.pageXOffset+e.x+1,top:window.pageYOffset+e.y,bottom:window.pageYOffset+e.y,zIndex:a.getZIndex(e.currentTarget)},t)):window.TouchEvent&&e instanceof TouchEvent?(this._close(e),this._changeActivePosition({left:window.pageXOffset+e.touches[0].clientX,right:window.pageXOffset+e.touches[0].clientX,top:window.pageYOffset+e.touches[0].clientY,bottom:window.pageYOffset+e.touches[0].clientY,zIndex:a.getZIndex(e.currentTarget)},t)):(e instanceof HTMLElement||"string"==typeof e)&&(e=s.toNode(e),this._changeActivePosition(s.getRealPosition(e),t))},c.prototype._getFactory=function(){return l.createFactory({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"context-menu"})},c.prototype._close=function(e){var t=this;this.events.on(l.NavigationBarEvents.afterHide,function(){t._activeMenu=null,t._changeActivePosition(null,null)}),r.prototype._close.call(this,e)},c.prototype._getMode=function(e,t,i){return i?this._mode:"right"},c.prototype._changeActivePosition=function(e,t){this._activePosition=e,this._mode=t,this._listenOuterClick(),this.paint()},c);function c(){var e=null!==r&&r.apply(this,arguments)||this;return e._isContextMenu=!0,e}t.ContextMenu=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(0),a=i(22),o=(r=a.Navbar,o(l,r),l.prototype._getFactory=function(){return a.createFactory({widget:this,defaultType:"menuItem",allowedTypes:["navItem","menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"menu-nav"})},l.prototype._draw=function(){return s.el("ul.dhx_widget",{"data-dhx-widget-id":this._uid,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,class:"dhx_menu-nav "+(this.config.css||"")},this._drawMenuItems(this.data.getRoot(),!1))},l);function l(e,t){var i=r.call(this,e,t)||this;return i.mount(e,s.create({render:function(){return i._draw()}})),i}t.Menu=o},function(e,t,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),a=i(26),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.dataStore,n=e.spreadsheet,o=e.grid;t&&(this._index||(this._index=s.getCellIndex(t,o).col-1),(e=i.getPage(this._sheetName)).addColumn(this._index,1),o=(t=e.getMeta()).cols,t=void 0===(i=t.merged)?[]:i,this._prev={cols:r(o)},i=o.slice(0,this._index),o=o.slice(this._index),e.setMeta({cols:r(i,[{width:120}],o)}),n._updateGridSizes(),a.updateSpans(1,0,this._index,e)&&(this._prev.merged=r(t),n._updateGridState()))},n.prototype.undo=function(){var e=this.config,t=e.dataStore,e=e.spreadsheet,t=t.getPage(this._sheetName);t.removeColumn(this._index,1),t.setMeta(this._prev),e._updateGridSizes(),this._prev.merged&&e._updateGridState()},n);function n(e){this.config=e,this._sheetName=null===(e=e.spreadsheet)||void 0===e?void 0:e.getActiveSheet().name}t.AddColumn=i},function(e,t,i){"use strict";var s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=i(2),l=i(26),i=(n.prototype.do=function(){var e,t=this.config,i=t.cell,n=t.grid,o=t.dataStore,r=t.spreadsheet;i&&(this._index||(this._index=a.getCellIds(i,n).row),(e=o.getPage(this._sheetName)).addRow(this._index,1),i=(t=e.getMeta()).rows,t=void 0===(o=t.merged)?[]:o,this._prev={rows:s(i)},o=i.slice(0,this._index),i=i.slice(this._index),e.setMeta({rows:s(o,[{height:null==n?void 0:n.config.rowHeight}],i)}),r._updateGridSizes(),l.updateSpans(0,1,this._index,e)&&(this._prev.merged=s(t),r._updateGridState()))},n.prototype.undo=function(){var e=this.config,t=e.dataStore,e=e.spreadsheet,t=t.getPage(this._sheetName);t.removeRow(this._index,1),t.setMeta(this._prev),e._updateGridSizes(),this._prev.merged&&e._updateGridState()},n);function n(e){this.config=e,this._sheetName=null===(e=e.spreadsheet)||void 0===e?void 0:e.getActiveSheet().name}t.AddRow=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),i=(n.prototype.do=function(){var e=this.config,t=e.sheets,i=e.val;if(!t.find(function(e){return e.value===i})){this._store.addPage(i);for(var n=[],o=[],r=0;r<this.config.spreadsheet.config.colsCount;r++)n.push({width:120});for(r=0;r<this.config.spreadsheet.config.rowsCount;r++)o.push({height:this.config.spreadsheet._grid.config.rowHeight});this._store.getPage(i).setMeta({focusedCell:{cell:"A1"},selectedCells:["A1"],cols:n,rows:o});e=this.config.spreadsheet.getActiveSheet().id,e=t.getIndex(e);this._id=t.add({value:i,id:this._id||null},e+1),this.config.spreadsheet.events.fire(s.SpreadsheetEvents.afterSheetAdd,[{name:i,id:this._id}]),this.config.spreadsheet._changeSheet(this._id),this.config.grid.paint()}},n.prototype.undo=function(){this._store.removePage(this.config.val),this.config.sheets.remove(this._id),this.config.spreadsheet._changeSheet(this.config.prev)},n);function n(e){this.config=e,this._store=e.dataStore}t.AddSheet=i},function(e,t,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),a=i(26),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,n=e.spreadsheet,o=e.dataStore;t&&(e=s.getCellIds(t,i).col,this._index||(this._index=e),i=(t=o.getPage(this._sheetName)).getSize()[0],this._cells=t.getCellRange(0,e,i-1,e),t.removeColumn(this._index,1),i=(o=t.getMeta()).cols,e=o.merged,this._prev={cols:r(i)},o=i.slice(0,this._index),i=i.slice(this._index+1),i=r(o,i),t.setMeta({cols:i}),a.updateSpans(-1,0,this._index,t)&&(this._prev.merged=r(e),n._updateGridState()))},n.prototype.undo=function(){var e=this.config,t=e.dataStore,e=e.spreadsheet,i=t.getPage(this._sheetName);i.addColumn(this._index,1);for(var n=0;n<this._cells.length;n++)this._cells[n]&&i.setCell(n,this._index,this._cells[n]);i.setMeta(this._prev),e._updateGridSizes(),this._prev.merged&&e._updateGridState()},n);function n(e){this.config=e,this._sheetName=null===(e=e.spreadsheet)||void 0===e?void 0:e.getActiveSheet().name}t.DeleteColumn=i},function(e,t,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),a=i(26),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.dataStore,n=e.grid,o=e.spreadsheet;t&&(e=s.getCellIds(t,n).row,this._row||(this._row=e),n=(t=i.getPage(this._sheetName)).getSize()[1],this._cells=t.getCellRange(e,0,e,n-1),t.removeRow(this._row,1),e=(i=t.getMeta()).rows,i=void 0===(n=i.merged)?[]:n,this._prev={rows:r(e)},n=e.slice(0,this._row),e=e.slice(this._row+1),e=r(n,e),t.setMeta({rows:e}),o._updateGridSizes(),a.updateSpans(0,-1,this._row,t)&&(this._prev.merged=r(i),o._updateGridState()))},n.prototype.undo=function(){var e=this.config,t=e.dataStore,e=e.spreadsheet,i=t.getPage(this._sheetName);i.addRow(this._row,1);for(var n=0;n<this._cells.length;n++)this._cells[n]&&i.setCell(this._row,n,this._cells[n]);i.setMeta(this._prev),e._updateGridSizes(),this._prev.merged&&e._updateGridState()},n);function n(e){this.config=e,this._sheetName=null===(e=e.spreadsheet)||void 0===e?void 0:e.getActiveSheet().name}t.DeleteRow=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=(r.prototype.do=function(){var e=this.config,t=e.sheets,i=e.spreadsheet,n=e.val,e=this._store.getPage(n);this._data=e?e.serialize(!0):[],this._sheetMeta=e?e.getMeta():{},this._store.removePage(n);e=this._index=t.getIndex(this._deletedSheet.id);n===i.getActiveSheet().name&&i._changeSheet(t.getId(1===e?e+1:e-1)),t.remove(this._deletedSheet.id),this.config.grid.paint()},r.prototype.undo=function(){var e=this.config,t=e.sheets,i=e.spreadsheet,e=e.val;this._store.addPage(e),t.add(this._deletedSheet,this._index);e=this._store.getPage(e);e.setMeta(this._sheetMeta),e.parse(this._data),this._store.getStore().recalculate(!0,e.getContext()),i._changeSheet(this._deletedSheet.id),this.config.grid.paint()},r);function r(e){this.config=e,this._store=e.dataStore,this._deletedSheet=n({},e.sheets.getItem(e.prev))}t.DeleteSheet=o},function(e,t,i){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=i(2),d=i(5),h=i(42),i=(n.prototype.do=function(){var o=this,e=this.config,t=e.spreadsheet,r=e.grid,i=e.action,e=t.events;if(!this._actions.length){var s=this.config.val,a=0;if(Array.isArray(s)&&(s=s[a]),!e.fire(d.SpreadsheetEvents.beforeAction,[i,u.cleanActionConfig(this.config)]))return;t.eachCell(function(e){var t=u.getCellIds(e,r),i=t.row,n=t.col;null!=r&&r.isRowHidden(i+1)||(t=u.getCellIds(e,r),e=new h.actions[o.config.action](c(c({},o.config),{row:i||t.row,col:n||t.col,cell:e,val:s})),o._actions.push(e),Array.isArray(o.config.val)&&(a+1>=o.config.val.length?a=0:a+=1,s=o.config.val[a]))},this.config.cell)}for(var n=0,l=this._actions;n<l.length;n++)l[n].do();e.fire(d.SpreadsheetEvents.afterAction,[i,u.cleanActionConfig(this.config)])},n.prototype.undo=function(){var e=this.config,t=e.spreadsheet,i=e.action,n=t.events;if(n.fire(d.SpreadsheetEvents.beforeAction,[i,u.cleanActionConfig(this.config)])){for(var o=0,r=this._actions;o<r.length;o++)r[o].undo();e=this.config.cell.split(":")[0];t.selection.setSelectedCell(e),n.fire(d.SpreadsheetEvents.afterAction,[i,u.cleanActionConfig(this.config)])}},n);function n(e){this.config=e,this._actions=[]}t.GroupAction=i},function(e,t,i){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var l=i(2),c=i(42),i=(n.prototype.do=function(){var i,n,o=this,e=this.config,t=e.spreadsheet,r=e.grid,e=e.cell;this._actions.length||(i=l.getCellIds(e,r).start.row,n=e.split(":")[0],t.eachCell(function(e){var t=l.getCellIds(e,r),e=t.row,t=t.col;e===i&&(t=new c.actions[o.config.action](a(a({},o.config),{row:e,col:t,cell:n})),o._actions.push(t))},this.config.cell));for(var s=this._actions.length-1;0<=s;s--)this._actions[s].do()},n.prototype.undo=function(){for(var e=0;e<this._actions.length;e++)this._actions[e].undo()},n);function n(e){this.config=e,this._actions=[]}t.GroupColAction=i},function(e,t,i){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var l=i(2),c=i(42),i=(n.prototype.do=function(){var i,n,o=this,e=this.config,t=e.cell,r=e.grid,e=e.spreadsheet;this._actions.length||(i=l.getCellIds(t,r).start.col,n=t.split(":")[0],e.eachCell(function(e){var t=l.getCellIds(e,r),e=t.row,t=t.col;t===i&&(t=new c.actions[o.config.action](a(a({},o.config),{row:e,col:t,cell:n})),o._actions.push(t))},this.config.cell));for(var s=this._actions.length-1;0<=s;s--)this._actions[s].do()},n.prototype.undo=function(){for(var e=this._actions.length-1;0<=e;e--)this._actions[e].undo()},n);function n(e){this.config=e,this._actions=[]}t.GroupRowAction=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=i(5),i=(n.prototype.do=function(){var e=this.config,t=e.val,i=e.cell,n=e.grid,e=o.getCellIds(i,n),n=e.row,e=e.col;this._page.setCell(n,e,{locked:t}),t?this.config.editLine.lock():this.config.editLine.unlock(),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterFocusSet,[i])},n.prototype.undo=function(){var e=this.config,t=e.val,i=e.cell,n=e.grid,e=o.getCellIds(i,n),n=e.row,e=e.col;this._page.setCell(n,e,{locked:!t}),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterFocusSet,[i]),t?this.config.editLine.unlock():this.config.editLine.lock()},n);function n(e){this.config=e,this._store=e.dataStore,this._page=e.page}t.LockCell=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),r=i(5),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,n=o.getCellIds(t,i),e=n.row,n=n.col,i=o.getCellInfo(t,this._page,i);i.locked||(this.config.prev=i.css,this._page.setCell(e,n,{css:""}),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterStyleChange,[t,{}]),this.config.grid.paint())},n.prototype.undo=function(){var e=this.config,t=e.cell,i=e.grid,n=o.getCellIds(t,i),e=n.row,n=n.col;o.getCellInfo(t,this._page,i).locked||(this._page.setCell(e,n,{css:this.config.prev}),this.config.spreadsheet.events.fire(r.SpreadsheetEvents.afterStyleChange,[t,{}]))},n);function n(e){this.config=e,this._page=e.page}t.RemoveCellStyles=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.do=function(){var e=this.config,t=e.sheets,i=e.dataStore,n=e.val,o=e.prev,r=t.getItem(o),e=this.config.spreadsheet.getActiveSheet().name;r.prevValue||t.update(r.id,{prevValue:r.value}),e===r.prevValue&&(this.config.spreadsheet._activeSheetName={name:n,id:r.id}),i.renamePage(r.prevValue,n),t.update(o,{value:n,prevValue:r.prevValue}),this.config.grid.paint(),this.config.spreadsheet.selection.setFocusedCell(this.config.spreadsheet.selection.getFocusedCell())},o.prototype.undo=function(){var e=this.config,t=e.sheets,i=e.dataStore,n=e.val,o=e.prev,e=t.getItem(o);i.renamePage(n,e.prevValue),this.config.spreadsheet.getActiveSheet().name===n&&(this.config.spreadsheet._activeSheetName={name:n,id:e.id}),t.update(o,{value:e.prevValue,prevValue:e.prevValue}),this.config.grid.paint(),this.config.spreadsheet.selection.setFocusedCell(this.config.spreadsheet.selection.getFocusedCell())},o);function o(e){this.config=e,this.page=e.activePage}t.RenameSheet=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(13),c=i(2),u=i(5),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,n=this.config.val,o=c.getCellIds(t,i),r=o.row,s=o.col,a=l.getFormat(n),n=a&&a.mask||n,e=c.getCellInfo(t,this._page,i);e.locked||this.config.spreadsheet.events.fire(u.SpreadsheetEvents.beforeFormatChange,[t,n])&&(o=e.format,this.config.prev=null===(i=e.format)||void 0===i?void 0:i.id,i=this.config.spreadsheet.getFormula(t),"@"!==(null==o?void 0:o.mask)&&"@"===n&&this._page.setValue(r,s,""+(i?"="+i:e.value||""),1),"@"===(null==o?void 0:o.mask)&&"@"!==n&&this._page.setValue(r,s,i?"="+i:e.value,0),this._page.setCell(r,s,{format:a||l.getFormat("common")}),this.config.spreadsheet.events.fire(u.SpreadsheetEvents.afterFormatChange,[t,n]),this.config.grid.paint())},n.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t,this.config.prev=e,this.do(),this.config.val=e,this.config.prev=t},n);function n(e){this.config=e,this._page=e.page}t.SetCellFormat=i},function(e,t,i){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var u=i(26),d=i(2),h=i(5),i=(n.prototype.do=function(){var e,t,i,n=this.config,o=n.cell,r=n.val,s=void 0===r?"":r,a=n.grid;o&&(r=(e=d.getCellIds(o,a)).row,n=e.col,a=(e=d.getCellInfo(o,this._page,a)).locked,e=void 0===(e=e.css)?"":e,a||("string"!=typeof s&&(t=s.multiline,a=d.getStylesObject(e.split("dhx_spreadsheet_link").join(" ")),Array.isArray(s)&&(s=s[0]),i=void 0,"string"!=typeof s&&(s=i=this.config.replace?dhx.css.add(l({},s)):dhx.css.add(l(l({},a),d.convertStyles(s)))),s=(e.includes("dhx_spreadsheet_link")?"dhx_spreadsheet_link ":"")+i),null!==(i=this.config.spreadsheet)&&void 0!==i&&i.events.fire(h.SpreadsheetEvents.beforeStyleChange,[o,dhx.css.get(s)])&&(t&&(this._page_rows=c(this._page.getMeta().rows),u.setAutoHeightToRow(o,this.config.grid,this._page,t)&&this.config.spreadsheet._updateGridState()),this.config.prev=e,this._page.setCell(r,n,{css:s}),this.config.spreadsheet.events.fire(h.SpreadsheetEvents.afterStyleChange,[o,dhx.css.get(s)]),null!==(s=this.config.grid)&&void 0!==s&&s.paint())))},n.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t||"",this.config.prev=e||"",this.do(),this._page_rows&&(this._page.setMeta({rows:this._page_rows}),this.config.spreadsheet._updateGridState()),this.config.val=e,this.config.prev=t},n);function n(e){this.config=e,this._page=e.page}t.SetCellStyle=i},function(e,t,i){"use strict";var f=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var p=i(16),g=i(26),v=i(27),_=i(13),m=i(2),y=i(5),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,n=m.getCellIds(t,i),o=n.row,r=n.col,s=this.config.val,a=this.config.spreadsheet;if(!a.isLocked(t)&&a.events.fire(y.SpreadsheetEvents.beforeValueChange,[t,s])){e=a.getFormula(t);this.config.prev=e?"="+e:a.getValue(t);var l,c,n=m.getCellInfo(t,this._page,i),e=n.format;n.link;if("string"==typeof s&&s.startsWith("=")&&"@"!==(null==e?void 0:e.mask)){for(var u=s.split("").reduce(function(e,t){return"("===t?e+1:e},0),d=s.split("").reduce(function(e,t){return")"===t?e+1:e},0);d<u;)s+=")",d++;try{this._page.setValue(+o,+r,s)}catch(e){}}else"date"===(null==e?void 0:e.id)&&s?(c=void 0,c=_.isNumeric(s)?+s:p.stringToDate(s,e.dateFormat,!0)?v.getExcelDateFromJs(p.stringToDate(s,e.dateFormat)):s,this.config.val=c,this._page.setValue(+o,+r,this.config.val)):"time"===(null==e?void 0:e.id)&&s?(c=void 0,c=_.isNumeric(s)?+s:"string"==typeof(l=v.timeStringToJS(s))?l:v.getExcelDateFromJs(l),this.config.val=c,this._page.setValue(+o,+r,this.config.val)):"percent"===(null==e?void 0:e.id)?(l=_.getCleanValue(s),c=+(parseFloat(l)/100).toFixed(4),this._page.setValue(+o,+r,c||"")):"text"!==(null==e?void 0:e.id)?(c=parseFloat(s),this._page.setValue(+o,+r,c==s?c:s)):this._page.setValue(+o,+r,s,1);this._page.setCell(o,r,{nextValue:void 0,edited:!1,format:e||_.getDefaultFormats().filter(function(e){return"common"===e.id})[0]});i=m.getCellInfo(t,this._page,i).css,i=void 0===i?"":i;!i||(h=(dhx.css.get(i)||{}).multiline)&&(this._page_rows=f(this._page.getMeta().rows),g.setAutoHeightToRow(t,this.config.grid,this._page,h)&&this.config.spreadsheet._updateGridState());var h=m.doesContainUrl(s);h&&this._page.setCell(o,r,{css:m.isURL(s)?"dhx_spreadsheet_link "+i:i,link:{href:h}}),s||this._page.setCell(o,r,{css:null==i?void 0:i.split("dhx_spreadsheet_link ").join(""),link:null}),this._page.setMeta({inserted:!0}),this.config.grid.paint(),a.events.fire(y.SpreadsheetEvents.afterValueChange,[this.config.cell,s])}},n.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this._page_rows&&(this._page.setMeta({rows:this._page_rows}),this.config.spreadsheet._updateGridState()),this.config.val=t,this.config.prev=e,this.do(),this.config.val=e,this.config.prev=t},n);function n(e){this.config=e,this._page=e.page}t.SetCellValue=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.do=function(){var e=this.config.spreadsheet;this._data=e.serialize(),e.parse([])},o.prototype.undo=function(){this.config.spreadsheet.parse(this._data)},o);function o(e){this.config=e}t.Clear=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.do=function(){var e=this.config,t=e.val,e=e.spreadsheet;this._page=this._store.getPage(t),this._data=this._page?this._page.serialize(!0):[],this._page.parse([]),e._math.recalculate(),e.selection.setFocusedCell(e.selection.getSelectedCell()),e._grid.paint()},o.prototype.undo=function(){var e=this.config.spreadsheet;this._page.parse(this._data),this._store.getStore().recalculate(!0,this._page.getContext()),e.selection.setFocusedCell(e.selection.getSelectedCell()),e._math.recalculate(),e._grid.paint()},o);function o(e){this.config=e,this._store=e.dataStore}t.ClearSheet=n},function(e,t,i){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var v=i(2),_=i(5),i=(n.prototype.do=function(){var t=this,e=this.config,n=e.grid,i=e.cell,o=e.mouseEvent;if(this._colsAfterResize)n.setColumns(this._colsAfterResize);else{var r=o.clientX,e=i.split(":"),o=e[0],i=e[1],e=v.getCellIds(o,n),s=v.getCellIds(i||o,n);this._prevCols=n.config.columns.map(function(e){return p({},e)});var a=g(n.config.columns),l=n.getRootNode();l.style.cursor="col-resize";for(var c=[],u=e.col+1;u<=s.col+1;u++){var d=a[u];d.$initWidth=n.config.columns[u].width,c.push(d)}var h=function(e){var i=e.clientX-r;c.forEach(function(e){var t=e.$initWidth+i/c.length;e.width=t<=20?20:t}),n.setColumns(a),n.paint()},f=function(e){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f),l.style.cursor="unset",t._colsAfterResize=a,t.config.spreadsheet.events.fire(_.SpreadsheetEvents.afterAction,[_.Actions.resizeCol,v.cleanActionConfig(t.config)])};document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),n.paint()}},n.prototype.undo=function(){this.config.grid.setColumns(this._prevCols)},n);function n(e){this.config=e}t.ResizeCol=i},function(e,t,i){"use strict";var f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var g=i(2),v=i(5),i=(n.prototype.do=function(){var n=this,e=this.config,o=e.grid,t=e.cell,i=e.mouseEvent;if(this._rowsAfterResize)this._rowsAfterResize.forEach(function(e){var t=e.id,e=e.height;o.data.update(t,{height:e,changedByUser:!0})});else{var r=i.clientY,e=t.split(":"),i=e[0],t=e[1],e=g.getCellIds(i,o),s=g.getCellIds(t||i,o),a=p(o.data.serialize()),l=o.getRootNode();l.style.cursor="row-resize";for(var c=[],u=e.row;u<=s.row;u++)!function(t){var e=a.find(function(e){return+e.id-1===t});if(!e)return;e.height||(e.height=o.config.rowHeight),c.push(e)}(u);this._prevRows=c.map(function(e){return f({},e)}),this._rowsAfterResize=c.map(function(e){return f({},e)});var d=function(e){var i=e.clientY-r;c.forEach(function(t){var e=t.height+i/c.length,e=e<=10?10:e;o.data.update(t.id,{height:e,changedByUser:!0}),n._rowsAfterResize.find(function(e){return e.id===t.id}).height=e}),o.paint()},h=function(e){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h),l.style.cursor="unset",n.config.spreadsheet.events.fire(v.SpreadsheetEvents.afterAction,[v.Actions.resizeRow,g.cleanActionConfig(n.config)])};document.addEventListener("mousemove",d),document.addEventListener("mouseup",h),o.paint()}},n.prototype.undo=function(){var i=this;this._prevRows.forEach(function(e){var t=e.id,e=e.height;i.config.grid.data.update(t,{height:e,changedByUser:!0})})},n);function n(e){this.config=e}t.ResizeRow=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),i=(n.prototype.do=function(){var e=this.config,t=e.val,i=e.cell,n=e.grid,o=r.getCellIds(i,n),e=o.row,n=o.col,o=this._page.getCell(e,n);this._prevState[i]=(null==o?void 0:o.editor)||null,this._page.setCell(e,n,{editor:t?{type:"select",options:t}:null}),this.config.grid.paint()},n.prototype.undo=function(){var e=this.config,t=e.cell,i=e.grid,e=r.getCellIds(t,i),i=e.row,e=e.col;this._page.setCell(i,e,{editor:this._prevState[t]}),this.config.grid.paint()},n);function n(e){this.config=e,this._page=e.page,this._prevState={}}t.SetValidation=i},function(e,t,i){"use strict";var E=this&&this.__assign||function(){return(E=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},S=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var I=i(2),i=(n.prototype.do=function(){var m=this,e=this.config,y=e.dir,t=e.cell,b=e.spreadsheet,w=e.page,x=e.dataStore,C=e.grid;t.split(",").forEach(function(e){var t=w;if((n=e).includes("!")){var i=n.split("!"),n=i[1];if(!(t=x.getPage(i[0])))return}m._data[e]=t.serialize(!0);var i=t.getSize(),e=i[0],o=i[1],i=I.getCellIds(n,C);if(i.end){for(var n=i.start,i=i.end,r=b.config.topSplit||n.row,s=e-1<i.row?e-1:i.row,n=t.getCellRange(r,n.col,s,n.col),a=S(n),l=n.sort(function(e,t){e=null==e?void 0:e.value,t=null==t?void 0:t.value;return"string"==typeof e&&(e=e.toLowerCase()),"string"==typeof t&&(t=t.toLowerCase()),!e&&"number"!=typeof e&&t?1:!t&&"number"!=typeof t&&e?-1:"string"==typeof e&&"number"==typeof t?-y:"number"==typeof e&&"string"==typeof t?y:e<t?-y:t<e?y:0}),c=r,u=0,d=[];c<s+1;){for(var h=l[u],f=a.indexOf(h)+r,p=[],g=0;g<o;g++){var v=t.getCell(f,g)||{},_=t.getValue(f,g,!0);"string"==typeof _&&_.startsWith("=")&&(_=b._math.transposeMath(_,c-f,0,t.getContext())),p.push([c,g,E(E({},v),{value:_})])}d.push.apply(d,p),c++,u++}n=t.serialize(!0).filter(function(t){return!d.find(function(e){return e[0]===t[0]&&e[1]===t[1]})});t.parse(S(n,d))}}),this.config.grid.paint()},n.prototype.undo=function(){var n=this,e=this.config,t=e.grid,o=e.page,r=e.dataStore;Object.keys(this._data).forEach(function(e){var t=o;if(e.includes("!")){var i=e.split("!");if(!(t=r.getPage(i[0])))return}t.parse(n._data[e])}),t.paint()},n);function n(e){this.config=e,this._data={}}t.SortCells=i},function(e,t,i){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var l=i(13),c=i(2),i=(n.prototype.do=function(){var e,t,i,n=this.config,o=n.cell,r=n.val,s=n.grid;o&&(e=(i=c.getCellIds(o,s)).row,t=i.col,null!=(n=this.config.spreadsheet)&&n.isLocked(o)||(n=(i=c.getCellInfo(o,this._page,s)).css,o=(o=i.format)||l.getDefaultFormats().filter(function(e){return"common"===e.id})[0],this.config.prev=i,r?(s=r.text,i=r.href,s=s.trim(),this._page.setCell(e,t,{value:s||i,link:a(a({},r),{text:s}),css:"dhx_spreadsheet_link "+(n||""),format:o})):this._page.setCell(e,t,{link:null,css:null==n?void 0:n.split("dhx_spreadsheet_link ").join(""),format:o}),null!==(o=this.config.grid)&&void 0!==o&&o.paint()))},n.prototype.undo=function(){var e,t,i,n=this.config,o=n.cell,r=n.grid,s=n.groupAction;o&&(e=(i=c.getCellIds(o,r)).row,t=i.col,i=void 0===(o=(n=this.config.prev).value)?"":o,o=void 0===(o=n.css)?"":o,n=void 0===(n=n.link)?null:n,s?this._page.setCell(e,t,{link:n}):this._page.setCell(e,t,{value:i,css:o,link:n}),null!=r&&r.paint())},n);function n(e){this.config=e,this._page=e.page}t.InsertLink=i},function(e,t,i){"use strict";var s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=i(2),l=i(1),c=i(13),i=(n.prototype.do=function(){var i=this,e=this.config,t=e.cell,n=e.spreadsheet,e=e.grid,o=a.getCellIds(t,e).col,t=this._page.getSize(),e=this._page.getRange(0,o,t[0],o),r=40;e.forEach(function(e,t){e&&(t=i._page.getCell(t,o),t=l.getStringWidth(c.getFormattedValue(""+e,t.format)),r<t&&(r=t))});t=this._page.getMeta().cols;this._prev=s(t),r+=20;e=t.slice(0,o),t=t.slice(o+1);this._page.setMeta({cols:s(e,[{width:r}],t)}),n._updateGridState()},n.prototype.undo=function(){var e=this.config.spreadsheet;this._page.setMeta({cols:this._prev}),e._updateGridState()},n);function n(e){this.config=e,this._page=e.page}t.FitColumn=i},function(e,t,i){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=i(2),d=i(12),i=(n.prototype.do=function(){var e=this.config,t=e.cell,i=e.page,n=e.val,o=e.grid,r=e.spreadsheet;this._prev=c({},i.getMeta().filter);var s=t;if(!n)return i.setMeta({filter:null}),void(i===r._activePage&&r._filterForm.applyFilter(i));var a=u.getCellIds(s,o);if(a.end||(t=(e=i.getSize())[0],e=e[1],s=u.getCellNameById(o,1,1)+":"+u.getCellNameById(o,t,e),a=u.getCellIds(s,o),this.config.cell=s),r._spanControl.checkBeforeAction(this.config.cell,i,d.default.filter)){for(var o=a.start,l=a.end.col-o.col;n.length<1+l;)n.push({});null!=i&&i.setMeta({filter:{cell:s,rules:n}}),i===r._activePage&&r._filterForm.applyFilter(i)}},n.prototype.undo=function(){var e=this.config,t=e.cell,i=e.val;this.config.val=null===(e=this._prev)||void 0===e?void 0:e.rules,this.config.cell=null===(e=this._prev)||void 0===e?void 0:e.cell,this.do(),this.config.cell=t,this.config.val=i},n);function n(e){this.config=e}t.Filter=i},function(e,t,i){"use strict";var d=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var h=i(2),s=i(0),f=i(1),i=(n.prototype.do=function(){var t,i,e,n,o=this,r=this.config,s=r.cell,a=r.spreadsheet,l=r.page,c=r.$autofill,u=r.grid;!s||!h.isRangeId(s)||null!=s&&s.includes(",")||(n=(null==l?void 0:l.getMeta()).merged,t=void 0===n?[]:n,r=h.getCellsArray(s,u),i=new Set,n=null==l?void 0:l.serialize(),this._prevData=d(n),r.forEach(function(e){e=h.isCellSpaned(e,t,u);e&&i.add(e)}),s=(r=h.getCellsArray(s,u))[0],r=r.slice(1),r=(e=d(r))[e.length-1],n=n.filter(function(i){return!e.find(function(e){var t=h.getCellIndex(e,u),e=t.row,t=t.col;return i[0]===e&&i[1]===t-1})}),s=h.getCellIndex(s,u),r=h.getCellIndex(r,u),this._newSpan={from:{row:s.row,column:s.col-1},to:{row:r.row,column:r.col-1}},t.find(function(e){return f.compare(e,o._newSpan)})||(this._prevSpan=t.filter(function(e){return i.has(e)})||[],s=d(t.filter(function(e){return!i.has(e)}),[this._newSpan]),r=null==u?void 0:u.getScrollState(),null!=l&&l.setMeta({merged:s,scroll:r}),c||null!=l&&l.parse(n),a._updateGridState()))},n.prototype.undo=function(){var t=this,e=this.config,i=e.page,n=e.spreadsheet,o=e.$autofill,r=e.grid,e=(null==i?void 0:i.getMeta()).merged,r=null==r?void 0:r.getScrollState();null!=i&&i.setMeta({scroll:r,merged:d(e.filter(function(e){return e!==t._newSpan}),this._prevSpan)}),o||null!=i&&i.parse(this._prevData),s.awaitRedraw().then(function(){n._updateGridState()})},n);function n(e){this.config=e}t.Merge=i},function(e,t,i){"use strict";var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(0),i=(n.prototype.do=function(){var t=this,e=this.config,i=e.cell,n=e.spreadsheet,o=e.page,r=e.grid;!i||null!=i&&i.includes(",")||(e=(null==o?void 0:o.getMeta()).merged,i=s.getCellsArray(i,r),this._prevSpan=s.isCellSpaned(i[0],e,r),this._prevSpan&&(e=e.filter(function(e){return e!==t._prevSpan}),r=null==r?void 0:r.getScrollState(),null!=o&&o.setMeta({merged:e,scroll:r}),n._updateGridState()))},n.prototype.undo=function(){var e=this.config,t=e.page,i=e.spreadsheet,n=e.grid;this._prevSpan&&(e=(null==t?void 0:t.getMeta()).merged,n=null==n?void 0:n.getScrollState(),null!=t&&t.setMeta({scroll:n,merged:o(e,[this._prevSpan])}),r.awaitRedraw().then(function(){i._updateGridState()}))},n);function n(e){this.config=e}t.Unmerge=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12);t.getContextMenuStruct=function(){return[{id:"lock",value:n.default.lockCell,icon:"dxi dxi-key"},{id:"clear",value:n.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:n.default.clearValue},{id:"clear-styles",value:n.default.clearStyles},{id:"clear-all",value:n.default.clearAll}]},{id:"columns",value:n.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:n.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:n.default.removeColumn,icon:"dxi dxi-table-column-remove"},{id:"fit-col",value:n.default.fitToData,hidden:!0,icon:"dxi dxi-table-column"}]},{id:"rows",value:n.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:n.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:n.default.removeRow,icon:"dxi dxi-table-row-remove"}]},{id:"sort",value:n.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:n.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:n.default.descSort,icon:"dxi dxi-sort-variant"}]},{id:"link",value:n.default.insert+" "+n.default.link.toLowerCase(),icon:"dxi dxi-link-variant"}]},t.getSheetsContextMenuStruct=function(e){return[{id:"delete",value:n.default.deleteSheet,icon:"dxi dxi-delete-forever",disabled:!e},{id:"rename",value:n.default.renameSheet,icon:"dxi dxi-pencil"}]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(43),o=i(12);t.getMenuStruct=function(e){return[{id:"file",open:!0,value:o.default.file,items:[{id:"import",value:o.default.importAs,icon:"dxi dxi-file-import",items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"download",value:o.default.downloadAs,icon:"dxi dxi-file-export",items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}]},{id:"edit",value:o.default.edit,items:[{id:"undo",value:o.default.undo,icon:"dxi dxi-undo"},{id:"redo",value:o.default.redo,icon:"dxi dxi-redo"},{type:"separator"},{id:"lock",value:o.default.lockCell,icon:"dxi dxi-key"},{type:"separator"},{id:"clear",value:o.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:o.default.clearValue},{id:"clear-styles",value:o.default.clearStyles},{id:"clear-all",value:o.default.clearAll}]}]},{id:"insert",value:o.default.insert,items:[{id:"columns",value:o.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:o.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:o.default.removeColumn,icon:"dxi dxi-table-column-remove"}]},{id:"rows",value:o.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:o.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:o.default.removeRow,icon:"dxi dxi-table-row-remove"}]},{id:"link",type:"navItem",icon:"dxi dxi-link-variant",value:o.default.insert+" "+o.default.link.toLowerCase()}]},{id:"configuration",value:o.default.format,items:[{id:"font-weight-bold",value:o.default.bold,icon:"dxi dxi-format-bold"},{id:"font-style-italic",value:o.default.italic,icon:"dxi dxi-format-italic"},{id:"text-decoration-underline",value:o.default.underline,icon:"dxi dxi-format-underline"},{id:"text-decoration-line-through",value:o.default.strikethrough,icon:"dxi dxi-format-strikethrough"},{type:"separator"},{id:"halign",value:o.default.halign,items:[{id:"halign-left",value:o.default.left,twoState:!0,group:"halign",icon:"dxi dxi-format-align-left"},{id:"halign-center",value:o.default.center,twoState:!0,group:"halign",icon:"dxi dxi-format-align-center"},{id:"halign-right",value:o.default.right,twoState:!0,group:"halign",icon:"dxi dxi-format-align-right"}]},{id:"valign",value:o.default.valign,items:[{id:"valign-top",value:o.default.top,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",value:o.default.center,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",value:o.default.bottom,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",value:o.default.multiline,items:[{id:"multiline-clip",group:"multiline",twoState:!0,value:o.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",group:"multiline",twoState:!0,value:o.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]},{id:"format",type:"navItem",value:o.default.format,items:n.getFormatsDropdown(e)},{id:"merge",type:"navItem",value:o.default.merge,tooltip:o.default.merge}]},{id:"data",value:o.default.data,items:[{id:"validation",value:o.default.validation,icon:"dxi dxi-table-check"},{id:"search",value:o.default.search,icon:"dxi dxi-magnify"},{id:"filter",value:o.default.filter,icon:"dxi dxi-filter-variant"},{id:"sort",value:o.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:o.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:o.default.descSort,icon:"dxi dxi-sort-variant"}]}]},{id:"help",value:o.default.help}]}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),s=i(43),a=i(12),l={undo:"z",redo:"y",bold:"b",italic:"i",underline:"u",link:"k","align-left":"l","align-center":"e","align-right":"r"},c={"line-through":"shift+5"},u=n(n(n({},l),c),{"line-through":"shift+x"});function d(e){return o.isMac()?"⌘+"+u[e]:l[e]?"ctrl+"+l[e]:"alt+"+c[e]}t.getHotKey=d,t.getToolbarStruct=function(e,t){var o={undo:[{id:"undo",type:"navItem",icon:"dxi dxi-undo",tooltip:a.default.undo+" ("+d("undo")+")"},{id:"redo",type:"navItem",icon:"dxi dxi-redo",tooltip:a.default.redo+" ("+d("redo")+")"}],colors:[{id:"color",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:s.getColorpickerTemplate("#4C4C4C","format-color-text"),tooltip:a.default.textColor},{id:"background",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:s.getColorpickerTemplate("#FFF","format-color-fill"),tooltip:a.default.backgroundColor}],lock:[{id:"lock",type:"navItem",icon:"dxi dxi-key",tooltip:a.default.lockCell}],file:[{id:"export",type:"navItem",icon:"dxi dxi-file-export",tooltip:a.default.export,items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"import",type:"navItem",icon:"dxi dxi-file-import",tooltip:a.default.import,items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}],columns:[{id:"add-col",type:"navItem",icon:"dxi dxi-table-column-plus-before",tooltip:a.default.addColumn},{id:"remove-col",type:"navItem",icon:"dxi dxi-table-column-remove",tooltip:a.default.removeColumn}],rows:[{id:"add-row",type:"navItem",icon:"dxi dxi-table-row-plus-before",tooltip:a.default.addRow},{id:"remove-row",type:"navItem",icon:"dxi dxi-table-row-remove",tooltip:a.default.removeRow}],clear:[{type:"navItem",icon:"dxi dxi-eraser",id:"clear-group",tooltip:a.default.clear,items:[{id:"clear-value",value:a.default.clearValue},{id:"clear-styles",value:a.default.clearStyles},{id:"clear-all",value:a.default.clearAll}]}],align:[{id:"halign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:a.default.halign,items:[{id:"halign-left",type:"navItem",value:a.default.left,icon:"dxi dxi-format-align-left",group:"halign",tooltip:a.default.left+" ("+d("align-left")+")"},{id:"halign-center",type:"navItem",value:a.default.center,icon:"dxi dxi-format-align-center",group:"halign",tooltip:a.default.center+" ("+d("align-center")+")"},{id:"halign-right",type:"navItem",value:a.default.right,icon:"dxi dxi-format-align-right",group:"halign",tooltip:a.default.right+" ("+d("align-right")+")"}]},{id:"valign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:a.default.valign,items:[{id:"valign-top",type:"navItem",group:"valign",value:a.default.top,icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",type:"navItem",group:"valign",value:a.default.center,icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",type:"navItem",group:"valign",value:a.default.bottom,icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:a.default.multiline,items:[{id:"multiline-clip",type:"navItem",group:"multiline",value:a.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",type:"navItem",group:"multiline",value:a.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]},{id:"merge",type:"navItem",icon:"dxi dxi-table-merge-cells",tooltip:a.default.merge}],decoration:[{id:"font-weight-bold",type:"navItem",icon:"dxi dxi-format-bold",tooltip:a.default.bold+" ("+d("bold")+")"},{id:"font-style-italic",type:"navItem",icon:"dxi dxi-format-italic",tooltip:a.default.italic+" ("+d("italic")+")"},{id:"text-decoration-underline",type:"navItem",icon:"dxi dxi-format-underline",tooltip:a.default.underline+" ("+d("underline")+")"},{id:"text-decoration-line-through",type:"navItem",icon:"dxi dxi-format-strikethrough",tooltip:a.default.strikethrough+" ("+d("line-through")+")"}],helpers:[{id:"link",type:"navItem",icon:"dxi dxi-link-variant",tooltip:a.default.insert+" "+a.default.link.toLowerCase()+" ("+d("link")+")"},{id:"help",type:"navItem",icon:"dxi dxi-help-circle-outline",tooltip:a.default.help}],format:[{id:"format",type:"navItem",tooltip:a.default.format,css:"dhx_format-dropdown",items:s.getFormatsDropdown(t)}],actions:[{id:"filter",type:"navItem",tooltip:a.default.filter,icon:"dxi dxi-filter-variant"}]},i=["undo","colors","decoration","align","format","actions","helpers"];return-1!==(t=(e=e||i).indexOf("default"))&&e.splice.apply(e,r([t,1],i)),(e=e.filter(function(e,t,i){return i.indexOf(e)===t})).reduce(function(e,t,i,n){return o[t]&&(e.push.apply(e,o[t]),i!==n.length-1&&e.push({type:"separator"})),e},[])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(0),a=i(7),f=i(5),l=i(2),p=i(34),c=i(212),u=i(1),o=(r=a.View,o(d,r),d.prototype._parse=function(e,t){return void 0===t&&(t=this._activePage.getContext()),this._store.parse(e,t)},d.prototype.navigate=function(e){return"enter"===e&&this._isMath&&(this._presedEnter=!0),this._editMode&&this._presedEnter?(this.setCellMath(),!1):this._suggest.navigate(e)},d.prototype.setAtCursor=function(e,t,i,n){this._input&&(i=this._value.substr(0,t)+e+this._value.substr(i),this._editMode?this.setValue(i):this.config.events.fire(f.SpreadsheetEvents.editLineInput,[i]),this._prevCursorPosition=t+n,this._input.setSelectionRange(t+n,t+n))},d.prototype.focus=function(){this._input&&this._input.focus()},d.prototype.blur=function(){this._input&&this._input.blur()},d.prototype.lock=function(){this._locked=!0,this.paint()},d.prototype.unlock=function(){this._locked=!1,this.paint()},d.prototype.setValueAtRedactor=function(e){var t=this._input&&this._input.selectionStart;this.setAtCursor(e,t,t,e.length)},d.prototype.setValue=function(e){this.unlock(),this._setValue(e)},d.prototype._setValue=function(e){this._value=e,this._isMath=this._value&&this._value.toString().startsWith("=")?this._parse(this._value):null,this._colored=this._parseColors(e),this._input&&(this._input.value=e),this._presedEnter=!1,this._htmlEvents.onselectionchange(),this.paint()},d.prototype.setCellMath=function(){var e,t,i;this._editMode&&(this._removeStyles(),e=(i=l.getCellIds(this._editMode.cell,this._grid)).row,t=i.col,i=this._editMode.page,this._editMode=null,i.setCell(e,t,{nextValue:this._value}),this.config.spreadsheet._changeSheet(i.getMeta().toolbarId),this.blur(),this._presedEnter=!1)},d.prototype.getValue=function(){return this._value},d.prototype.clean=function(){var e=this;setTimeout(function(){e._setValue("")},1)},d.prototype.destructor=function(){this._suggest.destructor()},d.prototype.getInput=function(){return this._input},d.prototype.setCursor=function(e){this._input&&this._input.setSelectionRange(e,e)},d.prototype.isCellExpected=function(e,t,i,n){if(!this._presedEnter){if(this._isMath&&this._isEdit){var o=this._value,r=e.lastIndexOf(","),s=e.lastIndexOf(":"),s=s<r?r:s,a=e.includes(",")||e.includes(":"),l=i?i.selectionStart:this._input?this._input.selectionStart:this._value.length,c=this._isMath.code;-1<s&&e.includes(n)&&(e=(12===(n=this._parse(this._isMath.source.substring(0,l)).code.reverse())[2]?n[5]:n[2])!==p.T_OPERATOR?e.substring(s):e.substring(s+1));for(var u=0;u<c.length;u+=3){var d=c[u+1]+c[u+2]==l,h=c[u]===p.T_SPACE?c[u-3]:c[u];if(d&&(h==p.T_OPERATOR&&")"!==o[c[u+1]]||a)){if(t){d=this.config.spreadsheet.getActiveSheet().name;this._editMode&&this._editMode.pageName!==d&&(e=a?(e.includes(",")?",":":")+"'"+d+"'!"+e.substring(1):"'"+d+"'!"+e);h=o.substring(0,l),d=h+e+o.substring(l);return this._editMode?(this.setValue(d),this.setCursor(h.length+e.length)):this.config.events.fire(f.SpreadsheetEvents.editLineInput,[d]),h.length+e.length}return l}}}return 0}this._presedEnter=!1},d.prototype._render=function(){var t=this;return s.el(".dhx_edit_line",{},[s.el(".input__wrapper",[s.el(".input_value",{".innerHTML":this._colored,_ref:"input_wrapper"}),s.el("input.dhx_edit_line_input",{_hooks:{didInsert:function(e){t._input=e.el},didUnmount:function(){document.removeEventListener("selectionchange",t._htmlEvents.onselectionchange)}},oninput:this._htmlEvents.oninput,onfocus:this._htmlEvents.onfocus,onblur:this._htmlEvents.onblur,onclick:this._htmlEvents.onclick,value:this._value||"",_ref:"input",disabled:this._locked}),s.el(".input-animation")])])},d.prototype._parseColors=function(o){this._removeStyles();var r=1,s=o;if(o&&"="===o[0]){for(var a=this._parse(o).code,s="",l=0,c=this,e=0;e<a.length;e+=3)!function(e){switch(a[e]){case p.T_SPACE:for(var t=0;t<a[e+2];t++)s+="&nbsp;",l++;break;case p.T_ARG:case p.T_RANGE:var i=o.substr(a[e+1],a[e+2]),n=c._prevStyles.find(function(e){return e&&e.cell===i});r=9===r?1:r,a[e+1]>l&&(s+=o.substr(l,a[e+1]-l)),l=a[e+1]+a[e+2],s+="<span class=text_range_"+(n?n.styleNum:r)+">"+i+"</span>",n||a[e-3]===p.T_ERROR||(c._setStyles(i,r),c._prevStyles.push({cell:i,styleNum:r}),++r);break;case p.T_DATA:case p.T_ERROR:break;case p.T_PAGE:a[e+3]!==p.T_ARG&&a[e+3]!==p.T_RANGE&&a[e+3]!==p.T_ERROR&&(a[e+1]!==l&&(s+=o.substr(l,a[e+1]-l)),l=a[e+1]+a[e+2],s+=o.substr(a[e+1],a[e+2]));break;default:a[e+1]>l&&(s+=o.substr(l,a[e+1]-l)),l=a[e+1]+a[e+2],s+=o.substr(a[e+1],a[e+2])}}(e);l!==o.length&&(s+=o.substr(l,o.length-l))}return s},d.prototype._setStyles=function(e,i){var n=this;e.includes("$")&&(e=e.split("$").join("")),e.includes("!")||(e="'"+(this._editMode?this._editMode.pageName:this.config.spreadsheet.getActiveSheet().name)+"'!"+e);var o=this.config.grid,t=this._parse(e).code;p.fromId(t[7])[2]===this._activePage.getID()&&(e.includes("!")&&(e=e.substr(e.indexOf("!")+1)),-1!==e.indexOf(":")?this.config.spreadsheet.eachCell(function(e){var t=l.getCellIds(e,n._grid),e=t.row,t=t.col;o.addCellCss(""+(e+1),""+(t+1),"range_"+i)},e):(e=(t=l.getCellIds(e,this._grid)).row,t=t.col,o.addCellCss(""+(e+1),""+(t+1),"range_"+i)))},d.prototype._removeStyles=function(){for(var o=this,r=this,e=0,t=this._prevStyles;e<t.length;e++){var i=function(i){if(!i)return{value:void 0};var e,n=r.config.grid,t=i.cell;t.includes("$")&&(t=t.split("$").join("")),t.includes("!")&&(t=t.substr(t.indexOf("!")+1)),t.includes(":")?r.config.spreadsheet.eachCell(function(e){var t=l.getCellIds(e,o._grid),e=t.row,t=t.col;n.removeCellCss(""+(e+1),""+(t+1),"range_"+i.styleNum)},t):(t=(e=l.getCellIds(t,r._grid)).row,e=e.col,n.removeCellCss(""+(t+1),""+(e+1),"range_"+i.styleNum))}(t[e]);if("object"==typeof i)return i.value}this._prevStyles=[]},d);function d(e,t){void 0===t&&(t={});var o=r.call(this,e,t)||this;o._store=t.math,o._activePage=t.activePage,o._grid=t.grid,o._suggest=new c.default(function(e,t,i,n){return o.setAtCursor(e,t,i,n)}),o._prevStyles=[],o._htmlEvents={oninput:function(e){o._isEdit||(e.target.value=o._value),o._value=e.target.value,o._isMath=o._value&&o._value.toString().startsWith("=")?o._parse(o._value):null,o._isMath&&o._suggest.show(o._value,e.target,o._isMath,o.config.spreadsheet._grid.config.height),o._editMode?o.setValue(o._value):o.config.events.fire(f.SpreadsheetEvents.editLineInput,[e.target.value])},onfocus:function(e){o._editMode||o.config.events.fire(f.SpreadsheetEvents.editLineFocus,[e.target.value,e])},onblur:function(e){o._editMode?o.focus():o.config.events.fire(f.SpreadsheetEvents.editLineBlur,[e.target.value,e])},onclick:function(e){var t=o._input.selectionStart;t!==o._prevCursorPosition&&o._isMath&&(o._suggest.show(o._value,e.target,o._isMath),o._prevCursorPosition=t)},onselectionchange:function(){var e,t=o.getRootView(),i=t&&t.refs&&t.refs.input_wrapper,n="0px";o._isEdit&&o._value&&o._input&&(e=o._input.selectionStart,t=u.getStringWidth((""+o._value).substr(0,e))+12,e=o.getRootNode().offsetWidth,i&&e<t&&(n=e-t+"px")),i&&(i.el.style.left=n,o.paint())}},document.addEventListener("selectionchange",o._htmlEvents.onselectionchange),o.config.events.on(f.SpreadsheetEvents.cellInput,function(e,t){o._setValue(t)}),o.config.events.on(f.SpreadsheetEvents.afterSheetChange,function(){o._activePage=o.config.spreadsheet._activePage;var e=o.config.spreadsheet._editMode,t=o._input&&o._input.selectionStart;e?(o._editMode=e,o._removeStyles(),o._setValue(o._value),o.focus(),o.setCursor(t),e.pageName===o.config.spreadsheet.getActiveSheet().name&&(o._editMode=null)):o._editMode=null}),o.config.events.on(f.SpreadsheetEvents.afterEditStart,function(){o._isEdit=!0}),o.config.events.on(f.SpreadsheetEvents.afterEditEnd,function(){o._isEdit=!1});return o.mount(e,s.create({render:function(){return o._render()}})),o}t.EditLine=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(8),o=i(29),d=i(34),i=(r.prototype.isVisible=function(){return this._popup&&this._popup.isVisible()},r.prototype.hide=function(){this.isVisible()&&this._popup.hide()},r.prototype.destructor=function(){this._popup&&this._popup.destructor()},r.prototype.navigate=function(e){if(!this.isVisible())return!1;var t=this._list,i=t.data.getLength();if(!i)return!1;if("arrowUp"===e||"arrowDown"===e){var n="arrowDown"===e?1:-1,e=t.data.getIndex(t.getFocus());return void 0===e&&(e=-1==n?i:-1),this._list.setFocus(t.data.getId((e+n+i)%i)),!0}i=t.getFocusItem();return i||(t=this._list.data.getId(0),i=this._list.data.getItem(t)),this._insertSuggest(i.value),!0},r.prototype.show=function(i,n,e,t,o){for(var r=o||n.selectionStart,s=e.code,a=this._getPopup(t),l=this,c=0;c<s.length;c+=3){var u=function(e){if(s[e]==d.T_NAME&&r==s[e+1]+s[e+2]){var t=i.substr(s[e+1],s[e+2]).toUpperCase();return l._list.data.filter(function(e){return e.value.startsWith(t)}),l._list.data.getLength()?(l._cursorStart=r,l._startTrim=s[e+1],a.show(n,{centering:!1})):a.hide(),{value:void 0}}}(c);if("object"==typeof u)return u.value}a.hide()},r.prototype._insertSuggest=function(e){this._suggestCallback(e+"(",this._startTrim,this._cursorStart,e.length+1),this._popup.hide()},r.prototype._getPopup=function(e){var i=this;this._popup||(t=Object.keys(d.methods).map(function(e){return{value:e}}),this._popup=new n.Popup({css:"dhx_suggest_list"}),this._list=new o.List(null),this._list.data.parse(t),this._list.events.on("Click",function(e){var t=i._list.selection.getItem();i._insertSuggest(t.value),i._list.selection.remove(t.id)}),this._popup.attach(this._list));var t=this._popup.getRootNode();return!t.style.maxHeight&&e&&(t.style.maxHeight=e+"px"),this._popup},r);function r(e){this._suggestCallback=e}t.default=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var S=i(5),k=i(2),I=i(56),M=i(12),i=(n.prototype.store=function(e){var s=this,t=this._spreadsheet.selection.getFocusedCell(),i=k.getCellInfo(t,this._activePage,this._grid),n=this._spreadsheet.selection.getSelectedCell();if(this._prevCopyPage&&this._prevCopyPage.setMeta({inserted:!0}),!i.edited){var o=k.isRangeId(n),a=[n];if(o&&n.includes(",")){var r=(a=n.split(","))[a.length-1];if(n.includes(":"))if(r.includes(":")){for(var l=void 0,c=void 0,u=void 0,d=void 0,h=void 0,f=0;f<a.length;f++){var p,g,v,_=a[f];_.includes(":")&&!l&&(l=_,d={start:k.getCellIds(l.split(":")[0],this._grid),end:k.getCellIds(l.split(":")[1],this._grid)}),f?(_.includes(":")||c.includes(":")||(d.start.row===d.end.row||d.start.col===d.end.col?(p=d.start.row===d.end.row?"row":"col",g=k.getCellIds(_,this._grid)[p],d.start[p]===g[p]&&u.push(_)):(n=r,f=a.length,u=[n])),_.includes(":")&&_!==l&&(v=k.getCellIds(_.split(":")[0],this._grid),g=k.getCellIds(_.split(":")[1],this._grid),p=v.row===d.start.row||v.row===d.end.row||v.col===d.start.col||v.col===d.end.col,g=g.row===d.start.row||g.row===d.end.row||g.col===d.start.col||g.col===d.end.col,g=p&&g,v=v.row===d.start.row?"col":"row",h=h||v,g&&h===v?u.push(_):(n=r,f=a.length,u=[n]))):u=[_],c=_}1<(a=u).length&&(n=a.join())}else a=[n=r];else a=[n=r]}if(!k.isRangeId(n)||n.includes(":")){var m,y=[];k.isRangeId(a[0])&&(i=k.getCellIds(a[0].split(":")[0],this._grid).row,E=k.getCellIds(a[0].split(":")[1],this._grid).row,o=a[1]&&k.getCellIds(a[1].split(":")[0],this._grid).row,m=o&&(o===i||o===E));for(var b=0,w=this,f=0;f<a.length;f++)!function(e){var o,r=0;b=m?0:b;e=a[e];w._spreadsheet.eachCell(function(e,t){var i,n;t=t||" ",r?(i=k.getCellIds(o,s._grid),n=k.getCellIds(e,s._grid),i.row===n.row?y[b]?y[b]+="\t"+t:y.push(""+t):y[++b]?y[b]+="\t"+t:y.push(""+t)):y[b]?y[b]+="\t"+t:y.push(""+t),o=e,r++},e),b++}(f);this._buffer.value=y.join("\n"),this._buffer.styles=this._spreadsheet.getStyle(n);var x,C,E,S=this._activePage.getMeta().merged,I=[];k.isRangeId(n)?(x=[],C=k.getCellsArray(n,this._grid),this._spreadsheet.eachCell(function(e){x.push(s._spreadsheet._getMath(e));var t,i,n=k.isCellSpaned(e,S,s._grid);n&&!I.includes(n)?(t=n.from,i=n.to,t=k.getCellNameByIndex(t.row,t.column+1,s._grid),i=k.getCellNameByIndex(i.row,i.column+1,s._grid),C.includes(t)&&C.includes(i)&&t===e&&I.push(n)):I.push(null)},n),this._buffer.math=x):(E=this._spreadsheet._getMath(n),this._buffer.math=[E],(E=k.isCellSpaned(n,S,this._grid))&&!I.includes(E)&&I.push(E)),this._buffer.spans=I,this._buffer.cells=n,this._buffer.meta=[],this._spreadsheet.eachCell(function(e){var t=k.getCellIds(e,s._grid),e=t.row,t=t.col;s._buffer.meta.push(s._activePage.getCell(e,t)||{})},n),this._buffer.formats=this._spreadsheet.getFormat(n),this._buffer.cell=t,this._buffer.operation=e,this._activePage.setMeta({inserted:!1}),this._prevCopyPage=this._activePage,this._grid.paint()}else this._buffer.cell=null}},n.prototype.paste=function(){var e,t,i,n,o,r,s,a,l,c,u,d,h,f,p,g,v,_,m,y,b,w,x,C,E=this;this._buffer.cell&&(this._activePage.setMeta({inserted:!0}),o=this._buffer.cell,e=this._buffer.formats,t=o,u=!1,k.isRangeId(this._buffer.cells)&&(u=!0,x=k.getRangeIndexes(this._buffer.cells,this._grid),i=k.getCellIndex(o,this._grid),n=x.end.row-x.start.row,x=x.end.col-x.start.col,x=k.getCellNameByIndex(i.row+n,i.col+x,this._grid),k.isRangeId(o)?(w=k.getCellsArray(this._buffer.cells,this._grid).length,k.getCellsArray(o,this._grid).length<w&&(t=o.split(":")[0]+":"+x)):t+=":"+x),w=k.isRangeId(t),o=Array.isArray(this._buffer.styles)?this._buffer.styles.map(function(e){return dhx.css.add(e)}):dhx.css.add(this._buffer.styles),r=[],"cut"===this._buffer.operation&&(r.push({cell:this._buffer.cells,action:S.Actions.setCellFormat,groupAction:w?S.Actions.groupAction:null,val:"",page:this._activePage,dataStore:this._dataStore},{cell:this._buffer.cells,action:S.Actions.setCellValue,val:"",page:this._activePage,groupAction:u?S.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:S.Actions.setCellStyle,val:"",page:this._activePage,groupAction:u?S.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:S.Actions.setValidation,val:null,page:this._activePage,groupAction:u?S.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:S.Actions.insertLink,val:null,page:this._activePage,groupAction:u?S.Actions.groupAction:null,dataStore:this._dataStore}),this._buffer.spans.forEach(function(e){e&&(e=e.from,e=k.getCellNameByIndex(e.row,e.column+1,E._grid),r.push({action:S.Actions.unmerge,groupAction:S.Actions.groupAction,dataStore:E._dataStore,cell:e,page:E._activePage}))}),this._buffer.operation="copy"),s=u?[].concat(this._buffer.value):this._buffer.value,a=this._buffer.math,x=this._buffer.meta.map(function(e){return(null===(e=e.editor)||void 0===e?void 0:e.options)||null}),l=this._buffer.meta.map(function(e){return e.link||null}),c=s.length,h=u?(u=k.getRangeIndexes(this._buffer.cells,this._grid),d=u.start,u.end.col-u.start.col+1):(d=k.getCellIndex(this._buffer.cells,this._grid),1),f=0,p=this._activePage.getMeta().merged,this._spreadsheet.eachCell(function(e){var t,i=f%c,n=s[i],o=a[i];o&&(i=(i-(t=i%h))/h,e=k.getCellIndex(e,E._grid),n="="+E._math.transposeMath(o.source,e.row-d.row-i,e.col-d.col-t)),s[f]=n,f++},t),s=s.map(function(e,t){return k.doesContainUrl(e)?(l[t]={href:e},""):e}),r.push({cell:t,action:S.Actions.setCellFormat,groupAction:w?S.Actions.groupAction:null,val:e,page:this._activePage,dataStore:this._dataStore},{cell:t,action:S.Actions.setCellStyle,val:o,page:this._activePage,groupAction:w?S.Actions.groupAction:null,dataStore:this._dataStore},{cell:t,action:S.Actions.setCellValue,val:s,page:this._activePage,groupAction:S.Actions.groupAction,dataStore:this._dataStore},{cell:t,action:S.Actions.setValidation,val:x,page:this._activePage,groupAction:S.Actions.groupAction,dataStore:this._dataStore},{cell:t,action:S.Actions.insertLink,val:l,page:this._activePage,groupAction:S.Actions.groupAction,dataStore:this._dataStore}),g=!1,v=this._spreadsheet._grid,this._buffer.cells&&(_=0,m=k.getCellsArray(this._buffer.cells,v),C=this._spreadsheet.config,y=C.leftSplit,b=C.topSplit,this._spreadsheet.eachCell(function(e){var t,i=E._buffer.spans[_];if(i){var n=I.getCellsDiff(m[_],e,v),o=n.x,n=n.y,o=k.getCellNameByIndex(i.from.row+n,i.from.column+o+1,v)+":"+k.getCellNameByIndex(i.to.row+n,i.to.column+o+1,v);if(!k.checkSpanByNames(o,y,b,v))return k.showAlert(M.default.spanPasteError),void(g=!0);if(k.isCellSpaned(e,p,E._grid)||null===(t=E._spreadsheet._spanControl)||void 0===t||!t.checkBeforeMerge(o))return;r.push({action:S.Actions.merge,groupAction:S.Actions.merge,dataStore:E._dataStore,cell:o,page:E._activePage,$autofill:!0})}_=_===m.length-1?0:++_},t)),g||(this._callAction(r),w=k.getCellIds(t,v).end,x=v.data.getLength(),C=v.config.columns.length,(x<w.row+1||C<=w.col+1)&&this._spreadsheet._updateGridSizes(),this._spreadsheet.selection.setSelectedCell(t)))},n.prototype.getStruct=function(){return this._buffer},n.prototype._setHandlers=function(){var e=this;this._spreadsheet.events.on(S.SpreadsheetEvents.afterSheetChange,function(){e._activePage=e._spreadsheet._activePage})},n);function n(e,t,i,n,o){this._spreadsheet=e,this._grid=t,this._activePage=n,this._math=o.getStore(),this._dataStore=o,this._callAction=i.bind(e),this._buffer={value:"",math:[],meta:[],styles:{},cell:"",cells:"",operation:"",inserted:!1,formats:[],html:"",spans:[]},this._setHandlers()}t.BufferManager=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(11),a=i(2),o=(r=s.CsvDriver,o(l,r),l.prototype.toJsonArray=function(e){var o=this;return r.prototype.toJsonArray.call(this,e).reduce(function(e,t,i){for(var n in t)e.push({value:t[n],cell:a.getCellNameByIndex(i,parseFloat(n),o._grid)});return e},[])},l);function l(e){var t=r.call(this)||this;return t._grid=e,t}t.CustomCsvDriver=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(18),s=i(3);function a(e){for(var t=e.toLowerCase().match(/\w+/g),i=0,n="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?i+=4:"shift"===r?i+=2:"alt"===r?i+=1:n=r}return i+n}var l={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},i=(n.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},n.prototype.addHotKey=function(e,t){e=a(e);this._keysStorage[e]||(this._keysStorage[e]=[]),this._keysStorage[e].push({handler:t})},n.prototype.removeHotKey=function(e,i){var n,o,r=this;e?e&&i?(n=a(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")},this._keysStorage[n].forEach(function(e,t){o(e.handler)===o(i)&&(delete r._keysStorage[n][t],r._keysStorage[n]=r._keysStorage[n].filter(function(e){return e}))})):(e=a(e),delete this._keysStorage[e]):this._keysStorage={}},n);function n(e){var o=this;this._keysStorage={},this._initHandler=function(e){var t;t=48<=e.which&&e.which<=57||65<=e.which&&e.which<=90?String.fromCharCode(e.which):(t=32===e.which?e.code:e.key,s.isIE()&&l[t]||t);var i=o._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(t&&t.toLowerCase())];if(i)for(var n=0;n<i.length;n++){if(o._beforeCall&&!1===o._beforeCall(e,r.focusManager.getFocusId()))return;i[n].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}t.KeyManager=i},function(e,t,i){"use strict";var O=this&&this.__assign||function(){return(O=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},D=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var F=i(1),A=i(0),n=i(36),V=i(2),a=i(56),p=i(5),i=(o.prototype.setSelectedCell=function(e){var c,t,u=this;e&&this._events.fire(p.SpreadsheetEvents.beforeSelectionSet,[e])&&(this._removeHeadersCss(),c=this._activePage.getMeta().merged,e=(t=e.split(",")).map(function(e){var t,i,n,o,r,s,a,l=e;return null==c||!c.length||u._pressedArea&&"cell"!==u._pressedArea||(V.isRangeId(e)?(n=V.getRangeArray(e,u._grid),t=new Set,n.forEach(function(e){e=V.isCellSpaned(e,c,u._grid);e&&t.add(e)}),t.size&&(i=V.getCellIds(n[0],u._grid),n=V.getCellIds(n[n.length-1],u._grid),o=i.row,r=i.col,s=n.row,a=n.col,Array.from(t).forEach(function(e){var t=e.from,e=e.to;t.row<o&&(o=t.row),t.column<r&&(r=t.column),e.row>s&&(s=e.row),e.column>a&&(a=e.column)}),l=V.getCellNameByIndex(o,r+1,u._grid)+":"+V.getCellNameByIndex(s,a+1,u._grid))):(e=V.isCellSpaned(e,c,u._grid))&&(l=V.getCellNameByIndex(e.from.row,e.from.column+1,u._grid))),l}),this._activePage.setMeta({selectedCells:e}),t=t[t.length-1],V.isRangeId(t)&&(t=t.split(":")[0]),this.setFocusedCell(t),this._setHeadersCss(),this._mousePressed?this._grid.paint():this._events.fire(p.SpreadsheetEvents.afterSelectionSet,[this.getSelectedCell()]))},o.prototype.getSelectedCell=function(){var e=this._activePage.getMeta().selectedCells;if(e&&e.length)return e.join(",")},o.prototype.getFocusedCell=function(){var e=this._activePage.getMeta().focusedCell;if(e&&e.cell)return e.cell},o.prototype.setFocusedCell=function(e){var t,i;e&&(e=e.toUpperCase(),this._events.fire(p.SpreadsheetEvents.beforeFocusSet,[e])&&(t=(i=V.getCellIds(e,this._grid)).row,i=i.col,this._activePage.setMeta({focusedCell:{row:t,col:i,cell:e,edit:!1}}),this._events.fire(p.SpreadsheetEvents.afterFocusSet,[e])))},o.prototype.removeSelectedCell=function(e){var t=this,i=this.getSelectedCell();if(i){if(e){var i=i.split(","),e=e.split(","),o=[];e.forEach(function(e){V.isRangeId(e)?V.getCellsArray(e,t._grid).forEach(function(e){o.push(e)}):o.push(e)});var r=[];if(i.forEach(function(e){var i,n;V.isRangeId(e)?(i=V.getCellsArray(e,t._grid),o.forEach(function(e){e=i.indexOf(e);-1<e&&(i[e]=null)}),n=null,i.forEach(function(e,t){n?(e||(r.push(n+":"+i[t-1]),n=null),e&&t===i.length-1&&r.push(n+":"+i[t])):n=e})):o.includes(e)||r.push(e)}),r.length)return void this.setSelectedCell(r.join(","));this._activePage.setMeta({selectedCells:null})}else this._activePage.setMeta({selectedCells:null});this._grid.paint()}},o.prototype._isInRange=function(e,t){if(!t||!e||!t.includes(":"))return!1;var i=V.getCellIndex(e,this._grid),n=i.row,o=i.col,e=V.getRangeIndexes(t,this._grid),i=e.start,t=e.end,e=function(e,t,i){return(e-t)*(e-i)<=0};return!(!i||!t)&&(e(n,i.row,t.row)&&e(o,i.col,t.col))},o.prototype._setSearchCell=function(e){var t;this._searchedCells[e]&&(this._searchCell=this._searchedCells[e],e=(t=V.getCellIndex(this._searchCell,this._grid,!0)).row,t=t.col,this._grid.scrollTo(e+1,t))},o.prototype._setSearchedArray=function(e){this._searchedCells=e},o.prototype._removeSearchCell=function(){this._searchCell=null,this._searchedCells=[],this._grid.paint()},o.prototype._removeHeadersCss=function(){var e,i=this;this.getSelectedCell()&&(this._prevHeaderCss.forEach(function(e){var t=V.getCellIndex(e,i._grid),e=i._grid.data.getId(t.row);void 0!==e&&i._grid.removeRowCss(e,"dhx_selected_row");t=i._grid.config.columns[t.col];void 0!==t&&(t.header[0].css=t.header[0].css.replace(" dhx_selected_header",""))}),e=this._activePage.getMeta().focusedCell,this._grid.data.exists(e.row)&&this._grid.removeRowCss(e.row,"dhx_selected_row")),this._filteredCells&&(this._spreadsheet.eachCell(function(e){var t=V.getCellIndex(e,i._grid),e=i._grid.data.getId(t.row);void 0!==e&&i._grid.removeRowCss(e,"dhx_filtered_row");t=i._grid.config.columns[t.col];void 0!==t&&(t.header[0].css=t.header[0].css.replace(" dhx_filtered_header",""))},this._filteredCells),this._filteredCells="")},o.prototype._setHeadersCss=function(){var o,r=this,e=this.getSelectedCell(),t=this._activePage.getMeta(),s=t.merged,t=t.filter;this._prevHeaderCss=[],e&&(o=[],this._spreadsheet.eachCell(function(e){var t=V.getCellIndex(e,r._grid),i=r._grid.data.getId(t.row);void 0!==i&&r._grid.addRowCss(i,"dhx_selected_row");var n=V.isCellSpaned(e,s,r._grid),t=e;n&&!o.includes(n)&&"header"!==r._pressedArea&&"index"!==r._pressedArea&&(i=n.from,e=n.to,t=V.getCellNameByIndex(i.row,i.column+1,r._grid)+":"+V.getCellNameByIndex(e.row,e.column+1,r._grid),o.push(n)),V.isRangeId(t)?r._spreadsheet.eachCell(function(e){return r._setCss(e)},t):r._setCss(t)})),t&&(this._spreadsheet.eachCell(function(e){var t=V.getCellIndex(e,r._grid),e=r._grid.data.getId(t.row);void 0!==e&&r._grid.addRowCss(e,"dhx_filtered_row");t=r._grid.config.columns[t.col];void 0===t||t.header[0].css.includes("dhx_filtered_header")||(t.header[0].css+=" dhx_filtered_header")},t.cell),this._filteredCells=t.cell)},o.prototype._setCss=function(e){this._prevHeaderCss.push(e);var t=V.getCellIndex(e,this._grid),e=this._grid.data.getId(t.row);void 0!==e&&this._grid.addRowCss(e,"dhx_selected_row");t=this._grid.config.columns[t.col];void 0===t||t.header[0].css.includes("dhx_selected_header")||(t.header[0].css+=" dhx_selected_header")},o.prototype._selectRow=function(e){var t=this._grid.config.columns[1],i=this._grid.config.columns[this._grid.config.columns.length-1];this.setSelectedCell(V.getCellNameById(this._grid,e.id,t.id)+":"+V.getCellNameById(this._grid,e.id,i.id))},o.prototype._selectColumn=function(e){var t=this._grid.data.getId(0),i=this._grid.data.getId(this._grid.data.getLength()-1),t=this._grid.data.getItem(t),i=this._grid.data.getItem(i);this.setSelectedCell(V.getCellNameById(this._grid,t.id,e.id)+":"+V.getCellNameById(this._grid,i.id,e.id))},o.prototype._setGroupSelectionHandlers=function(){var s=this;this._grid.events.on(n.GridEvents.cellMouseOver,function(e,t){var i,n,o,r;V.getCellInfo(s.getFocusedCell(),s._activePage,s._grid).edited||(i=(o=s._activePage.getMeta()).focusedCell,s._mousePressed&&("index"!==s._pressedArea&&"$index"===t.id||("header"!==s._pressedArea||"$index"===t.id?(n=s._grid.config.columns[s._grid.config.columns.length-1],r=V.getCellNameById(s._grid,e.id,("index"===s._pressedArea?n:t).id),e=i.cell,n=D(o.selectedCells),"fillHandle"===s._pressedArea&&(r=a.getLastCopyingCell(s._cellsToCopy,r,s._grid),o=s._isInRange(r,s._cellsToCopy),(V.isRangeId(s._cellsToCopy)&&r===e||o)&&(r=s._cellsToCopy.split(":")[1])),r=e===r?e:e+":"+r,n[n.length-1]=r,r=s.getFocusedCell(),s.setSelectedCell(n.join(",")),s.setFocusedCell(r)):(r=s._grid.data.getId(s._grid.data.getLength()-1),r=s._grid.data.getItem(r),s.setSelectedCell(i.cell+":"+V.getCellNameById(s._grid,r.id,t.id))))))}),this._grid.events.on(n.GridEvents.headerCellMouseOver,function(e){var t,i;"cell"!==s._pressedArea&&s._mousePressed&&"header"===s._pressedArea&&"$index"!==e.id&&(i=s._grid.data.getId(s._grid.data.getLength()-1),t=s._grid.data.getItem(i),i=s._activePage.getMeta().focusedCell,s.setSelectedCell(i.cell+":"+V.getCellNameById(s._grid,t.id,e.id.toString())))})},o.prototype._setHandlers=function(){var f,i,M=this;A.awaitRedraw().then(function(){f=M._grid.getRootView().node.el.getBoundingClientRect()});var P=function(e){i&&clearTimeout(i);var t=M._grid.getScrollState();e.clientX>f.width+f.left-50&&M._grid.scroll(t.x+50,t.y),e.clientX<f.left+50&&M._grid.scroll(t.x-50,t.y),e.clientY>f.height+f.top-50&&M._grid.scroll(t.x,t.y+50),e.clientY<f.top+50&&M._grid.scroll(t.x,t.y-50),i=setTimeout(function(){P(e)},100)};document.addEventListener("mouseup",function(){var e;M._mousePressed&&(M._mousePressed=!1,e=M.getSelectedCell(),"fillHandle"===M._pressedArea&&(e!==M._cellsToCopy&&M._events.fire(p.SpreadsheetEvents.groupFill,[M._cellsToCopy,e]),M._cellsToCopy=""),M._pressedArea=null,document.removeEventListener("mousemove",P),i&&clearTimeout(i),e&&M._events.fire(p.SpreadsheetEvents.afterSelectionSet,[M.getSelectedCell()]),M._grid.paint())}),this._grid.events.on(n.GridEvents.cellMouseDown,function(e,t,i){M._mousePressed=!0,f=M._grid.getRootView().node.el.getBoundingClientRect(),setTimeout(function(){M._mousePressed&&document.addEventListener("mousemove",P)},100);var n=M._activePage.getMeta().selectedCells;if("$index"!==t.id){M._pressedArea="cell";var o=V.getCellNameById(M._grid,e.id,t.id),r=V.getCellInfo(o,M._activePage,M._grid);if(!(3===i.which&&M._isInRange(o,n[n.length-1])||r.edited)){r=M.getFocusedCell();if(!i.shiftKey||i.ctrlKey||i.metaKey){if(i.shiftKey&&(i.ctrlKey||i.metaKey)){n.length&&n[n.length-1]===r&&n.pop();var s=M.getSelectedCell();M.setSelectedCell((s?s+",":"")+r+":"+o)}else if(!i.ctrlKey&&!i.metaKey||i.shiftKey)M.setSelectedCell(o);else if(s=M.getSelectedCell()){if(s&&!V.getCellsArray(s,M._grid).includes(o))return M.setSelectedCell(s+","+o);for(var a=s.split(","),l=0;l<a.length;l++){var c=a[l];V.isRangeId(c)||c!==o||M.setSelectedCell(a.filter(function(e){return e!==o}).join(","))}}}else M.setSelectedCell(r+":"+V.getCellNameById(M._grid,e.id,t.id))}}else{var u,d,h,t=i.target.getAttribute("data-dhx-id");i.shiftKey?(d=M.getSelectedCell(),h=[],V.isRangeId(d)&&(h=d.split(":")),u=V.getCellIds(h[0]||d,M._grid),h=M._grid.config.columns,d=V.getCellNameById(M._grid,e.id,h[h.length-1].id),h=V.getCellNameById(M._grid,u.row+1,1),M.setSelectedCell(h+":"+d)):t?(document.removeEventListener("mousemove",P),M._mousePressed=!1,d=(h=null===(u=M.getSelectedCell())||void 0===u?void 0:u.split(":"))&&V.getCellIds(h[0],M._grid),u=h&&V.getCellIds(h[1],M._grid),!h||0!==d.col||u.col+2!==M._grid.config.columns.length||+t!==d.row&&+t!==u.row?(t=V.getCellNameById(M._grid,+t+1,1),M._resizedRows=[t,t]):M._resizedRows=h,M._spreadsheet._callAction({cell:M._resizedRows.join(":"),action:p.Actions.resizeRow,groupAction:p.Actions.resizeRow,mouseEvent:i})):(M._pressedArea="index",M._selectRow(e),M._mousePressed=!0)}}),this._grid.events.on(n.GridEvents.headerCellMouseDown,function(e,t){var i=t.target.getAttribute("data-dhx-id");if(t.shiftKey){var n=M.getSelectedCell(),o=[];V.isRangeId(n)&&(o=n.split(":"));var r=V.getCellIds(o[0]||n,M._grid),s=V.getCellNameById(M._grid,M._grid.data.getId(0),r.col+1),o=V.getCellNameById(M._grid,M._grid.data.getLength(),e.id);M.setSelectedCell(s+":"+o)}else{o=t.target.className.includes("dhx_header_icon");if(o)return M._pressedArea="header",void M._selectColumn(e);!i||o?(M._pressedArea="header",M._selectColumn(e),M._mousePressed=!0):"$index"!==i?(e=(n=null===(o=M.getSelectedCell())||void 0===o?void 0:o.split(":"))&&V.getCellIds(n[0],M._grid),o=n&&V.getCellIds(n[1],M._grid),!n||0!==e.row||o.row+1!==M._grid.data.getLength()||+i!==e.col+1&&+i!==o.col+1?(r=V.getCellNameByIndex(0,+i,M._grid),M._resizedColumns=[r,r]):M._resizedColumns=n,M._spreadsheet._callAction({cell:M._resizedColumns.join(":"),action:p.Actions.resizeCol,groupAction:p.Actions.resizeCol,mouseEvent:t})):(n=V.getCellNameByIndex(0,1,M._grid),t=V.getCellNameByIndex(M._grid.data.getLength()-1,M._grid.config.columns.length-1,M._grid),M.setSelectedCell(n+":"+t))}}),this._setGroupSelectionHandlers(),this._grid.events.on(n.GridEvents.cellDblClick,function(e,t,i){i.ctrlKey||i.metaKey?M._grid.events.fire(n.GridEvents.cellClick,[e,t,i]):"$index"!==t.id&&M._spreadsheet.startEdit(V.getCellNameById(M._grid,e.id,t.id))}),this._grid.events.on(n.GridEvents.headerCellDblClick,function(e,t){t=t.target.getAttribute("data-dhx-id");"$index"!==t&&t&&(e=V.getCellNameByIndex(0,+e.id,M._grid),M._spreadsheet.fitColumn(e))}),this._spreadsheet.events.on(p.SpreadsheetEvents.afterSheetChange,function(){M._removeHeadersCss(),M._activePage=M._spreadsheet._activePage;var e=M._activePage.getMeta();M.setSelectedCell(e.selectedCells?e.selectedCells.join(","):null),M.setFocusedCell(e.focusedCell?e.focusedCell.cell:null)}),this._events.on(p.SpreadsheetEvents.afterAction,function(e){e===p.Actions.resizeRow&&(M._resizedRows=null,M._grid.paint()),e===p.Actions.resizeCol&&(M._resizedColumns=null,M._grid.paint())}),this._events.on(p.SpreadsheetEvents.gridRedraw,function(e){var p,g,v,_,m,y,r,s,t,i,n,o,a,l,c,u,d,h,f,b=M._activePage.getMeta(),w=b.selectedCells,x=b.focusedCell,C=b.merged,E=void 0===C?[]:C,S=b.filter,I=b.inserted,k=null==x?void 0:x.cell;w&&(k||null!==(t=M._searchedCells)&&void 0!==t&&t.length)&&(p=function(e){var t=M._grid.data.getItem(M._grid.data.getId(e.row));return t?{x:M._grid.config.columns.slice(0,e.col).reduce(function(e,t){return e+t.$width},0),y:e.row?M._grid.data.mapRange(0,e.row-1,function(e){return e}).reduce(function(e,t){return e+(t.height||t.$height)},0):0,width:M._grid.config.columns[e.col]?M._grid.config.columns[e.col].$width:0,height:t.height||t.$height-1}:{x:0,y:0,width:0,height:0}},g=function(e){var t=p(e.start),e=p(e.end);return{x:t.x,y:t.y,width:e.x-t.x+(e.width||0),height:e.y-t.y+e.height}},b=(C=M._spreadsheet.config).leftSplit,v=void 0===b?0:b,x=C.topSplit,_=void 0===x?0:x,m=M._grid.getScrollState(),y=p({row:_,col:v}),r=function(e){void 0===e&&(e="A1");var t=V.getCellIds(e,M._grid),i=(t.col,t.row,V.isCellFixed(e,v,_,M._grid)),n=i.isLeftFixed,o=i.isTopFixed,r=V.isCellSpaned(e,E,M._grid);r&&(u=(c=r.from).row,d=c.column,e=V.getCellNameByIndex(u,d+1,M._grid));var s=p(V.getCellIndex(e,M._grid)),a=s.x,l=s.y,t=s.width,i=void 0===t?0:t,c=s.height,u=y.x+m.x+(y.width||0),d=y.y+m.y,e=n?i:null,t=o?c:null,s=Math.abs(a-u<0&&!n?a-u:0),u=Math.abs(l-d<0&&!o?l-d:0),d=n?a+m.x:a,a=o?l+m.y:l;r&&(h=r.to,f=r.from,l=p({row:h.row,col:+h.column+1}),r=f.row!==h.row?l.y-a+l.height-c:0,i+=f.column!==h.column?l.x-d+l.width-i:0,c+=r,f=g({start:{row:f.row,col:f.column+1},end:{row:h.row,col:h.column+1}}),n&&(e=f.width),o&&(t=f.height));var h=i-s,f=c-u;return{width:e&&h<e?e:h,height:t&&f<t?t:f,top:a+u,left:d+s,borderLeft:!n&&h<i?"none":null,borderRight:!n&&h<=0?"none":null,borderTop:!o&&f<c?"none":null,borderBottom:!o&&f<=0?"none":null,position:"absolute",pointerEvents:"none",zIndex:12,minWidth:e,minHeight:t}},s=function(e){var t=V.getRangeIndexes(e,M._grid),i=g(t),n=i.x,o=i.y,r=i.width,s=i.height,a=t.start,l=t.end,c=a.col<=v,u=a.row<_;if(c||u){var d=y.x+m.x+y.width,h=y.y+m.y,f=g({start:{row:a.row,col:a.col},end:{row:_&&l.row>=_?_-1:l.row,col:v&&l.col>v?v:l.col}}),e=c?f.width:null,i=u?f.height:null,t=c?n+m.x:n,a=u?o+m.y:o,l=Math.abs(n-d<0&&!c?n-d:0),f=Math.abs(o-h<0&&!u?o-h:0),d=r-l,h=s-f;return c&&(d-=m.x),u&&(h-=m.y),{top:a+f,left:t+l,width:d,minWidth:e,height:h,borderLeft:!c&&d<r?"none":null,borderRight:!c&&d<=0?"none":null,borderTop:!u&&h<s?"none":null,borderBottom:!u&&h<=0?"none":null,minHeight:i,zIndex:12}}return{top:o,left:n,width:r,height:s,zIndex:10}},t=w.map(function(e){return V.isRangeId(e)?A.el(".dhx_group_selection",{style:s(e)}):1!==w.length?A.el(".dhx_group_selection",{style:r(e)}):void 0}),b=w[w.length-1],C=A.el(".dhx_selected_cell",{style:r(k||b)}),M._searchCell&&(i=M._searchedCells.map(function(e){return A.el(".dhx_search_group"+(e===M._searchCell?".dhx_search_cell":""),{style:r(e)})})),x=[],(k=M._bufferManager.getStruct()).cell&&void 0!==I&&!I&&(x=(k.cells.includes(",")?k.cells.split(","):[k.cells]).map(function(e){var t=(V.isRangeId(e)?s:r)(e),i=t.width,n=t.left,o=t.height,e=t.top;return A.el(".dhx_copy_selection",{style:O(O({},t),{width:i+2,left:n-1,height:o+2,top:e-1})})})),M._resizedColumns&&(n=V.getCellIds(M._resizedColumns[1],M._grid),o=F.findIndex(M._grid.config.columns,function(e){return e.id==n.col+1}),c=p({row:0,col:o}),a=M._grid.config.$totalHeight,o=A.el(".resize_line",{style:{top:c.y,left:c.x+c.width-1.5,height:a}})),M._resizedRows&&(a=V.getCellIndex(M._resizedRows[1],M._grid),c=p({row:a.row,col:0}),o=A.el(".resize_line",{style:{top:c.y+c.height-2,left:0,width:M._grid.config.$totalWidth,height:"2px"}})),V.isRangeId(b)&&(b=(u=V.getRangeArray(b,M._grid))[u.length-1]),S&&(h=(d=V.getCellsArray(S.cell,M._grid).reverse()).find(function(e){return!M._grid.isRowHidden(V.getCellIds(e,M._grid).row+1)}),l=A.el(".dhx_filtered_cells",{style:s(d[d.length-1]+":"+h)})),V.getCellInfo(M.getFocusedCell(),M._activePage,M._grid).edited||(u=(c=r(b)).top,S=c.left,d=c.width,f=c.height,h=c.minWidth,u+=(c.minHeight||f)-6,S+=(h||d)-6,b=(h=V.isCellFixed(b,v,_,M._grid)).isLeftFixed,h=h.isTopFixed,f=A.el(".dhx_selection_grip",{"data-dhx-id":"selection_grip",style:{position:"absolute",left:S,top:u,zIndex:!h&&!b||h&&d<=0||b&&f<=0?10:12},onmousedown:function(){M._mousePressed=!0,document.addEventListener("mousemove",P),M._pressedArea="fillHandle";var e=M.getSelectedCell().split(","),t=e[e.length-1];M.setSelectedCell(t);var i=V.getCellsArray(t,M._grid),e=V.isCellSpaned(i[i.length-1],E,M._grid);M._cellsToCopy=t,e&&(e=e.to,e=V.getCellNameByIndex(e.row,e.column+1,M._grid),M._cellsToCopy=i[0]+":"+e)}})),e.refs.selection.patch(A.el(".dhx_grid_selection",D(x,[C],t,[i,o,l,f]))))})},o);function o(e,t,i,n){this._spreadsheet=e,this._grid=t,this._bufferManager=i,this._events=e.events,this._activePage=n,this._setHandlers()}t.Selection=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=i(38),s=i(8),a=i(27),l=i(13),c=i(5),u=i(16),i=(d.prototype.endEdit=function(){var e=this;this.edit&&(o.awaitRedraw().then(function(){e._events.fire(c.SpreadsheetEvents.cellInput,[e._config.oninput[1],e._calendar.getValue()]),e._endEdit(),e._popup.hide()}),this.edit=!1)},d.prototype.setValue=function(e){var t;if(l.isNumeric(e))t=a.excelDateToJSDate(e);else{if(!u.stringToDate(e,this._dateFormat,!0))return;t=u.stringToDate(e,this._dateFormat)}this._calendar.setValue(t)},d.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},d.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),o.el("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert})}))},d.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},d.prototype._initHandlers=function(){var i=this;this._handlers={onFocus:function(){o.awaitRedraw().then(function(){i._showPopup()})},onOuterClick:function(e){var t;e.target instanceof Node&&(t=i._input&&i._input.contains(e.target),e=i._popup&&i._popup.getRootNode()&&i._popup.getRootNode().contains(e.target),t||e||i._popup.hide())},oninput:function(e){e.target.value||i._showPopup(),e.target.value.startsWith("=")&&i._popup.isVisible()&&i._popup.hide();var t=i._config.oninput;(0,t[0])(t[1],e)},didInsert:function(e){var t=e.el;i._input=t,i._input.addEventListener("focus",i._handlers.onFocus),i._config._hooks.didInsert(e)}}},d);function d(e,t,i){var n=this;this._dateFormat=t,this._calendar=new r.Calendar(null,{dateFormat:t}),this._popup=new s.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._calendar),this._events=i,this._endEdit=e,this._popup.events.on(s.PopupEvents.afterShow,function(){n._calendar.getRootNode().querySelector(".dhx_calendar__days").addEventListener("click",n.endEdit.bind(n),{once:!0})}),this._initHandlers()}t.DateEditor=i},function(e,t,i){"use strict";var f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var p=i(1),n=i(13),g=i(2),i=(o.prototype.xlsx=function(){var u=this;if(!g.isWasmSupported())throw new Error("WebAssembly is not supported by your browser");var d=[{id:""}],e=this._spreadsheet.serialize(),h=n.getDefaultFormats(),r=[];this._grid.config.columns.map(function(e){return{width:e.width}}).splice(1);e.sheets.forEach(function(e){for(var t=u._spreadsheet._dataStore.getPage(e.name),i=t.getSize(),t=t.getMeta().merged,n=[],c=[],o=0;o<i[1];o++)n.push(null);for(o=0;o<i[0];o++)c.push(s(n));e.data.forEach(function(t){var i,n,e=null,o=g.getCellIds(t.cell,u._grid),r=o.row,s=o.col,a=h.find(function(e){return e.id===t.format}),o=a?a.mask:"",a=t.css||"",l=o+a;-1===(e=p.findIndex(d,function(e){return e.id===l}))&&(i={"text-align":"align","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle","text-decoration":"textDecoration","vertical-align":"verticalAlign"},n=dhx.css.get(a)||{},a=Object.keys(n).reduce(function(e,t){return e[i[t]||t]=n[t],e},{}),d.push(f(f({format:o},a),{id:l})),e=d.length-1);e={v:t.value?""+t.value:"",s:e};c[r][s]=e}),r.push({name:e.name,cells:c,cols:e.cols,rows:e.rows,merged:t})});var t={data:r,styles:d},e=this._spreadsheet.config.exportModulePath;this._getXlsxWorker(e).postMessage({type:"convert",data:t})},o.prototype.json=function(){return p.downloadFile(JSON.stringify(this._spreadsheet.serialize()),"data.json","text/json")},o.prototype._getXlsxWorker=function(e){return this._xlsxWorker||(e=window.URL.createObjectURL(new Blob(["importScripts('"+e+"');"],{type:"text/javascript"})),this._xlsxWorker=new Worker(e),this._xlsxWorker.addEventListener("message",function(e){var t;"ready"===e.data.type&&((t=document.createElement("a")).href=URL.createObjectURL(e.data.blob),t.download="data.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t))})),this._xlsxWorker},o);function o(e,t){this._spreadsheet=e,this._grid=t}t.Exporter=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),i=(n.prototype.toJsonArray=function(e,o){var t=[],r=[],n={};return e.styles.forEach(function(i,e){var t=["background","color","textAlign","verticalAlign","textDecoration","fontWeight","fontStyle"].reduce(function(e,t){return i[t]&&(e[t]=i[t]),e},{});r.push(i.format),n["imported_class"+e]=t}),e.data.forEach(function(e){var n=[];e.cells.forEach(function(e,i){e.forEach(function(e,t){e&&(e={cell:s.getCellNameByIndex(i,t+1,o),value:e.v,css:["imported_class"+e.s],format:r[e.s]},n.push(e))})}),t.push({name:e.name,data:n,cols:e.cols,rows:e.rows,merged:e.merged})}),{sheets:t,styles:n}},n);function n(){}t.XlsxDriver=i},function(e,n,r){"use strict";(function(i){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),e=(t.prototype.load=function(n,e){var o=this;return void 0===n&&(n="xlsx"),new i(function(i){o._getFile(n,e).then(function(e){if("json"===n)return i(e);e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t=o._spreadsheet.config.importModulePath,t=o._getXlsxWorker(t);t.postMessage({type:"convert",data:e,formulas:!0}),t.onmessage=function(e){"ready"===e.data.type&&i(e.data)}})})},t.prototype._getXlsxWorker=function(e){return this._xlsxWorker||(e=window.URL.createObjectURL(new Blob(["importScripts('"+e+"');"],{type:"text/javascript"})),this._xlsxWorker=new Worker(e)),this._xlsxWorker},t.prototype._getFile=function(n,t){return void 0===n&&(n="xlsx"),new i(function(i){if(t)return o.fetchFile(t,"GET","arraybuffer").then(function(e){i(e)});var e=document.createElement("input");e.type="file",e.accept="."+n,e.click(),e.addEventListener("change",function(e){var t=new FileReader;t.onload=function(){var e=t.result;i("json"===n?e:new Uint8Array(e))},"json"===n?t.readAsText(e.target.files[0]):t.readAsArrayBuffer(e.target.files[0])})})},t);function t(e){this._spreadsheet=e}n.FileProxy=e}).call(this,r(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(34);t.Store=n.Store,t.initMathStore=function(e){var t=new n.DataStore({strict:!1});return e.forEach(function(e){return t.addPage(e.value)}),t}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.detectDrag=function(r){return new e(function(t){var i=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),t(!1)},n=setTimeout(function(){i()},1e3),o=function(e){(4<Math.abs(e.pageX-r.pageX)||4<Math.abs(e.pageY-r.pageY))&&(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),clearTimeout(n),t({x:r.pageX,y:r.pageY}))};document.addEventListener("mousemove",o),document.addEventListener("mouseup",i)})}}).call(this,i(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={popups:{},lastActive:null,freeCount:0,add:function(e,t){this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"),this.popups[e]=t},setActive:function(e){var t;e===this.lastActive||(t=this.popups[e])&&(this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"))},openFreeWindow:function(e){0===this.freeCount&&e.classList.add("dhx_window--no-scroll"),this.freeCount++},closeFreeWindow:function(e){this.freeCount--,0===this.freeCount&&e.classList.remove("dhx_window--no-scroll")}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(88),a=i(30),l=i(14),c=i(22),f=i(44),o=(r=s.Window,o(u,r),u.prototype._startResize=function(r){var e,t,s=this,a=100|this.config.minWidth,l=100|this.config.minHeight,c=this._popup.offsetLeft,u=this._popup.offsetTop,d=this._popup.offsetWidth,h=this._popup.offsetHeight,i=this.getRootView().refs;switch(!0){case r.bottom&&r.left:t="dhx_window-body-pointer--bottom_left",e=i.bottomLeft;break;case r.bottom&&r.right:t="dhx_window-body-pointer--bottom_right",e=i.bottomLeft;break;case r.top&&r.left:t="dhx_window-body-pointer--top_left",e=i.bottomLeft;break;case r.top&&r.right:t="dhx_window-body-pointer--top-right",e=i.right;break;case r.top:t="dhx_window-body-pointer--top",e=i.bottomLeft;break;case r.bottom:t="dhx_window-body-pointer--bottom",e=i.bottomLeft;break;case r.left:t="dhx_window-body-pointer--left",e=i.bottomLeft;break;case r.right:t="dhx_window-body-pointer--right",e=i.right}e.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(t);function n(e){var t=(o=s._getContainerParams()).containerInnerWidth,i=o.containerInnerHeight,n=o.containerXOffset,o=o.containerYOffset,e={width:s._notInNode()?e.pageX-c:e.pageX-s.config.node.offsetLeft-c,height:s._notInNode()?e.pageY-u:e.pageY-s.config.node.offsetTop-u,left:s._notInNode()?e.pageX:e.pageX-s.config.node.offsetLeft,top:s._notInNode()?e.pageY:e.pageY-s.config.node.offsetTop};r.right&&(e.width<a?e.width=a:e.width>n+t-c&&(e.width=n+t-c),s._popup.style.width=e.width+"px"),r.bottom&&(e.height<l?e.height=l:e.height>o+i-u&&(e.height=o+i-u),s._popup.style.height=e.height+"px"),r.left&&(c+d-e.left<a&&(e.left=c+d-a),e.width=c+d-e.left,s.config.left=e.left,s._popup.style.left=e.left+"px",s._popup.style.width=e.width+"px"),r.top&&(e.top<o?e.top=o:u+h-e.top<l&&(e.top=u+h-l),e.height=u+h-e.top,s.config.top=e.top,s._popup.style.top=e.top+"px",s._popup.style.height=e.height+"px"),s.config.width=s._popup.offsetWidth,s.config.height=s._popup.offsetHeight,s.events.fire(f.WindowEvents.resize,[e,{left:c,top:u,height:h,width:d},r]),s.scrollView&&s.scrollView.update()}var o=function(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",n),s.config.node.classList.remove("dhx_window--stop_selection"),s.config.node.classList.remove(t),e.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",o),document.addEventListener("mousemove",n)},u.prototype._initUI=function(){var i=this,e=[],t=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;t&&e.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),e.push({id:"content",css:t?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&e.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&e.push({id:"resizers",height:"content",css:"resizers"});var n,o=this._layout=new l.ProLayout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:e,on:{mousedown:this._handlers.setActive},id:this._uid}),e=this._layout.getCell("content");e&&e.scrollView&&(this.scrollView=e.scrollView),t&&(n=this.header=new a.Toolbar,this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),n.events.on(c.NavigationBarEvents.click,function(e,t){"close"===e&&i._hide(t)})),o.getCell("header").attach(n)),this.config.footer&&(n=this.footer=new a.Toolbar,o.getCell("footer").attach(n)),this.config.resizable&&o.getCell("resizers").attach(function(){return i._drawResizers()})},u);function u(e){return r.call(this,e)||this}t.ProWindow=o},function(e,t,i){"use strict";var h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var f=i(5),p=i(2),g=i(43),v=i(18),_=i(1);function m(e){if(!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&32===e.keyCode)){e=e.which||e.keyCode;return 65<=e&&e<=90||48<=e&&e<=57||96<=e&&e<=105||!!{32:" ",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[e]||!1}}function y(o){var e,t=o.selection.getSelectedCell();return t.includes(",")&&(t=(e=t.split(","))[e.length-1]),'\n\t\x3c!--StartFragment--\x3e\n\t\t<table id="customers">\n\t\t\t<tbody style="box-sizing: inherit;">\n\t\t\t\t'+(p.isRangeId(t)?p.getRangeMatrix(t,o._grid):[[t]]).reduce(function(e,t){return e+'<tr style="box-sizing: inherit;">'+t.reduce(function(e,t){var i=o.getValue(t)||" ",n=o.getStyle(t)||{};return e+' <th style="'+Object.keys(n).reduce(function(e,t){return""+e+t+":"+n[t]+";"},"")+'">\n\t\t\t'+i+"</th>"},"")+"</tr>"},"")+"\n\t\t\t</tbody>\n\t\t</table>\n\t\x3c!--EndFragment--\x3e"}function b(e,t){return"row"===t?{min:0,max:e.data.getLength()-1}:{min:1,max:e.config.columns.length-1}}function w(e,t,i,n,o,r){var s,a,l,c,u,d=e.selection.getFocusedCell();p.getCellInfo(d,n,t).edited||(c=p.getCellIndex(d,t),s=b(t,r),(a=o?c[r]+o:i)>=s.min&&a<=s.max&&(c[r]=a),u=p.getCellNameByIndex(c.row,c.col,t),null==(i=n.getMeta().merged)||!i.length||(a=p.isCellSpaned(u,i,t))&&(n=p.isCellSpaned(d,i,t),d="col"===r?"column":"row",(i={from:h({},a.from),to:h({},a.to)}).from.column+=1,i.to.column+=1,u=a===n?((l=0<o?i.to[d]+1:i.from[d]-1)>=s.min&&l<=s.max&&(c[r]=l),p.getCellNameByIndex(c.row,c.col,t)):(l=("row"==d?i.from:c).row,c="column"==d?i.from.column:c.col,p.getCellNameByIndex(l,c,t))),e.selection.setSelectedCell(u),u=p.getCellIds(u,t),t.scrollTo(""+(u.row+1),""+(u.col+1)))}function x(e,t,i,n,o){var r,s,a,l=e.selection.getFocusedCell();p.getCellInfo(l,o,t).edited||(s=p.getCellIndex(l,t),r=(o=e.selection.getSelectedCell().split(",")[0]).includes(":")?(r=p.getRangeIndexes(o,t)).end[n]>s[n]?(a=h({},r.end),r.start):(a=h({},r.start),r.end):(a=h({},s),s),s=b(t,n),a[n]+i>=s.min&&a[n]+i<=s.max&&(a[n]+=i,(a=p.getCellNameByIndex(a.row,a.col,t))!==(r=p.getCellNameByIndex(r.row,r.col,t))?(e.selection.setSelectedCell(a+":"+r),e.selection.setFocusedCell(l)):e.selection.setSelectedCell(a)))}t.isPrintableKey=m,t.getHtmlData=y,t.getKeysHandlers=function(r,s,a,o){var l,n;function i(e,t){var i=a.getStruct(),n=r.selection.getSelectedCell(),o=p.getCellIndex(n,s),o=p.getCellNameByIndex(o.row+e.rowsCount-1,o.col+e.colsCount-1,s),o=p.isRangeId(n)?n:n+":"+o;e.styles?i.styles=e.styles:i.styles=r.getStyle(o),_.isDefined(t)&&!t.includes(i.html)&&(i.cells=""),t=i.value,i.value=e.values,i.cell=o,a.paste(),i.value=t}r.events.on(f.SpreadsheetEvents.afterEditStart,function(e){l=e}),r.events.on(f.SpreadsheetEvents.afterEditEnd,function(){l=null}),r.events.on(f.SpreadsheetEvents.afterSheetChange,function(){return n=r._activePage}),document.addEventListener("keydown",function(e){var t;!m(e)||v.focusManager.getFocusId()!==r._uid&&v.focusManager.getFocusId()!==s._uid||(t=r.selection.getFocusedCell())&&t!==l&&(e.preventDefault(),r.startEdit(t,e.key))});var e={};function t(e){e.preventDefault();e=r.selection.getSelectedCell(),e=g.getToggledValue(n,e,"text-decoration","line-through",s);r.setStyle(r.selection.getSelectedCell(),{"text-decoration":e})}function c(e,t){t.preventDefault(),r.setStyle(r.selection.getSelectedCell(),{"text-align":e})}function u(e,t){t.preventDefault();var i=r._sheets,n=r.getActiveSheet().id,t=i.getIndex(n),n=i.getLength()-1,t=t+e,e="add-sheet"===i.getId(0)?1:0;t<e&&(t=n),n<t&&(t=e),r.setActiveSheet(i.getId(t))}function d(e,t){t.preventDefault();var i=r.selection.getFocusedCell(),n=p.getCellIds(i,s),o=n.row,t=n.col,n=p.getCellNameById(s,e?s.data.getLength():o+1,e?t+1:s.config.columns.length-1),t=p.getCellNameById(s,e?1:o+1,e?t+1:1);r.selection.setSelectedCell(t+":"+n),r.selection.setFocusedCell(i)}return window.clipboardData?e={"ctrl+c":function(){l||(a.store("copy"),window.clipboardData&&(window.clipboardData.setData("text/html",y(r)),window.clipboardData.setData("text/plain",a.getStruct().value),window.preventDefault(),a.getStruct().html=window.clipboardData.getData("text/html")))},"ctrl+x":function(){l||(a.store("cut"),window.clipboardData&&(window.clipboardData.setData("text/html",y(r)),window.clipboardData.setData("text/plain",a.getStruct().value),window.preventDefault(),a.getStruct().html=window.clipboardData.getData("text/html")))},"ctrl+v":function(){var e,t;l||window.clipboardData&&(e=p.parseFromText(window.clipboardData.getData("text")),(t=window.clipboardData.getData("text/html"))&&t.includes("<table")&&(e=p.parseHtmlTable(t)),i(e,t||""))}}:(document.addEventListener("cut",function(e){l||v.focusManager.getFocusId()!==r._uid&&v.focusManager.getFocusId()!==s._uid||(a.store("cut"),e.clipboardData.setData("text/html",y(r)),e.clipboardData.setData("text/plain",a.getStruct().value),e.preventDefault(),a.getStruct().html=e.clipboardData.getData("text/html"))}),document.addEventListener("copy",function(e){l||v.focusManager.getFocusId()!==r._uid&&v.focusManager.getFocusId()!==s._uid||(a.store("copy"),e.clipboardData.setData("text/html",y(r)),e.clipboardData.setData("text/plain",a.getStruct().value),e.preventDefault(),a.getStruct().html=e.clipboardData.getData("text/html"))}),document.addEventListener("paste",function(e){var t;l||v.focusManager.getFocusId()!==r._uid&&v.focusManager.getFocusId()!==s._uid||(e.preventDefault(),t=e.clipboardData.getData("text/html"),e=p.parseFromText(e.clipboardData.getData("text")),t&&t.includes("<table")&&(e=p.parseHtmlTable(t)),i(e,t||""))})),h(h({},e),{escape:function(){var e=r.selection.getSelectedCell(),e=p.getCellInfo(e,n,s);a.getStruct().inserted=!0,e.edited&&(r.endEdit(!0),s.paint())},delete:function(){var e;l||((e=r.selection.getSelectedCell())&&r.setValue(e,""),s.paint())},enter:function(){var e=r.selection.getSelectedCell(),t=r.selection.getFocusedCell(),i=r._editMode;if(!o.navigate("enter"))if(l||i&&i.cell){var n=p.getCellIndex(l||i.cell,s);n.row=n.row+1===s.data.getLength()?n.row:n.row+1,r.selection.setSelectedCell(p.getCellNameByIndex(n.row,n.col,s)),l="",p.isRangeId(e)&&!i&&(r.selection.setSelectedCell(e),r.selection.setFocusedCell(p.getNextRangeCell(e,t,s,"col")))}else{if(p.isRangeId(e))return r.endEdit(),r.selection.setSelectedCell(e),void r.selection.setFocusedCell(p.getNextRangeCell(e,t,s,"col"));r.startEdit(e)}},f2:function(){r.startEdit(r.selection.getSelectedCell())},pageUp:function(e){e.preventDefault();e=s.getRootView().refs.grid_body;e.el.scrollTop-=e.el.clientHeight},pageDown:function(e){e.preventDefault();e=s.getRootView().refs.grid_body;e.el.scrollTop+=e.el.clientHeight-s.config.rowHeight},"ctrl+a":function(e){var t;l||(e.preventDefault(),t=p.getCellNameByIndex(0,1,s),e=p.getCellNameByIndex(s.data.getLength()-1,s.config.columns.length-1,s),r.selection.setSelectedCell(t+":"+e))},"shift+arrowLeft":function(){x(r,s,-1,"col",n)},"shift+arrowRight":function(){x(r,s,1,"col",n)},"shift+arrowDown":function(){x(r,s,1,"row",n)},"shift+arrowUp":function(){x(r,s,-1,"row",n)},"ctrl+enter":function(){r.endEdit()},"shift+enter":function(){var e=r.selection.getSelectedCell();if(p.isRangeId(e)){var t=r.selection.getFocusedCell();return r.endEdit(),r.selection.setSelectedCell(e),void r.selection.setFocusedCell(p.getPrevRangeCell(e,t,s,"col"))}w(r,s,null,n,-1,"row")},tab:function(e){e.preventDefault();var t=r.selection.getSelectedCell();if(p.isRangeId(t)){e=r.selection.getFocusedCell();return r.endEdit(),r.selection.setSelectedCell(t),void r.selection.setFocusedCell(p.getNextRangeCell(t,e,s))}w(r,s,null,n,1,"col")},"shift+tab":function(e){e.preventDefault();var t=r.selection.getSelectedCell();if(p.isRangeId(t)){e=r.selection.getFocusedCell();return r.endEdit(),r.selection.setSelectedCell(t),void r.selection.setFocusedCell(p.getPrevRangeCell(t,e,s))}w(r,s,null,n,-1,"col")},arrowLeft:function(e){l||(e.preventDefault(),w(r,s,null,n,-1,"col"))},arrowRight:function(e){l||(e.preventDefault(),w(r,s,null,n,1,"col"))},arrowDown:function(e){e.preventDefault(),o.navigate("arrowDown")||l||w(r,s,null,n,1,"row")},arrowUp:function(e){e.preventDefault(),o.navigate("arrowUp")||l||w(r,s,null,n,-1,"row")},"ctrl+arrowLeft":function(){w(r,s,1,n,null,"col")},"ctrl+arrowRight":function(){w(r,s,s.config.columns.length-1,n,null,"col")},"ctrl+arrowDown":function(){w(r,s,s.data.getLength()-1,n,null,"row")},"ctrl+arrowUp":function(){w(r,s,0,n,null,"row")},home:function(e){l||(e.preventDefault(),w(r,s,1,n,null,"col"))},end:function(e){l||(e.preventDefault(),w(r,s,s.config.columns.length-1,n,null,"col"))},"ctrl+home":function(){w(r,s,0,n,null,"row"),w(r,s,1,n,null,"col")},"ctrl+end":function(){w(r,s,s.data.getLength()-1,n,null,"row"),w(r,s,s.config.columns.length-1,n,null,"col")},"ctrl+z":function(e){var t=r.selection.getFocusedCell(),i=p.getCellInfo(t,n,s);t&&i.edited||e.preventDefault(),r.undo()},"ctrl+y":function(e){e.preventDefault(),r.redo()},"ctrl+shift+z":function(){r.redo()},"ctrl+b":function(){var e=r.selection.getSelectedCell(),e=g.getToggledValue(n,e,"font-weight","bold",s);r.setStyle(r.selection.getSelectedCell(),{"font-weight":e})},"ctrl+i":function(){var e=r.selection.getSelectedCell(),e=g.getToggledValue(n,e,"font-style","italic",s);r.setStyle(r.selection.getSelectedCell(),{"font-style":e})},"ctrl+u":function(e){e.preventDefault();e=r.selection.getSelectedCell(),e=g.getToggledValue(n,e,"text-decoration","underline",s);r.setStyle(r.selection.getSelectedCell(),{"text-decoration":e})},"ctrl+f":function(e){e.preventDefault(),r.search("",!0)},"alt+shift+5":function(e){p.isMac()||t(e)},"ctrl+shift+x":function(e){p.isMac()&&t(e)},"ctrl+shift+e":function(e){c("center",e)},"ctrl+shift+l":function(e){c("left",e)},"ctrl+shift+r":function(e){c("right",e)},"shift + F11":function(e){e.preventDefault(),r.addSheet()},"alt + arrowUp":function(e){u(1,e)},"alt + arrowDown":function(e){u(-1,e)},"ctrl + space":function(e){d(!0,e)},"shift + space":function(e){d(!1,e)},"ctrl+k":function(e){e.preventDefault();e=r.selection.getFocusedCell();r._showLinkPopup(e)},backspace:function(){l||r.setValue(r.selection.getSelectedCell(),"")}})}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=i(8),s=i(5),a=i(29),l=i(18),c=i(13),i=(u.prototype.endEdit=function(){var t=this;this.edit&&(o.awaitRedraw().then(function(){var e;t._events.fire(s.SpreadsheetEvents.cellInput,[t._config.oninput[1],(null===(e=t._list.selection.getItem())||void 0===e?void 0:e.value)||t._input.value]),t._endEdit(),t._popup.hide()}),this.edit=!1)},u.prototype.setValue=function(e){e=e.filter(function(e){return e||c.isNumeric(e)}).map(function(e){return(null==e?void 0:e.toString().trim())||""}),e=new Set(e);this._data.parse(Array.from(e).map(function(e){return{value:e}}))},u.prototype.toHTML=function(e){var t=this;return this._config=e,this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),[o.el("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide(),"ArrowDown"!==e.code&&"ArrowUp"!==e.code||l.focusManager.setFocusId(t._list._uid)},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:function(){return document.removeEventListener("mousedown",t._handlers.onOuterClick)}})})),o.el(".dxi.dxi-menu-up.dhx_spreadsheet_cell_icon",{onclick:function(){return t.endEdit()}})]},u.prototype._filter=function(t){this._list.data.filter(function(e){return t?e.value.includes(t):e})},u.prototype._showPopup=function(){var e,t=this;this._popup.show(this._input,{centering:!0,mode:"bottom"}),this._list.selection.add((null===(e=this._list.data.find(function(e){return e.value===t._input.value}))||void 0===e?void 0:e.id)||"")},u.prototype._initHandlers=function(){var i=this;this._handlers={onFocus:function(){o.awaitRedraw().then(function(){i._showPopup()})},onOuterClick:function(e){var t;e.target instanceof Node&&(t=i._input&&i._input.contains(e.target),e=i._popup&&i._popup.getRootNode()&&i._popup.getRootNode().contains(e.target),t||e||i._popup.hide())},oninput:function(e){var t=e.target.value;t||i._showPopup(),t.startsWith("=")&&i._popup.isVisible()&&i._popup.hide(),i._filter(t);t=i._config.oninput;(0,t[0])(t[1],e)},didInsert:function(e){var t=e.el;i._input=t,i._input.addEventListener("focus",i._handlers.onFocus),i._config._hooks.didInsert(e)}},this._list.events.on(a.ListEvents.click,function(){i.endEdit()}),this._events.on(s.SpreadsheetEvents.afterEditEnd,function(){i._popup.hide()}),this._popup.events.on(r.PopupEvents.afterShow,function(){var e=i._list.getFocus();i._list.data.getItem(e)||i._list.setFocus(i._list.data.getId(0))})},u);function u(e,t){this._list=new a.List(null,{keyNavigation:!0,css:"dhx_editor-list"}),this._data=this._list.data,this._popup=new r.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._list),this._events=t,this._endEdit=e,this._initHandlers()}t.SelectEditor=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),o=i(53),s=i(8),a=i(5),l=i(13),c=i(27),i=(u.prototype.endEdit=function(){},u.prototype.setValue=function(e){this._isFromSet=!0,this._initialDate&&l.isNumeric(e)&&(this._initialDate=c.excelDateToJSDate(e));var t=l.isNumeric(e)?c.excelDateToJSDate(e):c.timeStringToJS(e);t!==e&&this._timepicker.setValue(t)},u.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},u.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this._initialDate=e.initValue,document.addEventListener("mousedown",this._handlers.onOuterClick),r.el("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:this._handlers.didRemove})}))},u.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},u.prototype._initHandlers=function(){var o=this;this._handlers={onFocus:function(){r.awaitRedraw().then(function(){o._showPopup()})},onOuterClick:function(e){var t;e.target instanceof Node&&(t=o._input&&o._input.contains(e.target),e=o._popup&&o._popup.getRootNode()&&o._popup.getRootNode().contains(e.target),t||e||o._popup.hide())},oninput:function(e){var t=e.target.value;t||o._showPopup(),t.startsWith("=")&&o._popup.isVisible()&&o._popup.hide();var i=o._config.oninput,n=i[0],i=i[1];o.setValue(t),n(i,e)},didInsert:function(e){var t=e.el;o._input=t,o._input.addEventListener("focus",o._handlers.onFocus),o._config._hooks.didInsert(e),o._initTimePickerEvents()},didRemove:function(){document.removeEventListener("mousedown",o._handlers.onOuterClick)}}},u.prototype._initTimePickerEvents=function(){var t=this;this._timepicker.events.on(o.TimepickerEvents.change,function(e){t._isFromSet?r.awaitRedraw().then(function(){t._isFromSet=!1}):t._events.fire(a.SpreadsheetEvents.cellInput,[t._config.oninput[1],l.getFormattedValue(c.getExcelDateFromJs(c.timeStringToJS(e)),t._config.format)])})},u);function u(e,t,i){this._timepicker=new o.Timepicker(null,{timeFormat:t}),this._popup=new s.Popup({css:"dhx_editor_popup"}),this._popup.attach(this._timepicker),this._events=i,this._initHandlers()}t.TimeEditor=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(57),r=i(5),s=i(45),a=i(12),l=i(8),c=i(2),i=(u.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide(),this._events.fire(r.SpreadsheetEvents.afterPopupHide)},u.prototype.formValidation=function(e){if(!e)return!0;if("range"!==this._form.getItem("criteria").getValue())return!0;var t=c.getCellIds(e,this._grid),e=t.row,t=t.start;return e||t},u.prototype.show=function(e,t){this._modal.isVisible()||this._modal.show();var i=n({},t);t.editor&&(t=t.editor.options,i.target="string"==typeof t?t:t.join(","),i.criteria="string"==typeof t?"range":"items"),this._form.setValue(n({cell:e,criteria:"items",target:""},i))},u.prototype._save=function(e){var t=this._form.getValue(),i=t.target,n=t.cell,t=t.criteria;this._form.validate()?e&&!i||((t="range"===t)&&!c.getCellIds(i,this._grid).start&&(i+=":"+i),this.hide(),i=t?i:i.split(",").map(function(e){return e.trim()}),this._set(n,e?i:null)):this._form.blur("target")},u.prototype._initHandlers=function(){var t=this;this._form.events.on(o.FormEvents.focus,function(e){t._focus=e}),this._modal.events.on(l.PopupEvents.afterShow,function(){t._form.setFocus("target")}),this._form.events.on(o.FormEvents.click,function(e){switch(e){case"save":t._save(!0);break;case"remove":t._save(!1);break;default:t.hide()}}),this._form.getItem("criteria").events.on(o.FormEvents.change,function(e){e="Enter "+("range"===e?"cell range":" items separated by a comma");t._form.getItem("target").setProperties({placeholder:e}),t._form.setFocus("target")}),this._events.on(r.SpreadsheetEvents.afterSelectionSet,function(e){"cell"===t._focus&&(t._form.setValue({cell:e}),t._form.setFocus("cell")),"target"===t._focus&&"range"===t._form.getItem("criteria").getValue()&&(t._form.setValue({target:e}),t._form.setFocus("target"))})},u);function u(e,t,i){this._set=t,this._grid=i,this._modal=new s.Window({title:a.default.validation,movable:!0,closable:!0,css:"dhx-spreadsheet-form-validation",height:250,width:600}),this._form=new o.Form(null,{rows:[{name:"cell",type:"input",label:"Cell range:",labelPosition:"left",labelWidth:70,width:270,placeholder:"Enter cell range"},{cols:[{name:"criteria",type:"combo",label:"Criteria:",labelPosition:"left",labelWidth:70,width:270,readonly:!0,multiselection:!1,data:[{value:"List of items",id:"items"},{value:"List from a range",id:"range"}]},{labelWidth:3,width:260,labelPosition:"left",name:"target",type:"input",validation:this.formValidation.bind(this),errorMessage:"Invalid cell range",placeholder:"Enter cell range"}]},{align:"end",cols:[{type:"button",text:a.default.cancel,id:"cancel",view:"link"},{type:"button",text:a.default.removeValidation,id:"remove",view:"link"},{type:"button",text:a.default.save,id:"save"}]}]}),this._modal.attach(this._form),this._events=e,this._initHandlers()}t.ValidationForm=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a,l=i(1),c=i(0),u=i(4),d=i(7),h=i(9),f=i(6);(i=a=t.RadioButtonEvents||(t.RadioButtonEvents={})).change="change",i.focus="focus",i.blur="blur",i.keydown="keydown";var p,o=(p=d.View,o(g,p),g.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._handlers=this._uid=this._props=this._propsItem=null,this.unmount()},g.prototype.setProperties=function(e){if(e&&!l.isEmptyObj(e)){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.paint()}},g.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},g.prototype.getValue=function(){if(this.config.checked)return this.config.value},g.prototype.setValue=function(e){this.config.checked=e,this.paint()},g.prototype.focus=function(){var e=this;c.awaitRedraw().then(function(){e.getRootView().refs.input.el.focus()})},g.prototype.blur=function(){var e=this;c.awaitRedraw().then(function(){e.getRootView().refs.input.el.blur()})},g.prototype.disable=function(){this.config.$disabled=!0,this.paint()},g.prototype.enable=function(){this.config.$disabled=!1,this.paint()},g.prototype.isDisabled=function(){return this.config.$disabled},g.prototype.clear=function(){this.config.checked=!1,this.paint()},g.prototype.validate=function(){var e=!1;return this.config.checked&&(e=!0),this.config.$validationStatus=e?f.ValidationStatus.success:f.ValidationStatus.error,this.paint(),e},g.prototype.clearValidate=function(){this.config.$validationStatus=f.ValidationStatus.pre,this.paint()},g.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.checked,o=e.$disabled,r=e.$name,s=e.$required,e=e.text;return c.el("label.dhx_radiobutton.dhx_form-group",{class:h.getFormItemCss(this.config,!!s)},[c.el("input.dhx_radiobutton__input",{type:"radio",id:t,value:i||"",name:r||"",disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input"}),c.el("span.dhx_radiobutton__visual-input"),c.el("span.dhx_text",[e])])},g);function g(e,t){void 0===t&&(t={});var i=p.call(this,e,r({text:"",width:"content",height:"content"},t))||this;i._propsItem=["text"],i._props=s(h.baseProps,i._propsItem),i._handlers={onchange:function(e){i.config.checked=e.target.checked,i.events.fire(a.change,[e.target.checked])},onfocus:function(){return i.events.fire(a.focus,[i.getValue()||"",i.config.id])},onblur:function(){var e;return null===(e=i.events)||void 0===e?void 0:e.fire(a.blur,[i.getValue()||"",i.config.id])},onkeydown:function(e){i.events.fire(a.keydown,[e,i.config.id])}},i.events=new u.EventSystem;return i.mount(e,c.create({render:function(){return i._draw()}})),i}t.RadioButton=o},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(100)),n(t(231)),n(t(35))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(1),l=i(4),c=i(7),u=i(11),d=i(14),h=i(30),f=i(22),p=i(47),g=i(35),v=i(100),_=i(232),m=i(101),y=i(233),b=i(234),w=i(235),x=i(29),C=i(0),o=(s=c.View,o(E,s),E.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort(),this.unmount()},E.prototype.getRootView=function(){return this._layout.getRootView()},E.prototype.paint=function(){var e=this._canDrop||!this.data.getLength();this._activeView=e?this._emptyField:this.config.mode===g.VaultMode.grid||this.toolbar&&this.toolbar.getState().mode===g.VaultMode.grid?this.grid:this.list,this._layout.getCell("vault").attach(this._activeView)},E.prototype._initUI=function(e){var t=this._layout=new d.Layout(e,{css:"dhx_vault",rows:[{id:"toolbar",css:"dhx_vault--toolbar",height:"content"},{id:"vault",css:"dhx_vault--container"}],on:this._getDragEvents()});this._initToolbar(),t.getCell("toolbar").attach(this.toolbar),this._initEmpty(),this._initList(),this._initGrid(e),this.config.toolbar||t.getCell("toolbar").hide(),this.paint()},E.prototype._initList=function(){var n=this,e="ontouchstart"in document.documentElement;this.list=new x.List(null,{data:this.data,dragMode:"both",multiselection:e||"ctrlClick",template:_.listTemplate,eventHandlers:_.getContainersEvents(this.data),keyNavigation:!0,editable:this.config.editable,itemHeight:49,hotkeys:{delete:function(){var e=null===(e=n.list.selection.getItem())||void 0===e?void 0:e.map(function(e){return e.id});e.length&&n.data.remove(e)}}}),this.list.events.on("afterEditEnd",function(e,t){var i=n.list.data.getItem(t);n.list.data.update(t,{name:e+"."+i.extension})})},E.prototype._initGrid=function(e){var t=this,i="ontouchstart"in document.documentElement;this.grid=new w.DataView(null,{gap:8,itemsInRow:4,dragMode:"both",multiselection:i||"ctrlClick",data:this.data,template:_.gridTemplate,eventHandlers:_.getContainersEvents(this.data),keyNavigation:!0,editable:this.config.editable,hotkeys:{delete:function(){var e=null===(e=t.list.selection.getItem())||void 0===e?void 0:e.map(function(e){return e.id});e.length&&t.data.remove(e)}}}),this.grid.selection=this.list.selection,e&&("string"==typeof e&&(e=document.getElementById(e)),this.grid.config.itemsInRow=Math.floor(e.offsetWidth/100))},E.prototype._initToolbar=function(){this.toolbar=new h.Toolbar(null,{css:"vault-toolbar"}),this.toolbar.data.parse([{id:"add",tooltip:p.default.add,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-plus"},{id:"mode-separator",type:"separator"},{id:"list",tooltip:p.default.list,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-view-sequential",active:this.config.mode===g.VaultMode.list,group:"mode"},{id:"grid",tooltip:p.default.grid,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-view-grid",active:this.config.mode===g.VaultMode.grid,group:"mode"},{id:"upload-separator",type:"separator"},{id:"upload",tooltip:p.default.upload,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-vault"},{id:"spacer",type:"spacer"},{id:"remove-all",tooltip:p.default.clearAll,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-delete-forever"}]),this.config.modeControls||this.toolbar.hide(["mode-separator","list","grid","upload-separator"]),this._hideAdditionalButtons()},E.prototype._initEmpty=function(){var e=this;return this._emptyField=c.toViewLike(C.create({render:function(){return C.el(".dhx-dropable-area.drop-files-here",[C.el(".dhx-big-icon-block",[C.el(".dxi.dxi-vault")]),!e._canDrop&&C.el(".drop-area-bold-text",p.default.dragAndDrop),!e._canDrop&&C.el(".drop-area-bold-text",p.default.filesOrFoldersHere),!e._canDrop&&C.el(".drop-area-light-text",p.default.or),!e._canDrop&&C.el("button.dhx_button.dhx_button--view_flat.dhx_btn--small.dhx_button--color_primary.dhx_button--size_small",{onclick:function(){return e.uploader.selectFile()}},p.default.browse)])}}))},E.prototype._changeUI=function(e){this.config.mode=e,this._activeView=e===g.VaultMode.grid?this.grid:this.list,this.data.getLength()&&this.paint()},E.prototype._initEvents=function(){var i=this;this.data.events.on(u.DataEvents.change,function(){i.data.getLength()?i._showAdditionalButtons():i._hideAdditionalButtons(),i.config.downloadURL&&i.data.forEach(function(e){e.downloadURL||(e.downloadURL=i.config.downloadURL)}),i.paint()}),this.events.on(g.UploaderEvents.uploadBegin,function(){i.config.toolbar&&i._layout.getCell("toolbar").attach(i._progressBar)}),this.events.on(g.UploaderEvents.uploadComplete,function(){i.config.toolbar&&i._layout.getCell("toolbar").attach(i.toolbar)}),this.toolbar.events.on(f.NavigationBarEvents.click,function(e){switch(e){case"add":i.uploader.selectFile();break;case"remove-all":var t;i.data.getLength()&&((t=i._activeView.selection.getItem())&&0<t.length?t.forEach(function(e){m.removeItem(i.data,e.id)}):i.data.removeAll());break;case"list":case"grid":i._changeUI(e);break;case"upload":i.uploader.send()}}),this.events.on(g.ProgressBarEvents.cancel,function(){i.uploader.abort(),i.paint()})},E.prototype._getDragEvents=function(){var o=this,r={left:null,top:null,width:null,height:null};return{dragleave:function(e){o._canDrop&&(e.pageX>r.left+r.width-1||e.pageX<r.left||e.pageY>r.top+r.height-1||e.pageY<r.top)&&(o._canDrop=!1,o.config.toolbar&&o._layout.getCell("toolbar").show(),o._layout.config.css="dhx_vault",o.paint())},dragenter:function(e){if(e.preventDefault(),!o.uploader.isActive&&!o._canDrop){for(var t=0,i=e.dataTransfer.types;t<i.length;t++){var n=i[t];if("Files"!==n&&"application/x-moz-file"!==n)return void(o._canDrop=!1)}o._canDrop=!0;e=o.getRootView().node.el.getBoundingClientRect();r.left=e.left+window.pageXOffset,r.top=e.top+window.pageYOffset,r.width=e.width,r.height=e.height,o._canDrop=!0,o.config.toolbar&&o._layout.getCell("toolbar").hide(),o._layout.config.css="dhx_vault dhx-dragin "+(o._canDrop?" drop-here":""),o.paint()}},dragover:function(e){e.preventDefault()},drop:function(e){e.preventDefault(),o._canDrop&&(e=e.dataTransfer,o.uploader.parseFiles(e),o._canDrop=!1,o.config.toolbar&&o._layout.getCell("toolbar").show(),o._layout.config.css="dhx_vault",o.paint())}}},E.prototype._hideAdditionalButtons=function(){var t=this,e=["upload",this.config.modeControls?"upload-separator":""];r(["mode-separator","list","grid"],e,["remove-all"]).forEach(function(e){t.toolbar.data.getItem(e)&&!t.toolbar.data.getItem(e).hidden&&t.toolbar.hide(e)})},E.prototype._showAdditionalButtons=function(){var t=this,e=this.config.modeControls?["mode-separator","list","grid"]:[],i=this.uploader.config.autosend?[]:["upload",this.config.modeControls?"upload-separator":""],i=r(e,i,["remove-all"]);this.toolbar.data.update("remove-all",{tooltip:this._activeView.selection&&this._activeView.selection.getItem()?p.default.clearAllSelected:p.default.clearAll}),i.forEach(function(e){t.toolbar.data.getItem(e)&&t.toolbar.data.getItem(e).hidden&&t.toolbar.show(e)})},E);function E(e,t){void 0===t&&(t={});var n=s.call(this,null,a.extend({mode:g.VaultMode.list,modeControls:!0,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{},disablePreview:!1,editable:!0},t))||this;return n.config.toolbar||(n.config.uploader.autosend=!0),t.data?(n.data=t.data,n.events=t.data.events,n.events.context=n):(n.events=new l.EventSystem(n),n.data=new u.DataCollection({},n.events)),n.data.config.init=function(e){var t;return e.status=e.status||g.FileStatus.uploaded,e.file?(e.size=e.file.size,e.name=e.file.name,e.value=null===(t=e.file.name)||void 0===t?void 0:t.split(".").slice(0,-1).join("."),e.extension=null===(t=e.file.name)||void 0===t?void 0:t.split(".").pop()):(e.size=e.size||0,e.name=e.name||"",e.value=(null===(t=e.name)||void 0===t?void 0:t.split(".").slice(0,-1).join("."))||"",e.extension=null===(t=e.name)||void 0===t?void 0:t.split(".").pop()),e.preview=!n.config.disablePreview,e.file&&m.isImage(e)&&n._readStack.add(e,n.uploader.config.autosend||n.config.disablePreview),e},n._readStack=new b.ReadStackPreview(n.data),n.uploader=new v.Uploader(n.config.uploader,n.data,n.events),n._progressBar=new y.ProgressBar(n.events,n.config.progressBar),n.events.on(g.UploaderEvents.uploadProgress,function(e,t,i){return n._progressBar.setState(e,{current:t,total:i})}),n._initUI(e),n._initEvents(),n}t.Vault=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),o=i(17),l=i(101),c=i(35),u=i(47);t.gridTemplate=function(e){var t=e.status===c.FileStatus.inprogress,i=e.status===c.FileStatus.failed,n=e.status!==c.FileStatus.uploaded,o="dhx_dataview-item--file__";switch(e.status){case c.FileStatus.inprogress:o+="progress";break;case c.FileStatus.queue:o+="queue";break;case c.FileStatus.failed:o+="failed";break;default:o=""}var r="",s="";e.link&&(s=(r=(e.downloadURL||"")+e.link).split("/").pop().split("?")[0]);var a="";return/image/.exec(l.getFileClassName(e))&&e.preview&&(e.image&&e.image.src?a="style=\"background:url('"+e.image.src+"') center center no-repeat;background-size:cover\"":e.link&&(a="style=\"background:url('"+r+"') center center no-repeat;background-size:cover\"")),'<div class="dhx_dataview-item--file '+o+'">\n\t\t<div class="dhx_dataview-item--file-type '+l.getFileClassName(e)+'" '+a+"></div>\n\t\t"+(t?'<div class="dhx_dataview-item--progress-block">\n\t\t\t\t\t<div class="dhx_dataview-item--progress-value">'+(100*e.progress).toFixed(1)+'%</div>\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" class="dhx_vault-item--progress-circle" viewBox="0 0 60 60">\n\t\t\t\t\t\t<circle cx="30" cy="30" r="28" stroke-width="4" class="dhx_vault-item--progress-bar-background"></circle>\n\t\t\t\t\t\t<circle cx="30" cy="30" r="28" stroke-width="4" stroke-dasharray="175.9 175.9" stroke-dashoffset="'+175.9*(1-e.progress)+'" class="active-circle dhx_vault-item--progress-bar-active"></circle>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>':'<div class="dhx_dataview-item--default-block">\n\t\t\t\t\t'+(i?'<div class="dhx_dataview-item--error-mark dxi dxi-alert-circle"></div>':n?'<div class="dhx_dataview-item--error-mark dxi dxi-vault"></div>':'<div class="dhx_dataview-item--success-mark dxi dxi-checkbox-marked-circle"></div>')+'\n\t\t\t\t</div>\n\t\t\t\t<div class="dhx_dataview-item--hover-block">\n\t\t\t\t\t<div class="dhx_dataview-item--control-block '+(i||n||!e.link?"dhx_dataview-item--control-block__withoutLink":"")+'">\n\t\t\t\t\t\t'+(i||n||!e.link?'<div class="dhx_dataview-item--remove-btn dxi dxi-delete-forever"></div>':'<a href="'+r+'" class="dhx_dataview-item--download-btn dxi dxi-download" download="'+s+'"></a>\n\t\t\t\t\t\t\t\t\t<div class="dhx_dataview-item--remove-btn dxi dxi-delete-forever"></div>')+"\n\t\t\t\t\t</div>\n\t\t\t\t\t"+(i?'<div class="dhx_dataview-item--error-text">'+u.default.error+"</div>":'<div class="dhx_dataview-item--file-size">'+l.getBasis(e.size)+"</div>")+"\n\t\t\t\t</div>")+'\n\t\t</div>\n\t<div class="dhx_dataview-item--file-name">'+l.truncateWord(e.name)+"</div>"},t.listTemplate=function(e){var t=e.status===c.FileStatus.failed,i=e.status===c.FileStatus.inprogress,n=e.status!==c.FileStatus.uploaded&&!t,o="",r="";return e.link&&(r=(o=(e.downloadURL||"")+e.link).split("/").pop().split("?")[0]),'<div class="dhx_list-item--icon '+(n?"dhx_list-item--queue":"")+'">\n\t\t\t<div class="dhx_list-item--file-type '+l.getFileClassName(e)+'"></div>\n\t\t</div>\n\t\t<div class="dhx_list-item--content">\n\t\t'+(i?'<div class="dhx_list-item--name">'+e.value+"."+e.extension+'\n\t\t\t\t\t<p class="dhx_item--progress-value">'+(100*e.progress).toFixed(1)+"%</p>\n\t\t\t\t</div>":'<div class="dhx_list-item--name">'+e.value+"."+e.extension+"</div>\n\t\t\t\t\t"+(t?'<div class="dhx_list-item--error-info">'+u.default.error+"</div>":"")+'\n\t\t\t\t\t<div class="dhx_list-item--size '+(t?"error":"")+'">'+l.getBasis(e.size)+"</div>\t\n\t\t\t\t</div>")+"\n\t\t</div>\n\t\t"+(i?'<div class="dhx_item--download-progress" style="width:'+(100*e.progress).toFixed(1)+'%"></div>':'<div class="dhx_item--info">\n\t\t\t\t\t'+(t?'<div class="dhx_item--error-mark dxi dxi-alert-circle"></div><div class="dhx_item--btn-remove dxi dxi-delete-forever"></div>':(n?'<div class="dhx_item--error-mark dxi dxi-vault"></div>':'<div class="dhx_item--success-mark dxi dxi-checkbox-marked-circle"></div>')+'\n\t\t\t\t\t\t\t<div class="dhx_item--hover-block">\n\t\t\t\t\t\t\t\t'+(t||n||!e.link?"":'<a href="'+o+'" class="dhx_item--download-btn dxi dxi-download" download="'+r+'"></a>')+'\n\t\t\t\t\t\t\t\t<div class="dhx_item--btn-remove dxi dxi-delete-forever"></div>\n\t\t\t\t\t\t\t</div>')+"\n\t\t\t\t</div>")},t.getContainersEvents=function(i){function e(e){var t=n.locate(e);t&&(t=i.getItem(t),o.tooltip(t.name,{node:e.target,position:o.Position.bottom}))}return{onclick:{"dxi-delete-forever":function(e){e=n.locate(e);e&&l.removeItem(i,e)}},onmouseover:{"dxi-download":function(e){o.tooltip(u.default.download,{node:e.target,position:o.Position.bottom})},"dxi-delete-forever":function(e){o.tooltip(u.default.clear,{node:e.target,position:o.Position.bottom})},"dhx_list-item--name":e,"dhx_dataview-item--file-name":e}}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(0),a=i(7),l=i(47),c=i(35),o=(r=a.View,o(u,r),u.prototype.setState=function(e,t){this._progress=e,this.config.template?this._progressText=this.config.template(e,t):this._progressText=this._progress.toFixed(1)+"%",this.paint()},u.prototype._draw=function(){return s.el(".progress-bar",{_key:this._uid},[s.el(".progress-indicator",{style:{width:this._progress+"%"}}),s.el(".progress-text",{".innerHTML":this._progressText}),s.el("button",{class:"dhx_button dhx_button--color_primary dhx_button--size_small dhx_button--view_flat action-abort-all",onclick:this._abortUpload},l.default.cancel)])},u);function u(e,t){var i=r.call(this,null,t)||this;i.events=e,i._progress=0;return i.mount(null,s.create({render:function(){return i._draw()}})),i._abortUpload=function(){i.events.fire(c.ProgressBarEvents.cancel)},i}t.ProgressBar=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.add=function(e,t){void 0===t&&(t=!1),this._readerStack.push(e),t||this.read()},o.prototype.read=function(){var i,e,n=this;this._readerStack.length&&!this._isActive&&(i=this._readerStack.shift(),this._isActive=!0,(e=new FileReader).readAsDataURL(i.file),e.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){n._data.exists(i.id)&&n._data.update(i.id,{image:t}),n._isActive=!1,n.read()}},e.onerror=function(){n._isActive=!1,n.read()})},o.prototype.stop=function(){this._readerStack=[]},o);function o(e){this._readerStack=[],this._isActive=!1,this._data=e}t.ReadStackPreview=n},function(e,i,t){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),n(t(102)),n(t(238)),n(t(103))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(237);t.getEditor=function(e,t){return new n.InputEditor(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(103),i=(r.prototype.endEdit=function(){var e;this._input&&(e=this._input.value,this._dataView.events.fire(n.DataViewEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._dataView.events.fire(n.DataViewEvents.afterEditEnd,[e,this._item.id])):this._input.focus())},r.prototype.toHTML=function(e){this._mode=!0;var t=this._config,i=t.itemsInRow,n=t.gap,t=function(e){return parseFloat(e)};return o.el(".dhx_input__wrapper",{style:{width:"calc("+100/i+"% - "+t(n)+" * "+(i-1)/i+"px)",maxWidth:"calc("+100/i+"% - "+t(n)+" * "+(i-1)/i+"px)",marginRight:e?"":n},role:"presentation"},[o.el("div.dhx_input__container",{style:{height:"100%"},role:"presentation"},[o.el("input.dhx_input",{class:(this._item.css?" "+this._item.css:"")+(e?" dhx_dataview-item--last-item-in-row":""),style:{padding:"8px, 12px",width:"100%",height:"100%"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},r.prototype._initHandlers=function(){var t=this;this._handlers={onBlur:function(){t.endEdit()},onChange:function(){t.endEdit()},onKeyDown:function(e){"Enter"===e.key&&t._item.value===t._input.value&&t.endEdit(),"Escape"===e.key&&(t._input.value=t._item.value,t.endEdit())},didInsert:function(e){e=e.el;(t._input=e).focus(),e.value=t._item.value,e.setSelectionRange(0,e.value.length),e.addEventListener("change",t._handlers.onChange),e.addEventListener("blur",t._handlers.onBlur),e.addEventListener("keydown",t._handlers.onKeyDown)}}},r);function r(e,t){var i=this;this._dataView=t,this._config=t.config,this._item=e,this._dataView.events.on(n.DataViewEvents.focusChange,function(e,t){i._mode&&t!==i._item.id&&i.endEdit()}),this._initHandlers()}t.InputEditor=i},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(32),a=i(102),c=i(0),o=(r=a.DataView,o(u,r),u.prototype.destructor=function(){r.prototype.destructor.call(this),this.scrollView=null},u.prototype.showItem=function(e){var t,i,n,o=this.getRootView();o&&o.node&&o.node.el&&void 0!==e&&((t=this.getRootNode().getElementsByClassName("scroll-view")[0])&&(i=this.config.virtual,n=this.data.getIndex(e),o=Math.floor(n/this.config.itemsInRow),e=Math.floor(o/t.children.length)||0,e=t.children[o-t.children.length*e],(i||e)&&(e=e.children[n%this.config.itemsInRow],n=parseInt(this.config.gap.toString().replace("px",""),null),e.offsetTop>=t.clientHeight+t.scrollTop-e.clientHeight?t.scrollTop=e.offsetTop-t.clientHeight+e.clientHeight+n:e.offsetTop<t.scrollTop-n&&(t.scrollTop=e.offsetTop-n))))},u.prototype._renderList=function(){var n=this,e=this.data.getRawData(0,-1),t=this.config,o=t.itemsInRow,i=t.css,r=t.gap,s=0,a=e.reduce(function(e,t,i){return 0===s&&e.push([]),e[e.length-1].push(n._renderItem(t,i)),s=(s+1)%o,e},[]),t=a.map(function(e,t){return c.el(".dhx_dataview-row",{style:{margin:r},"aria-label":"Row "+(t+1)},e)}),e=this.scrollView&&this.scrollView.config.enable,i=(i||"")+" dhx_widget dhx_dataview"+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(e?" dhx_dataview--scroll-view":"");return c.el("",l(l(l({},this._handlers),{"data-dhx-widget-id":this._uid,class:i,style:{height:this.config.height}}),this.getDataViewAriaAttrs(this.config,this.data.getLength(),a.length,o)),e?[this.scrollView.render(t)]:t)},u);function u(e,t){void 0===t&&(t={});var i=r.call(this,e,t)||this;return i.scrollView=new s.ScrollView(function(){return i.getRootView()}),i.paint(),i}t.ProDataView=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={simpleVaultText:"Drag & drop files or folders here or",simpleVaultLabel:"browse files"}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),E=this&&this.__rest||function(e,t){var i={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i},S=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(89),I=i(6),a=i(14),k=i(1),M=i(91),P=i(90),O=i(58),D=i(92),F=i(46),A=i(93),V=i(94),R=i(99),T=i(98),H=i(95),L=i(96),j=i(104),N=i(105),$=i(241),z=i(106),B=i(242),o=(r=s.Form,o(l,r),l.prototype._addLayoutItem=function(e){var i=this,t=e.id=e.id||k.uid(),n=e.name=e.name||t.toString();e.type=e.type&&e.type.toLowerCase();var o=e.width,r=e.height,s=e.css,t=e.padding,a=E(e,["css","padding"]),l=s?s+" dhx_form-element":"dhx_form-element",s=!("spacer"===e.type||void 0===e.type);switch(s&&!o&&(o="content"),s&&!r&&(r="content"),a.type){case"button":a.full&&(l+=" dhx_button--full-gravity");var c=this._attachments[n]=new M.Button(null,e);c.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),c.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),c.events.on(I.ItemEvent.click,function(e){e.preventDefault(),i.events.fire(I.FormEvents.click,[n,e]),i.events.fire(I.FormEvents.buttonClick,[n,e]),c.config.submit&&i.validate()&&c.config.url&&i.send(c.config.url)}),c.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),c.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),c.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),c.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),c.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),c.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),c.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"datepicker":var u=this._attachments[n]=new P.DatePicker(null,e);this._state[n]=u.getValue("Date"===a.valueFormat),u.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),u.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=u.getValue("Date"===a.valueFormat),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),u.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),u.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),u.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),u.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),u.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),u.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),u.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),u.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),u.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),u.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"checkbox":var d=this._attachments[n]=new O.Checkbox(null,e);this._state[n]=d.getValue(),d.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),d.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=d.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),d.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),d.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),d.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),d.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),d.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),d.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),d.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),d.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),d.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),d.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"checkboxgroup":var h=this._attachments[n]=new D.CheckboxGroup(null,e);this._state[n]=h.getValue(),h.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),h.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=h.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),h.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),h.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),h.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),h.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),h.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),h.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),h.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),h.events.on(I.ItemEvent.focus,function(e,t){i.events.fire(I.FormEvents.focus,[n,e,t])}),h.events.on(I.ItemEvent.blur,function(e,t){i.events.fire(I.FormEvents.blur,[n,e,t])}),h.events.on(I.ItemEvent.keydown,function(e,t){i.events.fire(I.FormEvents.keydown,[e,n,t])});break;case"combo":var f=this._attachments[n]=new B.ProCombo(null,e);this._state[n]=f.getValue(),f.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),f.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=f.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),f.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),f.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),f.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),f.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),f.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),f.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),f.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),f.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),f.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),f.events.on(I.ItemEvent.keydown,function(e,t){i.events.fire(I.FormEvents.keydown,[e,n,t])});break;case"input":var p=this._attachments[n]=new F.Input(null,e);this._state[n]=p.getValue(),p.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),p.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=p.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),p.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),p.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),p.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),p.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),p.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),p.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),p.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),p.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),p.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),p.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"radiogroup":var g=this._attachments[n]=new A.RadioGroup(null,e);this._state[n]=g.getValue(),g.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),g.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=g.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),g.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),g.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),g.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),g.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),g.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),g.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),g.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),g.events.on(I.ItemEvent.focus,function(e,t){i.events.fire(I.FormEvents.focus,[n,e,t])}),g.events.on(I.ItemEvent.blur,function(e,t){i.events.fire(I.FormEvents.blur,[n,e,t])}),g.events.on(I.ItemEvent.keydown,function(e,t){i.events.fire(I.FormEvents.keydown,[e,n,t])});break;case"select":var v=this._attachments[n]=new V.Select(null,e);this._state[n]=v.getValue(),v.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),v.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=v.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),v.events.on(I.ItemEvent.changeOptions,function(e){i.layout.getCell(n).config.options=S(e)}),v.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),v.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),v.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),v.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),v.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),v.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),v.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),v.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),v.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),v.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"simplevault":a.$vaultHeight=r;var _=this._attachments[n]=new R.SimpleVault(null,e);this._state[n]=_.getValue(),_.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),_.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=_.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),_.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),_.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),_.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),_.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),_.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),_.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),_.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])});break;case"slider":var m=this._attachments[n]=new T.SliderForm(null,e);this._state[n]=m.getValue(),m.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),m.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),m.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),m.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),m.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),m.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),m.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),m.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"textarea":var y=this._attachments[n]=new H.Textarea(null,e);this._state[n]=y.getValue(),y.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),y.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=y.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),y.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),y.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),y.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),y.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),y.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),y.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),y.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),y.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),y.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),y.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"text":"content"===o&&(l+=" dhx_form-element--fit-content");var b=this._attachments[n]=new L.Text(null,e);this._state[n]=b.getValue(),b.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),b.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=b.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),b.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),b.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),b.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),b.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),b.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),b.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),b.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])});break;case"timepicker":var w=this._attachments[n]=new j.TimePicker(null,e);this._state[n]=a.value&&w.getValue("timeObject"===a.valueFormat)||"",w.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),w.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=w.getValue("timeObject"===a.valueFormat),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),w.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),w.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),w.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),w.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),w.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),w.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),w.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),w.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),w.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),w.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"colorpicker":var x=this._attachments[n]=new N.ColorPicker(null,e);this._state[n]=x.getValue(),x.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),x.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i._state[n]=x.getValue(),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),x.events.on(I.ItemEvent.change,function(e){i._state[n]=e,i.events.fire(I.FormEvents.change,[n,e])}),x.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),x.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),x.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),x.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])}),x.events.on(I.ItemEvent.beforeValidate,function(e){return i.events.fire(I.FormEvents.beforeValidate,[n,e])}),x.events.on(I.ItemEvent.afterValidate,function(e,t){i.events.fire(I.FormEvents.afterValidate,[n,e,t])}),x.events.on(I.ItemEvent.focus,function(e){i.events.fire(I.FormEvents.focus,[n,e])}),x.events.on(I.ItemEvent.blur,function(e){i.events.fire(I.FormEvents.blur,[n,e])}),x.events.on(I.ItemEvent.keydown,function(e){i.events.fire(I.FormEvents.keydown,[e,n])});break;case"container":var C=this._attachments[n]=new $.Container(null,e);C.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),C.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),C.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),C.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),C.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),C.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])});break;case"spacer":default:C=this._attachments[n]=new z.Spacer(null,e);C.events.on(I.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(I.FormEvents.beforeChangeProperties,[n,e])}),C.events.on(I.ItemEvent.afterChangeProperties,function(e){i._changeProps(n,e),i.events.fire(I.FormEvents.afterChangeProperties,[n,e]),i.layout.paint()}),C.events.on(I.ItemEvent.beforeHide,function(e,t){if(!t)return i.events.fire(I.FormEvents.beforeHide,[n,e])}),C.events.on(I.ItemEvent.beforeShow,function(e){return i.events.fire(I.FormEvents.beforeShow,[n,e])}),C.events.on(I.ItemEvent.afterHide,function(e,t){i.layout.getCell(n).hide(),t||i.events.fire(I.FormEvents.afterHide,[n,e])}),C.events.on(I.ItemEvent.afterShow,function(e){i.layout.getCell(n).show(),i.events.fire(I.FormEvents.afterShow,[n,e])})}t={id:n,width:o,height:r,padding:t,css:l};return"gravity"in e&&(t.gravity=e.gravity),t},l.prototype._initUI=function(e){var t=this._attachments={},i={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,i);var n,o=this.layout=new a.ProLayout(e,i);for(n in t)o.getCell(n).attach(t[n])},l);function l(e,t){return r.call(this,e,t)||this}t.ProForm=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a=i(0),l=i(7),c=i(6),u=i(4),d=i(1),h=i(14),f=i(9),o=(s=l.View,o(p,s),p.prototype.attach=function(e){this.container.attach(e)},p.prototype.attachHTML=function(e){this.container.attachHTML(e)},p.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[void 0])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[void 0]))},p.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[void 0,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[void 0,e]))},p.prototype.isVisible=function(){return!this.config.hidden},p.prototype.disable=function(){this.config.disabled=!0,this.paint()},p.prototype.enable=function(){this.config.disabled=!1,this.paint()},p.prototype.isDisabled=function(){return this.config.disabled},p.prototype.setProperties=function(e){if(e&&!d.isEmptyObj(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)f.baseProps.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},p.prototype.getProperties=function(){for(var e={},t=0,i=f.baseProps;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},p.prototype._getRootView=function(){return this.container.getRootView()},p.prototype._draw=function(){var e=this.config,t=e.name,i=e.id,e=e.disabled?" dhx_form-group--disabled":"";return a.el(".dhx_form-group.dhx_form-group--container",{class:e,"data-dhx-id":t||i},[a.inject(this._getRootView())])},p);function p(e,t){var i=s.call(this,e,r({disabled:!1,hidden:!1,width:"content",height:"content"},t))||this;if(i.events=new u.EventSystem,d.isEmptyObj(t))throw new Error("Check the configuration is correct");i.container&&i.container.destructor();var n,o={};for(n in t)"id"!==n&&"type"!==n&&"name"!==n&&"width"!==n&&"height"!==n&&(i.config[n]=t[n],"validation"!==n&&(o[n]=t[n]));i.container=new h.Layout(null,{rows:[o]}),o.html&&i.container.attachHTML(o.html),i.config.hidden&&a.awaitRedraw().then(function(){i.hide(!0)}),i.paint();return i.mount(e,a.create({render:function(){return i._draw()}})),i}t.Container=o},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r,s=i(97),a=i(1),l=i(39),c=i(0),o=(r=s.Combo,o(u,r),u.prototype._initView=function(e){var t=this;if(a.isEmptyObj(e))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",readOnly:!1,template:void 0,filter:void 0,multiselection:!1,selectAllButton:!1,itemsCount:void 0,itemHeight:32,virtual:!1,listHeight:224,required:!1,validation:void 0,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",padding:void 0};var i,n={};for(i in e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i],"validation"!==i&&(n[i]=e[i]));this.combobox=new l.ProCombobox(null,n),this.config.hidden&&c.awaitRedraw().then(function(){t.hide(!0)}),this.paint()},u);function u(e,t){return r.call(this,e,t)||this}t.ProCombo=o},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(45),o=i(30),s=i(5),a=i(22),l=i(1),c=i(2),u=i(0),d=i(44),h=i(13),i=(f.prototype.hide=function(){this._modal.isVisible()&&(this._modal.hide(),this._selection._removeSearchCell())},f.prototype.research=function(e){e!==this._page&&(this._page=e),this._data=this._page.serialize().map(function(e){var t=e[0],i=e[1],n=e[2],o=n.value,e=n.format;return[t,i,r(r({},n),{value:h.getFormattedValue(o,e)})]}),this.search(this._searchText)},f.prototype.show=function(e){this.research(e),this._modal.show(),this._toolbar.setState({search:""}),this._toolbar.disable(["next","prev"])},f.prototype.isVisible=function(){return this._modal.isVisible()},f.prototype.search=function(i,e){var n=this;e&&this._page!==e&&this.research(e),this._toolbar.getState().search!==i&&(this._searchText=i,this._toolbar.setState({search:i})),this._filtered=[],i&&(this._filtered=this._data.filter(function(e){var t=e[0],e=(e[1],e[2].value);return!n._grid.isRowHidden(t+1)&&(!i||l.isDefined(e)&&(""+e).toLowerCase().includes(i.toLowerCase()))}));e=this._filtered.map(function(e){return c.getCellNameById(n._spreadsheet._grid,e[0]+1,e[1]+1)});return this._modal.isVisible()&&(this._selection._setSearchedArray(e),this._stepIndex=0,this.next(),i?this._toolbar.enable(["next","prev"]):(this._toolbar.disable(["next","prev"]),this._selection._removeSearchCell())),e},f.prototype.next=function(){var e=this._filtered.length;this._toolbar.data.update("results",{value:(e?this._stepIndex+1:0)+"/"+e}),this._updateWindowPos(),e&&(this._stepIndex++,this._stepIndex>=e&&(this._stepIndex=0),this._selection._setSearchCell(this._stepIndex))},f.prototype.prev=function(){var e=this._filtered.length;this._toolbar.data.update("results",{value:(e?this._stepIndex+1:0)+"/"+e}),this._updateWindowPos(),e&&(this._stepIndex--,this._stepIndex<0&&(this._stepIndex=e-1),this._toolbar.data.update("results",{value:this._stepIndex+1+"/"+e}),this._selection._setSearchCell(this._stepIndex))},f.prototype.destructor=function(){document.removeEventListener("keydown",this._keyHandler)},f.prototype._updateWindowPos=function(){var t=this;u.awaitRedraw().then(function(){var e=t._modal.getSize();t._modal.setPosition(window.innerWidth-e.width-1,0)})},f.prototype._keyHandler=function(e){var t;"Escape"===e.code&&(e.preventDefault(),this.hide()),"KeyG"===e.code&&((t=e.ctrlKey||e.metaKey)&&!e.shiftKey&&(e.preventDefault(),this.next()),t&&e.shiftKey&&(e.preventDefault(),this.prev()))},f.prototype._initHandlers=function(){var i=this;this._toolbar.events.on(a.NavigationBarEvents.click,function(e){switch(e){case"prev":i.prev();break;case"close":i.hide();break;case"next":i.next()}}),this._toolbar.events.on(a.NavigationBarEvents.inputChange,function(e,t){i._searchText=t,i.search(t)}),this._modal.events.on(d.WindowEvents.afterShow,function(){u.awaitRedraw().then(function(){var e=i._toolbar.getRootNode().querySelector("input");null!=e&&e.focus(),null!=e&&e.setAttribute("autocomplete","off"),i._toolbar.select("search")})}),document.addEventListener("keydown",this._keyHandler.bind(this)),this._events.on(s.SpreadsheetEvents.afterSheetChange,function(){i.isVisible()&&i.research(i._spreadsheet._activePage)}),this._events.on(s.SpreadsheetEvents.afterAction,function(){i.isVisible()&&i.research(i._spreadsheet._activePage)})},f);function f(e){this._events=e.events,this._spreadsheet=e,this._grid=e._grid,this._selection=e.selection,this._modal=new n.Window({css:"dhx-spreadsheet-form-search-modal",height:56,left:window.innerWidth-385,viewportOverflow:!0,top:0,width:405}),this._toolbar=new o.Toolbar(null,{data:[{type:"input",value:"",placeholder:"Search",icon:"dxi dxi-magnify",id:"search",css:"search-input",width:200},{type:"title",value:"",id:"results"},{icon:"dxi dxi-chevron-up",id:"prev"},{icon:"dxi dxi-chevron-down",id:"next"},{type:"separator"},{icon:"dxi dxi-close",id:"close"}],css:"dhx-spreadsheet-form-search-form"}),this._modal.attach(this._toolbar),this._initHandlers()}t.SearchForm=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(57),o=i(45),r=i(12),s=i(8),a=i(5),l=i(30),c=i(2),u=i(22),d=i(17),h=i(0),i=(f.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide(),this._form.setValue({text:"",href:""}),this._debounds=!1,this._events.fire(a.SpreadsheetEvents.afterPopupHide)},f.prototype.isVisible=function(){return this._modal.isVisible()},f.prototype.destructor=function(){this._form.destructor(),this._modal.destructor(),this._popup.destructor(),this._toolbar.destructor()},f.prototype.show=function(e,t){var i=this;this._modal.isVisible()||this._modal.show(),this._cell=e;var n=t.value,e=t.link||{},t=e.href,e=e.text,t=!t&&c.isURL(n)?n:t;this._form.setValue({text:e||n,href:t}),this.toogleSaveButton((null==t?void 0:t.toString())||""),h.awaitRedraw().then(function(){i.hideInfo()})},f.prototype.showInfo=function(e,t){var i,n;this._popup.isVisible()||(this._cell=e,n=(this._cellMeta=t).link,i=t.value,t=void 0!==(t=t.locked)&&t,n=(n=null==n?void 0:n.href)||(""+i).split(" ").find(function(e){return c.isURL(e)}),this.toogleLocked(t),n&&(this._toolbarLink=n,this._toolbar.data.update("link",{html:'<a href="'+n+'" target="blank">'+n+"</a>"}),this._popup.show(c.getCellNode(e,this._grid,!0))))},f.prototype.hideInfo=function(){this._popup.isVisible()&&(this._popup.hide(),this._toolbarLink=null,this._cellMeta=null,this._events.fire(a.SpreadsheetEvents.afterPopupHide))},f.prototype._keyHandler=function(e){var t=this;"Escape"===e.code&&(e.preventDefault(),this.hide()),"Enter"===e.code&&(e.preventDefault(),this._form.blur("href"),this._form.blur("text"),this._debounds||(this._debounds=setTimeout(function(){t._save(),t._debounds=!1},200)))},f.prototype._save=function(){var e=this._form.getValue(),t=e.text,e=e.href;e.startsWith("http")||(e="http://"+e,this._form.setValue({href:e})),this._form.validate()?(this._set(this._cell,e?{text:t,href:e}:void 0),this.hide()):this._form.setFocus("href")},f.prototype.toogleSaveButton=function(e){var t=this._form.getItem("save");e?t.enable():t.disable()},f.prototype.toogleLocked=function(e){e?this._toolbar.disable(["edit","unlink"]):this._toolbar.enable(["edit","unlink"])},f.prototype._initHandlers=function(){var t=this;this._modal.events.on(s.PopupEvents.afterShow,function(){t._form.setFocus("href")}),this._form.events.on(n.FormEvents.click,function(e){switch(e){case"save":t._save();break;case"cancel":default:t.hide()}}),this._form.events.on("keydown",function(e){this._keyHandler(e)}.bind(this)),this._form.getItem("href").events.on("input",function(e){t.toogleSaveButton(e)}),this._toolbar.events.on(u.NavigationBarEvents.click,function(e){switch(e){case"copy":window.clipboardData?window.clipboardData.setData("text/plain",t._toolbarLink):navigator.clipboard.writeText(t._toolbarLink),d.message({text:r.default.linkCopied,css:"dhx_message--success",expire:2e3});break;case"edit":t.show(t._cell,t._cellMeta);break;case"unlink":t._set(t._cell)}t.hideInfo()})},f);function f(e,t,i){this._set=t,this._events=i,this._grid=e,this._modal=new o.Window({title:r.default.insert+" "+r.default.link.toLowerCase(),movable:!0,closable:!0,css:"dhx-spreadsheet-form-link",height:300,width:300}),this._form=new n.Form("",{padding:15,rows:[{name:"text",type:"input",label:r.default.text,labelPosition:"top",width:270,placeholder:r.default.text},{name:"href",type:"input",label:r.default.link,labelPosition:"top",width:270,placeholder:r.default.link},{align:"end",css:"dhx-button-wrapper",cols:[{type:"button",text:r.default.cancel,id:"cancel",view:"link"},{type:"button",text:r.default.save,id:"save"}]}]}),this._popup=new s.Popup({css:"dhx-spreadsheet-form-link dhx_editor-popup"}),this._toolbar=new l.Toolbar(void 0,{css:"dhx_link-toolbar",data:[{type:"customHTML",html:"",css:"dhx_spreadsheet_link href-link",id:"link"},{icon:"dxi dxi-file-outline",tooltip:r.default.copy.toLowerCase(),circle:!0,id:"copy"},{icon:"dxi dxi-pencil",tooltip:r.default.edit.toLowerCase(),circle:!0,id:"edit"},{icon:"dxi dxi-link-variant-off",tooltip:(r.default.remove+" "+r.default.link).toLowerCase(),circle:!0,id:"unlink"}]}),this._modal.attach(this._form),this._popup.attach(this._toolbar),this._initHandlers()}t.LinkForm=i},function(e,t,i){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<i;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=i(57),d=i(5),l=i(12),c=i(8),v=i(2),_=i(3),m=i(27),y=i(1),h=i(13),o=i(0),i=(n.prototype.hide=function(){var e=this;this._popup.isVisible()&&(this._popup.hide(),o.awaitRedraw().then(function(){return e._form.destructor()}))},n.prototype.show=function(e,t,i,n){var s=this,o=_.locateNode(t,"data-dhx-col-id");this._initForm();var r=i.cell,a=i.rules,l=v.getCellIds(r,this._grid),t=l.start,r=l.end,l=v.getCellIds(e,this._grid),e=l.row,c=l.col;this._filter=p(p({},i),{rules:g(i.rules)}),this._ruleIndex=c-t.col;var t=a[this._ruleIndex],u=e+1,a=n.getCellRange(u,c,r.row,c).map(function(e,t){e=e||{};t=y.isDefined(e.value)?v.getCellNameByIndex(u+t,c+1,s._grid):"empty";return p(p({},e),{id:t})}),d={};this._hidden=[],this._data=[];var h=[],e=t.condition,f=t.exclude;a.forEach(function(e,t){var i=t+u,n=s._grid.isRowHidden(i+1),t=e||{id:"empty"},o=t.value,i=t.id,r=t.format,t=y.isDefined(f)&&(null==f?void 0:f.find(function(e){return null!=r&&r.id&&(e="object"==typeof e?m.getExcelDateFromJs(e):m.getExcelDateFromString(e,r)),e===o}));n&&!t||h.includes(o)?o&&s._hidden.push(e):(t=!t,h.push(o),d[i]=t,s._data.push(p(p({},e),{checked:t})))}),this._setCheckboxes();n=this._controls,r=n.input,t=n.condition,a=n.checkboxes,n=n.search;a.setValue(d),this._checkboxesState=a.getValue(),r.hide(),r.setValue(""),n.setValue(""),null!=e&&e.factor?(n=e.factor,e=e.value,this._updateStateByCondition(n,e)):(t.setValue("1"),r.hide()),this._popup.show(o),this._initValue=this._form.getValue()},n.prototype.apply=function(){var e,i=this,t=this._form.getValue(),n=t.condition,o=t.value,r=t.max,s=[];-1<Object.values(this._checkboxesState).findIndex(function(e){return!e})&&Object.keys(this._checkboxesState).forEach(function(t){var e;i._checkboxesState[t]||(e=i._data.find(function(e){return e.id==t}).value,s.push(y.isDefined(e)?e:null))});var a=o;if(1!==n){switch(n){case d.FilterConditions.tdc:o||(a=null);break;case d.FilterConditions.d:case d.FilterConditions.da:case d.FilterConditions.db:var l=this._controls.datepicker.getValue(!0);l&&(a=m.getExcelDateFromJs(l));break;case d.FilterConditions.ib:case d.FilterConditions.inb:"number"==typeof o&&"number"==typeof r&&(a=[Math.min(o,r),Math.max(o,r)]);break;case d.FilterConditions.e:case d.FilterConditions.ne:a=!0;break;default:a=o}y.isDefined(a)&&(e={factor:n,value:a})}y.compare(this._initValue,t)||(this._filter.rules[this._ruleIndex]={condition:e,exclude:s},this._set(this._filter.cell,this._filter.rules)),this.hide()},n.prototype._initForm=function(){this._form=new a.Form(null,{css:"dhx_spreadsheet_filter-popup",rows:[{name:"condition",type:"combo",label:l.default.condition+":",labelPosition:"top",readonly:!0,height:70,data:g([{value:l.default.none,id:1}],Object.keys(d.FilterConditions).map(function(e){return{value:l.default[e],id:e}}))},{name:"value",type:"input",placeholder:l.default.value,height:32},{name:"date",type:"datepicker",placeholder:l.default.date,height:32},{type:"text",name:"and",value:l.default.and,height:32},{name:"max",type:"input",inputType:"number",height:32,placeholder:l.default.value},{type:"spacer",height:10},{type:"text",css:"dhx-filter-label",height:32,value:l.default.values+":"},{type:"button",name:"unselect",view:"flat",full:!0,css:"filter-unselect",text:l.default.unselectAll},{type:"button",name:"select",view:"flat",full:!0,hidden:!0,text:l.default.selectAll},{type:"spacer",height:5},{type:"input",name:"search",height:50,icon:"dxi dxi-magnify",autocomplite:!0},{css:"checkboxGroup",rows:[{name:"checkboxes",type:"checkboxGroup",options:{rows:[]}}]},{type:"spacer",height:15},{css:"buttons-wrapper",cols:[{name:"cancel",type:"button",view:"link",text:l.default.cancel},{name:"apply",type:"button",view:"flat",text:l.default.apply}]}]});var e=this._form.getItem("select"),t=this._form.getItem("unselect"),i=this._form.getItem("checkboxes"),n=this._form.getItem("condition"),o=this._form.getItem("value"),r=this._form.getItem("search"),s=this._form.getItem("date");this._controls={unselect:t,select:e,checkboxes:i,condition:n,input:o,search:r,datepicker:s},this._checkboxesState={},this._popup.attach(this._form),this._initHandlers()},n.prototype._updateStateByCondition=function(e,t){var i=this._controls,n=i.input,o=i.condition,r=i.datepicker;o.setValue(e);var s=this._form.getItem("max"),a=this._form.getItem("and");switch(s.hide(),a.hide(),r.hide(),n.setValue(t),e){case d.FilterConditions.d:case d.FilterConditions.da:case d.FilterConditions.db:r.show(),r.setValue(y.isNumeric(t)?m.excelDateToJSDate(t):""),n.hide();break;case d.FilterConditions.e:case d.FilterConditions.ne:n.hide();break;case d.FilterConditions.tc:case d.FilterConditions.tdc:case d.FilterConditions.ts:case d.FilterConditions.te:case d.FilterConditions.tex:n.setProperties({inputType:"text"}),n.setValue(t),n.show();break;case d.FilterConditions.ib:case d.FilterConditions.inb:a.show(),s.setValue(null==t?void 0:t[1]),s.show();case d.FilterConditions.gt:case d.FilterConditions.geq:case d.FilterConditions.lt:case d.FilterConditions.leq:case d.FilterConditions.eq:case d.FilterConditions.neq:n.setProperties({inputType:"number"}),n.setValue(t instanceof Array?t[0]:t),n.show();break;default:n.hide()}},n.prototype.applyFilter=function(i){var a=this,e=i.getMeta().filter;if(this._grid.data.getInitialData().forEach(function(e){e=e.id;a._grid.isRowHidden(e)&&a._showRow(e)}),!e)return this._grid.paint(),void this._updateGridData();for(var t=e.cell,n=e.rules,e=v.getCellIds(t,this._grid),t=e.start,e=e.end,l=0,o=e.col,c=e.row,u=t.row+1,r=t.col;r<=o;r++)!function(e){var t=n[l],o=t.exclude,t=t.condition;l++;var r,s,e=i.getCellRange(u,e,c,e).map(function(e,t){t=t+u+1;return p(p({},e),{rowId:t})});o&&(e=e.filter(function(e,t){var i=p(p({},e),{value:y.isDefined(null==e?void 0:e.value)?e.value:null}),n=i.format,e=o.find(function(e){return"date"===(null==n?void 0:n.id)&&(e="object"==typeof e?m.getExcelDateFromJs(e):m.getExcelDateFromString(e,n)),i.value===e}),t=t+u+1;return e&&!a._grid.isRowHidden(t)&&a._hideRow(t),!e})),t&&(r=t.factor,s=t.value,e.forEach(function(e){var t,e=e||{},i=e.value,n=e.format,e=e.rowId,o=h.getFormattedValue(i,n);switch(r){case d.FilterConditions.d:case d.FilterConditions.da:case d.FilterConditions.db:s="object"==typeof s?m.getExcelDateFromJs(s):m.getExcelDateFromString(s,n),o=i}switch(r){case d.FilterConditions.e:t=y.isDefined(i);break;case d.FilterConditions.ne:t=!y.isDefined(i);break;case d.FilterConditions.tc:t=s&&!i||i&&!(""+o).toLowerCase().includes(s.toLowerCase());break;case d.FilterConditions.tdc:t=i&&(""+o).toLowerCase().includes(s.toLowerCase());break;case d.FilterConditions.ts:t=i&&!(""+o).toLowerCase().startsWith(s.toLowerCase());break;case d.FilterConditions.te:t=i&&!(""+o).toLowerCase().endsWith(s.toLowerCase());break;case d.FilterConditions.tex:t=y.isNumeric(o)||""+o!==s;break;case d.FilterConditions.d:t=!y.isDefined(i)||!y.isNumeric(i)||Math.trunc(i)!==Math.trunc(s);break;case d.FilterConditions.db:t=!y.isDefined(i)||!y.isNumeric(i)||Math.trunc(i)>=Math.trunc(s);break;case d.FilterConditions.da:t=!y.isDefined(i)||!y.isNumeric(i)||Math.trunc(i)<=Math.trunc(s);break;case d.FilterConditions.gt:t=!y.isDefined(i)||!y.isNumeric(i)||i<=s;break;case d.FilterConditions.lt:t=!y.isDefined(i)||!y.isNumeric(i)||s<=i;break;case d.FilterConditions.geq:t=!y.isDefined(i)||!y.isNumeric(i)||i<s;break;case d.FilterConditions.leq:t=!y.isDefined(i)||!y.isNumeric(i)||s<i;break;case d.FilterConditions.eq:t=!y.isDefined(i)||!y.isNumeric(i)||i!==s;break;case d.FilterConditions.neq:t=!y.isDefined(i)||!y.isNumeric(i)||i===s;break;case d.FilterConditions.ib:t=!y.isDefined(i)||!y.isNumeric(i)||i<s[0]||i>s[1];break;case d.FilterConditions.inb:t=!y.isDefined(i)||!y.isNumeric(i)||i>=s[0]&&i<=s[1]}t&&!a._grid.isRowHidden(e)&&a._hideRow(e)}))}(r);this._updateGridData(),this._grid.paint()},n.prototype._showRow=function(e){this._grid.data.update(e,{hidden:!1},!0)},n.prototype._hideRow=function(e){this._grid.data.update(e,{hidden:!0},!0)},n.prototype._updateGridData=function(){this._grid.data.filter(function(e){return!e.hidden})},n.prototype._updateButton=function(e){var t=this._controls,i=t.select,n=t.unselect;o.awaitRedraw().then(function(){e?(n.show(),i.hide()):(n.hide(),i.show())})},n.prototype._setCheckboxes=function(i){void 0===i&&(i="");var e=this._data.filter(function(e){var t=e.value,e=e.format;return!i||(""+h.getFormattedValue(t,e)).toLocaleLowerCase().includes(i.toLocaleLowerCase())}).map(function(e){var t=e.value,i=e.checked,n=e.id,e=e.format,e=h.getFormattedValue(t,e);return{type:"checkbox",text:null!=e?e:"("+l.default.empty+")",id:n,checked:i}});this._form.getItem("checkboxes").setProperties({options:{rows:g(e)}})},n.prototype._selectAll=function(t){var i=this,e=this._controls.checkboxes;Object.keys(this._checkboxesState).forEach(function(e){return i._checkboxesState[e]=t}),e.setValue(this._checkboxesState),this._updateButton(t)},n.prototype._initHandlers=function(){var n=this,e=this._controls,t=e.condition,i=e.search,o=e.checkboxes,e=e.datepicker,t=t.getWidget();this._form.events.on(a.FormEvents.change,function(e,t){switch(e){case"condition":n._updateStateByCondition(t);break;case"checkboxes":n._checkboxesState=p(p({},n._checkboxesState),t);var i=Object.values(n._checkboxesState).findIndex(function(e){return!e});n._updateButton(i<0)}}),i.events.on("input",function(e){n._setCheckboxes(""+e),o.setValue(n._checkboxesState)}),this._form.events.on(a.FormEvents.click,function(e){switch(e){case"unselect":case"select":n._selectAll("select"===e);break;case"apply":n.apply();break;case"cancel":n.hide()}});var r=t.popup.getContainer(),s=e._popup.getContainer();this._popup.events.on(c.PopupEvents.beforeHide,function(e,t){if(e){t=(null==t?void 0:t.target).closest(".dhx_popup-content");if(e&&(t===r||t===s))return!1}})},n);function n(e,t){this._grid=e,this._set=t,this._popup=new c.Popup({css:"dhx_editor-popup dhx_filter-popup"})}t.FilterForm=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),s=i(2),a=i(12),i=(o.prototype.doAction=function(e,t){this.checkBeforeMerge(e,t)&&(t=n.Actions[t?"unmerge":"merge"],this._callAction({action:t,groupAction:t,cell:e}))},o.prototype.checkBeforeMerge=function(e,t){var i=this;if(!s.isRangeId(e)&&!t)return!1;var n=this._config,o=n.topSplit,n=n.leftSplit;return!o&&!n||s.checkSpanByNames(e,n,o,this._grid)?!s.getCellsArray(e,this._grid).find(function(e){return i._isLocked(e)})||(s.showAlert(a.default[t?"spanUnmergeLockedError":"spanMergeLockedError"]),!1):(s.showAlert(a.default.spanMergeAlert),!1)},o.prototype.checkBeforeAction=function(e,t,i){var n,o=this,r=t.getMeta().merged;if(s.getCellsArray(e,this._grid).forEach(function(e){e=s.isCellSpaned(e,r,o._grid);e&&(n=e)},e),n){e=a.default.mergeAlertMessage.split("$action");return s.showAlert(e[0]+" "+i.toLowerCase()+" "+(e[1]||"")),!1}return!0},o);function o(e,t,i,n){this._callAction=e,this._config=t,this._grid=i,this._isLocked=n}t.Merge=i}],o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/codebase/",o(o.s=107);function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var i,n}),window.dhx_legacy){if(window.dhx)for(var key in dhx)dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}
//# sourceMappingURL=spreadsheet.js.map